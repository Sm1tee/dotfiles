"use strict";(()=>{var LC=Object.create;var Tp=Object.defineProperty;var FC=Object.getOwnPropertyDescriptor;var BC=Object.getOwnPropertyNames;var UC=Object.getPrototypeOf,VC=Object.prototype.hasOwnProperty;var zC=(e,t,r)=>t in e?Tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Xt=(e,t)=>()=>(e&&(t=e(e=0)),t);var wp=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qC=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of BC(t))!VC.call(e,o)&&o!==r&&Tp(e,o,{get:()=>t[o],enumerable:!(n=FC(t,o))||n.enumerable});return e};var vb=(e,t,r)=>(r=e!=null?LC(UC(e)):{},qC(t||!e||!e.__esModule?Tp(r,"default",{value:e,enumerable:!0}):r,e));var ie=(e,t,r)=>(zC(e,typeof t!="symbol"?t+"":t,r),r);var I,l=Xt(()=>{I=[{message:"The browser is shutting down.",core:"background"},{message:"Tabs cannot be edited right now (user may be dragging a tab).",core:"background"}]});var c=Xt(()=>{});var S,u=Xt(()=>{S=[]});var D,d=Xt(()=>{D=[]});var m=Xt(()=>{});var p=Xt(()=>{});var k,f=Xt(()=>{k=["sqrxdevops.com","sqrx.com","dev.sqrxdevops.com","public.sqrx.com"]});var C,h=Xt(()=>{C=[{pattern:"^https?://.+\\.dl.dropboxusercontent.com/cd/0/get/.+",match:"final",selection:"original"},{pattern:"^https://mail-attachment.googleusercontent.com/attachment/u/.+",match:"final",selection:"final"}]});var g=Xt(()=>{});var y=Xt(()=>{});var b=Xt(()=>{});var _=Xt(()=>{});var v=Xt(()=>{});var x=Xt(()=>{});var T=Xt(()=>{});var ek=wp(JS=>{l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();(function(e,t){"use strict";if(e.setImmediate)return;let r=1,n={},o=!1,i=e.document,s;function a(Z,...J){typeof Z!="function"&&(Z=new Function(""+Z));let ue={callback:Z,args:J};return n[r]=ue,s(r),r++}function w(Z){delete n[Z]}function E(Z){let J=Z.callback,ue=Z.args;switch(ue.length){case 0:J();break;case 1:J(ue[0]);break;case 2:J(ue[0],ue[1]);break;case 3:J(ue[0],ue[1],ue[2]);break;default:J.apply(t,ue);break}}function V(Z){if(o)setTimeout(V,0,Z);else{let J=n[Z];if(J){o=!0;try{E(J)}finally{w(Z),o=!1}}}}function q(){s=function(Z){process.nextTick(function(){V(Z)})}}function K(){if(e.postMessage&&!e.importScripts){let Z=!0,J=e.onmessage;return e.onmessage=function(){Z=!1},e.postMessage("","*"),e.onmessage=J,Z}}function H(){let Z="setImmediate$"+Math.random()+"$",J=function(ue){ue.source===e&&typeof ue.data=="string"&&ue.data.indexOf(Z)===0&&V(+ue.data.slice(Z.length))};e.addEventListener?e.addEventListener("message",J,!1):e.attachEvent("onmessage",J),s=function(ue){e.postMessage(Z+ue,"*")}}function X(){let Z=new MessageChannel;Z.port1.onmessage=function(J){let ue=J.data;V(ue)},s=function(J){Z.port2.postMessage(J)}}function Y(){let Z=i.documentElement;s=function(J){let ue=i.createElement("script");ue.onreadystatechange=function(){V(J),ue.onreadystatechange=null,Z.removeChild(ue),ue=null},Z.appendChild(ue)}}function ee(){s=function(Z){setTimeout(V,0,Z)}}let Q=Object.getPrototypeOf&&Object.getPrototypeOf(e);Q=Q&&Q.setTimeout?Q:e,{}.toString.call(e.process)==="[object process]"?q():K()?H():e.MessageChannel?X():i&&"onreadystatechange"in i.createElement("script")?Y():ee(),Q.setImmediate=a,Q.clearImmediate=w})(typeof self>"u"?typeof global>"u"?JS:global:self)});var rC=wp(Se=>{"use strict";l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var jl=Symbol.for("react.element"),O1=Symbol.for("react.portal"),L1=Symbol.for("react.fragment"),F1=Symbol.for("react.strict_mode"),B1=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),z1=Symbol.for("react.forward_ref"),q1=Symbol.for("react.suspense"),K1=Symbol.for("react.memo"),j1=Symbol.for("react.lazy"),GD=Symbol.iterator;function H1(e){return e===null||typeof e!="object"?null:(e=GD&&e[GD]||e["@@iterator"],typeof e=="function"?e:null)}var QD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YD=Object.assign,XD={};function ma(e,t,r){this.props=e,this.context=t,this.refs=XD,this.updater=r||QD}ma.prototype.isReactComponent={};ma.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ma.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZD(){}ZD.prototype=ma.prototype;function zy(e,t,r){this.props=e,this.context=t,this.refs=XD,this.updater=r||QD}var qy=zy.prototype=new ZD;qy.constructor=zy;YD(qy,ma.prototype);qy.isPureReactComponent=!0;var WD=Array.isArray,JD=Object.prototype.hasOwnProperty,Ky={current:null},eC={key:!0,ref:!0,__self:!0,__source:!0};function tC(e,t,r){var n,o={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)JD.call(t,n)&&!eC.hasOwnProperty(n)&&(o[n]=t[n]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var w=Array(a),E=0;E<a;E++)w[E]=arguments[E+2];o.children=w}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)o[n]===void 0&&(o[n]=a[n]);return{$$typeof:jl,type:e,key:i,ref:s,props:o,_owner:Ky.current}}function G1(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jy(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function W1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $D=/\/+/g;function Vy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?W1(""+e.key):t.toString(36)}function Wm(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case jl:case O1:s=!0}}if(s)return s=e,o=o(s),e=n===""?"."+Vy(s,0):n,WD(o)?(r="",e!=null&&(r=e.replace($D,"$&/")+"/"),Wm(o,t,r,"",function(E){return E})):o!=null&&(jy(o)&&(o=G1(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace($D,"$&/")+"/")+e)),t.push(o)),1;if(s=0,n=n===""?".":n+":",WD(e))for(var a=0;a<e.length;a++){i=e[a];var w=n+Vy(i,a);s+=Wm(i,t,r,w,o)}else if(w=H1(e),typeof w=="function")for(e=w.call(e),a=0;!(i=e.next()).done;)i=i.value,w=n+Vy(i,a++),s+=Wm(i,t,r,w,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Gm(e,t,r){if(e==null)return e;var n=[],o=0;return Wm(e,n,"","",function(i){return t.call(r,i,o++)}),n}function $1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cr={current:null},$m={transition:null},Q1={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:$m,ReactCurrentOwner:Ky};Se.Children={map:Gm,forEach:function(e,t,r){Gm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Gm(e,function(){t++}),t},toArray:function(e){return Gm(e,function(t){return t})||[]},only:function(e){if(!jy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=ma;Se.Fragment=L1;Se.Profiler=B1;Se.PureComponent=zy;Se.StrictMode=F1;Se.Suspense=q1;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q1;Se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=YD({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Ky.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(w in t)JD.call(t,w)&&!eC.hasOwnProperty(w)&&(n[w]=t[w]===void 0&&a!==void 0?a[w]:t[w])}var w=arguments.length-2;if(w===1)n.children=r;else if(1<w){a=Array(w);for(var E=0;E<w;E++)a[E]=arguments[E+2];n.children=a}return{$$typeof:jl,type:e.type,key:o,ref:i,props:n,_owner:s}};Se.createContext=function(e){return e={$$typeof:V1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U1,_context:e},e.Consumer=e};Se.createElement=tC;Se.createFactory=function(e){var t=tC.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:z1,render:e}};Se.isValidElement=jy;Se.lazy=function(e){return{$$typeof:j1,_payload:{_status:-1,_result:e},_init:$1}};Se.memo=function(e,t){return{$$typeof:K1,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=$m.transition;$m.transition={};try{e()}finally{$m.transition=t}};Se.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Se.useCallback=function(e,t){return cr.current.useCallback(e,t)};Se.useContext=function(e){return cr.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return cr.current.useDeferredValue(e)};Se.useEffect=function(e,t){return cr.current.useEffect(e,t)};Se.useId=function(){return cr.current.useId()};Se.useImperativeHandle=function(e,t,r){return cr.current.useImperativeHandle(e,t,r)};Se.useInsertionEffect=function(e,t){return cr.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return cr.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return cr.current.useMemo(e,t)};Se.useReducer=function(e,t,r){return cr.current.useReducer(e,t,r)};Se.useRef=function(e){return cr.current.useRef(e)};Se.useState=function(e){return cr.current.useState(e)};Se.useSyncExternalStore=function(e,t,r){return cr.current.useSyncExternalStore(e,t,r)};Se.useTransition=function(){return cr.current.useTransition()};Se.version="18.2.0"});var oC=wp((uir,nC)=>{"use strict";l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();nC.exports=rC()});l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var $C=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},QC=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Zl,Te=class extends Error{constructor(t,r){super(r),Zl.set(this,void 0),$C(this,Zl,t,"f")}get key(){return QC(this,Zl,"f")}};Zl=new WeakMap;function ut(e,t,r){return(n,o="")=>{try{let i=t.reduce((s,a)=>a(s,o),n);return r?.(i,o),YC(o,e,i)}catch(i){return xb(n,i)}}}function xb(e,t){return{initialValue:e,hasError:!0,error:t}}function YC(e,t,r){try{return t.forEach(n=>n(r,e)),{initialValue:r,result:r,hasError:!1}}catch(n){return xb(r,n)}}var Zt=(e,t,r,n)=>(o,i="")=>{if(!(e?!t(o):t(o)))throw new Te(i,`${r??typeof o} '${o}' ${e?"is":"is not"} ${n}`)};function XC(e,t,r,n){return`${e} ${t} is${n?" ":" not "}${r}`}function ro(e){return(t,r,n,o,i)=>{if(!r())throw new Te(t,XC(e,n,o,i))}}var Jl=ro("array"),Tb=e=>t=>(r,n="")=>{Jl(n,()=>e?r.length!==t:r.length===t,`of length ${r.length}`,`of exact length ${t}`,e)},ZC=e=>t=>(r,n="")=>{Jl(n,()=>e?r.length<t:r.length>=t,`of length ${r.length}`,`within minimum length of ${t}`,e)},JC=e=>t=>(r,n="")=>{Jl(n,()=>e?r.length>t:r.length<=t,`of length ${r.length}`,`within maximum length of ${t}`,e)},wb=e=>()=>(t,r="")=>{Jl(r,()=>e?t.length!==0:t.length===0,`of length ${t.length}`,"empty",e)};function _a(e=[]){let t=[],r=ut(t,e,(n,o="")=>{if(!Array.isArray(n))throw new Te(o,`Value ${n} is not an array`)});return r.toString=dt(r,n=>n.join(", ")),r.toNumber=mt(r,n=>Number(n)),r.toBoolean=pt(r,n=>!!n),r.toCustom=Je(r),r.assert=(n,o)=>(t.push(Zt(!1,n,"array",o)),r),r.ofExactLength=n=>(t.push(Tb(!1)(n)),r),r.ofMinLength=n=>(t.push(ZC(!1)(n)),r),r.ofMaxLength=n=>(t.push(JC(!1)(n)),r),r.empty=()=>(t.push(wb(!1)()),r),r.not={assert:(n,o)=>(t.push(Zt(!0,n,"array",o)),r),empty:()=>(t.push(wb(!0)()),r),ofExactLength:n=>(t.push(Tb(!0)(n)),r)},r.items=function(n){return _a([(o,i="")=>{let s=r(o,i);if(s.hasError)throw s.error;let a=s.result.map((w,E)=>n(w,[i,`[${E}]`].filter(Boolean).join(".")));if(a.some(w=>w.hasError))throw a.filter(w=>w.hasError);return a.reduce((w,E)=>(E.hasError||w.push(E.result),w),[])}])},r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var kb=ro("boolean"),Eb=e=>()=>(t,r="")=>{kb(r,()=>e?!t:t,t,"true",e)},Sb=e=>()=>(t,r="")=>{kb(r,()=>e?t:!t,t,"false",e)};function ec(e=[]){let t=[],r=ut(t,e,(o,i="")=>{if(typeof o!="boolean")throw new Te(i,`Value ${o} is not a boolean`)});r.toString=dt(r,o=>o.toString()),r.toNumber=mt(r,o=>o?1:0),r.toBoolean=pt(r,o=>o),r.toCustom=Je(r),r.toArray=ur(r);let n=o=>(i,s)=>(t.push(Zt(o,i,"boolean",s)),r);return r.assert=n(!1),r.true=()=>(t.push(Eb(!1)()),va(!0,r)),r.false=()=>(t.push(Sb(!1)()),va(!1,r)),r.not={assert:n(!0),true:()=>(t.push(Eb(!0)()),va(!1,r)),false:()=>(t.push(Sb(!0)()),va(!0,r))},r}function Ib(e=[]){let r=ut([],e,(n,o="")=>{if(typeof n!="boolean")throw new Te(o,`Value ${n} is not a boolean`);if(n!==!1)throw new Te(o,`Value ${n} must be false`)});return r.toString=dt(r,n=>n.toString()),r.toNumber=mt(r,n=>n?1:0),r.toBoolean=pt(r,n=>n),r.toCustom=Je(r),r.toArray=ur(r),r}function Db(e=[]){let r=ut([],e,(n,o="")=>{if(typeof n!="boolean")throw new Te(o,`Value ${n} is not a boolean`);if(n!==!0)throw new Te(o,`Value ${n} must be true`)});return r.toString=dt(r,n=>n.toString()),r.toNumber=mt(r,n=>n?1:0),r.toBoolean=pt(r,n=>n),r.toCustom=Je(r),r.toArray=ur(r),r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Cb(e=[]){let t=[],r=ut(t,e);r.toString=dt(r,()=>""),r.toNumber=mt(r,()=>0),r.toBoolean=pt(r,()=>!1),r.toCustom=Je(r),r.toArray=ur(r);let n=o=>(i,s)=>(t.push(Zt(o,i,"custom value",s)),r);return r.assert=n(!1),r.not={assert:n(!0)},r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var no=ro("number"),Ab=e=>t=>(r,n="")=>{if(!(e?t.indexOf(r)===-1:t.indexOf(r)!==-1))throw new Te(n,`Number value ${r} ${e?`is one of the disallowed values in [${t.join(", ")}]`:`is not one of the allowed values in [${t.join(", ")}]`}`)},Rb=e=>()=>(t,r="")=>{no(r,()=>e?t<0:t>0,t,"positive",e)},Pb=e=>()=>(t,r="")=>{no(r,()=>e?t>0:t<0,t,"negative",e)},Nb=e=>()=>(t,r="")=>{no(r,()=>e?t!==0:t===0,t,"zero",e)},Mb=e=>t=>(r,n="")=>{no(n,()=>e?r>=t:r<t,r,`less than ${t}`,e)},Ob=e=>t=>(r,n="")=>{no(n,()=>e?r<=t:r>t,r,`more than ${t}`,e)},Lb=e=>t=>(r,n="")=>{no(n,()=>e?r!==t:r===t,r,`equal to ${t}`,e)},Fb=e=>t=>(r,n="")=>{no(n,()=>e?r%t!==0:r%t===0,r,`a multiple of ${t}`,e)},Bb=e=>()=>(t,r="")=>{no(r,()=>e?!Number.isInteger(t):Number.isInteger(t),t,"an integer",e)};function tc(e=[]){let t=[],r=ut(t,e,(o,i="")=>{if(typeof o!="number")throw new Te(i,`Value ${o} is not a number`)});r.toString=dt(r,o=>o.toString()),r.toNumber=mt(r,o=>o),r.toBoolean=pt(r,o=>o!==0),r.toCustom=Je(r),r.toArray=ur(r);let n=o=>(i,s)=>(t.push(Zt(o,i,"number",s)),r);return r.assert=n(!1),r.allowed=(...o)=>(t.push(Ab(!1)(o)),r),r.integer=()=>(t.push(Bb(!1)()),r),r.positive=()=>(t.push(Rb(!1)()),r),r.negative=()=>(t.push(Pb(!1)()),r),r.lessThan=o=>(t.push(Mb(!1)(o)),r),r.moreThan=o=>(t.push(Ob(!1)(o)),r),r.zero=()=>(t.push(Nb(!1)()),r),r.multipleOf=o=>(t.push(Fb(!1)(o)),r),r.equals=o=>(t.push(Lb(!1)(o)),r),r.not={assert:n(!0),allowed:(...o)=>(t.push(Ab(!0)(o)),r),integer:()=>(t.push(Bb(!0)()),r),positive:()=>(t.push(Rb(!0)()),r),negative:()=>(t.push(Pb(!0)()),r),lessThan:o=>(t.push(Mb(!0)(o)),r),moreThan:o=>(t.push(Ob(!0)(o)),r),zero:()=>(t.push(Nb(!0)()),r),multipleOf:o=>(t.push(Fb(!0)(o)),r),equals:o=>(t.push(Lb(!0)(o)),r)},r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function rc(e=[]){let t=[],r=ut(t,e);r.toCustom=Je(r);let n=o=>(i,s)=>(t.push(Zt(o,i,"custom value",s)),r);return r.assert=n(!1),r.not={assert:n(!0)},r}function dt(e,t){return(r=t)=>nc([(n,o="")=>{let i=e(n,o);if(i.hasError)throw i.error;try{return r(i.result)}catch(s){throw new Te(o,`Unable to create a string from ${typeof i.result} ${i.result}

 ${s instanceof Error?s.message:s}`)}}])}function mt(e,t){return(r=t)=>tc([(n,o="")=>{let i=e(n,o);if(i.hasError)throw i.error;try{return r(i.result)}catch(s){throw new Te(o,`Unable to create a number from ${typeof i.result} ${i.result}

 ${s instanceof Error?s.message:s}`)}}])}function pt(e,t){return(r=t)=>ec([(n,o="")=>{let i=e(n,o);if(i.hasError)throw i.error;try{return r(i.result)}catch(s){throw new Te(o,`Unable to create a booolean from ${typeof i.result} ${i.result}

 ${s instanceof Error?s.message:s}`)}}])}function Je(e){return t=>Cb([(r,n="")=>{let o=e(r,n);if(o.hasError)throw o.error;try{return t(o.result)}catch(i){throw new Te(n,`Unable to create custom type from ${typeof o.result} ${o.result}

 ${i instanceof Error?i.message:i}`)}}])}function ur(e){return t=>_a([(r,n="")=>{let o=e(r,n);if(o.hasError)throw o.error;try{return t(o.result)}catch(i){throw new Te(n,`Unable to create an array from ${typeof o.result} ${o.result}

 ${i instanceof Error?i.message:i}`)}}])}function Ep(e){return rc([(t,r="")=>{let n=e(t,r);if(n.hasError)throw n.error;return t}])}function va(e,t){return(e?Db:Ib)([(n,o="")=>{let i=t(n,o);if(i.hasError)throw i.error;return n}])}var Kb=ro("string"),Ub=(e,t)=>r=>(n,o="")=>{Kb(o,()=>{let i=t?r:r.toLowerCase(),s=t?n:n.toLowerCase();return e?s!==i:s===i},n,"equal to",e)},Vb=(e,t)=>r=>(n,o="")=>{let i=t?r:r.map(w=>w.toLowerCase()),s=t?n:n.toLowerCase();if(!(e?i.indexOf(s)===-1:i.indexOf(s)!==-1))throw new Te(o,`String value ${n} ${e?`is one of the disallowed values in [${r.join(", ")}]`:`is not one of the allowed values in [${r.join(", ")}]`}`)},zb=e=>()=>(t,r="")=>{Kb(r,()=>e?t.length!==0:t.length===0,t,"empty",e)},qb=e=>t=>(r,n="")=>{if(!(e?!t.test(r):t.test(r)))throw new Te(n,`String value '${r}' ${e?"matches":"does not match"} pattern ${t}`)};function nc(e=[]){let t=[],r={enabled:!0},n=ut(t,e,(i,s="")=>{if(typeof i!="string")throw new Te(s,`Value ${i} is not a string`)});n.toString=dt(n,i=>i),n.toNumber=mt(n,i=>Number(i)),n.toBoolean=pt(n,i=>!!i),n.toCustom=Je(n),n.toArray=ur(n);let o=i=>(s,a)=>(t.push(Zt(i,s,"string",a)),n);return n.assert=o(!1),n.allowed=(...i)=>(t.push(Vb(!1,r.enabled)(i)),Ep(n)),n.matches=i=>(t.push(qb(!1)(i)),n),n.empty=()=>(t.push(zb(!1)()),n),n.equals=i=>(t.push(Ub(!1,r.enabled)(i)),Ep(n)),n.case=i=>(r.enabled=i==="sensitive",n),n.not={assert:o(!0),allowed:(...i)=>(t.push(Vb(!0,r.enabled)(i)),n),matches:i=>(t.push(qb(!0)(i)),n),empty:()=>(t.push(zb(!0)()),n),equals:i=>(t.push(Ub(!0,r.enabled)(i)),n)},n}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function oc(...e){return(t,r="")=>{let n=[];for(let o of e){let i=o(t,r);if(!i.hasError)return i;n.push(i)}return{hasError:!0,initialValue:t,error:n}}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function ic(e=[]){let t=ut([],e,(r,n="")=>{if(r!==void 0)throw new Te(n,`Value ${r} is not undefined`)});return t.toString=dt(t,()=>String(void 0)),t.toNumber=mt(t,()=>NaN),t.toBoolean=pt(t,()=>!!void 0),t.toCustom=Je(t),t.toArray=ur(t),t}function sc(...e){return oc(ic(),...e)}function ac(e=[]){let t=[],r=ut(t,e,(o,i="")=>{if(o===null||typeof o!="object"||Array.isArray(o))throw new Te(i,`Value ${o} is not an object`)});r.toString=dt(r,o=>String(o)),r.toNumber=mt(r,o=>Number(o)),r.toBoolean=pt(r,o=>!!o),r.toCustom=Je(r);let n=o=>(i,s)=>(t.push(Zt(o,i,"object",s)),r);return r.assert=n(!1),r.not={assert:n(!0)},r.schema=function(o){return ac([(i,s="")=>{let a=r(i,s);if(a.hasError)throw a.error;let w={...i??{},...a.result},E=Object.entries(o).map(([q,K])=>[q,K(w[q],[s,q].filter(Boolean).join("."))]),V=E.filter(([,q])=>q.hasError);if(V.length>0)throw V.reduce((q,[K,H])=>(q[K]=H,q),{});return E.reduce((q,[K,H])=>(H.hasError||(q[K]=H.result),q),w)}])},r.partial=function(o){return ac([(i,s="")=>{let a=r(i,s);if(a.hasError)throw a.error;let w={...i??{},...a.result},E=Object.entries(o).map(([q,K])=>{let H=sc(K)(w[q],[s,q].filter(Boolean).join("."));return H.hasError&&console.error("ERROR IS HERE",H.error),[q,H]}),V=E.filter(([,q])=>q.hasError);if(V.length>0)throw V.reduce((q,[K,H])=>(q[K]=H,q),{});return E.reduce((q,[K,H])=>(H.hasError||H.result!==void 0&&(q[K]=H.result),q),w)}])},r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function jb(e=[]){let t=ut([],e,(r,n="")=>{if(r!==null)throw new Te(n,`Value ${r} is not null`)});return t.toString=dt(t,()=>String(null)),t.toNumber=mt(t,()=>0),t.toBoolean=pt(t,()=>!!null),t.toCustom=Je(t),t}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Hb(){let e=ut([],[],(t,r="")=>{if(t!==null)throw new Te(r,`Value ${t} is not an error`)});return e.toString=dt(e,t=>String(t)),e.toNumber=mt(e,()=>0),e.toBoolean=pt(e,()=>!!null),e.toCustom=Je(e),e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Gb(e){let t=(r,n="")=>{if(!r||typeof r!="object"||Array.isArray(r))return{initialValue:r,hasError:!0,error:new Te(n,`Value ${r} is not a record`)};let o=Object.entries(r).map(([i,s],a)=>e(s,[i,`[${a}]`].filter(Boolean).join(".")));return o.some(i=>i.hasError)?{initialValue:r,hasError:!0,error:o.filter(i=>i.hasError)}:{hasError:!1,initialValue:r,result:r}};return t.toString=dt(t,r=>String(r)),t.toNumber=mt(t,r=>Number(r)),t.toBoolean=pt(t,r=>!!r),t.toCustom=Je(t),t.toArray=ur(t),t}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function rn(e,t={}){let r=e.error;return Array.isArray(r)?{...t,...r.reduce((n,o)=>Object.assign({},n,rn(o,t)),{})}:r instanceof Te?{...t,[r.key]:r.message}:{...t,...Object.entries(r).reduce((n,[,o])=>Object.assign({},n,rn(o,t)),{})}}var z={string:nc,number:tc,boolean:ec,array:_a,object:ac,error:Hb,null:jb,undefined:ic,oneof:oc,stringUnion:rc,record:Gb,optional:sc,anything:()=>e=>({initialValue:e,hasError:!1,result:e})};function oe(e){return t=>!e(t).hasError}var eA=z.object().schema({type:z.string().equals("session-request"),request:z.object().schema({current_session:z.oneof(z.string(),z.null()),country:z.oneof(z.string(),z.null()),type:z.string()})}),tA=z.object().schema({type:z.string().equals("dfv-start-request")}),rA=z.object().schema({type:z.string().equals("focus-dfv")}),nA=z.object().schema({type:z.string().equals("user-login")}),oA=z.object().schema({type:z.string().equals("user-logout")}),Wb=oe(eA),I4=oe(tA),D4=oe(rA),C4=oe(nA),A4=oe(oA),iA=z.object().schema({type:z.string().equals("dfv-start-request"),file:z.optional(z.object().schema({filename:z.string(),url:z.string()})),trigger:z.optional(z.string().allowed("pwa","view_renderer"))}),$b=oe(iA),sA=z.object().schema({type:z.string().equals("db-start-request"),country:z.string(),url:z.string(),trigger:z.optional(z.string().allowed("pwa","view_renderer"))}),Qb=oe(sA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var W=globalThis.browser??globalThis.chrome;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var we="file_viewer",Ne="browser",aA=[Ne,we],lA=z.string().allowed(...aA),dj=oe(lA),cA=z.object().schema({type:z.string().equals(Ne),country:z.string()}),uA=z.object().schema({type:z.string().equals(we)}),mj=z.oneof(cA,uA);function Yb(e){return e.type===we?{type:we}:{country:e.country,type:Ne}}function Rn(e){return e.type===Ne?`${e.country}_${e.type}`:we}var pj=new RegExp(`^(${we}|[A-Z]{2}_${Ne})$`);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Rt(e){return!!(e&&typeof e=="object"&&!Array.isArray(e))}function lc(e){return!!(e&&typeof e=="object"&&"then"in e&&typeof e.then=="function"&&"catch"in e&&typeof e.catch=="function"&&"finally"in e&&typeof e.finally=="function")}function Xb(e,t){return!!(t in e&&e[t]&&Array.isArray(e[t]))}function Zb(e,t){return!(!(t in e)||!e[t]||typeof e[t]!="object"||Array.isArray(e[t]))}function Ue(e){return{success:!1,error:e}}function je(e){return{success:!0,value:e}}function it(e){try{let t=e();return cc(t)?t:je(t)}catch(t){return Ue(t)}}async function $(e){try{let t=await e();return cc(t)?t:je(t)}catch(t){return Ue(t)}}function cc(e){return Rt(e)&&typeof e.success=="boolean"&&(e.success&&"value"in e||!e.success&&"error"in e)}function Jb(e){return it(()=>JSON.parse(e))}function e_(e){return it(()=>JSON.stringify(e))}var Xo=class extends Error{_error;_type;_state;constructor(t){super(typeof t=="string"?t:void 0),this._error=typeof t=="string"?this:t,this._type=Xo.SerializedType}toJSON(){return{__serialized_type:this._type,stack:this._error.stack,message:this._error.message,name:this._error.name,state:this._state}}static create(t){if(t instanceof Error)return new Xo(t);if(typeof t=="string"||typeof t=="boolean"||typeof t=="number"||typeof t=="symbol"||typeof t=="bigint"||typeof t=="function")return new Xo(t.toString());if(t_(t))return mA(t);let r=e_(t);return r.success?new Xo(r.value):new Xo("Unserializeable data error")}setState(t){this._state=t}},st=Xo;ie(st,"SerializedType","JSONableError");var dA=z.object().schema({__serialized_type:z.string().equals(st.SerializedType),stack:z.optional(z.string()),message:z.string(),name:z.string(),state:z.anything()}),t_=oe(dA);function Zo(e){return e instanceof st?e:new st(e)}function mA(e){let t=new Error;return t.stack=e.stack,t.name=e.name,t.message=e.message,new st(t)}var Sp=class extends st{constructor(t,r={}){super(`Expected [${t}] response was not valid`),this._type=Sp.SerializedType,this.setState({expectedType:t,errors:r})}},Jt=Sp;ie(Jt,"SerializedType","UnexpectedResponseError");var pA=z.object().schema({__serialized_type:z.string().equals(Jt.SerializedType),stack:z.optional(z.string()),message:z.string(),name:z.string(),state:z.object().schema({expectedType:z.string(),errors:z.record(z.string())})}),Y3=oe(pA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var fA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kp={randomUUID:fA};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var uc,hA=new Uint8Array(16);function Ip(){if(!uc&&(uc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uc(hA)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Pt=[];for(let e=0;e<256;++e)Pt.push((e+256).toString(16).slice(1));function r_(e,t=0){return(Pt[e[t+0]]+Pt[e[t+1]]+Pt[e[t+2]]+Pt[e[t+3]]+"-"+Pt[e[t+4]]+Pt[e[t+5]]+"-"+Pt[e[t+6]]+Pt[e[t+7]]+"-"+Pt[e[t+8]]+Pt[e[t+9]]+"-"+Pt[e[t+10]]+Pt[e[t+11]]+Pt[e[t+12]]+Pt[e[t+13]]+Pt[e[t+14]]+Pt[e[t+15]]).toLowerCase()}function gA(){if(kp.randomUUID)return kp.randomUUID();let e=Ip();return e[6]=e[6]&15|64,e[8]=e[8]&63|128,r_(e)}var n_=gA;var ft=n_;function Ht(e){return{...e,id:ft(),occurred_on:e.occurred_on??new Date}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var xa=e=>new Promise(t=>setTimeout(t,e));var dc=class extends st{};ie(dc,"SerializedType","TimeSensitiveMessageExpiryError");async function o_(e,t=1e3){return await Promise.race([$(typeof e=="function"?e:()=>e),$(()=>new Promise((r,n)=>setTimeout(()=>n(new dc(`Message expired after ${t}ms`)),t)))])}function at(...e){}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var yA=console,i_=yA;var s_=S!=="all"?S.map(e=>e.split(".")):null,Jo=i_;globalThis.console=new Proxy(Jo,{get:()=>at});function te(e){return s_&&!bA(e,s_)?{log:at,warn:at,error:(t,...r)=>Jo.error(`[${e}] ${t}`,...r),info:at,debug:at}:{log:(t,...r)=>Jo.log(`[${e}] ${t}`,...r),warn:(t,...r)=>Jo.warn(`[${e}] ${t}`,...r),error:(t,...r)=>Jo.error(`[${e}] ${t}`,...r),info:(t,...r)=>Jo.info(`[${e}] ${t}`,...r),debug:(t,...r)=>Jo.debug(`[${e}] ${t}`,...r)}}function bA(e,t){let r=e.split(".");for(let n of t){let o=0,i=!0;for(;o<r.length;){if(n[o]==="*"){if(n.length-1===o){i=!0;break}o+=1;continue}if(n[o]===r[o]){o+=1;continue}i=!1;break}if(i)return!0}return!1}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var _A="Extension context invalidated.";function ei(e){return e instanceof Error&&e.message===_A}var Dp=te("common.storage.base");function vA(e,t){return{get:async()=>(await t.get(e))[e],set:async i=>await t.set({[e]:i}),remove:async()=>await t.remove(e)}}function xA(e,t){if(!t)throw new Error(`Missing storage area for ${e}`);let r=new Map,n=Promise.resolve(),o=vA(e,t),i=V=>new Promise((q,K)=>{n=n.then(async()=>{try{let H=await V(o);q(H)}catch(H){ei(H)&&q(void 0),K(H)}}).catch(K)}),s=async()=>new Promise((V,q)=>{n=n.then(async()=>{try{V(await o.get())}catch(K){return ei(K)?V(void 0):q(K)}})}),a=async V=>new Promise((q,K)=>{n=n.then(async()=>{try{q(await o.set(V))}catch(H){return ei(H)?q(void 0):K(H)}})}),w=async()=>new Promise((V,q)=>{n=n.then(async()=>{try{V(await o.remove())}catch(K){return ei(K)?V(void 0):q(K)}})});return{key:e,unsafeGet:s,unsafeSet:a,get:()=>$(s),set:V=>$(()=>a(V)),remove:()=>$(w),unsafeTransact:i,transact:V=>$(()=>i(V)),unsafeRemove:w,onChange:{addListener:(V,q=!1)=>{let K=H=>{H[e]&&V(H[e].newValue,H[e].oldValue,!1)};try{t.onChanged.addListener(K)}catch(H){return ei(H)?void 0:Dp.warn("Unable to remove storage listener",H)}r.set(V,K),q&&(async()=>{let H=await t.get(e);V(H[e],H[e],!0)})()},removeListener:V=>{let q=r.get(V);if(!q)return Dp.warn(`Missing storage listener for [${e}]`,V);try{t.onChanged.removeListener(q)}catch(K){if(ei(K))return;Dp.warn("Unable to remove storage listener",K)}}}}}function Ye(e){return xA(e,W.storage.local)}var Dr={user:Ye("user"),extensionEnabled:Ye("extensionEnabled"),adBlockerEnabled:Ye("adBlockerEnabled"),availableRegions:Ye("availableRegions"),isDarkThemeEnabled:Ye("isDarkThemeEnabled"),storageMigration:Ye("storageMigration"),modulesEnabled:Ye("modulesEnabled"),latestExtensionVersion:Ye("latestExtensionVersion"),downloadBypassDomainList:Ye("downloadBypassDomainList"),systemPolicy:Ye("systemPolicy")};var Re={...Dr};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Cp(e,t){let r=0;if(t.startsWith("."))for(;r<t.length&&t[r]===".";)r+=1;return e.length===t.length-r?null:TA(t,e)}function TA(e,t){let r=e.length-t.length-2,n=e.lastIndexOf(".",r);return n===-1?e:e.slice(n+1)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ap(e,t){return t.length===e.length?"":e.slice(0,-t.length-1)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var a_=function(){let e=[1,{}],t=[0,{city:e}];return[0,{ck:[0,{www:e}],jp:[0,{kawasaki:t,kitakyushu:t,kobe:t,nagoya:t,sapporo:t,sendai:t,yokohama:t}]}]}(),l_=function(){let e=[1,{}],t=[2,{}],r=[1,{gov:e,com:e,org:e,net:e,edu:e}],n=[0,{"*":t}],o=[1,{blogspot:t}],i=[1,{gov:e}],s=[0,{notebook:t,studio:t}],a=[0,{notebook:t}],w=[0,{notebook:t,"notebook-fips":t,studio:t}],E=[0,{notebook:t,"notebook-fips":t,studio:t,"studio-fips":t}],V=[0,{"*":e}],q=[0,{cloud:t}],K=[1,{co:t}],H=[2,{nodes:t}],X=[0,{s3:t,"s3-accesspoint":t,"s3-website":t}],Y=[0,{s3:t,"s3-accesspoint":t}],ee=[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:Y,s3:t,"s3-accesspoint":t,"s3-object-lambda":t,"s3-website":t}],Q=[0,{direct:t}],Z=[2,{id:t}],J=[0,{"webview-assets":t}],ue=[0,{vfs:t,"webview-assets":t}],be=[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:X,s3:t,"s3-accesspoint":t,"s3-object-lambda":t,"s3-website":t,"aws-cloud9":J,cloud9:ue}],ge=[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:Y,s3:t,"s3-accesspoint":t,"s3-object-lambda":t,"s3-website":t,"aws-cloud9":J,cloud9:ue}],Ae=[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:X,s3:t,"s3-accesspoint":t,"s3-object-lambda":t,"s3-website":t,"analytics-gateway":t,"aws-cloud9":J,cloud9:ue}],Pe=[0,{"execute-api":t,dualstack:Y,s3:t,"s3-accesspoint":t,"s3-object-lambda":t,"s3-website":t}],Ge=[0,{s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-fips":t,"s3-website":t}],Ke=[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:Ge,s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-fips":t,"s3-object-lambda":t,"s3-website":t,"aws-cloud9":J,cloud9:ue}],nt=[0,{s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-fips":t}],j=[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:nt,s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-fips":t,"s3-object-lambda":t,"s3-website":t}],ot=[0,{auth:t}],$o=[0,{auth:t,"auth-fips":t}],Qo=[0,{apps:t}],to=[0,{paas:t}],Yo=[0,{app:t}],ub=[2,{eu:t}],db=[0,{site:t}],mb=[0,{pages:t}],pb=[1,{com:e,edu:e,net:e,org:e}],gp=[0,{j:t}],yp=[0,{jelastic:t}],fb=[0,{user:t}],ba=[1,{ybo:t}],bp=[0,{cust:t,reservd:t}],hb=[0,{cust:t}],_p=[1,{gov:e,edu:e,mil:e,com:e,org:e,net:e}],vp=[0,{s3:t}],gb=[1,{edu:e,biz:e,net:e,org:e,gov:e,info:e,com:e}],yb=[1,{gov:e,blogspot:t}],Yl=[1,{framer:t}],xp=[1,{barsy:t}],bb=[0,{forgot:t}],yt=[1,{gs:e}],_b=[0,{nes:e}],fe=[1,{k12:e,cc:e,lib:e}],Xl=[1,{cc:e,lib:e}];return[0,{ac:[1,{com:e,edu:e,gov:e,net:e,mil:e,org:e,drr:t}],ad:[1,{nom:e}],ae:[1,{co:e,net:e,org:e,sch:e,ac:e,gov:e,mil:e,blogspot:t}],aero:[1,{"accident-investigation":e,"accident-prevention":e,aerobatic:e,aeroclub:e,aerodrome:e,agents:e,aircraft:e,airline:e,airport:e,"air-surveillance":e,airtraffic:e,"air-traffic-control":e,ambulance:e,amusement:e,association:e,author:e,ballooning:e,broker:e,caa:e,cargo:e,catering:e,certification:e,championship:e,charter:e,civilaviation:e,club:e,conference:e,consultant:e,consulting:e,control:e,council:e,crew:e,design:e,dgca:e,educator:e,emergency:e,engine:e,engineer:e,entertainment:e,equipment:e,exchange:e,express:e,federation:e,flight:e,fuel:e,gliding:e,government:e,groundhandling:e,group:e,hanggliding:e,homebuilt:e,insurance:e,journal:e,journalist:e,leasing:e,logistics:e,magazine:e,maintenance:e,media:e,microlight:e,modelling:e,navigation:e,parachuting:e,paragliding:e,"passenger-association":e,pilot:e,press:e,production:e,recreation:e,repbody:e,res:e,research:e,rotorcraft:e,safety:e,scientist:e,services:e,show:e,skydiving:e,software:e,student:e,trader:e,trading:e,trainer:e,union:e,workinggroup:e,works:e}],af:r,ag:[1,{com:e,org:e,net:e,co:e,nom:e}],ai:[1,{off:e,com:e,net:e,org:e,uwu:t}],al:[1,{com:e,edu:e,gov:e,mil:e,net:e,org:e,blogspot:t}],am:[1,{co:e,com:e,commune:e,net:e,org:e,radio:t,blogspot:t,neko:t,nyaa:t}],ao:[1,{ed:e,gv:e,og:e,co:e,pb:e,it:e}],aq:e,ar:[1,{bet:e,com:o,coop:e,edu:e,gob:e,gov:e,int:e,mil:e,musica:e,mutual:e,net:e,org:e,senasa:e,tur:e}],arpa:[1,{e164:e,"in-addr":e,ip6:e,iris:e,uri:e,urn:e}],as:i,asia:[1,{cloudns:t}],at:[1,{ac:[1,{sth:e}],co:o,gv:e,or:e,funkfeuer:[0,{wien:t}],futurecms:[0,{"*":t,ex:n,in:n}],futurehosting:t,futuremailing:t,ortsinfo:[0,{ex:n,kunden:n}],biz:t,info:t,"123webseite":t,priv:t,myspreadshop:t,"12hp":t,"2ix":t,"4lima":t,"lima-city":t}],au:[1,{com:[1,{blogspot:t,cloudlets:[0,{mel:t}],myspreadshop:t}],net:e,org:e,edu:[1,{act:e,catholic:e,nsw:[1,{schools:e}],nt:e,qld:e,sa:e,tas:e,vic:e,wa:e}],gov:[1,{qld:e,sa:e,tas:e,vic:e,wa:e}],asn:e,id:e,info:e,conf:e,oz:e,act:e,nsw:e,nt:e,qld:e,sa:e,tas:e,vic:e,wa:e}],aw:[1,{com:e}],ax:[1,{be:t,cat:t,es:t,eu:t,gg:t,mc:t,us:t,xy:t}],az:[1,{com:e,net:e,int:e,gov:e,org:e,edu:e,info:e,pp:e,mil:e,name:e,pro:e,biz:e}],ba:[1,{com:e,edu:e,gov:e,mil:e,net:e,org:e,rs:t,blogspot:t}],bb:[1,{biz:e,co:e,com:e,edu:e,gov:e,info:e,net:e,org:e,store:e,tv:e}],bd:V,be:[1,{ac:e,webhosting:t,blogspot:t,interhostsolutions:q,kuleuven:[0,{ezproxy:t}],"123website":t,myspreadshop:t,transurl:n}],bf:i,bg:[1,{0:e,1:e,2:e,3:e,4:e,5:e,6:e,7:e,8:e,9:e,a:e,b:e,c:e,d:e,e,f:e,g:e,h:e,i:e,j:e,k:e,l:e,m:e,n:e,o:e,p:e,q:e,r:e,s:e,t:e,u:e,v:e,w:e,x:e,y:e,z:e,blogspot:t,barsy:t}],bh:r,bi:[1,{co:e,com:e,edu:e,or:e,org:e}],biz:[1,{activetrail:t,cloudns:t,jozi:t,dyndns:t,"for-better":t,"for-more":t,"for-some":t,"for-the":t,selfip:t,webhop:t,orx:t,mmafan:t,myftp:t,"no-ip":t,dscloud:t}],bj:[1,{africa:e,agro:e,architectes:e,assur:e,avocats:e,co:e,com:e,eco:e,econo:e,edu:e,info:e,loisirs:e,money:e,net:e,org:e,ote:e,resto:e,restaurant:e,tourism:e,univ:e,blogspot:t}],bm:r,bn:[1,{com:e,edu:e,gov:e,net:e,org:e,co:t}],bo:[1,{com:e,edu:e,gob:e,int:e,org:e,net:e,mil:e,tv:e,web:e,academia:e,agro:e,arte:e,blog:e,bolivia:e,ciencia:e,cooperativa:e,democracia:e,deporte:e,ecologia:e,economia:e,empresa:e,indigena:e,industria:e,info:e,medicina:e,movimiento:e,musica:e,natural:e,nombre:e,noticias:e,patria:e,politica:e,profesional:e,plurinacional:e,pueblo:e,revista:e,salud:e,tecnologia:e,tksat:e,transporte:e,wiki:e}],br:[1,{"9guacu":e,abc:e,adm:e,adv:e,agr:e,aju:e,am:e,anani:e,aparecida:e,app:e,arq:e,art:e,ato:e,b:e,barueri:e,belem:e,bhz:e,bib:e,bio:e,blog:e,bmd:e,boavista:e,bsb:e,campinagrande:e,campinas:e,caxias:e,cim:e,cng:e,cnt:e,com:[1,{blogspot:t,simplesite:t}],contagem:e,coop:e,coz:e,cri:e,cuiaba:e,curitiba:e,def:e,des:e,det:e,dev:e,ecn:e,eco:e,edu:e,emp:e,enf:e,eng:e,esp:e,etc:e,eti:e,far:e,feira:e,flog:e,floripa:e,fm:e,fnd:e,fortal:e,fot:e,foz:e,fst:e,g12:e,geo:e,ggf:e,goiania:e,gov:[1,{ac:e,al:e,am:e,ap:e,ba:e,ce:e,df:e,es:e,go:e,ma:e,mg:e,ms:e,mt:e,pa:e,pb:e,pe:e,pi:e,pr:e,rj:e,rn:e,ro:e,rr:e,rs:e,sc:e,se:e,sp:e,to:e}],gru:e,imb:e,ind:e,inf:e,jab:e,jampa:e,jdf:e,joinville:e,jor:e,jus:e,leg:[1,{ac:t,al:t,am:t,ap:t,ba:t,ce:t,df:t,es:t,go:t,ma:t,mg:t,ms:t,mt:t,pa:t,pb:t,pe:t,pi:t,pr:t,rj:t,rn:t,ro:t,rr:t,rs:t,sc:t,se:t,sp:t,to:t}],lel:e,log:e,londrina:e,macapa:e,maceio:e,manaus:e,maringa:e,mat:e,med:e,mil:e,morena:e,mp:e,mus:e,natal:e,net:e,niteroi:e,nom:V,not:e,ntr:e,odo:e,ong:e,org:e,osasco:e,palmas:e,poa:e,ppg:e,pro:e,psc:e,psi:e,pvh:e,qsl:e,radio:e,rec:e,recife:e,rep:e,ribeirao:e,rio:e,riobranco:e,riopreto:e,salvador:e,sampa:e,santamaria:e,santoandre:e,saobernardo:e,saogonca:e,seg:e,sjc:e,slg:e,slz:e,sorocaba:e,srv:e,taxi:e,tc:e,tec:e,teo:e,the:e,tmp:e,trd:e,tur:e,tv:e,udi:e,vet:e,vix:e,vlog:e,wiki:e,zlg:e}],bs:[1,{com:e,net:e,org:e,edu:e,gov:e,we:t}],bt:r,bv:e,bw:[1,{co:e,org:e}],by:[1,{gov:e,mil:e,com:o,of:e,mycloud:t,mediatech:t}],bz:[1,{com:e,net:e,org:e,edu:e,gov:e,za:t,gsj:t}],ca:[1,{ab:e,bc:e,mb:e,nb:e,nf:e,nl:e,ns:e,nt:e,nu:e,on:e,pe:e,qc:e,sk:e,yk:e,gc:e,barsy:t,awdev:n,co:t,blogspot:t,"no-ip":t,myspreadshop:t}],cat:e,cc:[1,{cloudns:t,ftpaccess:t,"game-server":t,myphotos:t,scrapping:t,twmail:t,csx:t,fantasyleague:t,spawn:[0,{instances:t}]}],cd:i,cf:o,cg:e,ch:[1,{square7:t,blogspot:t,flow:[0,{ae:[0,{alp1:t}],appengine:t}],"linkyard-cloud":t,dnsking:t,gotdns:t,"123website":t,myspreadshop:t,firenet:[0,{"*":t,svc:n}],"12hp":t,"2ix":t,"4lima":t,"lima-city":t}],ci:[1,{org:e,or:e,com:e,co:e,edu:e,ed:e,ac:e,net:e,go:e,asso:e,"xn--aroport-bya":e,a\u00E9roport:e,int:e,presse:e,md:e,gouv:e,fin:t,nl:t}],ck:V,cl:[1,{co:e,gob:e,gov:e,mil:e,blogspot:t}],cm:[1,{co:e,com:e,gov:e,net:e}],cn:[1,{ac:e,com:[1,{amazonaws:[0,{"cn-north-1":[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:X,s3:t,"s3-accesspoint":t,"s3-deprecated":t,"s3-object-lambda":t,"s3-website":t}],"cn-northwest-1":ee,compute:n,airflow:[0,{"cn-north-1":n,"cn-northwest-1":n}],eb:[0,{"cn-north-1":t,"cn-northwest-1":t}],elb:n}],sagemaker:[0,{"cn-north-1":s,"cn-northwest-1":s}]}],edu:e,gov:e,net:e,org:e,mil:e,"xn--55qx5d":e,\u516C\u53F8:e,"xn--io0a7i":e,\u7F51\u7EDC:e,"xn--od0alg":e,\u7DB2\u7D61:e,ah:e,bj:e,cq:e,fj:e,gd:e,gs:e,gz:e,gx:e,ha:e,hb:e,he:e,hi:e,hl:e,hn:e,jl:e,js:e,jx:e,ln:e,nm:e,nx:e,qh:e,sc:e,sd:e,sh:e,sn:e,sx:e,tj:e,xj:e,xz:e,yn:e,zj:e,hk:e,mo:e,tw:e,"canva-apps":t,instantcloud:t,quickconnect:Q}],co:[1,{arts:e,com:o,edu:e,firm:e,gov:e,info:e,int:e,mil:e,net:e,nom:e,org:e,rec:e,web:e,carrd:t,crd:t,otap:n,leadpages:t,lpages:t,mypi:t,n4t:t,firewalledreplit:Z,repl:Z,supabase:t}],com:[1,{devcdnaccesso:n,adobeaemcloud:[2,{dev:n}],airkitapps:t,"airkitapps-au":t,aivencloud:t,kasserver:t,amazonaws:[0,{"af-south-1":be,"ap-east-1":ge,"ap-northeast-1":Ae,"ap-northeast-2":Ae,"ap-northeast-3":be,"ap-south-1":Ae,"ap-south-2":Pe,"ap-southeast-1":Ae,"ap-southeast-2":Ae,"ap-southeast-3":ee,"ap-southeast-4":Pe,"ca-central-1":Ke,"eu-central-1":Ae,"eu-central-2":Pe,"eu-north-1":ge,"eu-south-1":be,"eu-south-2":Pe,"eu-west-1":[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:X,s3:t,"s3-accesspoint":t,"s3-deprecated":t,"s3-object-lambda":t,"s3-website":t,"analytics-gateway":t,"aws-cloud9":J,cloud9:ue}],"eu-west-2":ge,"eu-west-3":be,"il-central-1":Pe,"me-central-1":ee,"me-south-1":ge,"sa-east-1":be,"us-east-1":[2,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:Ge,s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-deprecated":t,"s3-fips":t,"s3-object-lambda":t,"s3-website":t,"analytics-gateway":t,"aws-cloud9":J,cloud9:ue}],"us-east-2":[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:nt,s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-deprecated":t,"s3-fips":t,"s3-object-lambda":t,"s3-website":t,"analytics-gateway":t,"aws-cloud9":J,cloud9:ue}],"us-gov-east-1":j,"us-gov-west-1":j,"us-west-1":Ke,"us-west-2":[0,{"execute-api":t,"emrappui-prod":t,"emrnotebooks-prod":t,"emrstudio-prod":t,dualstack:Ge,s3:t,"s3-accesspoint":t,"s3-accesspoint-fips":t,"s3-deprecated":t,"s3-fips":t,"s3-object-lambda":t,"s3-website":t,"analytics-gateway":t,"aws-cloud9":J,cloud9:ue}],compute:n,"compute-1":n,airflow:[0,{"ap-northeast-1":n,"ap-northeast-2":n,"ap-south-1":n,"ap-southeast-1":n,"ap-southeast-2":n,"ca-central-1":n,"eu-central-1":n,"eu-north-1":n,"eu-west-1":n,"eu-west-2":n,"eu-west-3":n,"sa-east-1":n,"us-east-1":n,"us-east-2":n,"us-west-2":n}],s3:t,"s3-1":t,"s3-ap-east-1":t,"s3-ap-northeast-1":t,"s3-ap-northeast-2":t,"s3-ap-northeast-3":t,"s3-ap-south-1":t,"s3-ap-southeast-1":t,"s3-ap-southeast-2":t,"s3-ca-central-1":t,"s3-eu-central-1":t,"s3-eu-north-1":t,"s3-eu-west-1":t,"s3-eu-west-2":t,"s3-eu-west-3":t,"s3-external-1":t,"s3-fips-us-gov-east-1":t,"s3-fips-us-gov-west-1":t,"s3-global":[0,{accesspoint:[0,{mrap:t}]}],"s3-me-south-1":t,"s3-sa-east-1":t,"s3-us-east-2":t,"s3-us-gov-east-1":t,"s3-us-gov-west-1":t,"s3-us-west-1":t,"s3-us-west-2":t,"s3-website-ap-northeast-1":t,"s3-website-ap-southeast-1":t,"s3-website-ap-southeast-2":t,"s3-website-eu-west-1":t,"s3-website-sa-east-1":t,"s3-website-us-east-1":t,"s3-website-us-gov-west-1":t,"s3-website-us-west-1":t,"s3-website-us-west-2":t,elb:n}],amazoncognito:[0,{"af-south-1":ot,"ap-northeast-1":ot,"ap-northeast-2":ot,"ap-northeast-3":ot,"ap-south-1":ot,"ap-southeast-1":ot,"ap-southeast-2":ot,"ap-southeast-3":ot,"ca-central-1":ot,"eu-central-1":ot,"eu-north-1":ot,"eu-south-1":ot,"eu-west-1":ot,"eu-west-2":ot,"eu-west-3":ot,"il-central-1":ot,"me-south-1":ot,"sa-east-1":ot,"us-east-1":$o,"us-east-2":$o,"us-gov-west-1":[0,{"auth-fips":t}],"us-west-1":$o,"us-west-2":$o}],amplifyapp:n,awsapprunner:n,elasticbeanstalk:[2,{"af-south-1":t,"ap-east-1":t,"ap-northeast-1":t,"ap-northeast-2":t,"ap-northeast-3":t,"ap-south-1":t,"ap-southeast-1":t,"ap-southeast-2":t,"ap-southeast-3":t,"ca-central-1":t,"eu-central-1":t,"eu-north-1":t,"eu-south-1":t,"eu-west-1":t,"eu-west-2":t,"eu-west-3":t,"il-central-1":t,"me-south-1":t,"sa-east-1":t,"us-east-1":t,"us-east-2":t,"us-gov-east-1":t,"us-gov-west-1":t,"us-west-1":t,"us-west-2":t}],awsglobalaccelerator:t,siiites:t,appspacehosted:t,appspaceusercontent:t,"on-aptible":t,myasustor:t,"balena-devices":t,betainabox:t,boutir:t,bplaced:t,cafjs:t,"canva-apps":t,br:t,cn:t,de:t,eu:t,jpn:t,mex:t,ru:t,sa:t,uk:t,us:t,za:t,ar:t,hu:t,kr:t,no:t,qc:t,uy:t,africa:t,gr:t,co:t,jdevcloud:t,wpdevcloud:t,cloudcontrolled:t,cloudcontrolapp:t,"cf-ipfs":t,"cloudflare-ipfs":t,trycloudflare:t,"customer-oci":[0,{"*":t,oci:n,ocp:n,ocs:n}],dattolocal:t,dattorelay:t,dattoweb:t,mydatto:t,builtwithdark:t,datadetect:[0,{demo:t,instance:t}],ddns5:t,discordsays:t,discordsez:t,drayddns:t,dreamhosters:t,mydrobo:t,"dyndns-at-home":t,"dyndns-at-work":t,"dyndns-blog":t,"dyndns-free":t,"dyndns-home":t,"dyndns-ip":t,"dyndns-mail":t,"dyndns-office":t,"dyndns-pics":t,"dyndns-remote":t,"dyndns-server":t,"dyndns-web":t,"dyndns-wiki":t,"dyndns-work":t,blogdns:t,cechire:t,dnsalias:t,dnsdojo:t,doesntexist:t,dontexist:t,doomdns:t,"dyn-o-saur":t,dynalias:t,"est-a-la-maison":t,"est-a-la-masion":t,"est-le-patron":t,"est-mon-blogueur":t,"from-ak":t,"from-al":t,"from-ar":t,"from-ca":t,"from-ct":t,"from-dc":t,"from-de":t,"from-fl":t,"from-ga":t,"from-hi":t,"from-ia":t,"from-id":t,"from-il":t,"from-in":t,"from-ks":t,"from-ky":t,"from-ma":t,"from-md":t,"from-mi":t,"from-mn":t,"from-mo":t,"from-ms":t,"from-mt":t,"from-nc":t,"from-nd":t,"from-ne":t,"from-nh":t,"from-nj":t,"from-nm":t,"from-nv":t,"from-oh":t,"from-ok":t,"from-or":t,"from-pa":t,"from-pr":t,"from-ri":t,"from-sc":t,"from-sd":t,"from-tn":t,"from-tx":t,"from-ut":t,"from-va":t,"from-vt":t,"from-wa":t,"from-wi":t,"from-wv":t,"from-wy":t,getmyip:t,gotdns:t,"hobby-site":t,homelinux:t,homeunix:t,iamallama:t,"is-a-anarchist":t,"is-a-blogger":t,"is-a-bookkeeper":t,"is-a-bulls-fan":t,"is-a-caterer":t,"is-a-chef":t,"is-a-conservative":t,"is-a-cpa":t,"is-a-cubicle-slave":t,"is-a-democrat":t,"is-a-designer":t,"is-a-doctor":t,"is-a-financialadvisor":t,"is-a-geek":t,"is-a-green":t,"is-a-guru":t,"is-a-hard-worker":t,"is-a-hunter":t,"is-a-landscaper":t,"is-a-lawyer":t,"is-a-liberal":t,"is-a-libertarian":t,"is-a-llama":t,"is-a-musician":t,"is-a-nascarfan":t,"is-a-nurse":t,"is-a-painter":t,"is-a-personaltrainer":t,"is-a-photographer":t,"is-a-player":t,"is-a-republican":t,"is-a-rockstar":t,"is-a-socialist":t,"is-a-student":t,"is-a-teacher":t,"is-a-techie":t,"is-a-therapist":t,"is-an-accountant":t,"is-an-actor":t,"is-an-actress":t,"is-an-anarchist":t,"is-an-artist":t,"is-an-engineer":t,"is-an-entertainer":t,"is-certified":t,"is-gone":t,"is-into-anime":t,"is-into-cars":t,"is-into-cartoons":t,"is-into-games":t,"is-leet":t,"is-not-certified":t,"is-slick":t,"is-uberleet":t,"is-with-theband":t,"isa-geek":t,"isa-hockeynut":t,issmarterthanyou:t,"likes-pie":t,likescandy:t,"neat-url":t,"saves-the-whales":t,selfip:t,"sells-for-less":t,"sells-for-u":t,servebbs:t,"simple-url":t,"space-to-rent":t,"teaches-yoga":t,writesthisblog:t,digitaloceanspaces:n,ddnsfree:t,ddnsgeek:t,giize:t,gleeze:t,kozow:t,loseyourip:t,ooguy:t,theworkpc:t,mytuleap:t,"tuleap-partners":t,encoreapi:t,evennode:[0,{"eu-1":t,"eu-2":t,"eu-3":t,"eu-4":t,"us-1":t,"us-2":t,"us-3":t,"us-4":t}],onfabrica:t,fbsbx:Qo,"fastly-edge":t,"fastly-terrarium":t,"fastvps-server":t,mydobiss:t,firebaseapp:t,fldrv:t,forgeblocks:t,framercanvas:t,"freebox-os":t,freeboxos:t,freemyip:t,gentapps:t,gentlentapis:t,githubusercontent:t,"0emm":n,appspot:[2,{r:n}],codespot:t,googleapis:t,googlecode:t,pagespeedmobilizer:t,publishproxy:t,withgoogle:t,withyoutube:t,blogspot:t,awsmppl:t,herokuapp:t,herokussl:t,impertrixcdn:t,impertrix:t,smushcdn:t,wphostedmail:t,wpmucdn:t,pixolino:t,amscompute:t,dopaas:t,"hosted-by-previder":to,hosteur:[0,{"rag-cloud":t,"rag-cloud-ch":t}],"ik-server":[0,{jcloud:t,"jcloud-ver-jpc":t}],jelastic:[0,{demo:t}],kilatiron:t,massivegrid:to,wafaicloud:[0,{jed:t,lon:t,ryd:t}],joyent:[0,{cns:n}],ktistory:t,lpusercontent:t,lmpm:Yo,linode:[0,{members:t,nodebalancer:n}],linodeobjects:n,linodeusercontent:[0,{ip:t}],barsycenter:t,barsyonline:t,mazeplay:t,miniserver:t,meteorapp:ub,hostedpi:t,"mythic-beasts":[0,{customer:t,caracal:t,fentiger:t,lynx:t,ocelot:t,oncilla:t,onza:t,sphinx:t,vs:t,x:t,yali:t}],nospamproxy:q,"4u":t,nfshost:t,"001www":t,ddnslive:t,myiphost:t,blogsyte:t,ciscofreak:t,damnserver:t,ditchyourip:t,dnsiskinky:t,dynns:t,geekgalaxy:t,"health-carereform":t,homesecuritymac:t,homesecuritypc:t,myactivedirectory:t,mysecuritycamera:t,"net-freaks":t,onthewifi:t,point2this:t,quicksytes:t,securitytactics:t,serveexchange:t,servehumour:t,servep2p:t,servesarcasm:t,stufftoread:t,unusualperson:t,workisboring:t,"3utilities":t,ddnsking:t,myvnc:t,servebeer:t,servecounterstrike:t,serveftp:t,servegame:t,servehalflife:t,servehttp:t,serveirc:t,servemp3:t,servepics:t,servequake:t,observableusercontent:[0,{static:t}],simplesite:t,orsites:t,operaunite:t,"authgear-staging":t,authgearapps:t,skygearapp:t,outsystemscloud:t,ownprovider:t,pgfog:t,pagefrontapp:t,pagexl:t,paywhirl:n,gotpantheon:t,"platter-app":t,pleskns:t,"postman-echo":t,prgmr:[0,{xen:t}],pythonanywhere:ub,qualifioapp:t,ladesk:t,qbuser:t,qa2:t,"dev-myqnapcloud":t,"alpha-myqnapcloud":t,myqnapcloud:t,quipelements:n,rackmaze:t,rhcloud:t,render:Yo,onrender:t,"180r":t,dojin:t,sakuratan:t,sakuraweb:t,x0:t,code:[0,{builder:n,"dev-builder":n,"stg-builder":n}],logoip:t,scrysec:t,"firewall-gateway":t,myshopblocks:t,myshopify:t,shopitsite:t,"1kapp":t,appchizi:t,applinzi:t,sinaapp:t,vipsinaapp:t,"bounty-full":[2,{alpha:t,beta:t}],streamlitapp:t,"try-snowplow":t,"stackhero-network":t,"playstation-cloud":t,myspreadshop:t,stdlib:[0,{api:t}],"temp-dns":t,dsmynas:t,familyds:t,mytabit:t,"tb-hosting":db,reservd:t,thingdustdata:t,bloxcms:t,"townnews-staging":t,typeform:[0,{pro:t}],hk:t,it:t,vultrobjects:n,wafflecell:t,"reserve-online":t,hotelwithflight:t,remotewd:t,wiardweb:mb,messwithdns:t,"woltlab-demo":t,wpenginepowered:[2,{js:t}],wixsite:t,xnbay:[2,{u2:t,"u2-local":t}],yolasite:t}],coop:e,cr:[1,{ac:e,co:e,ed:e,fi:e,go:e,or:e,sa:e}],cu:[1,{com:e,edu:e,org:e,net:e,gov:e,inf:e}],cv:[1,{com:e,edu:e,int:e,nome:e,org:e,blogspot:t}],cw:pb,cx:[1,{gov:e,ath:t,info:t}],cy:[1,{ac:e,biz:e,com:[1,{blogspot:t,scaleforce:gp}],ekloges:e,gov:e,ltd:e,mil:e,net:e,org:e,press:e,pro:e,tm:e}],cz:[1,{co:t,realm:t,e4:t,blogspot:t,metacentrum:[0,{cloud:n,custom:t}],muni:[0,{cloud:[0,{flt:t,usr:t}]}]}],de:[1,{bplaced:t,square7:t,com:t,cosidns:[0,{dyn:t}],"dynamisches-dns":t,dnsupdater:t,"internet-dns":t,"l-o-g-i-n":t,dnshome:t,fuettertdasnetz:t,isteingeek:t,istmein:t,lebtimnetz:t,leitungsen:t,traeumtgerade:t,ddnss:[2,{dyn:t,dyndns:t}],dyndns1:t,"dyn-ip24":t,"home-webserver":[2,{dyn:t}],"myhome-server":t,frusky:n,goip:t,blogspot:t,"xn--gnstigbestellen-zvb":t,g\u00FCnstigbestellen:t,"xn--gnstigliefern-wob":t,g\u00FCnstigliefern:t,"hs-heilbronn":[0,{it:mb}],"dyn-berlin":t,"in-berlin":t,"in-brb":t,"in-butter":t,"in-dsl":t,"in-vpn":t,iservschule:t,"mein-iserv":t,schulplattform:t,schulserver:t,"test-iserv":t,keymachine:t,"git-repos":t,"lcube-server":t,"svn-repos":t,barsy:t,"123webseite":t,logoip:t,"firewall-gateway":t,"my-gateway":t,"my-router":t,spdns:t,speedpartner:[0,{customer:t}],myspreadshop:t,"taifun-dns":t,"12hp":t,"2ix":t,"4lima":t,"lima-city":t,"dd-dns":t,"dray-dns":t,draydns:t,"dyn-vpn":t,dynvpn:t,"mein-vigor":t,"my-vigor":t,"my-wan":t,"syno-ds":t,"synology-diskstation":t,"synology-ds":t,uberspace:n,virtualuser:t,"virtual-user":t,"community-pro":t,diskussionsbereich:t}],dj:e,dk:[1,{biz:t,co:t,firm:t,reg:t,store:t,blogspot:t,"123hjemmeside":t,myspreadshop:t}],dm:r,do:[1,{art:e,com:e,edu:e,gob:e,gov:e,mil:e,net:e,org:e,sld:e,web:e}],dz:[1,{art:e,asso:e,com:e,edu:e,gov:e,org:e,net:e,pol:e,soc:e,tm:e}],ec:[1,{com:e,info:e,net:e,fin:e,k12:e,med:e,pro:e,org:e,edu:e,gov:e,gob:e,mil:e,base:t,official:t}],edu:[1,{rit:[0,{"git-pages":t}]}],ee:[1,{edu:e,gov:e,riik:e,lib:e,med:e,com:o,pri:e,aip:e,org:e,fie:e}],eg:[1,{com:o,edu:e,eun:e,gov:e,mil:e,name:e,net:e,org:e,sci:e}],er:V,es:[1,{com:o,nom:e,org:e,gob:e,edu:e,"123miweb":t,myspreadshop:t}],et:[1,{com:e,gov:e,org:e,edu:e,biz:e,name:e,info:e,net:e}],eu:[1,{airkitapps:t,mycd:t,cloudns:t,dogado:yp,barsy:t,wellbeingzone:t,spdns:t,transurl:n,diskstation:t}],fi:[1,{aland:e,dy:t,blogspot:t,"xn--hkkinen-5wa":t,h\u00E4kkinen:t,iki:t,cloudplatform:[0,{fi:t}],datacenter:[0,{demo:t,paas:t}],kapsi:t,"123kotisivu":t,myspreadshop:t}],fj:[1,{ac:e,biz:e,com:e,gov:e,info:e,mil:e,name:e,net:e,org:e,pro:e}],fk:V,fm:[1,{com:e,edu:e,net:e,org:e,radio:t,user:n}],fo:e,fr:[1,{asso:e,com:e,gouv:e,nom:e,prd:e,tm:e,avoues:e,cci:e,greta:e,"huissier-justice":e,"en-root":t,"fbx-os":t,fbxos:t,"freebox-os":t,freeboxos:t,blogspot:t,goupile:t,"123siteweb":t,"on-web":t,"chirurgiens-dentistes-en-france":t,dedibox:t,aeroport:t,avocat:t,chambagri:t,"chirurgiens-dentistes":t,"experts-comptables":t,medecin:t,notaires:t,pharmacien:t,port:t,veterinaire:t,myspreadshop:t,ynh:t}],ga:e,gb:e,gd:[1,{edu:e,gov:e}],ge:[1,{com:e,edu:e,gov:e,org:e,mil:e,net:e,pvt:e}],gf:e,gg:[1,{co:e,net:e,org:e,kaas:t,cya:t,panel:[2,{daemon:t}]}],gh:[1,{com:e,edu:e,gov:e,org:e,mil:e}],gi:[1,{com:e,ltd:e,gov:e,mod:e,edu:e,org:e}],gl:[1,{co:e,com:e,edu:e,net:e,org:e,biz:t,xx:t}],gm:e,gn:[1,{ac:e,com:e,edu:e,gov:e,org:e,net:e}],gov:e,gp:[1,{com:e,net:e,mobi:e,edu:e,org:e,asso:e,app:t}],gq:e,gr:[1,{com:e,edu:e,net:e,org:e,gov:e,blogspot:t,simplesite:t}],gs:e,gt:[1,{com:e,edu:e,gob:e,ind:e,mil:e,net:e,org:e,blog:t,de:t,to:t}],gu:[1,{com:e,edu:e,gov:e,guam:e,info:e,net:e,org:e,web:e}],gw:e,gy:[1,{co:e,com:e,edu:e,gov:e,net:e,org:e,be:t}],hk:[1,{com:e,edu:e,gov:e,idv:e,net:e,org:e,"xn--55qx5d":e,\u516C\u53F8:e,"xn--wcvs22d":e,\u6559\u80B2:e,"xn--lcvr32d":e,\u654E\u80B2:e,"xn--mxtq1m":e,\u653F\u5E9C:e,"xn--gmqw5a":e,\u500B\u4EBA:e,"xn--ciqpn":e,\u4E2A\u4EBA:e,"xn--gmq050i":e,\u7B87\u4EBA:e,"xn--zf0avx":e,\u7DB2\u7EDC:e,"xn--io0a7i":e,\u7F51\u7EDC:e,"xn--mk0axi":e,\u7EC4\u7E54:e,"xn--od0alg":e,\u7DB2\u7D61:e,"xn--od0aq3b":e,\u7F51\u7D61:e,"xn--tn0ag":e,\u7EC4\u7EC7:e,"xn--uc0atv":e,\u7D44\u7E54:e,"xn--uc0ay4a":e,\u7D44\u7EC7:e,blogspot:t,secaas:t,ltd:t,inc:t}],hm:e,hn:[1,{com:e,edu:e,org:e,net:e,mil:e,gob:e,cc:t}],hr:[1,{iz:e,from:e,name:e,com:e,blogspot:t,free:t}],ht:[1,{com:e,shop:e,firm:e,info:e,adult:e,net:e,pro:e,org:e,med:e,art:e,coop:e,pol:e,asso:e,edu:e,rel:e,gouv:e,perso:e}],hu:[1,{2e3:e,co:e,info:e,org:e,priv:e,sport:e,tm:e,agrar:e,bolt:e,casino:e,city:e,erotica:e,erotika:e,film:e,forum:e,games:e,hotel:e,ingatlan:e,jogasz:e,konyvelo:e,lakas:e,media:e,news:e,reklam:e,sex:e,shop:e,suli:e,szex:e,tozsde:e,utazas:e,video:e,blogspot:t}],id:[1,{ac:e,biz:e,co:o,desa:e,go:e,mil:e,my:[1,{rss:n}],net:e,or:e,ponpes:e,sch:e,web:e,flap:t,forte:t}],ie:[1,{gov:e,blogspot:t,myspreadshop:t}],il:[1,{ac:e,co:[1,{ravpage:t,blogspot:t,tabitorder:t,mytabit:t}],gov:e,idf:e,k12:e,muni:e,net:e,org:e}],"xn--4dbrk0ce":[1,{"xn--4dbgdty6c":e,"xn--5dbhl8d":e,"xn--8dbq2a":e,"xn--hebda8b":e}],\u05D9\u05E9\u05E8\u05D0\u05DC:[1,{\u05D0\u05E7\u05D3\u05DE\u05D9\u05D4:e,\u05D9\u05E9\u05D5\u05D1:e,\u05E6\u05D4\u05DC:e,\u05DE\u05DE\u05E9\u05DC:e}],im:[1,{ac:e,co:[1,{ltd:e,plc:e}],com:e,net:e,org:e,tt:e,tv:e,ro:t}],in:[1,{"5g":e,"6g":e,ac:e,ai:e,am:e,bihar:e,biz:e,business:e,ca:e,cn:e,co:e,com:e,coop:e,cs:e,delhi:e,dr:e,edu:e,er:e,firm:e,gen:e,gov:e,gujarat:e,ind:e,info:e,int:e,internet:e,io:e,me:e,mil:e,net:e,nic:e,org:e,pg:e,post:e,pro:e,res:e,travel:e,tv:e,uk:e,up:e,us:e,web:t,cloudns:t,blogspot:t,barsy:t,supabase:t}],info:[1,{cloudns:t,"dynamic-dns":t,dyndns:t,"barrel-of-knowledge":t,"barrell-of-knowledge":t,"for-our":t,"groks-the":t,"groks-this":t,"here-for-more":t,knowsitall:t,selfip:t,webhop:t,barsy:t,mayfirst:t,forumz:t,nsupdate:t,dvrcam:t,ilovecollege:t,"no-ip":t,dnsupdate:t,"v-info":t}],int:[1,{eu:e}],io:[1,{2038:t,com:e,"on-acorn":n,apigee:t,"b-data":t,backplaneapp:t,banzaicloud:[0,{app:t,backyards:n}],beagleboard:t,bitbucket:t,bluebite:t,boxfuse:t,browsersafetymark:t,bigv:[0,{uk0:t}],cleverapps:t,dappnode:[0,{dyndns:t}],dedyn:t,drud:t,definima:t,"fh-muenster":t,shw:t,forgerock:[0,{id:t}],ghost:t,github:t,gitlab:t,lolipop:t,"hasura-app":t,hostyhosting:t,moonscale:n,beebyte:to,beebyteapp:[0,{sekd1:t}],jele:t,unispace:[0,{"cloud-fr1":t}],webthings:t,loginline:t,barsy:t,azurecontainer:n,ngrok:[2,{ap:t,au:t,eu:t,in:t,jp:t,sa:t,us:t}],nodeart:[0,{stage:t}],nid:t,pantheonsite:t,dyn53:t,pstmn:[2,{mock:t}],protonet:t,qoto:t,qcx:[2,{sys:n}],vaporcloud:t,vbrplsbx:[0,{g:t}],"on-k3s":n,"on-rio":n,readthedocs:t,resindevice:t,resinstaging:[0,{devices:t}],hzc:t,sandcats:t,shiftcrypto:t,shiftedit:t,"mo-siemens":t,musician:t,lair:Qo,stolos:n,spacekit:t,utwente:t,s5y:n,edugit:t,telebit:t,thingdust:[0,{dev:bp,disrec:bp,prod:hb,testing:bp}],tickets:t,upli:t,wedeploy:t,editorx:t,wixstudio:t,basicserver:t,virtualserver:t}],iq:_p,ir:[1,{ac:e,co:e,gov:e,id:e,net:e,org:e,sch:e,"xn--mgba3a4f16a":e,\u0627\u06CC\u0631\u0627\u0646:e,"xn--mgba3a4fra":e,\u0627\u064A\u0631\u0627\u0646:e}],is:[1,{net:e,com:e,edu:e,gov:e,org:e,int:e,cupcake:t,blogspot:t}],it:[1,{gov:e,edu:e,abr:e,abruzzo:e,"aosta-valley":e,aostavalley:e,bas:e,basilicata:e,cal:e,calabria:e,cam:e,campania:e,"emilia-romagna":e,emiliaromagna:e,emr:e,"friuli-v-giulia":e,"friuli-ve-giulia":e,"friuli-vegiulia":e,"friuli-venezia-giulia":e,"friuli-veneziagiulia":e,"friuli-vgiulia":e,"friuliv-giulia":e,"friulive-giulia":e,friulivegiulia:e,"friulivenezia-giulia":e,friuliveneziagiulia:e,friulivgiulia:e,fvg:e,laz:e,lazio:e,lig:e,liguria:e,lom:e,lombardia:e,lombardy:e,lucania:e,mar:e,marche:e,mol:e,molise:e,piedmont:e,piemonte:e,pmn:e,pug:e,puglia:e,sar:e,sardegna:e,sardinia:e,sic:e,sicilia:e,sicily:e,taa:e,tos:e,toscana:e,"trentin-sud-tirol":e,"xn--trentin-sd-tirol-rzb":e,"trentin-s\xFCd-tirol":e,"trentin-sudtirol":e,"xn--trentin-sdtirol-7vb":e,"trentin-s\xFCdtirol":e,"trentin-sued-tirol":e,"trentin-suedtirol":e,"trentino-a-adige":e,"trentino-aadige":e,"trentino-alto-adige":e,"trentino-altoadige":e,"trentino-s-tirol":e,"trentino-stirol":e,"trentino-sud-tirol":e,"xn--trentino-sd-tirol-c3b":e,"trentino-s\xFCd-tirol":e,"trentino-sudtirol":e,"xn--trentino-sdtirol-szb":e,"trentino-s\xFCdtirol":e,"trentino-sued-tirol":e,"trentino-suedtirol":e,trentino:e,"trentinoa-adige":e,trentinoaadige:e,"trentinoalto-adige":e,trentinoaltoadige:e,"trentinos-tirol":e,trentinostirol:e,"trentinosud-tirol":e,"xn--trentinosd-tirol-rzb":e,"trentinos\xFCd-tirol":e,trentinosudtirol:e,"xn--trentinosdtirol-7vb":e,trentinos\u00FCdtirol:e,"trentinosued-tirol":e,trentinosuedtirol:e,"trentinsud-tirol":e,"xn--trentinsd-tirol-6vb":e,"trentins\xFCd-tirol":e,trentinsudtirol:e,"xn--trentinsdtirol-nsb":e,trentins\u00FCdtirol:e,"trentinsued-tirol":e,trentinsuedtirol:e,tuscany:e,umb:e,umbria:e,"val-d-aosta":e,"val-daosta":e,"vald-aosta":e,valdaosta:e,"valle-aosta":e,"valle-d-aosta":e,"valle-daosta":e,valleaosta:e,"valled-aosta":e,valledaosta:e,"vallee-aoste":e,"xn--valle-aoste-ebb":e,"vall\xE9e-aoste":e,"vallee-d-aoste":e,"xn--valle-d-aoste-ehb":e,"vall\xE9e-d-aoste":e,valleeaoste:e,"xn--valleaoste-e7a":e,vall\u00E9eaoste:e,valleedaoste:e,"xn--valledaoste-ebb":e,vall\u00E9edaoste:e,vao:e,vda:e,ven:e,veneto:e,ag:e,agrigento:e,al:e,alessandria:e,"alto-adige":e,altoadige:e,an:e,ancona:e,"andria-barletta-trani":e,"andria-trani-barletta":e,andriabarlettatrani:e,andriatranibarletta:e,ao:e,aosta:e,aoste:e,ap:e,aq:e,aquila:e,ar:e,arezzo:e,"ascoli-piceno":e,ascolipiceno:e,asti:e,at:e,av:e,avellino:e,ba:e,"balsan-sudtirol":e,"xn--balsan-sdtirol-nsb":e,"balsan-s\xFCdtirol":e,"balsan-suedtirol":e,balsan:e,bari:e,"barletta-trani-andria":e,barlettatraniandria:e,belluno:e,benevento:e,bergamo:e,bg:e,bi:e,biella:e,bl:e,bn:e,bo:e,bologna:e,"bolzano-altoadige":e,bolzano:e,"bozen-sudtirol":e,"xn--bozen-sdtirol-2ob":e,"bozen-s\xFCdtirol":e,"bozen-suedtirol":e,bozen:e,br:e,brescia:e,brindisi:e,bs:e,bt:e,"bulsan-sudtirol":e,"xn--bulsan-sdtirol-nsb":e,"bulsan-s\xFCdtirol":e,"bulsan-suedtirol":e,bulsan:e,bz:e,ca:e,cagliari:e,caltanissetta:e,"campidano-medio":e,campidanomedio:e,campobasso:e,"carbonia-iglesias":e,carboniaiglesias:e,"carrara-massa":e,carraramassa:e,caserta:e,catania:e,catanzaro:e,cb:e,ce:e,"cesena-forli":e,"xn--cesena-forl-mcb":e,"cesena-forl\xEC":e,cesenaforli:e,"xn--cesenaforl-i8a":e,cesenaforl\u00EC:e,ch:e,chieti:e,ci:e,cl:e,cn:e,co:e,como:e,cosenza:e,cr:e,cremona:e,crotone:e,cs:e,ct:e,cuneo:e,cz:e,"dell-ogliastra":e,dellogliastra:e,en:e,enna:e,fc:e,fe:e,fermo:e,ferrara:e,fg:e,fi:e,firenze:e,florence:e,fm:e,foggia:e,"forli-cesena":e,"xn--forl-cesena-fcb":e,"forl\xEC-cesena":e,forlicesena:e,"xn--forlcesena-c8a":e,forl\u00ECcesena:e,fr:e,frosinone:e,ge:e,genoa:e,genova:e,go:e,gorizia:e,gr:e,grosseto:e,"iglesias-carbonia":e,iglesiascarbonia:e,im:e,imperia:e,is:e,isernia:e,kr:e,"la-spezia":e,laquila:e,laspezia:e,latina:e,lc:e,le:e,lecce:e,lecco:e,li:e,livorno:e,lo:e,lodi:e,lt:e,lu:e,lucca:e,macerata:e,mantova:e,"massa-carrara":e,massacarrara:e,matera:e,mb:e,mc:e,me:e,"medio-campidano":e,mediocampidano:e,messina:e,mi:e,milan:e,milano:e,mn:e,mo:e,modena:e,"monza-brianza":e,"monza-e-della-brianza":e,monza:e,monzabrianza:e,monzaebrianza:e,monzaedellabrianza:e,ms:e,mt:e,na:e,naples:e,napoli:e,no:e,novara:e,nu:e,nuoro:e,og:e,ogliastra:e,"olbia-tempio":e,olbiatempio:e,or:e,oristano:e,ot:e,pa:e,padova:e,padua:e,palermo:e,parma:e,pavia:e,pc:e,pd:e,pe:e,perugia:e,"pesaro-urbino":e,pesarourbino:e,pescara:e,pg:e,pi:e,piacenza:e,pisa:e,pistoia:e,pn:e,po:e,pordenone:e,potenza:e,pr:e,prato:e,pt:e,pu:e,pv:e,pz:e,ra:e,ragusa:e,ravenna:e,rc:e,re:e,"reggio-calabria":e,"reggio-emilia":e,reggiocalabria:e,reggioemilia:e,rg:e,ri:e,rieti:e,rimini:e,rm:e,rn:e,ro:e,roma:e,rome:e,rovigo:e,sa:e,salerno:e,sassari:e,savona:e,si:e,siena:e,siracusa:e,so:e,sondrio:e,sp:e,sr:e,ss:e,suedtirol:e,"xn--sdtirol-n2a":e,s\u00FCdtirol:e,sv:e,ta:e,taranto:e,te:e,"tempio-olbia":e,tempioolbia:e,teramo:e,terni:e,tn:e,to:e,torino:e,tp:e,tr:e,"trani-andria-barletta":e,"trani-barletta-andria":e,traniandriabarletta:e,tranibarlettaandria:e,trapani:e,trento:e,treviso:e,trieste:e,ts:e,turin:e,tv:e,ud:e,udine:e,"urbino-pesaro":e,urbinopesaro:e,va:e,varese:e,vb:e,vc:e,ve:e,venezia:e,venice:e,verbania:e,vercelli:e,verona:e,vi:e,"vibo-valentia":e,vibovalentia:e,vicenza:e,viterbo:e,vr:e,vs:e,vt:e,vv:e,blogspot:t,ibxos:t,iliadboxos:t,neen:[0,{jc:t}],tim:[0,{open:[0,{jelastic:q}]}],"16-b":t,"32-b":t,"64-b":t,"123homepage":t,myspreadshop:t,syncloud:t}],je:[1,{co:e,net:e,org:e,of:t}],jm:V,jo:[1,{com:e,org:e,net:e,edu:e,sch:e,gov:e,mil:e,name:e}],jobs:e,jp:[1,{ac:e,ad:e,co:e,ed:e,go:e,gr:e,lg:e,ne:[1,{aseinet:fb,gehirn:t,ivory:t,"mail-box":t,mints:t,mokuren:t,opal:t,sakura:t,sumomo:t,topaz:t}],or:e,aichi:[1,{aisai:e,ama:e,anjo:e,asuke:e,chiryu:e,chita:e,fuso:e,gamagori:e,handa:e,hazu:e,hekinan:e,higashiura:e,ichinomiya:e,inazawa:e,inuyama:e,isshiki:e,iwakura:e,kanie:e,kariya:e,kasugai:e,kira:e,kiyosu:e,komaki:e,konan:e,kota:e,mihama:e,miyoshi:e,nishio:e,nisshin:e,obu:e,oguchi:e,oharu:e,okazaki:e,owariasahi:e,seto:e,shikatsu:e,shinshiro:e,shitara:e,tahara:e,takahama:e,tobishima:e,toei:e,togo:e,tokai:e,tokoname:e,toyoake:e,toyohashi:e,toyokawa:e,toyone:e,toyota:e,tsushima:e,yatomi:e}],akita:[1,{akita:e,daisen:e,fujisato:e,gojome:e,hachirogata:e,happou:e,higashinaruse:e,honjo:e,honjyo:e,ikawa:e,kamikoani:e,kamioka:e,katagami:e,kazuno:e,kitaakita:e,kosaka:e,kyowa:e,misato:e,mitane:e,moriyoshi:e,nikaho:e,noshiro:e,odate:e,oga:e,ogata:e,semboku:e,yokote:e,yurihonjo:e}],aomori:[1,{aomori:e,gonohe:e,hachinohe:e,hashikami:e,hiranai:e,hirosaki:e,itayanagi:e,kuroishi:e,misawa:e,mutsu:e,nakadomari:e,noheji:e,oirase:e,owani:e,rokunohe:e,sannohe:e,shichinohe:e,shingo:e,takko:e,towada:e,tsugaru:e,tsuruta:e}],chiba:[1,{abiko:e,asahi:e,chonan:e,chosei:e,choshi:e,chuo:e,funabashi:e,futtsu:e,hanamigawa:e,ichihara:e,ichikawa:e,ichinomiya:e,inzai:e,isumi:e,kamagaya:e,kamogawa:e,kashiwa:e,katori:e,katsuura:e,kimitsu:e,kisarazu:e,kozaki:e,kujukuri:e,kyonan:e,matsudo:e,midori:e,mihama:e,minamiboso:e,mobara:e,mutsuzawa:e,nagara:e,nagareyama:e,narashino:e,narita:e,noda:e,oamishirasato:e,omigawa:e,onjuku:e,otaki:e,sakae:e,sakura:e,shimofusa:e,shirako:e,shiroi:e,shisui:e,sodegaura:e,sosa:e,tako:e,tateyama:e,togane:e,tohnosho:e,tomisato:e,urayasu:e,yachimata:e,yachiyo:e,yokaichiba:e,yokoshibahikari:e,yotsukaido:e}],ehime:[1,{ainan:e,honai:e,ikata:e,imabari:e,iyo:e,kamijima:e,kihoku:e,kumakogen:e,masaki:e,matsuno:e,matsuyama:e,namikata:e,niihama:e,ozu:e,saijo:e,seiyo:e,shikokuchuo:e,tobe:e,toon:e,uchiko:e,uwajima:e,yawatahama:e}],fukui:[1,{echizen:e,eiheiji:e,fukui:e,ikeda:e,katsuyama:e,mihama:e,minamiechizen:e,obama:e,ohi:e,ono:e,sabae:e,sakai:e,takahama:e,tsuruga:e,wakasa:e}],fukuoka:[1,{ashiya:e,buzen:e,chikugo:e,chikuho:e,chikujo:e,chikushino:e,chikuzen:e,chuo:e,dazaifu:e,fukuchi:e,hakata:e,higashi:e,hirokawa:e,hisayama:e,iizuka:e,inatsuki:e,kaho:e,kasuga:e,kasuya:e,kawara:e,keisen:e,koga:e,kurate:e,kurogi:e,kurume:e,minami:e,miyako:e,miyama:e,miyawaka:e,mizumaki:e,munakata:e,nakagawa:e,nakama:e,nishi:e,nogata:e,ogori:e,okagaki:e,okawa:e,oki:e,omuta:e,onga:e,onojo:e,oto:e,saigawa:e,sasaguri:e,shingu:e,shinyoshitomi:e,shonai:e,soeda:e,sue:e,tachiarai:e,tagawa:e,takata:e,toho:e,toyotsu:e,tsuiki:e,ukiha:e,umi:e,usui:e,yamada:e,yame:e,yanagawa:e,yukuhashi:e}],fukushima:[1,{aizubange:e,aizumisato:e,aizuwakamatsu:e,asakawa:e,bandai:e,date:e,fukushima:e,furudono:e,futaba:e,hanawa:e,higashi:e,hirata:e,hirono:e,iitate:e,inawashiro:e,ishikawa:e,iwaki:e,izumizaki:e,kagamiishi:e,kaneyama:e,kawamata:e,kitakata:e,kitashiobara:e,koori:e,koriyama:e,kunimi:e,miharu:e,mishima:e,namie:e,nango:e,nishiaizu:e,nishigo:e,okuma:e,omotego:e,ono:e,otama:e,samegawa:e,shimogo:e,shirakawa:e,showa:e,soma:e,sukagawa:e,taishin:e,tamakawa:e,tanagura:e,tenei:e,yabuki:e,yamato:e,yamatsuri:e,yanaizu:e,yugawa:e}],gifu:[1,{anpachi:e,ena:e,gifu:e,ginan:e,godo:e,gujo:e,hashima:e,hichiso:e,hida:e,higashishirakawa:e,ibigawa:e,ikeda:e,kakamigahara:e,kani:e,kasahara:e,kasamatsu:e,kawaue:e,kitagata:e,mino:e,minokamo:e,mitake:e,mizunami:e,motosu:e,nakatsugawa:e,ogaki:e,sakahogi:e,seki:e,sekigahara:e,shirakawa:e,tajimi:e,takayama:e,tarui:e,toki:e,tomika:e,wanouchi:e,yamagata:e,yaotsu:e,yoro:e}],gunma:[1,{annaka:e,chiyoda:e,fujioka:e,higashiagatsuma:e,isesaki:e,itakura:e,kanna:e,kanra:e,katashina:e,kawaba:e,kiryu:e,kusatsu:e,maebashi:e,meiwa:e,midori:e,minakami:e,naganohara:e,nakanojo:e,nanmoku:e,numata:e,oizumi:e,ora:e,ota:e,shibukawa:e,shimonita:e,shinto:e,showa:e,takasaki:e,takayama:e,tamamura:e,tatebayashi:e,tomioka:e,tsukiyono:e,tsumagoi:e,ueno:e,yoshioka:e}],hiroshima:[1,{asaminami:e,daiwa:e,etajima:e,fuchu:e,fukuyama:e,hatsukaichi:e,higashihiroshima:e,hongo:e,jinsekikogen:e,kaita:e,kui:e,kumano:e,kure:e,mihara:e,miyoshi:e,naka:e,onomichi:e,osakikamijima:e,otake:e,saka:e,sera:e,seranishi:e,shinichi:e,shobara:e,takehara:e}],hokkaido:[1,{abashiri:e,abira:e,aibetsu:e,akabira:e,akkeshi:e,asahikawa:e,ashibetsu:e,ashoro:e,assabu:e,atsuma:e,bibai:e,biei:e,bifuka:e,bihoro:e,biratori:e,chippubetsu:e,chitose:e,date:e,ebetsu:e,embetsu:e,eniwa:e,erimo:e,esan:e,esashi:e,fukagawa:e,fukushima:e,furano:e,furubira:e,haboro:e,hakodate:e,hamatonbetsu:e,hidaka:e,higashikagura:e,higashikawa:e,hiroo:e,hokuryu:e,hokuto:e,honbetsu:e,horokanai:e,horonobe:e,ikeda:e,imakane:e,ishikari:e,iwamizawa:e,iwanai:e,kamifurano:e,kamikawa:e,kamishihoro:e,kamisunagawa:e,kamoenai:e,kayabe:e,kembuchi:e,kikonai:e,kimobetsu:e,kitahiroshima:e,kitami:e,kiyosato:e,koshimizu:e,kunneppu:e,kuriyama:e,kuromatsunai:e,kushiro:e,kutchan:e,kyowa:e,mashike:e,matsumae:e,mikasa:e,minamifurano:e,mombetsu:e,moseushi:e,mukawa:e,muroran:e,naie:e,nakagawa:e,nakasatsunai:e,nakatombetsu:e,nanae:e,nanporo:e,nayoro:e,nemuro:e,niikappu:e,niki:e,nishiokoppe:e,noboribetsu:e,numata:e,obihiro:e,obira:e,oketo:e,okoppe:e,otaru:e,otobe:e,otofuke:e,otoineppu:e,oumu:e,ozora:e,pippu:e,rankoshi:e,rebun:e,rikubetsu:e,rishiri:e,rishirifuji:e,saroma:e,sarufutsu:e,shakotan:e,shari:e,shibecha:e,shibetsu:e,shikabe:e,shikaoi:e,shimamaki:e,shimizu:e,shimokawa:e,shinshinotsu:e,shintoku:e,shiranuka:e,shiraoi:e,shiriuchi:e,sobetsu:e,sunagawa:e,taiki:e,takasu:e,takikawa:e,takinoue:e,teshikaga:e,tobetsu:e,tohma:e,tomakomai:e,tomari:e,toya:e,toyako:e,toyotomi:e,toyoura:e,tsubetsu:e,tsukigata:e,urakawa:e,urausu:e,uryu:e,utashinai:e,wakkanai:e,wassamu:e,yakumo:e,yoichi:e}],hyogo:[1,{aioi:e,akashi:e,ako:e,amagasaki:e,aogaki:e,asago:e,ashiya:e,awaji:e,fukusaki:e,goshiki:e,harima:e,himeji:e,ichikawa:e,inagawa:e,itami:e,kakogawa:e,kamigori:e,kamikawa:e,kasai:e,kasuga:e,kawanishi:e,miki:e,minamiawaji:e,nishinomiya:e,nishiwaki:e,ono:e,sanda:e,sannan:e,sasayama:e,sayo:e,shingu:e,shinonsen:e,shiso:e,sumoto:e,taishi:e,taka:e,takarazuka:e,takasago:e,takino:e,tamba:e,tatsuno:e,toyooka:e,yabu:e,yashiro:e,yoka:e,yokawa:e}],ibaraki:[1,{ami:e,asahi:e,bando:e,chikusei:e,daigo:e,fujishiro:e,hitachi:e,hitachinaka:e,hitachiomiya:e,hitachiota:e,ibaraki:e,ina:e,inashiki:e,itako:e,iwama:e,joso:e,kamisu:e,kasama:e,kashima:e,kasumigaura:e,koga:e,miho:e,mito:e,moriya:e,naka:e,namegata:e,oarai:e,ogawa:e,omitama:e,ryugasaki:e,sakai:e,sakuragawa:e,shimodate:e,shimotsuma:e,shirosato:e,sowa:e,suifu:e,takahagi:e,tamatsukuri:e,tokai:e,tomobe:e,tone:e,toride:e,tsuchiura:e,tsukuba:e,uchihara:e,ushiku:e,yachiyo:e,yamagata:e,yawara:e,yuki:e}],ishikawa:[1,{anamizu:e,hakui:e,hakusan:e,kaga:e,kahoku:e,kanazawa:e,kawakita:e,komatsu:e,nakanoto:e,nanao:e,nomi:e,nonoichi:e,noto:e,shika:e,suzu:e,tsubata:e,tsurugi:e,uchinada:e,wajima:e}],iwate:[1,{fudai:e,fujisawa:e,hanamaki:e,hiraizumi:e,hirono:e,ichinohe:e,ichinoseki:e,iwaizumi:e,iwate:e,joboji:e,kamaishi:e,kanegasaki:e,karumai:e,kawai:e,kitakami:e,kuji:e,kunohe:e,kuzumaki:e,miyako:e,mizusawa:e,morioka:e,ninohe:e,noda:e,ofunato:e,oshu:e,otsuchi:e,rikuzentakata:e,shiwa:e,shizukuishi:e,sumita:e,tanohata:e,tono:e,yahaba:e,yamada:e}],kagawa:[1,{ayagawa:e,higashikagawa:e,kanonji:e,kotohira:e,manno:e,marugame:e,mitoyo:e,naoshima:e,sanuki:e,tadotsu:e,takamatsu:e,tonosho:e,uchinomi:e,utazu:e,zentsuji:e}],kagoshima:[1,{akune:e,amami:e,hioki:e,isa:e,isen:e,izumi:e,kagoshima:e,kanoya:e,kawanabe:e,kinko:e,kouyama:e,makurazaki:e,matsumoto:e,minamitane:e,nakatane:e,nishinoomote:e,satsumasendai:e,soo:e,tarumizu:e,yusui:e}],kanagawa:[1,{aikawa:e,atsugi:e,ayase:e,chigasaki:e,ebina:e,fujisawa:e,hadano:e,hakone:e,hiratsuka:e,isehara:e,kaisei:e,kamakura:e,kiyokawa:e,matsuda:e,minamiashigara:e,miura:e,nakai:e,ninomiya:e,odawara:e,oi:e,oiso:e,sagamihara:e,samukawa:e,tsukui:e,yamakita:e,yamato:e,yokosuka:e,yugawara:e,zama:e,zushi:e}],kochi:[1,{aki:e,geisei:e,hidaka:e,higashitsuno:e,ino:e,kagami:e,kami:e,kitagawa:e,kochi:e,mihara:e,motoyama:e,muroto:e,nahari:e,nakamura:e,nankoku:e,nishitosa:e,niyodogawa:e,ochi:e,okawa:e,otoyo:e,otsuki:e,sakawa:e,sukumo:e,susaki:e,tosa:e,tosashimizu:e,toyo:e,tsuno:e,umaji:e,yasuda:e,yusuhara:e}],kumamoto:[1,{amakusa:e,arao:e,aso:e,choyo:e,gyokuto:e,kamiamakusa:e,kikuchi:e,kumamoto:e,mashiki:e,mifune:e,minamata:e,minamioguni:e,nagasu:e,nishihara:e,oguni:e,ozu:e,sumoto:e,takamori:e,uki:e,uto:e,yamaga:e,yamato:e,yatsushiro:e}],kyoto:[1,{ayabe:e,fukuchiyama:e,higashiyama:e,ide:e,ine:e,joyo:e,kameoka:e,kamo:e,kita:e,kizu:e,kumiyama:e,kyotamba:e,kyotanabe:e,kyotango:e,maizuru:e,minami:e,minamiyamashiro:e,miyazu:e,muko:e,nagaokakyo:e,nakagyo:e,nantan:e,oyamazaki:e,sakyo:e,seika:e,tanabe:e,uji:e,ujitawara:e,wazuka:e,yamashina:e,yawata:e}],mie:[1,{asahi:e,inabe:e,ise:e,kameyama:e,kawagoe:e,kiho:e,kisosaki:e,kiwa:e,komono:e,kumano:e,kuwana:e,matsusaka:e,meiwa:e,mihama:e,minamiise:e,misugi:e,miyama:e,nabari:e,shima:e,suzuka:e,tado:e,taiki:e,taki:e,tamaki:e,toba:e,tsu:e,udono:e,ureshino:e,watarai:e,yokkaichi:e}],miyagi:[1,{furukawa:e,higashimatsushima:e,ishinomaki:e,iwanuma:e,kakuda:e,kami:e,kawasaki:e,marumori:e,matsushima:e,minamisanriku:e,misato:e,murata:e,natori:e,ogawara:e,ohira:e,onagawa:e,osaki:e,rifu:e,semine:e,shibata:e,shichikashuku:e,shikama:e,shiogama:e,shiroishi:e,tagajo:e,taiwa:e,tome:e,tomiya:e,wakuya:e,watari:e,yamamoto:e,zao:e}],miyazaki:[1,{aya:e,ebino:e,gokase:e,hyuga:e,kadogawa:e,kawaminami:e,kijo:e,kitagawa:e,kitakata:e,kitaura:e,kobayashi:e,kunitomi:e,kushima:e,mimata:e,miyakonojo:e,miyazaki:e,morotsuka:e,nichinan:e,nishimera:e,nobeoka:e,saito:e,shiiba:e,shintomi:e,takaharu:e,takanabe:e,takazaki:e,tsuno:e}],nagano:[1,{achi:e,agematsu:e,anan:e,aoki:e,asahi:e,azumino:e,chikuhoku:e,chikuma:e,chino:e,fujimi:e,hakuba:e,hara:e,hiraya:e,iida:e,iijima:e,iiyama:e,iizuna:e,ikeda:e,ikusaka:e,ina:e,karuizawa:e,kawakami:e,kiso:e,kisofukushima:e,kitaaiki:e,komagane:e,komoro:e,matsukawa:e,matsumoto:e,miasa:e,minamiaiki:e,minamimaki:e,minamiminowa:e,minowa:e,miyada:e,miyota:e,mochizuki:e,nagano:e,nagawa:e,nagiso:e,nakagawa:e,nakano:e,nozawaonsen:e,obuse:e,ogawa:e,okaya:e,omachi:e,omi:e,ookuwa:e,ooshika:e,otaki:e,otari:e,sakae:e,sakaki:e,saku:e,sakuho:e,shimosuwa:e,shinanomachi:e,shiojiri:e,suwa:e,suzaka:e,takagi:e,takamori:e,takayama:e,tateshina:e,tatsuno:e,togakushi:e,togura:e,tomi:e,ueda:e,wada:e,yamagata:e,yamanouchi:e,yasaka:e,yasuoka:e}],nagasaki:[1,{chijiwa:e,futsu:e,goto:e,hasami:e,hirado:e,iki:e,isahaya:e,kawatana:e,kuchinotsu:e,matsuura:e,nagasaki:e,obama:e,omura:e,oseto:e,saikai:e,sasebo:e,seihi:e,shimabara:e,shinkamigoto:e,togitsu:e,tsushima:e,unzen:e}],nara:[1,{ando:e,gose:e,heguri:e,higashiyoshino:e,ikaruga:e,ikoma:e,kamikitayama:e,kanmaki:e,kashiba:e,kashihara:e,katsuragi:e,kawai:e,kawakami:e,kawanishi:e,koryo:e,kurotaki:e,mitsue:e,miyake:e,nara:e,nosegawa:e,oji:e,ouda:e,oyodo:e,sakurai:e,sango:e,shimoichi:e,shimokitayama:e,shinjo:e,soni:e,takatori:e,tawaramoto:e,tenkawa:e,tenri:e,uda:e,yamatokoriyama:e,yamatotakada:e,yamazoe:e,yoshino:e}],niigata:[1,{aga:e,agano:e,gosen:e,itoigawa:e,izumozaki:e,joetsu:e,kamo:e,kariwa:e,kashiwazaki:e,minamiuonuma:e,mitsuke:e,muika:e,murakami:e,myoko:e,nagaoka:e,niigata:e,ojiya:e,omi:e,sado:e,sanjo:e,seiro:e,seirou:e,sekikawa:e,shibata:e,tagami:e,tainai:e,tochio:e,tokamachi:e,tsubame:e,tsunan:e,uonuma:e,yahiko:e,yoita:e,yuzawa:e}],oita:[1,{beppu:e,bungoono:e,bungotakada:e,hasama:e,hiji:e,himeshima:e,hita:e,kamitsue:e,kokonoe:e,kuju:e,kunisaki:e,kusu:e,oita:e,saiki:e,taketa:e,tsukumi:e,usa:e,usuki:e,yufu:e}],okayama:[1,{akaiwa:e,asakuchi:e,bizen:e,hayashima:e,ibara:e,kagamino:e,kasaoka:e,kibichuo:e,kumenan:e,kurashiki:e,maniwa:e,misaki:e,nagi:e,niimi:e,nishiawakura:e,okayama:e,satosho:e,setouchi:e,shinjo:e,shoo:e,soja:e,takahashi:e,tamano:e,tsuyama:e,wake:e,yakage:e}],okinawa:[1,{aguni:e,ginowan:e,ginoza:e,gushikami:e,haebaru:e,higashi:e,hirara:e,iheya:e,ishigaki:e,ishikawa:e,itoman:e,izena:e,kadena:e,kin:e,kitadaito:e,kitanakagusuku:e,kumejima:e,kunigami:e,minamidaito:e,motobu:e,nago:e,naha:e,nakagusuku:e,nakijin:e,nanjo:e,nishihara:e,ogimi:e,okinawa:e,onna:e,shimoji:e,taketomi:e,tarama:e,tokashiki:e,tomigusuku:e,tonaki:e,urasoe:e,uruma:e,yaese:e,yomitan:e,yonabaru:e,yonaguni:e,zamami:e}],osaka:[1,{abeno:e,chihayaakasaka:e,chuo:e,daito:e,fujiidera:e,habikino:e,hannan:e,higashiosaka:e,higashisumiyoshi:e,higashiyodogawa:e,hirakata:e,ibaraki:e,ikeda:e,izumi:e,izumiotsu:e,izumisano:e,kadoma:e,kaizuka:e,kanan:e,kashiwara:e,katano:e,kawachinagano:e,kishiwada:e,kita:e,kumatori:e,matsubara:e,minato:e,minoh:e,misaki:e,moriguchi:e,neyagawa:e,nishi:e,nose:e,osakasayama:e,sakai:e,sayama:e,sennan:e,settsu:e,shijonawate:e,shimamoto:e,suita:e,tadaoka:e,taishi:e,tajiri:e,takaishi:e,takatsuki:e,tondabayashi:e,toyonaka:e,toyono:e,yao:e}],saga:[1,{ariake:e,arita:e,fukudomi:e,genkai:e,hamatama:e,hizen:e,imari:e,kamimine:e,kanzaki:e,karatsu:e,kashima:e,kitagata:e,kitahata:e,kiyama:e,kouhoku:e,kyuragi:e,nishiarita:e,ogi:e,omachi:e,ouchi:e,saga:e,shiroishi:e,taku:e,tara:e,tosu:e,yoshinogari:e}],saitama:[1,{arakawa:e,asaka:e,chichibu:e,fujimi:e,fujimino:e,fukaya:e,hanno:e,hanyu:e,hasuda:e,hatogaya:e,hatoyama:e,hidaka:e,higashichichibu:e,higashimatsuyama:e,honjo:e,ina:e,iruma:e,iwatsuki:e,kamiizumi:e,kamikawa:e,kamisato:e,kasukabe:e,kawagoe:e,kawaguchi:e,kawajima:e,kazo:e,kitamoto:e,koshigaya:e,kounosu:e,kuki:e,kumagaya:e,matsubushi:e,minano:e,misato:e,miyashiro:e,miyoshi:e,moroyama:e,nagatoro:e,namegawa:e,niiza:e,ogano:e,ogawa:e,ogose:e,okegawa:e,omiya:e,otaki:e,ranzan:e,ryokami:e,saitama:e,sakado:e,satte:e,sayama:e,shiki:e,shiraoka:e,soka:e,sugito:e,toda:e,tokigawa:e,tokorozawa:e,tsurugashima:e,urawa:e,warabi:e,yashio:e,yokoze:e,yono:e,yorii:e,yoshida:e,yoshikawa:e,yoshimi:e}],shiga:[1,{aisho:e,gamo:e,higashiomi:e,hikone:e,koka:e,konan:e,kosei:e,koto:e,kusatsu:e,maibara:e,moriyama:e,nagahama:e,nishiazai:e,notogawa:e,omihachiman:e,otsu:e,ritto:e,ryuoh:e,takashima:e,takatsuki:e,torahime:e,toyosato:e,yasu:e}],shimane:[1,{akagi:e,ama:e,gotsu:e,hamada:e,higashiizumo:e,hikawa:e,hikimi:e,izumo:e,kakinoki:e,masuda:e,matsue:e,misato:e,nishinoshima:e,ohda:e,okinoshima:e,okuizumo:e,shimane:e,tamayu:e,tsuwano:e,unnan:e,yakumo:e,yasugi:e,yatsuka:e}],shizuoka:[1,{arai:e,atami:e,fuji:e,fujieda:e,fujikawa:e,fujinomiya:e,fukuroi:e,gotemba:e,haibara:e,hamamatsu:e,higashiizu:e,ito:e,iwata:e,izu:e,izunokuni:e,kakegawa:e,kannami:e,kawanehon:e,kawazu:e,kikugawa:e,kosai:e,makinohara:e,matsuzaki:e,minamiizu:e,mishima:e,morimachi:e,nishiizu:e,numazu:e,omaezaki:e,shimada:e,shimizu:e,shimoda:e,shizuoka:e,susono:e,yaizu:e,yoshida:e}],tochigi:[1,{ashikaga:e,bato:e,haga:e,ichikai:e,iwafune:e,kaminokawa:e,kanuma:e,karasuyama:e,kuroiso:e,mashiko:e,mibu:e,moka:e,motegi:e,nasu:e,nasushiobara:e,nikko:e,nishikata:e,nogi:e,ohira:e,ohtawara:e,oyama:e,sakura:e,sano:e,shimotsuke:e,shioya:e,takanezawa:e,tochigi:e,tsuga:e,ujiie:e,utsunomiya:e,yaita:e}],tokushima:[1,{aizumi:e,anan:e,ichiba:e,itano:e,kainan:e,komatsushima:e,matsushige:e,mima:e,minami:e,miyoshi:e,mugi:e,nakagawa:e,naruto:e,sanagochi:e,shishikui:e,tokushima:e,wajiki:e}],tokyo:[1,{adachi:e,akiruno:e,akishima:e,aogashima:e,arakawa:e,bunkyo:e,chiyoda:e,chofu:e,chuo:e,edogawa:e,fuchu:e,fussa:e,hachijo:e,hachioji:e,hamura:e,higashikurume:e,higashimurayama:e,higashiyamato:e,hino:e,hinode:e,hinohara:e,inagi:e,itabashi:e,katsushika:e,kita:e,kiyose:e,kodaira:e,koganei:e,kokubunji:e,komae:e,koto:e,kouzushima:e,kunitachi:e,machida:e,meguro:e,minato:e,mitaka:e,mizuho:e,musashimurayama:e,musashino:e,nakano:e,nerima:e,ogasawara:e,okutama:e,ome:e,oshima:e,ota:e,setagaya:e,shibuya:e,shinagawa:e,shinjuku:e,suginami:e,sumida:e,tachikawa:e,taito:e,tama:e,toshima:e}],tottori:[1,{chizu:e,hino:e,kawahara:e,koge:e,kotoura:e,misasa:e,nanbu:e,nichinan:e,sakaiminato:e,tottori:e,wakasa:e,yazu:e,yonago:e}],toyama:[1,{asahi:e,fuchu:e,fukumitsu:e,funahashi:e,himi:e,imizu:e,inami:e,johana:e,kamiichi:e,kurobe:e,nakaniikawa:e,namerikawa:e,nanto:e,nyuzen:e,oyabe:e,taira:e,takaoka:e,tateyama:e,toga:e,tonami:e,toyama:e,unazuki:e,uozu:e,yamada:e}],wakayama:[1,{arida:e,aridagawa:e,gobo:e,hashimoto:e,hidaka:e,hirogawa:e,inami:e,iwade:e,kainan:e,kamitonda:e,katsuragi:e,kimino:e,kinokawa:e,kitayama:e,koya:e,koza:e,kozagawa:e,kudoyama:e,kushimoto:e,mihama:e,misato:e,nachikatsuura:e,shingu:e,shirahama:e,taiji:e,tanabe:e,wakayama:e,yuasa:e,yura:e}],yamagata:[1,{asahi:e,funagata:e,higashine:e,iide:e,kahoku:e,kaminoyama:e,kaneyama:e,kawanishi:e,mamurogawa:e,mikawa:e,murayama:e,nagai:e,nakayama:e,nanyo:e,nishikawa:e,obanazawa:e,oe:e,oguni:e,ohkura:e,oishida:e,sagae:e,sakata:e,sakegawa:e,shinjo:e,shirataka:e,shonai:e,takahata:e,tendo:e,tozawa:e,tsuruoka:e,yamagata:e,yamanobe:e,yonezawa:e,yuza:e}],yamaguchi:[1,{abu:e,hagi:e,hikari:e,hofu:e,iwakuni:e,kudamatsu:e,mitou:e,nagato:e,oshima:e,shimonoseki:e,shunan:e,tabuse:e,tokuyama:e,toyota:e,ube:e,yuu:e}],yamanashi:[1,{chuo:e,doshi:e,fuefuki:e,fujikawa:e,fujikawaguchiko:e,fujiyoshida:e,hayakawa:e,hokuto:e,ichikawamisato:e,kai:e,kofu:e,koshu:e,kosuge:e,"minami-alps":e,minobu:e,nakamichi:e,nanbu:e,narusawa:e,nirasaki:e,nishikatsura:e,oshino:e,otsuki:e,showa:e,tabayama:e,tsuru:e,uenohara:e,yamanakako:e,yamanashi:e}],"xn--4pvxs":e,\u6803\u6728:e,"xn--vgu402c":e,\u611B\u77E5:e,"xn--c3s14m":e,\u611B\u5A9B:e,"xn--f6qx53a":e,\u5175\u5EAB:e,"xn--8pvr4u":e,\u718A\u672C:e,"xn--uist22h":e,\u8328\u57CE:e,"xn--djrs72d6uy":e,\u5317\u6D77\u9053:e,"xn--mkru45i":e,\u5343\u8449:e,"xn--0trq7p7nn":e,\u548C\u6B4C\u5C71:e,"xn--8ltr62k":e,\u9577\u5D0E:e,"xn--2m4a15e":e,\u9577\u91CE:e,"xn--efvn9s":e,\u65B0\u6F5F:e,"xn--32vp30h":e,\u9752\u68EE:e,"xn--4it797k":e,\u9759\u5CA1:e,"xn--1lqs71d":e,\u6771\u4EAC:e,"xn--5rtp49c":e,\u77F3\u5DDD:e,"xn--5js045d":e,\u57FC\u7389:e,"xn--ehqz56n":e,\u4E09\u91CD:e,"xn--1lqs03n":e,\u4EAC\u90FD:e,"xn--qqqt11m":e,\u4F50\u8CC0:e,"xn--kbrq7o":e,\u5927\u5206:e,"xn--pssu33l":e,\u5927\u962A:e,"xn--ntsq17g":e,\u5948\u826F:e,"xn--uisz3g":e,\u5BAE\u57CE:e,"xn--6btw5a":e,\u5BAE\u5D0E:e,"xn--1ctwo":e,\u5BCC\u5C71:e,"xn--6orx2r":e,\u5C71\u53E3:e,"xn--rht61e":e,\u5C71\u5F62:e,"xn--rht27z":e,\u5C71\u68A8:e,"xn--djty4k":e,\u5CA9\u624B:e,"xn--nit225k":e,\u5C90\u961C:e,"xn--rht3d":e,\u5CA1\u5C71:e,"xn--klty5x":e,\u5CF6\u6839:e,"xn--kltx9a":e,\u5E83\u5CF6:e,"xn--kltp7d":e,\u5FB3\u5CF6:e,"xn--uuwu58a":e,\u6C96\u7E04:e,"xn--zbx025d":e,\u6ECB\u8CC0:e,"xn--ntso0iqx3a":e,\u795E\u5948\u5DDD:e,"xn--elqq16h":e,\u798F\u4E95:e,"xn--4it168d":e,\u798F\u5CA1:e,"xn--klt787d":e,\u798F\u5CF6:e,"xn--rny31h":e,\u79CB\u7530:e,"xn--7t0a264c":e,\u7FA4\u99AC:e,"xn--5rtq34k":e,\u9999\u5DDD:e,"xn--k7yn95e":e,\u9AD8\u77E5:e,"xn--tor131o":e,\u9CE5\u53D6:e,"xn--d5qv7z876c":e,\u9E7F\u5150\u5CF6:e,kawasaki:V,kitakyushu:V,kobe:V,nagoya:V,sapporo:V,sendai:V,yokohama:V,buyshop:t,fashionstore:t,handcrafted:t,kawaiishop:t,supersale:t,theshop:t,usercontent:t,angry:t,babyblue:t,babymilk:t,backdrop:t,bambina:t,bitter:t,blush:t,boo:t,boy:t,boyfriend:t,but:t,candypop:t,capoo:t,catfood:t,cheap:t,chicappa:t,chillout:t,chips:t,chowder:t,chu:t,ciao:t,cocotte:t,coolblog:t,cranky:t,cutegirl:t,daa:t,deca:t,deci:t,digick:t,egoism:t,fakefur:t,fem:t,flier:t,floppy:t,fool:t,frenchkiss:t,girlfriend:t,girly:t,gloomy:t,gonna:t,greater:t,hacca:t,heavy:t,her:t,hiho:t,hippy:t,holy:t,hungry:t,icurus:t,itigo:t,jellybean:t,kikirara:t,kill:t,kilo:t,kuron:t,littlestar:t,lolipopmc:t,lolitapunk:t,lomo:t,lovepop:t,lovesick:t,main:t,mods:t,mond:t,mongolian:t,moo:t,namaste:t,nikita:t,nobushi:t,noor:t,oops:t,parallel:t,parasite:t,pecori:t,peewee:t,penne:t,pepper:t,perma:t,pigboat:t,pinoko:t,punyu:t,pupu:t,pussycat:t,pya:t,raindrop:t,readymade:t,sadist:t,schoolbus:t,secret:t,staba:t,stripper:t,sub:t,sunnyday:t,thick:t,tonkotsu:t,under:t,upper:t,velvet:t,verse:t,versus:t,vivian:t,watson:t,weblike:t,whitesnow:t,zombie:t,blogspot:t,"2-d":t,bona:t,crap:t,daynight:t,eek:t,flop:t,halfmoon:t,jeez:t,matrix:t,mimoza:t,netgamers:t,nyanta:t,o0o0:t,rdy:t,rgr:t,rulez:t,sakurastorage:[0,{isk01:vp,isk02:vp}],saloon:t,sblo:t,skr:t,tank:t,"uh-oh":t,undo:t,webaccel:[0,{rs:t,user:t}],websozai:t,xii:t}],ke:[1,{ac:e,co:o,go:e,info:e,me:e,mobi:e,ne:e,or:e,sc:e}],kg:[1,{org:e,net:e,com:e,edu:e,gov:e,mil:e,blog:t,io:t,jp:t,tv:t,uk:t,us:t}],kh:V,ki:gb,km:[1,{org:e,nom:e,gov:e,prd:e,tm:e,edu:e,mil:e,ass:e,com:e,coop:e,asso:e,presse:e,medecin:e,notaires:e,pharmaciens:e,veterinaire:e,gouv:e}],kn:[1,{net:e,org:e,edu:e,gov:e}],kp:[1,{com:e,edu:e,gov:e,org:e,rep:e,tra:e}],kr:[1,{ac:e,co:e,es:e,go:e,hs:e,kg:e,mil:e,ms:e,ne:e,or:e,pe:e,re:e,sc:e,busan:e,chungbuk:e,chungnam:e,daegu:e,daejeon:e,gangwon:e,gwangju:e,gyeongbuk:e,gyeonggi:e,gyeongnam:e,incheon:e,jeju:e,jeonbuk:e,jeonnam:e,seoul:e,ulsan:e,blogspot:t}],kw:[1,{com:e,edu:e,emb:e,gov:e,ind:e,net:e,org:e}],ky:pb,kz:[1,{org:e,edu:e,net:e,gov:e,mil:e,com:e,jcloud:t,kazteleport:[0,{upaas:t}]}],la:[1,{int:e,net:e,info:e,edu:e,gov:e,per:e,com:e,org:e,bnr:t,c:t}],lb:r,lc:[1,{com:e,net:e,co:e,org:e,edu:e,gov:e,oy:t}],li:[1,{blogspot:t,caa:t}],lk:[1,{gov:e,sch:e,net:e,int:e,com:e,org:e,edu:e,ngo:e,soc:e,web:e,ltd:e,assn:e,grp:e,hotel:e,ac:e}],lr:r,ls:[1,{ac:e,biz:e,co:e,edu:e,gov:e,info:e,net:e,org:e,sc:e,de:t}],lt:yb,lu:[1,{blogspot:t,"123website":t}],lv:[1,{com:e,edu:e,gov:e,org:e,mil:e,id:e,net:e,asn:e,conf:e}],ly:[1,{com:e,net:e,gov:e,plc:e,edu:e,sch:e,med:e,org:e,id:e}],ma:[1,{co:e,net:e,gov:e,org:e,ac:e,press:e}],mc:[1,{tm:e,asso:e}],md:[1,{blogspot:t,at:t,de:t,jp:t,to:t}],me:[1,{co:e,net:e,org:e,edu:e,ac:e,gov:e,its:e,priv:e,c66:t,daplie:[2,{localhost:t}],edgestack:t,filegear:t,"filegear-au":t,"filegear-de":t,"filegear-gb":t,"filegear-ie":t,"filegear-jp":t,"filegear-sg":t,glitch:t,ravendb:t,lohmus:t,barsy:t,mcpe:t,mcdir:t,soundcast:t,tcp4:t,brasilia:t,ddns:t,dnsfor:t,hopto:t,loginto:t,noip:t,webhop:t,vp4:t,diskstation:t,dscloud:t,i234:t,myds:t,synology:t,transip:db,wedeploy:t,yombo:t,nohost:t}],mg:[1,{org:e,nom:e,gov:e,prd:e,tm:e,edu:e,mil:e,com:e,co:e}],mh:e,mil:e,mk:[1,{com:e,org:e,net:e,edu:e,gov:e,inf:e,name:e,blogspot:t}],ml:[1,{com:e,edu:e,gouv:e,gov:e,net:e,org:e,presse:e}],mm:V,mn:[1,{gov:e,edu:e,org:e,nyc:t}],mo:r,mobi:[1,{barsy:t,dscloud:t}],mp:[1,{ju:t}],mq:e,mr:yb,ms:[1,{com:e,edu:e,gov:e,net:e,org:e,lab:t,minisite:t}],mt:[1,{com:o,edu:e,net:e,org:e}],mu:[1,{com:e,net:e,org:e,gov:e,ac:e,co:e,or:e}],museum:e,mv:[1,{aero:e,biz:e,com:e,coop:e,edu:e,gov:e,info:e,int:e,mil:e,museum:e,name:e,net:e,org:e,pro:e}],mw:[1,{ac:e,biz:e,co:e,com:e,coop:e,edu:e,gov:e,int:e,museum:e,net:e,org:e}],mx:[1,{com:e,org:e,gob:e,edu:e,net:e,blogspot:t}],my:[1,{biz:e,com:e,edu:e,gov:e,mil:e,name:e,net:e,org:e,blogspot:t}],mz:[1,{ac:e,adv:e,co:e,edu:e,gov:e,mil:e,net:e,org:e}],na:[1,{info:e,pro:e,name:e,school:e,or:e,dr:e,us:e,mx:e,ca:e,in:e,cc:e,tv:e,ws:e,mobi:e,co:e,com:e,org:e}],name:[1,{her:bb,his:bb}],nc:[1,{asso:e,nom:e}],ne:e,net:[1,{adobeaemcloud:t,"adobeio-static":t,adobeioruntime:t,akadns:t,akamai:t,"akamai-staging":t,akamaiedge:t,"akamaiedge-staging":t,akamaihd:t,"akamaihd-staging":t,akamaiorigin:t,"akamaiorigin-staging":t,akamaized:t,"akamaized-staging":t,edgekey:t,"edgekey-staging":t,edgesuite:t,"edgesuite-staging":t,alwaysdata:t,myamaze:t,cloudfront:t,t3l3p0rt:t,appudo:t,"atlassian-dev":[0,{prod:[0,{cdn:t}]}],myfritz:t,onavstack:t,shopselect:t,blackbaudcdn:t,boomla:t,bplaced:t,square7:t,gb:t,hu:t,jp:t,se:t,uk:t,in:t,clickrising:t,cloudaccess:t,"cdn77-ssl":t,cdn77:[0,{r:t}],"feste-ip":t,"knx-server":t,"static-access":t,cryptonomic:n,dattolocal:t,mydatto:t,debian:t,bitbridge:t,"at-band-camp":t,blogdns:t,"broke-it":t,buyshouses:t,dnsalias:t,dnsdojo:t,"does-it":t,dontexist:t,dynalias:t,dynathome:t,endofinternet:t,"from-az":t,"from-co":t,"from-la":t,"from-ny":t,"gets-it":t,"ham-radio-op":t,homeftp:t,homeip:t,homelinux:t,homeunix:t,"in-the-band":t,"is-a-chef":t,"is-a-geek":t,"isa-geek":t,"kicks-ass":t,"office-on-the":t,podzone:t,"scrapper-site":t,selfip:t,"sells-it":t,servebbs:t,serveftp:t,thruhere:t,webhop:t,definima:t,casacam:t,dynu:t,dynv6:t,twmail:t,ru:t,channelsdvr:[2,{u:t}],fastlylb:[2,{map:t}],fastly:[0,{freetls:t,map:t,prod:[0,{a:t,global:t}],ssl:[0,{a:t,b:t,global:t}]}],edgeapp:t,flynnhosting:t,"cdn-edges":t,heteml:t,cloudfunctions:t,moonscale:t,"in-dsl":t,"in-vpn":t,ipifony:t,iobb:t,cloudjiffy:[2,{"fra1-de":t,"west1-us":t}],elastx:[0,{"jls-sto1":t,"jls-sto2":t,"jls-sto3":t}],faststacks:t,massivegrid:[0,{paas:[0,{"fr-1":t,"lon-1":t,"lon-2":t,"ny-1":t,"ny-2":t,"sg-1":t}]}],saveincloud:[0,{jelastic:t,"nordeste-idc":t}],scaleforce:gp,tsukaeru:yp,kinghost:t,uni5:t,krellian:t,barsy:t,memset:t,azurewebsites:t,"azure-mobile":t,cloudapp:t,azurestaticapps:[2,{1:t,2:t,3:t,4:t,5:t,6:t,7:t,centralus:t,eastasia:t,eastus2:t,westeurope:t,westus2:t}],dnsup:t,hicam:t,"now-dns":t,ownip:t,vpndns:t,"eating-organic":t,mydissent:t,myeffect:t,mymediapc:t,mypsx:t,mysecuritycamera:t,nhlfan:t,"no-ip":t,pgafan:t,privatizehealthinsurance:t,bounceme:t,ddns:t,redirectme:t,serveblog:t,serveminecraft:t,sytes:t,cloudycluster:t,ovh:[0,{webpaas:n,hosting:n}],bar0:t,bar1:t,bar2:t,rackmaze:t,squares:t,schokokeks:t,"firewall-gateway":t,seidat:t,senseering:t,siteleaf:t,"vps-host":[2,{jelastic:[0,{atl:t,njs:t,ric:t}]}],myspreadshop:t,srcf:[0,{soc:t,user:t}],supabase:t,dsmynas:t,familyds:t,tailscale:[0,{beta:t}],ts:t,torproject:[2,{pages:t}],"reserve-online":t,"community-pro":t,meinforum:t,yandexcloud:[2,{storage:t,website:t}],za:t}],nf:[1,{com:e,net:e,per:e,rec:e,web:e,arts:e,firm:e,info:e,other:e,store:e}],ng:[1,{com:o,edu:e,gov:e,i:e,mil:e,mobi:e,name:e,net:e,org:e,sch:e,col:t,firm:t,gen:t,ltd:t,ngo:t}],ni:[1,{ac:e,biz:e,co:e,com:e,edu:e,gob:e,in:e,info:e,int:e,mil:e,net:e,nom:e,org:e,web:e}],nl:[1,{co:t,"hosting-cluster":t,blogspot:t,gov:t,khplay:t,"123website":t,myspreadshop:t,transurl:n,cistron:t,demon:t}],no:[1,{fhs:e,vgs:e,fylkesbibl:e,folkebibl:e,museum:e,idrett:e,priv:e,mil:e,stat:e,dep:e,kommune:e,herad:e,aa:yt,ah:yt,bu:yt,fm:yt,hl:yt,hm:yt,"jan-mayen":yt,mr:yt,nl:yt,nt:yt,of:yt,ol:yt,oslo:yt,rl:yt,sf:yt,st:yt,svalbard:yt,tm:yt,tr:yt,va:yt,vf:yt,akrehamn:e,"xn--krehamn-dxa":e,\u00E5krehamn:e,algard:e,"xn--lgrd-poac":e,\u00E5lg\u00E5rd:e,arna:e,brumunddal:e,bryne:e,bronnoysund:e,"xn--brnnysund-m8ac":e,br\u00F8nn\u00F8ysund:e,drobak:e,"xn--drbak-wua":e,dr\u00F8bak:e,egersund:e,fetsund:e,floro:e,"xn--flor-jra":e,flor\u00F8:e,fredrikstad:e,hokksund:e,honefoss:e,"xn--hnefoss-q1a":e,h\u00F8nefoss:e,jessheim:e,jorpeland:e,"xn--jrpeland-54a":e,j\u00F8rpeland:e,kirkenes:e,kopervik:e,krokstadelva:e,langevag:e,"xn--langevg-jxa":e,langev\u00E5g:e,leirvik:e,mjondalen:e,"xn--mjndalen-64a":e,mj\u00F8ndalen:e,"mo-i-rana":e,mosjoen:e,"xn--mosjen-eya":e,mosj\u00F8en:e,nesoddtangen:e,orkanger:e,osoyro:e,"xn--osyro-wua":e,os\u00F8yro:e,raholt:e,"xn--rholt-mra":e,r\u00E5holt:e,sandnessjoen:e,"xn--sandnessjen-ogb":e,sandnessj\u00F8en:e,skedsmokorset:e,slattum:e,spjelkavik:e,stathelle:e,stavern:e,stjordalshalsen:e,"xn--stjrdalshalsen-sqb":e,stj\u00F8rdalshalsen:e,tananger:e,tranby:e,vossevangen:e,afjord:e,"xn--fjord-lra":e,\u00E5fjord:e,agdenes:e,al:e,"xn--l-1fa":e,\u00E5l:e,alesund:e,"xn--lesund-hua":e,\u00E5lesund:e,alstahaug:e,alta:e,"xn--lt-liac":e,\u00E1lt\u00E1:e,alaheadju:e,"xn--laheadju-7ya":e,\u00E1laheadju:e,alvdal:e,amli:e,"xn--mli-tla":e,\u00E5mli:e,amot:e,"xn--mot-tla":e,\u00E5mot:e,andebu:e,andoy:e,"xn--andy-ira":e,and\u00F8y:e,andasuolo:e,ardal:e,"xn--rdal-poa":e,\u00E5rdal:e,aremark:e,arendal:e,"xn--s-1fa":e,\u00E5s:e,aseral:e,"xn--seral-lra":e,\u00E5seral:e,asker:e,askim:e,askvoll:e,askoy:e,"xn--asky-ira":e,ask\u00F8y:e,asnes:e,"xn--snes-poa":e,\u00E5snes:e,audnedaln:e,aukra:e,aure:e,aurland:e,"aurskog-holand":e,"xn--aurskog-hland-jnb":e,"aurskog-h\xF8land":e,austevoll:e,austrheim:e,averoy:e,"xn--avery-yua":e,aver\u00F8y:e,balestrand:e,ballangen:e,balat:e,"xn--blt-elab":e,b\u00E1l\u00E1t:e,balsfjord:e,bahccavuotna:e,"xn--bhccavuotna-k7a":e,b\u00E1hccavuotna:e,bamble:e,bardu:e,beardu:e,beiarn:e,bajddar:e,"xn--bjddar-pta":e,b\u00E1jddar:e,baidar:e,"xn--bidr-5nac":e,b\u00E1id\u00E1r:e,berg:e,bergen:e,berlevag:e,"xn--berlevg-jxa":e,berlev\u00E5g:e,bearalvahki:e,"xn--bearalvhki-y4a":e,bearalv\u00E1hki:e,bindal:e,birkenes:e,bjarkoy:e,"xn--bjarky-fya":e,bjark\u00F8y:e,bjerkreim:e,bjugn:e,bodo:e,"xn--bod-2na":e,bod\u00F8:e,badaddja:e,"xn--bdddj-mrabd":e,b\u00E5d\u00E5ddj\u00E5:e,budejju:e,bokn:e,bremanger:e,bronnoy:e,"xn--brnny-wuac":e,br\u00F8nn\u00F8y:e,bygland:e,bykle:e,barum:e,"xn--brum-voa":e,b\u00E6rum:e,telemark:[0,{bo:e,"xn--b-5ga":e,b\u00F8:e}],nordland:[0,{bo:e,"xn--b-5ga":e,b\u00F8:e,heroy:e,"xn--hery-ira":e,her\u00F8y:e}],bievat:e,"xn--bievt-0qa":e,biev\u00E1t:e,bomlo:e,"xn--bmlo-gra":e,b\u00F8mlo:e,batsfjord:e,"xn--btsfjord-9za":e,b\u00E5tsfjord:e,bahcavuotna:e,"xn--bhcavuotna-s4a":e,b\u00E1hcavuotna:e,dovre:e,drammen:e,drangedal:e,dyroy:e,"xn--dyry-ira":e,dyr\u00F8y:e,donna:e,"xn--dnna-gra":e,d\u00F8nna:e,eid:e,eidfjord:e,eidsberg:e,eidskog:e,eidsvoll:e,eigersund:e,elverum:e,enebakk:e,engerdal:e,etne:e,etnedal:e,evenes:e,evenassi:e,"xn--eveni-0qa01ga":e,even\u00E1\u0161\u0161i:e,"evje-og-hornnes":e,farsund:e,fauske:e,fuossko:e,fuoisku:e,fedje:e,fet:e,finnoy:e,"xn--finny-yua":e,finn\u00F8y:e,fitjar:e,fjaler:e,fjell:e,flakstad:e,flatanger:e,flekkefjord:e,flesberg:e,flora:e,fla:e,"xn--fl-zia":e,fl\u00E5:e,folldal:e,forsand:e,fosnes:e,frei:e,frogn:e,froland:e,frosta:e,frana:e,"xn--frna-woa":e,fr\u00E6na:e,froya:e,"xn--frya-hra":e,fr\u00F8ya:e,fusa:e,fyresdal:e,forde:e,"xn--frde-gra":e,f\u00F8rde:e,gamvik:e,gangaviika:e,"xn--ggaviika-8ya47h":e,g\u00E1\u014Bgaviika:e,gaular:e,gausdal:e,gildeskal:e,"xn--gildeskl-g0a":e,gildesk\u00E5l:e,giske:e,gjemnes:e,gjerdrum:e,gjerstad:e,gjesdal:e,gjovik:e,"xn--gjvik-wua":e,gj\u00F8vik:e,gloppen:e,gol:e,gran:e,grane:e,granvin:e,gratangen:e,grimstad:e,grong:e,kraanghke:e,"xn--kranghke-b0a":e,kr\u00E5anghke:e,grue:e,gulen:e,hadsel:e,halden:e,halsa:e,hamar:e,hamaroy:e,habmer:e,"xn--hbmer-xqa":e,h\u00E1bmer:e,hapmir:e,"xn--hpmir-xqa":e,h\u00E1pmir:e,hammerfest:e,hammarfeasta:e,"xn--hmmrfeasta-s4ac":e,h\u00E1mm\u00E1rfeasta:e,haram:e,hareid:e,harstad:e,hasvik:e,aknoluokta:e,"xn--koluokta-7ya57h":e,\u00E1k\u014Boluokta:e,hattfjelldal:e,aarborte:e,haugesund:e,hemne:e,hemnes:e,hemsedal:e,"more-og-romsdal":[0,{heroy:e,sande:e}],"xn--mre-og-romsdal-qqb":[0,{"xn--hery-ira":e,sande:e}],"m\xF8re-og-romsdal":[0,{her\u00F8y:e,sande:e}],hitra:e,hjartdal:e,hjelmeland:e,hobol:e,"xn--hobl-ira":e,hob\u00F8l:e,hof:e,hol:e,hole:e,holmestrand:e,holtalen:e,"xn--holtlen-hxa":e,holt\u00E5len:e,hornindal:e,horten:e,hurdal:e,hurum:e,hvaler:e,hyllestad:e,hagebostad:e,"xn--hgebostad-g3a":e,h\u00E6gebostad:e,hoyanger:e,"xn--hyanger-q1a":e,h\u00F8yanger:e,hoylandet:e,"xn--hylandet-54a":e,h\u00F8ylandet:e,ha:e,"xn--h-2fa":e,h\u00E5:e,ibestad:e,inderoy:e,"xn--indery-fya":e,inder\u00F8y:e,iveland:e,jevnaker:e,jondal:e,jolster:e,"xn--jlster-bya":e,j\u00F8lster:e,karasjok:e,karasjohka:e,"xn--krjohka-hwab49j":e,k\u00E1r\u00E1\u0161johka:e,karlsoy:e,galsa:e,"xn--gls-elac":e,g\u00E1ls\u00E1:e,karmoy:e,"xn--karmy-yua":e,karm\u00F8y:e,kautokeino:e,guovdageaidnu:e,klepp:e,klabu:e,"xn--klbu-woa":e,kl\u00E6bu:e,kongsberg:e,kongsvinger:e,kragero:e,"xn--krager-gya":e,krager\u00F8:e,kristiansand:e,kristiansund:e,krodsherad:e,"xn--krdsherad-m8a":e,kr\u00F8dsherad:e,kvalsund:e,rahkkeravju:e,"xn--rhkkervju-01af":e,r\u00E1hkker\u00E1vju:e,kvam:e,kvinesdal:e,kvinnherad:e,kviteseid:e,kvitsoy:e,"xn--kvitsy-fya":e,kvits\u00F8y:e,kvafjord:e,"xn--kvfjord-nxa":e,kv\u00E6fjord:e,giehtavuoatna:e,kvanangen:e,"xn--kvnangen-k0a":e,kv\u00E6nangen:e,navuotna:e,"xn--nvuotna-hwa":e,n\u00E1vuotna:e,kafjord:e,"xn--kfjord-iua":e,k\u00E5fjord:e,gaivuotna:e,"xn--givuotna-8ya":e,g\u00E1ivuotna:e,larvik:e,lavangen:e,lavagis:e,loabat:e,"xn--loabt-0qa":e,loab\u00E1t:e,lebesby:e,davvesiida:e,leikanger:e,leirfjord:e,leka:e,leksvik:e,lenvik:e,leangaviika:e,"xn--leagaviika-52b":e,lea\u014Bgaviika:e,lesja:e,levanger:e,lier:e,lierne:e,lillehammer:e,lillesand:e,lindesnes:e,lindas:e,"xn--linds-pra":e,lind\u00E5s:e,lom:e,loppa:e,lahppi:e,"xn--lhppi-xqa":e,l\u00E1hppi:e,lund:e,lunner:e,luroy:e,"xn--lury-ira":e,lur\u00F8y:e,luster:e,lyngdal:e,lyngen:e,ivgu:e,lardal:e,lerdal:e,"xn--lrdal-sra":e,l\u00E6rdal:e,lodingen:e,"xn--ldingen-q1a":e,l\u00F8dingen:e,lorenskog:e,"xn--lrenskog-54a":e,l\u00F8renskog:e,loten:e,"xn--lten-gra":e,l\u00F8ten:e,malvik:e,masoy:e,"xn--msy-ula0h":e,m\u00E5s\u00F8y:e,muosat:e,"xn--muost-0qa":e,muos\u00E1t:e,mandal:e,marker:e,marnardal:e,masfjorden:e,meland:e,meldal:e,melhus:e,meloy:e,"xn--mely-ira":e,mel\u00F8y:e,meraker:e,"xn--merker-kua":e,mer\u00E5ker:e,moareke:e,"xn--moreke-jua":e,mo\u00E5reke:e,midsund:e,"midtre-gauldal":e,modalen:e,modum:e,molde:e,moskenes:e,moss:e,mosvik:e,malselv:e,"xn--mlselv-iua":e,m\u00E5lselv:e,malatvuopmi:e,"xn--mlatvuopmi-s4a":e,m\u00E1latvuopmi:e,namdalseid:e,aejrie:e,namsos:e,namsskogan:e,naamesjevuemie:e,"xn--nmesjevuemie-tcba":e,n\u00E5\u00E5mesjevuemie:e,laakesvuemie:e,nannestad:e,narvik:e,narviika:e,naustdal:e,"nedre-eiker":e,akershus:_b,buskerud:_b,nesna:e,nesodden:e,nesseby:e,unjarga:e,"xn--unjrga-rta":e,unj\u00E1rga:e,nesset:e,nissedal:e,nittedal:e,"nord-aurdal":e,"nord-fron":e,"nord-odal":e,norddal:e,nordkapp:e,davvenjarga:e,"xn--davvenjrga-y4a":e,davvenj\u00E1rga:e,"nordre-land":e,nordreisa:e,raisa:e,"xn--risa-5na":e,r\u00E1isa:e,"nore-og-uvdal":e,notodden:e,naroy:e,"xn--nry-yla5g":e,n\u00E6r\u00F8y:e,notteroy:e,"xn--nttery-byae":e,n\u00F8tter\u00F8y:e,odda:e,oksnes:e,"xn--ksnes-uua":e,\u00F8ksnes:e,oppdal:e,oppegard:e,"xn--oppegrd-ixa":e,oppeg\u00E5rd:e,orkdal:e,orland:e,"xn--rland-uua":e,\u00F8rland:e,orskog:e,"xn--rskog-uua":e,\u00F8rskog:e,orsta:e,"xn--rsta-fra":e,\u00F8rsta:e,hedmark:[0,{os:e,valer:e,"xn--vler-qoa":e,v\u00E5ler:e}],hordaland:[0,{os:e}],osen:e,osteroy:e,"xn--ostery-fya":e,oster\u00F8y:e,"ostre-toten":e,"xn--stre-toten-zcb":e,"\xF8stre-toten":e,overhalla:e,"ovre-eiker":e,"xn--vre-eiker-k8a":e,"\xF8vre-eiker":e,oyer:e,"xn--yer-zna":e,\u00F8yer:e,oygarden:e,"xn--ygarden-p1a":e,\u00F8ygarden:e,"oystre-slidre":e,"xn--ystre-slidre-ujb":e,"\xF8ystre-slidre":e,porsanger:e,porsangu:e,"xn--porsgu-sta26f":e,pors\u00E1\u014Bgu:e,porsgrunn:e,radoy:e,"xn--rady-ira":e,rad\u00F8y:e,rakkestad:e,rana:e,ruovat:e,randaberg:e,rauma:e,rendalen:e,rennebu:e,rennesoy:e,"xn--rennesy-v1a":e,rennes\u00F8y:e,rindal:e,ringebu:e,ringerike:e,ringsaker:e,rissa:e,risor:e,"xn--risr-ira":e,ris\u00F8r:e,roan:e,rollag:e,rygge:e,ralingen:e,"xn--rlingen-mxa":e,r\u00E6lingen:e,rodoy:e,"xn--rdy-0nab":e,r\u00F8d\u00F8y:e,romskog:e,"xn--rmskog-bya":e,r\u00F8mskog:e,roros:e,"xn--rros-gra":e,r\u00F8ros:e,rost:e,"xn--rst-0na":e,r\u00F8st:e,royken:e,"xn--ryken-vua":e,r\u00F8yken:e,royrvik:e,"xn--ryrvik-bya":e,r\u00F8yrvik:e,rade:e,"xn--rde-ula":e,r\u00E5de:e,salangen:e,siellak:e,saltdal:e,salat:e,"xn--slt-elab":e,s\u00E1l\u00E1t:e,"xn--slat-5na":e,s\u00E1lat:e,samnanger:e,vestfold:[0,{sande:e}],sandefjord:e,sandnes:e,sandoy:e,"xn--sandy-yua":e,sand\u00F8y:e,sarpsborg:e,sauda:e,sauherad:e,sel:e,selbu:e,selje:e,seljord:e,sigdal:e,siljan:e,sirdal:e,skaun:e,skedsmo:e,ski:e,skien:e,skiptvet:e,skjervoy:e,"xn--skjervy-v1a":e,skjerv\u00F8y:e,skierva:e,"xn--skierv-uta":e,skierv\u00E1:e,skjak:e,"xn--skjk-soa":e,skj\u00E5k:e,skodje:e,skanland:e,"xn--sknland-fxa":e,sk\u00E5nland:e,skanit:e,"xn--sknit-yqa":e,sk\u00E1nit:e,smola:e,"xn--smla-hra":e,sm\u00F8la:e,snillfjord:e,snasa:e,"xn--snsa-roa":e,sn\u00E5sa:e,snoasa:e,snaase:e,"xn--snase-nra":e,sn\u00E5ase:e,sogndal:e,sokndal:e,sola:e,solund:e,songdalen:e,sortland:e,spydeberg:e,stange:e,stavanger:e,steigen:e,steinkjer:e,stjordal:e,"xn--stjrdal-s1a":e,stj\u00F8rdal:e,stokke:e,"stor-elvdal":e,stord:e,stordal:e,storfjord:e,omasvuotna:e,strand:e,stranda:e,stryn:e,sula:e,suldal:e,sund:e,sunndal:e,surnadal:e,sveio:e,svelvik:e,sykkylven:e,sogne:e,"xn--sgne-gra":e,s\u00F8gne:e,somna:e,"xn--smna-gra":e,s\u00F8mna:e,"sondre-land":e,"xn--sndre-land-0cb":e,"s\xF8ndre-land":e,"sor-aurdal":e,"xn--sr-aurdal-l8a":e,"s\xF8r-aurdal":e,"sor-fron":e,"xn--sr-fron-q1a":e,"s\xF8r-fron":e,"sor-odal":e,"xn--sr-odal-q1a":e,"s\xF8r-odal":e,"sor-varanger":e,"xn--sr-varanger-ggb":e,"s\xF8r-varanger":e,"matta-varjjat":e,"xn--mtta-vrjjat-k7af":e,"m\xE1tta-v\xE1rjjat":e,sorfold:e,"xn--srfold-bya":e,s\u00F8rfold:e,sorreisa:e,"xn--srreisa-q1a":e,s\u00F8rreisa:e,sorum:e,"xn--srum-gra":e,s\u00F8rum:e,tana:e,deatnu:e,time:e,tingvoll:e,tinn:e,tjeldsund:e,dielddanuorri:e,tjome:e,"xn--tjme-hra":e,tj\u00F8me:e,tokke:e,tolga:e,torsken:e,tranoy:e,"xn--trany-yua":e,tran\u00F8y:e,tromso:e,"xn--troms-zua":e,troms\u00F8:e,tromsa:e,romsa:e,trondheim:e,troandin:e,trysil:e,trana:e,"xn--trna-woa":e,tr\u00E6na:e,trogstad:e,"xn--trgstad-r1a":e,tr\u00F8gstad:e,tvedestrand:e,tydal:e,tynset:e,tysfjord:e,divtasvuodna:e,divttasvuotna:e,tysnes:e,tysvar:e,"xn--tysvr-vra":e,tysv\u00E6r:e,tonsberg:e,"xn--tnsberg-q1a":e,t\u00F8nsberg:e,ullensaker:e,ullensvang:e,ulvik:e,utsira:e,vadso:e,"xn--vads-jra":e,vads\u00F8:e,cahcesuolo:e,"xn--hcesuolo-7ya35b":e,\u010D\u00E1hcesuolo:e,vaksdal:e,valle:e,vang:e,vanylven:e,vardo:e,"xn--vard-jra":e,vard\u00F8:e,varggat:e,"xn--vrggt-xqad":e,v\u00E1rgg\u00E1t:e,vefsn:e,vaapste:e,vega:e,vegarshei:e,"xn--vegrshei-c0a":e,veg\u00E5rshei:e,vennesla:e,verdal:e,verran:e,vestby:e,vestnes:e,"vestre-slidre":e,"vestre-toten":e,vestvagoy:e,"xn--vestvgy-ixa6o":e,vestv\u00E5g\u00F8y:e,vevelstad:e,vik:e,vikna:e,vindafjord:e,volda:e,voss:e,varoy:e,"xn--vry-yla5g":e,v\u00E6r\u00F8y:e,vagan:e,"xn--vgan-qoa":e,v\u00E5gan:e,voagat:e,vagsoy:e,"xn--vgsy-qoa0j":e,v\u00E5gs\u00F8y:e,vaga:e,"xn--vg-yiab":e,v\u00E5g\u00E5:e,ostfold:[0,{valer:e}],"xn--stfold-9xa":[0,{"xn--vler-qoa":e}],\u00F8stfold:[0,{v\u00E5ler:e}],co:t,blogspot:t,"123hjemmeside":t,myspreadshop:t}],np:V,nr:gb,nu:[1,{merseine:t,mine:t,shacknet:t,enterprisecloud:t}],nz:[1,{ac:e,co:o,cri:e,geek:e,gen:e,govt:e,health:e,iwi:e,kiwi:e,maori:e,mil:e,"xn--mori-qsa":e,m\u0101ori:e,net:e,org:e,parliament:e,school:e}],om:[1,{co:e,com:e,edu:e,gov:e,med:e,museum:e,net:e,org:e,pro:e}],onion:e,org:[1,{altervista:t,amune:[0,{tele:t}],pimienta:t,poivron:t,potager:t,sweetpepper:t,ae:t,us:t,certmgr:t,cdn77:[0,{c:t,rsc:t}],"cdn77-secure":[0,{origin:[0,{ssl:t}]}],cloudns:t,duckdns:t,tunk:t,dyndns:[2,{go:t,home:t}],blogdns:t,blogsite:t,boldlygoingnowhere:t,dnsalias:t,dnsdojo:t,doesntexist:t,dontexist:t,doomdns:t,dvrdns:t,dynalias:t,endofinternet:t,endoftheinternet:t,"from-me":t,"game-host":t,gotdns:t,"hobby-site":t,homedns:t,homeftp:t,homelinux:t,homeunix:t,"is-a-bruinsfan":t,"is-a-candidate":t,"is-a-celticsfan":t,"is-a-chef":t,"is-a-geek":t,"is-a-knight":t,"is-a-linux-user":t,"is-a-patsfan":t,"is-a-soxfan":t,"is-found":t,"is-lost":t,"is-saved":t,"is-very-bad":t,"is-very-evil":t,"is-very-good":t,"is-very-nice":t,"is-very-sweet":t,"isa-geek":t,"kicks-ass":t,misconfused:t,podzone:t,readmyblog:t,selfip:t,sellsyourhome:t,servebbs:t,serveftp:t,servegame:t,"stuff-4-sale":t,webhop:t,ddnss:t,accesscam:t,camdvr:t,freeddns:t,mywire:t,webredirect:t,eu:[2,{al:t,asso:t,at:t,au:t,be:t,bg:t,ca:t,cd:t,ch:t,cn:t,cy:t,cz:t,de:t,dk:t,edu:t,ee:t,es:t,fi:t,fr:t,gr:t,hr:t,hu:t,ie:t,il:t,in:t,int:t,is:t,it:t,jp:t,kr:t,lt:t,lu:t,lv:t,mc:t,me:t,mk:t,mt:t,my:t,net:t,ng:t,nl:t,no:t,nz:t,paris:t,pl:t,pt:t,"q-a":t,ro:t,ru:t,se:t,si:t,sk:t,tr:t,uk:t,us:t}],twmail:t,fedorainfracloud:t,fedorapeople:t,fedoraproject:[0,{cloud:t,os:Yo,stg:[0,{os:Yo}]}],freedesktop:t,hepforge:t,"in-dsl":t,"in-vpn":t,js:t,barsy:t,mayfirst:t,"mozilla-iot":t,bmoattachments:t,dynserv:t,"now-dns":t,"cable-modem":t,collegefan:t,couchpotatofries:t,mlbfan:t,mysecuritycamera:t,nflfan:t,"read-books":t,ufcfan:t,hopto:t,myftp:t,"no-ip":t,zapto:t,httpbin:t,pubtls:t,jpn:t,"my-firewall":t,myfirewall:t,spdns:t,"small-web":t,dsmynas:t,familyds:t,teckids:vp,tuxfamily:t,diskstation:t,hk:t,wmflabs:t,toolforge:t,wmcloud:t,za:t}],pa:[1,{ac:e,gob:e,com:e,org:e,sld:e,edu:e,net:e,ing:e,abo:e,med:e,nom:e}],pe:[1,{edu:e,gob:e,nom:e,mil:e,org:e,com:e,net:e,blogspot:t}],pf:[1,{com:e,org:e,edu:e}],pg:V,ph:[1,{com:e,net:e,org:e,gov:e,edu:e,ngo:e,mil:e,i:e}],pk:[1,{com:e,net:e,edu:e,org:e,fam:e,biz:e,web:e,gov:e,gob:e,gok:e,gon:e,gop:e,gos:e,info:e}],pl:[1,{com:e,net:e,org:e,aid:e,agro:e,atm:e,auto:e,biz:e,edu:e,gmina:e,gsm:e,info:e,mail:e,miasta:e,media:e,mil:e,nieruchomosci:e,nom:e,pc:e,powiat:e,priv:e,realestate:e,rel:e,sex:e,shop:e,sklep:e,sos:e,szkola:e,targi:e,tm:e,tourism:e,travel:e,turystyka:e,gov:[1,{ap:e,griw:e,ic:e,is:e,kmpsp:e,konsulat:e,kppsp:e,kwp:e,kwpsp:e,mup:e,mw:e,oia:e,oirm:e,oke:e,oow:e,oschr:e,oum:e,pa:e,pinb:e,piw:e,po:e,pr:e,psp:e,psse:e,pup:e,rzgw:e,sa:e,sdn:e,sko:e,so:e,sr:e,starostwo:e,ug:e,ugim:e,um:e,umig:e,upow:e,uppo:e,us:e,uw:e,uzs:e,wif:e,wiih:e,winb:e,wios:e,witd:e,wiw:e,wkz:e,wsa:e,wskr:e,wsse:e,wuoz:e,wzmiuw:e,zp:e,zpisdn:e}],augustow:e,"babia-gora":e,bedzin:e,beskidy:e,bialowieza:e,bialystok:e,bielawa:e,bieszczady:e,boleslawiec:e,bydgoszcz:e,bytom:e,cieszyn:e,czeladz:e,czest:e,dlugoleka:e,elblag:e,elk:e,glogow:e,gniezno:e,gorlice:e,grajewo:e,ilawa:e,jaworzno:e,"jelenia-gora":e,jgora:e,kalisz:e,"kazimierz-dolny":e,karpacz:e,kartuzy:e,kaszuby:e,katowice:e,kepno:e,ketrzyn:e,klodzko:e,kobierzyce:e,kolobrzeg:e,konin:e,konskowola:e,kutno:e,lapy:e,lebork:e,legnica:e,lezajsk:e,limanowa:e,lomza:e,lowicz:e,lubin:e,lukow:e,malbork:e,malopolska:e,mazowsze:e,mazury:e,mielec:e,mielno:e,mragowo:e,naklo:e,nowaruda:e,nysa:e,olawa:e,olecko:e,olkusz:e,olsztyn:e,opoczno:e,opole:e,ostroda:e,ostroleka:e,ostrowiec:e,ostrowwlkp:e,pila:e,pisz:e,podhale:e,podlasie:e,polkowice:e,pomorze:e,pomorskie:e,prochowice:e,pruszkow:e,przeworsk:e,pulawy:e,radom:e,"rawa-maz":e,rybnik:e,rzeszow:e,sanok:e,sejny:e,slask:e,slupsk:e,sosnowiec:e,"stalowa-wola":e,skoczow:e,starachowice:e,stargard:e,suwalki:e,swidnica:e,swiebodzin:e,swinoujscie:e,szczecin:e,szczytno:e,tarnobrzeg:e,tgory:e,turek:e,tychy:e,ustka:e,walbrzych:e,warmia:e,warszawa:e,waw:e,wegrow:e,wielun:e,wlocl:e,wloclawek:e,wodzislaw:e,wolomin:e,wroclaw:e,zachpomor:e,zagan:e,zarow:e,zgora:e,zgorzelec:e,beep:t,"ecommerce-shop":t,shoparena:t,homesklep:t,sdscloud:t,unicloud:t,krasnik:t,leczna:t,lubartow:t,lublin:t,poniatowa:t,swidnik:t,co:t,torun:t,simplesite:t,art:t,gliwice:t,krakow:t,poznan:t,wroc:t,zakopane:t,myspreadshop:t,gda:t,gdansk:t,gdynia:t,med:t,sopot:t}],pm:[1,{own:t,name:t}],pn:[1,{gov:e,co:e,org:e,edu:e,net:e}],post:e,pr:[1,{com:e,net:e,org:e,gov:e,edu:e,isla:e,pro:e,biz:e,info:e,name:e,est:e,prof:e,ac:e}],pro:[1,{aaa:e,aca:e,acct:e,avocat:e,bar:e,cpa:e,eng:e,jur:e,law:e,med:e,recht:e,cloudns:t,dnstrace:[0,{bci:t}],barsy:t}],ps:[1,{edu:e,gov:e,sec:e,plo:e,com:e,org:e,net:e}],pt:[1,{net:e,gov:e,org:e,edu:e,int:e,publ:e,com:e,nome:e,blogspot:t,"123paginaweb":t}],pw:[1,{co:e,ne:e,or:e,ed:e,go:e,belau:e,cloudns:t,x443:t}],py:[1,{com:e,coop:e,edu:e,gov:e,mil:e,net:e,org:e}],qa:[1,{com:e,edu:e,gov:e,mil:e,name:e,net:e,org:e,sch:e,blogspot:t}],re:[1,{asso:e,com:e,nom:e,blogspot:t}],ro:[1,{arts:e,com:e,firm:e,info:e,nom:e,nt:e,org:e,rec:e,store:e,tm:e,www:e,co:t,shop:t,blogspot:t,barsy:t}],rs:[1,{ac:e,co:e,edu:e,gov:e,in:e,org:e,brendly:[0,{shop:t}],blogspot:t,ua:t,ox:t}],ru:[1,{ac:t,edu:t,gov:t,int:t,mil:t,test:t,eurodir:t,adygeya:t,bashkiria:t,bir:t,cbg:t,com:t,dagestan:t,grozny:t,kalmykia:t,kustanai:t,marine:t,mordovia:t,msk:t,mytis:t,nalchik:t,nov:t,pyatigorsk:t,spb:t,vladikavkaz:t,vladimir:t,blogspot:t,na4u:t,mircloud:t,regruhosting:yp,myjino:[2,{hosting:n,landing:n,spectrum:n,vps:n}],cldmail:[0,{hb:t}],mcdir:[2,{vps:t}],mcpre:t,net:t,org:t,pp:t,"123sait":t,lk3:t,ras:t}],rw:[1,{ac:e,co:e,coop:e,gov:e,mil:e,net:e,org:e}],sa:[1,{com:e,net:e,org:e,gov:e,med:e,pub:e,edu:e,sch:e}],sb:r,sc:r,sd:[1,{com:e,net:e,org:e,edu:e,med:e,tv:e,gov:e,info:e}],se:[1,{a:e,ac:e,b:e,bd:e,brand:e,c:e,d:e,e,f:e,fh:e,fhsk:e,fhv:e,g:e,h:e,i:e,k:e,komforb:e,kommunalforbund:e,komvux:e,l:e,lanbib:e,m:e,n:e,naturbruksgymn:e,o:e,org:e,p:e,parti:e,pp:e,press:e,r:e,s:e,t:e,tm:e,u:e,w:e,x:e,y:e,z:e,com:t,blogspot:t,conf:t,iopsys:t,"123minsida":t,itcouldbewor:t,myspreadshop:t,paba:[0,{su:t}]}],sg:[1,{com:e,net:e,org:e,gov:e,edu:e,per:e,blogspot:t,enscaled:t}],sh:[1,{com:e,net:e,gov:e,org:e,mil:e,bip:t,hashbang:t,platform:[0,{bc:t,ent:t,eu:t,us:t}],now:t,vxl:t,wedeploy:t}],si:[1,{gitapp:t,gitpage:t,blogspot:t}],sj:e,sk:o,sl:r,sm:e,sn:[1,{art:e,com:e,edu:e,gouv:e,org:e,perso:e,univ:e,blogspot:t}],so:[1,{com:e,edu:e,gov:e,me:e,net:e,org:e,sch:t}],sr:e,ss:[1,{biz:e,com:e,edu:e,gov:e,me:e,net:e,org:e,sch:e}],st:[1,{co:e,com:e,consulado:e,edu:e,embaixada:e,mil:e,net:e,org:e,principe:e,saotome:e,store:e,kirara:t,noho:t}],su:[1,{abkhazia:t,adygeya:t,aktyubinsk:t,arkhangelsk:t,armenia:t,ashgabad:t,azerbaijan:t,balashov:t,bashkiria:t,bryansk:t,bukhara:t,chimkent:t,dagestan:t,"east-kazakhstan":t,exnet:t,georgia:t,grozny:t,ivanovo:t,jambyl:t,kalmykia:t,kaluga:t,karacol:t,karaganda:t,karelia:t,khakassia:t,krasnodar:t,kurgan:t,kustanai:t,lenug:t,mangyshlak:t,mordovia:t,msk:t,murmansk:t,nalchik:t,navoi:t,"north-kazakhstan":t,nov:t,obninsk:t,penza:t,pokrovsk:t,sochi:t,spb:t,tashkent:t,termez:t,togliatti:t,troitsk:t,tselinograd:t,tula:t,tuva:t,vladikavkaz:t,vladimir:t,vologda:t}],sv:[1,{com:e,edu:e,gob:e,org:e,red:e}],sx:i,sy:_p,sz:[1,{co:e,ac:e,org:e}],tc:[1,{ch:t,me:t,we:t}],td:o,tel:e,tf:[1,{sch:t}],tg:e,th:[1,{ac:e,co:e,go:e,in:e,mi:e,net:e,or:e,online:t,shop:t}],tj:[1,{ac:e,biz:e,co:e,com:e,edu:e,go:e,gov:e,int:e,mil:e,name:e,net:e,nic:e,org:e,test:e,web:e}],tk:e,tl:i,tm:[1,{com:e,co:e,org:e,net:e,nom:e,gov:e,mil:e,edu:e}],tn:[1,{com:e,ens:e,fin:e,gov:e,ind:e,info:e,intl:e,mincom:e,nat:e,net:e,org:e,perso:e,tourism:e,orangecloud:t}],to:[1,{611:t,com:e,gov:e,net:e,org:e,edu:e,mil:e,oya:t,rdv:t,x0:t,vpnplus:t,quickconnect:Q,nyan:t}],tr:[1,{av:e,bbs:e,bel:e,biz:e,com:o,dr:e,edu:e,gen:e,gov:e,info:e,mil:e,k12:e,kep:e,name:e,net:e,org:e,pol:e,tel:e,tsk:e,tv:e,web:e,nc:i}],tt:[1,{co:e,com:e,org:e,net:e,biz:e,info:e,pro:e,int:e,coop:e,jobs:e,mobi:e,travel:e,museum:e,aero:e,name:e,gov:e,edu:e}],tv:[1,{dyndns:t,"better-than":t,"on-the-web":t,"worse-than":t,from:t,sakura:t}],tw:[1,{edu:e,gov:e,mil:e,com:[1,{mymailer:t}],net:e,org:e,idv:e,game:e,ebiz:e,club:e,"xn--zf0ao64a":e,\u7DB2\u8DEF:e,"xn--uc0atv":e,\u7D44\u7E54:e,"xn--czrw28b":e,\u5546\u696D:e,url:t,blogspot:t}],tz:[1,{ac:e,co:e,go:e,hotel:e,info:e,me:e,mil:e,mobi:e,ne:e,or:e,sc:e,tv:e}],ua:[1,{com:e,edu:e,gov:e,in:e,net:e,org:e,cherkassy:e,cherkasy:e,chernigov:e,chernihiv:e,chernivtsi:e,chernovtsy:e,ck:e,cn:e,cr:e,crimea:e,cv:e,dn:e,dnepropetrovsk:e,dnipropetrovsk:e,donetsk:e,dp:e,if:e,"ivano-frankivsk":e,kh:e,kharkiv:e,kharkov:e,kherson:e,khmelnitskiy:e,khmelnytskyi:e,kiev:e,kirovograd:e,km:e,kr:e,kropyvnytskyi:e,krym:e,ks:e,kv:e,kyiv:e,lg:e,lt:e,lugansk:e,luhansk:e,lutsk:e,lv:e,lviv:e,mk:e,mykolaiv:e,nikolaev:e,od:e,odesa:e,odessa:e,pl:e,poltava:e,rivne:e,rovno:e,rv:e,sb:e,sebastopol:e,sevastopol:e,sm:e,sumy:e,te:e,ternopil:e,uz:e,uzhgorod:e,uzhhorod:e,vinnica:e,vinnytsia:e,vn:e,volyn:e,yalta:e,zakarpattia:e,zaporizhzhe:e,zaporizhzhia:e,zhitomir:e,zhytomyr:e,zp:e,zt:e,cc:t,inf:t,ltd:t,cx:t,ie:t,biz:t,co:t,pp:t,v:t}],ug:[1,{co:e,or:e,ac:e,sc:e,go:e,ne:e,com:e,org:e,blogspot:t}],uk:[1,{ac:e,co:[1,{bytemark:[0,{dh:t,vm:t}],blogspot:t,layershift:gp,barsy:t,barsyonline:t,retrosnub:hb,"nh-serv":t,"no-ip":t,wellbeingzone:t,adimo:t,myspreadshop:t}],gov:[1,{campaign:t,service:t,api:t}],ltd:e,me:e,net:e,nhs:e,org:[1,{glug:t,lug:t,lugs:t,affinitylottery:t,raffleentry:t,weeklylottery:t}],plc:e,police:e,sch:V,conn:t,copro:t,hosp:t,"independent-commission":t,"independent-inquest":t,"independent-inquiry":t,"independent-panel":t,"independent-review":t,"public-inquiry":t,"royal-commission":t,pymnt:t,barsy:t}],us:[1,{dni:e,fed:e,isa:e,kids:e,nsn:e,ak:fe,al:fe,ar:fe,as:fe,az:fe,ca:fe,co:fe,ct:fe,dc:fe,de:[1,{cc:e,lib:t}],fl:fe,ga:fe,gu:fe,hi:Xl,ia:fe,id:fe,il:fe,in:fe,ks:fe,ky:fe,la:fe,ma:[1,{k12:[1,{pvt:e,chtr:e,paroch:e}],cc:e,lib:e}],md:fe,me:fe,mi:[1,{k12:e,cc:e,lib:e,"ann-arbor":e,cog:e,dst:e,eaton:e,gen:e,mus:e,tec:e,washtenaw:e}],mn:fe,mo:fe,ms:fe,mt:fe,nc:fe,nd:Xl,ne:fe,nh:fe,nj:fe,nm:fe,nv:fe,ny:fe,oh:fe,ok:fe,or:fe,pa:fe,pr:fe,ri:Xl,sc:fe,sd:Xl,tn:fe,tx:fe,ut:fe,vi:fe,vt:fe,va:fe,wa:fe,wi:fe,wv:[1,{cc:e}],wy:fe,graphox:t,cloudns:t,drud:t,"is-by":t,"land-4-sale":t,"stuff-4-sale":t,enscaled:[0,{phx:t}],mircloud:t,freeddns:t,golffan:t,noip:t,pointto:t,platterp:t}],uy:[1,{com:o,edu:e,gub:e,mil:e,net:e,org:e}],uz:[1,{co:e,com:e,net:e,org:e}],va:e,vc:[1,{com:e,net:e,org:e,gov:e,mil:e,edu:e,gv:[2,{d:t}],"0e":t}],ve:[1,{arts:e,bib:e,co:e,com:e,e12:e,edu:e,firm:e,gob:e,gov:e,info:e,int:e,mil:e,net:e,nom:e,org:e,rar:e,rec:e,store:e,tec:e,web:e}],vg:[1,{at:t}],vi:[1,{co:e,com:e,k12:e,net:e,org:e}],vn:[1,{ac:e,ai:e,biz:e,com:e,edu:e,gov:e,health:e,id:e,info:e,int:e,io:e,name:e,net:e,org:e,pro:e,angiang:e,bacgiang:e,backan:e,baclieu:e,bacninh:e,"baria-vungtau":e,bentre:e,binhdinh:e,binhduong:e,binhphuoc:e,binhthuan:e,camau:e,cantho:e,caobang:e,daklak:e,daknong:e,danang:e,dienbien:e,dongnai:e,dongthap:e,gialai:e,hagiang:e,haiduong:e,haiphong:e,hanam:e,hanoi:e,hatinh:e,haugiang:e,hoabinh:e,hungyen:e,khanhhoa:e,kiengiang:e,kontum:e,laichau:e,lamdong:e,langson:e,laocai:e,longan:e,namdinh:e,nghean:e,ninhbinh:e,ninhthuan:e,phutho:e,phuyen:e,quangbinh:e,quangnam:e,quangngai:e,quangninh:e,quangtri:e,soctrang:e,sonla:e,tayninh:e,thaibinh:e,thainguyen:e,thanhhoa:e,thanhphohochiminh:e,thuathienhue:e,tiengiang:e,travinh:e,tuyenquang:e,vinhlong:e,vinhphuc:e,yenbai:e,blogspot:t}],vu:[1,{com:e,edu:e,net:e,org:e,cn:t,blog:t,dev:t,me:t}],wf:[1,{biz:t,sch:t}],ws:[1,{com:e,net:e,org:e,gov:e,edu:e,advisor:n,cloud66:t,dyndns:t,mypets:t}],yt:[1,{org:t}],"xn--mgbaam7a8h":e,\u0627\u0645\u0627\u0631\u0627\u062A:e,"xn--y9a3aq":e,\u0570\u0561\u0575:e,"xn--54b7fta0cc":e,\u09AC\u09BE\u0982\u09B2\u09BE:e,"xn--90ae":e,\u0431\u0433:e,"xn--mgbcpq6gpa1a":e,\u0627\u0644\u0628\u062D\u0631\u064A\u0646:e,"xn--90ais":e,\u0431\u0435\u043B:e,"xn--fiqs8s":e,\u4E2D\u56FD:e,"xn--fiqz9s":e,\u4E2D\u570B:e,"xn--lgbbat1ad8j":e,\u0627\u0644\u062C\u0632\u0627\u0626\u0631:e,"xn--wgbh1c":e,\u0645\u0635\u0631:e,"xn--e1a4c":e,\u0435\u044E:e,"xn--qxa6a":e,\u03B5\u03C5:e,"xn--mgbah1a3hjkrd":e,\u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627:e,"xn--node":e,\u10D2\u10D4:e,"xn--qxam":e,\u03B5\u03BB:e,"xn--j6w193g":[1,{"xn--55qx5d":e,"xn--wcvs22d":e,"xn--mxtq1m":e,"xn--gmqw5a":e,"xn--od0alg":e,"xn--uc0atv":e}],\u9999\u6E2F:[1,{\u516C\u53F8:e,\u6559\u80B2:e,\u653F\u5E9C:e,\u500B\u4EBA:e,\u7DB2\u7D61:e,\u7D44\u7E54:e}],"xn--2scrj9c":e,\u0CAD\u0CBE\u0CB0\u0CA4:e,"xn--3hcrj9c":e,\u0B2D\u0B3E\u0B30\u0B24:e,"xn--45br5cyl":e,\u09AD\u09BE\u09F0\u09A4:e,"xn--h2breg3eve":e,\u092D\u093E\u0930\u0924\u092E\u094D:e,"xn--h2brj9c8c":e,\u092D\u093E\u0930\u094B\u0924:e,"xn--mgbgu82a":e,\u0680\u0627\u0631\u062A:e,"xn--rvc1e0am3e":e,\u0D2D\u0D3E\u0D30\u0D24\u0D02:e,"xn--h2brj9c":e,\u092D\u093E\u0930\u0924:e,"xn--mgbbh1a":e,\u0628\u0627\u0631\u062A:e,"xn--mgbbh1a71e":e,\u0628\u06BE\u0627\u0631\u062A:e,"xn--fpcrj9c3d":e,\u0C2D\u0C3E\u0C30\u0C24\u0C4D:e,"xn--gecrj9c":e,\u0AAD\u0ABE\u0AB0\u0AA4:e,"xn--s9brj9c":e,\u0A2D\u0A3E\u0A30\u0A24:e,"xn--45brj9c":e,\u09AD\u09BE\u09B0\u09A4:e,"xn--xkc2dl3a5ee0h":e,\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE:e,"xn--mgba3a4f16a":e,\u0627\u06CC\u0631\u0627\u0646:e,"xn--mgba3a4fra":e,\u0627\u064A\u0631\u0627\u0646:e,"xn--mgbtx2b":e,\u0639\u0631\u0627\u0642:e,"xn--mgbayh7gpa":e,\u0627\u0644\u0627\u0631\u062F\u0646:e,"xn--3e0b707e":e,\uD55C\uAD6D:e,"xn--80ao21a":e,\u049B\u0430\u0437:e,"xn--q7ce6a":e,\u0EA5\u0EB2\u0EA7:e,"xn--fzc2c9e2c":e,\u0DBD\u0D82\u0D9A\u0DCF:e,"xn--xkc2al3hye2a":e,\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8:e,"xn--mgbc0a9azcg":e,\u0627\u0644\u0645\u063A\u0631\u0628:e,"xn--d1alf":e,\u043C\u043A\u0434:e,"xn--l1acc":e,\u043C\u043E\u043D:e,"xn--mix891f":e,\u6FB3\u9580:e,"xn--mix082f":e,\u6FB3\u95E8:e,"xn--mgbx4cd0ab":e,\u0645\u0644\u064A\u0633\u064A\u0627:e,"xn--mgb9awbf":e,\u0639\u0645\u0627\u0646:e,"xn--mgbai9azgqp6j":e,\u067E\u0627\u06A9\u0633\u062A\u0627\u0646:e,"xn--mgbai9a5eva00b":e,\u067E\u0627\u0643\u0633\u062A\u0627\u0646:e,"xn--ygbi2ammx":e,\u0641\u0644\u0633\u0637\u064A\u0646:e,"xn--90a3ac":[1,{"xn--o1ac":e,"xn--c1avg":e,"xn--90azh":e,"xn--d1at":e,"xn--o1ach":e,"xn--80au":e}],\u0441\u0440\u0431:[1,{\u043F\u0440:e,\u043E\u0440\u0433:e,\u043E\u0431\u0440:e,\u043E\u0434:e,\u0443\u043F\u0440:e,\u0430\u043A:e}],"xn--p1ai":e,\u0440\u0444:e,"xn--wgbl6a":e,\u0642\u0637\u0631:e,"xn--mgberp4a5d4ar":e,\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629:e,"xn--mgberp4a5d4a87g":e,\u0627\u0644\u0633\u0639\u0648\u062F\u06CC\u0629:e,"xn--mgbqly7c0a67fbc":e,\u0627\u0644\u0633\u0639\u0648\u062F\u06CC\u06C3:e,"xn--mgbqly7cvafr":e,\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0647:e,"xn--mgbpl2fh":e,\u0633\u0648\u062F\u0627\u0646:e,"xn--yfro4i67o":e,\u65B0\u52A0\u5761:e,"xn--clchc0ea0b2g2a9gcd":e,\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD:e,"xn--ogbpf8fl":e,\u0633\u0648\u0631\u064A\u0629:e,"xn--mgbtf8fl":e,\u0633\u0648\u0631\u064A\u0627:e,"xn--o3cw4h":[1,{"xn--12c1fe0br":e,"xn--12co0c3b4eva":e,"xn--h3cuzk1di":e,"xn--o3cyx2a":e,"xn--m3ch0j3a":e,"xn--12cfi8ixb8l":e}],\u0E44\u0E17\u0E22:[1,{\u0E28\u0E36\u0E01\u0E29\u0E32:e,\u0E18\u0E38\u0E23\u0E01\u0E34\u0E08:e,\u0E23\u0E31\u0E10\u0E1A\u0E32\u0E25:e,\u0E17\u0E2B\u0E32\u0E23:e,\u0E40\u0E19\u0E47\u0E15:e,\u0E2D\u0E07\u0E04\u0E4C\u0E01\u0E23:e}],"xn--pgbs0dh":e,\u062A\u0648\u0646\u0633:e,"xn--kpry57d":e,\u53F0\u7063:e,"xn--kprw13d":e,\u53F0\u6E7E:e,"xn--nnx388a":e,\u81FA\u7063:e,"xn--j1amh":e,\u0443\u043A\u0440:e,"xn--mgb2ddes":e,\u0627\u0644\u064A\u0645\u0646:e,xxx:e,ye:_p,za:[0,{ac:e,agric:e,alt:e,co:o,edu:e,gov:e,grondar:e,law:e,mil:e,net:e,ngo:e,nic:e,nis:e,nom:e,org:e,school:e,tm:e,web:e}],zm:[1,{ac:e,biz:e,co:e,com:e,edu:e,gov:e,info:e,mil:e,net:e,org:e,sch:e}],zw:[1,{ac:e,co:e,gov:e,mil:e,org:e}],aaa:e,aarp:e,abb:e,abbott:e,abbvie:e,abc:e,able:e,abogado:e,abudhabi:e,academy:[1,{official:t}],accenture:e,accountant:e,accountants:e,aco:e,actor:e,ads:e,adult:e,aeg:e,aetna:e,afl:e,africa:e,agakhan:e,agency:e,aig:e,airbus:e,airforce:e,airtel:e,akdn:e,alibaba:e,alipay:e,allfinanz:e,allstate:e,ally:e,alsace:e,alstom:e,amazon:e,americanexpress:e,americanfamily:e,amex:e,amfam:e,amica:e,amsterdam:e,analytics:e,android:e,anquan:e,anz:e,aol:e,apartments:e,app:[1,{beget:n,clerk:t,clerkstage:t,wnext:t,platform0:t,deta:t,ondigitalocean:t,easypanel:t,encr:t,edgecompute:t,fireweb:t,onflashdrive:t,framer:t,run:[2,{a:t}],web:t,hasura:t,loginline:t,messerli:t,netlify:t,ngrok:t,"ngrok-free":t,developer:n,noop:t,northflank:n,snowflake:[2,{privatelink:t}],streamlit:t,storipress:t,telebit:t,typedream:t,vercel:t,bookonline:t}],apple:e,aquarelle:e,arab:e,aramco:e,archi:e,army:e,art:e,arte:e,asda:e,associates:e,athleta:e,attorney:e,auction:e,audi:e,audible:e,audio:e,auspost:e,author:e,auto:e,autos:e,avianca:e,aws:[1,{sagemaker:[0,{"af-south-1":s,"ap-east-1":s,"ap-northeast-1":s,"ap-northeast-2":s,"ap-northeast-3":s,"ap-south-1":s,"ap-south-2":a,"ap-southeast-1":s,"ap-southeast-2":s,"ap-southeast-3":s,"ap-southeast-4":a,"ca-central-1":s,"eu-central-1":s,"eu-central-2":a,"eu-north-1":s,"eu-south-1":s,"eu-south-2":a,"eu-west-1":s,"eu-west-2":s,"eu-west-3":s,"il-central-1":s,"me-central-1":s,"me-south-1":s,"sa-east-1":s,"us-east-1":w,"us-east-2":w,"us-gov-east-1":E,"us-gov-west-1":E,"us-west-1":s,"us-west-2":w}]}],axa:e,azure:e,baby:e,baidu:e,banamex:e,bananarepublic:e,band:e,bank:e,bar:e,barcelona:e,barclaycard:e,barclays:e,barefoot:e,bargains:e,baseball:e,basketball:[1,{aus:t,nz:t}],bauhaus:e,bayern:e,bbc:e,bbt:e,bbva:e,bcg:e,bcn:e,beats:e,beauty:e,beer:e,bentley:e,berlin:e,best:e,bestbuy:e,bet:e,bharti:e,bible:e,bid:e,bike:e,bing:e,bingo:e,bio:e,black:e,blackfriday:e,blockbuster:e,blog:e,bloomberg:e,blue:e,bms:e,bmw:e,bnpparibas:e,boats:e,boehringer:e,bofa:e,bom:e,bond:e,boo:e,book:e,booking:e,bosch:e,bostik:e,boston:e,bot:e,boutique:e,box:e,bradesco:e,bridgestone:e,broadway:e,broker:e,brother:e,brussels:e,build:e,builders:[1,{cloudsite:t}],business:K,buy:e,buzz:e,bzh:e,cab:e,cafe:e,cal:e,call:e,calvinklein:e,cam:e,camera:e,camp:e,canon:e,capetown:e,capital:e,capitalone:e,car:e,caravan:e,cards:e,care:e,career:e,careers:e,cars:e,casa:[1,{nabu:[0,{ui:t}]}],case:e,cash:e,casino:e,catering:e,catholic:e,cba:e,cbn:e,cbre:e,center:e,ceo:e,cern:e,cfa:e,cfd:e,chanel:e,channel:e,charity:e,chase:e,chat:e,cheap:e,chintai:e,christmas:e,chrome:e,church:e,cipriani:e,circle:e,cisco:e,citadel:e,citi:e,citic:e,city:e,claims:e,cleaning:e,click:e,clinic:e,clinique:e,clothing:e,cloud:[1,{banzai:n,elementor:t,encoway:[0,{eu:t}],statics:n,ravendb:t,axarnet:[0,{"es-1":t}],diadem:t,jelastic:[0,{vip:t}],jele:t,"jenv-aruba":[0,{aruba:[0,{eur:[0,{it1:t}]}],it1:t}],keliweb:[2,{cs:t}],oxa:[2,{tn:t,uk:t}],primetel:[2,{uk:t}],reclaim:[0,{ca:t,uk:t,us:t}],trendhosting:[0,{ch:t,de:t}],jotelulu:t,kuleuven:t,linkyard:t,magentosite:n,perspecta:t,vapor:t,"on-rancher":n,scw:[0,{baremetal:[0,{"fr-par-1":t,"fr-par-2":t,"nl-ams-1":t}],"fr-par":[0,{fnc:[2,{functions:t}],k8s:H,s3:t,"s3-website":t,whm:t}],instances:[0,{priv:t,pub:t}],k8s:t,"nl-ams":[0,{k8s:H,s3:t,"s3-website":t,whm:t}],"pl-waw":[0,{k8s:H,s3:t,"s3-website":t}],scalebook:t,smartlabeling:t}],sensiosite:n,trafficplex:t,urown:t,voorloper:t}],club:[1,{cloudns:t,jele:t,barsy:t}],clubmed:e,coach:e,codes:[1,{owo:n}],coffee:e,college:e,cologne:e,comcast:e,commbank:e,community:[1,{nog:t,ravendb:t,myforum:t}],company:e,compare:e,computer:e,comsec:e,condos:e,construction:e,consulting:e,contact:e,contractors:e,cooking:e,cool:[1,{elementor:t,de:t}],corsica:e,country:e,coupon:e,coupons:e,courses:e,cpa:e,credit:e,creditcard:e,creditunion:e,cricket:e,crown:e,crs:e,cruise:e,cruises:e,cuisinella:e,cymru:e,cyou:e,dabur:e,dad:e,dance:e,data:e,date:e,dating:e,datsun:e,day:e,dclk:e,dds:e,deal:e,dealer:e,deals:e,degree:e,delivery:e,dell:e,deloitte:e,delta:e,democrat:e,dental:e,dentist:e,desi:e,design:[1,{bss:t}],dev:[1,{autocode:t,lcl:n,lclstage:n,stg:n,stgstage:n,pages:t,r2:t,workers:t,curv:t,deno:t,"deno-staging":t,deta:t,fly:t,githubpreview:t,gateway:n,iserv:t,localcert:[0,{user:n}],loginline:t,mediatech:t,ngrok:t,"ngrok-free":t,"platter-app":t,shiftcrypto:t,vercel:t,webhare:n}],dhl:e,diamonds:e,diet:e,digital:[1,{cloudapps:[2,{london:t}]}],direct:e,directory:e,discount:e,discover:e,dish:e,diy:e,dnp:e,docs:e,doctor:e,dog:e,domains:e,dot:e,download:e,drive:e,dtv:e,dubai:e,dunlop:e,dupont:e,durban:e,dvag:e,dvr:e,earth:[1,{dapps:[0,{"*":t,bzz:n}]}],eat:e,eco:e,edeka:e,education:K,email:e,emerck:e,energy:e,engineer:e,engineering:e,enterprises:e,epson:e,equipment:e,ericsson:e,erni:e,esq:e,estate:[1,{compute:n}],eurovision:e,eus:[1,{party:fb}],events:[1,{koobin:t,co:t}],exchange:e,expert:e,exposed:e,express:e,extraspace:e,fage:e,fail:e,fairwinds:e,faith:ba,family:e,fan:e,fans:e,farm:[1,{storj:t}],farmers:e,fashion:e,fast:e,fedex:e,feedback:e,ferrari:e,ferrero:e,fidelity:e,fido:e,film:e,final:e,finance:e,financial:K,fire:e,firestone:e,firmdale:e,fish:e,fishing:e,fit:e,fitness:e,flickr:e,flights:e,flir:e,florist:e,flowers:e,fly:e,foo:e,food:e,football:e,ford:e,forex:e,forsale:e,forum:e,foundation:e,fox:e,free:e,fresenius:e,frl:e,frogans:e,frontier:e,ftr:e,fujitsu:e,fun:e,fund:e,furniture:e,futbol:e,fyi:e,gal:e,gallery:e,gallo:e,gallup:e,game:e,games:e,gap:e,garden:e,gay:e,gbiz:e,gdn:[1,{cnpy:t}],gea:e,gent:e,genting:e,george:e,ggee:e,gift:e,gifts:e,gives:e,giving:e,glass:e,gle:e,global:e,globo:e,gmail:e,gmbh:e,gmo:e,gmx:e,godaddy:e,gold:e,goldpoint:e,golf:e,goo:e,goodyear:e,goog:[1,{cloud:t,translate:t,usercontent:n}],google:e,gop:e,got:e,grainger:e,graphics:e,gratis:e,green:e,gripe:e,grocery:e,group:[1,{discourse:t}],guardian:e,gucci:e,guge:e,guide:e,guitars:e,guru:e,hair:e,hamburg:e,hangout:e,haus:e,hbo:e,hdfc:e,hdfcbank:e,health:[1,{hra:t}],healthcare:e,help:e,helsinki:e,here:e,hermes:e,hiphop:e,hisamitsu:e,hitachi:e,hiv:e,hkt:e,hockey:e,holdings:e,holiday:e,homedepot:e,homegoods:e,homes:e,homesense:e,honda:e,horse:e,hospital:e,host:[1,{cloudaccess:t,freesite:t,easypanel:t,fastvps:t,myfast:t,tempurl:t,wpmudev:t,jele:t,mircloud:t,pcloud:t,half:t}],hosting:[1,{opencraft:t}],hot:e,hotels:e,hotmail:e,house:e,how:e,hsbc:e,hughes:e,hyatt:e,hyundai:e,ibm:e,icbc:e,ice:e,icu:e,ieee:e,ifm:e,ikano:e,imamat:e,imdb:e,immo:e,immobilien:e,inc:e,industries:e,infiniti:e,ing:e,ink:e,institute:e,insurance:e,insure:e,international:e,intuit:e,investments:e,ipiranga:e,irish:e,ismaili:e,ist:e,istanbul:e,itau:e,itv:e,jaguar:e,java:e,jcb:e,jeep:e,jetzt:e,jewelry:e,jio:e,jll:e,jmp:e,jnj:e,joburg:e,jot:e,joy:e,jpmorgan:e,jprs:e,juegos:e,juniper:e,kaufen:e,kddi:e,kerryhotels:e,kerrylogistics:e,kerryproperties:e,kfh:e,kia:e,kids:e,kim:e,kindle:e,kitchen:e,kiwi:e,koeln:e,komatsu:e,kosher:e,kpmg:e,kpn:e,krd:[1,{co:t,edu:t}],kred:e,kuokgroup:e,kyoto:e,lacaixa:e,lamborghini:e,lamer:e,lancaster:e,land:[1,{static:[2,{dev:t,sites:t}]}],landrover:e,lanxess:e,lasalle:e,lat:e,latino:e,latrobe:e,law:e,lawyer:e,lds:e,lease:e,leclerc:e,lefrak:e,legal:e,lego:e,lexus:e,lgbt:e,lidl:e,life:e,lifeinsurance:e,lifestyle:e,lighting:e,like:e,lilly:e,limited:e,limo:e,lincoln:e,link:[1,{cyon:t,mypep:t,dweb:n}],lipsy:e,live:[1,{hlx:t}],living:e,llc:e,llp:e,loan:e,loans:e,locker:e,locus:e,lol:[1,{omg:t}],london:e,lotte:e,lotto:e,love:e,lpl:e,lplfinancial:e,ltd:e,ltda:e,lundbeck:e,luxe:e,luxury:e,madrid:e,maif:e,maison:e,makeup:e,man:e,management:[1,{router:t}],mango:e,map:e,market:e,marketing:e,markets:e,marriott:e,marshalls:e,mattel:e,mba:e,mckinsey:e,med:e,media:Yl,meet:e,melbourne:e,meme:e,memorial:e,men:e,menu:xp,merckmsd:e,miami:e,microsoft:e,mini:e,mint:e,mit:e,mitsubishi:e,mlb:e,mls:e,mma:e,mobile:e,moda:e,moe:e,moi:e,mom:e,monash:e,money:e,monster:e,mormon:e,mortgage:e,moscow:e,moto:e,motorcycles:e,mov:e,movie:e,msd:e,mtn:e,mtr:e,music:e,nab:e,nagoya:e,natura:e,navy:e,nba:e,nec:e,netbank:e,netflix:e,network:[1,{alces:n,co:t,arvo:t,azimuth:t,tlon:t}],neustar:e,new:e,news:[1,{noticeable:t}],next:e,nextdirect:e,nexus:e,nfl:e,ngo:e,nhk:e,nico:e,nike:e,nikon:e,ninja:e,nissan:e,nissay:e,nokia:e,norton:e,now:e,nowruz:e,nowtv:e,nra:e,nrw:e,ntt:e,nyc:e,obi:e,observer:e,office:e,okinawa:e,olayan:e,olayangroup:e,oldnavy:e,ollo:e,omega:e,one:[1,{onred:[2,{staging:t}],service:t,homelink:t}],ong:e,onl:e,online:[1,{eero:t,"eero-stage":t,barsy:t}],ooo:e,open:e,oracle:e,orange:[1,{tech:t}],organic:e,origins:e,osaka:e,otsuka:e,ott:e,ovh:[1,{nerdpol:t}],page:[1,{hlx:t,hlx3:t,translated:t,codeberg:t,pdns:t,plesk:t,prvcy:t,rocky:t,magnet:t}],panasonic:e,paris:e,pars:e,partners:e,parts:e,party:ba,pay:e,pccw:e,pet:e,pfizer:e,pharmacy:e,phd:e,philips:e,phone:e,photo:e,photography:e,photos:Yl,physio:e,pics:e,pictet:e,pictures:[1,{1337:t}],pid:e,pin:e,ping:e,pink:e,pioneer:e,pizza:[1,{ngrok:t}],place:K,play:e,playstation:e,plumbing:e,plus:e,pnc:e,pohl:e,poker:e,politie:e,porn:[1,{indie:t}],pramerica:e,praxi:e,press:e,prime:e,prod:e,productions:e,prof:e,progressive:e,promo:e,properties:e,property:e,protection:e,pru:e,prudential:e,pub:xp,pwc:e,qpon:e,quebec:e,quest:e,racing:e,radio:e,read:e,realestate:e,realtor:e,realty:e,recipes:e,red:e,redstone:e,redumbrella:e,rehab:e,reise:e,reisen:e,reit:e,reliance:e,ren:e,rent:e,rentals:e,repair:e,report:e,republican:e,rest:e,restaurant:e,review:ba,reviews:e,rexroth:e,rich:e,richardli:e,ricoh:e,ril:e,rio:e,rip:[1,{clan:t}],rocks:[1,{myddns:t,"lima-city":t,webspace:t}],rodeo:e,rogers:e,room:e,rsvp:e,rugby:e,ruhr:e,run:[1,{hs:t,development:t,ravendb:t,servers:t,build:n,code:n,database:n,migration:n,onporter:t,repl:t,wix:t}],rwe:e,ryukyu:e,saarland:e,safe:e,safety:e,sakura:e,sale:e,salon:e,samsclub:e,samsung:e,sandvik:e,sandvikcoromant:e,sanofi:e,sap:e,sarl:e,sas:e,save:e,saxo:e,sbi:e,sbs:e,scb:e,schaeffler:e,schmidt:e,scholarships:e,school:e,schule:e,schwarz:e,science:ba,scot:[1,{edu:t,gov:[2,{service:t}]}],search:e,seat:e,secure:e,security:e,seek:e,select:e,sener:e,services:[1,{loginline:t}],seven:e,sew:e,sex:e,sexy:e,sfr:e,shangrila:e,sharp:e,shaw:e,shell:e,shia:e,shiksha:e,shoes:e,shop:[1,{base:t,hoplix:t,barsy:t}],shopping:e,shouji:e,show:e,silk:e,sina:e,singles:e,site:[1,{cloudera:n,cyon:t,fnwk:t,folionetwork:t,fastvps:t,jele:t,lelux:t,loginline:t,barsy:t,mintere:t,omniwe:t,opensocial:t,platformsh:n,tst:n,byen:t,srht:t,novecore:t}],ski:e,skin:e,sky:e,skype:e,sling:e,smart:e,smile:e,sncf:e,soccer:e,social:e,softbank:e,software:e,sohu:e,solar:e,solutions:[1,{diher:n}],song:e,sony:e,soy:e,spa:e,space:[1,{myfast:t,uber:t,xs4all:t}],sport:e,spot:e,srl:e,stada:e,staples:e,star:e,statebank:e,statefarm:e,stc:e,stcgroup:e,stockholm:e,storage:e,store:[1,{sellfy:t,shopware:t,storebase:t}],stream:e,studio:e,study:e,style:e,sucks:e,supplies:e,supply:e,support:xp,surf:e,surgery:e,suzuki:e,swatch:e,swiss:e,sydney:e,systems:[1,{knightpoint:t}],tab:e,taipei:e,talk:e,taobao:e,target:e,tatamotors:e,tatar:e,tattoo:e,tax:e,taxi:e,tci:e,tdk:e,team:[1,{discourse:t,jelastic:t}],tech:e,technology:K,temasek:e,tennis:e,teva:e,thd:e,theater:e,theatre:e,tiaa:e,tickets:e,tienda:e,tips:e,tires:e,tirol:e,tjmaxx:e,tjx:e,tkmaxx:e,tmall:e,today:[1,{prequalifyme:t}],tokyo:e,tools:e,top:[1,{"now-dns":t,ntdll:t}],toray:e,toshiba:e,total:e,tours:e,town:e,toyota:e,toys:e,trade:ba,trading:e,training:e,travel:e,travelers:e,travelersinsurance:e,trust:e,trv:e,tube:e,tui:e,tunes:e,tushu:e,tvs:e,ubank:e,ubs:e,unicom:e,university:e,uno:e,uol:e,ups:e,vacations:e,vana:e,vanguard:e,vegas:e,ventures:e,verisign:e,versicherung:e,vet:e,viajes:e,video:e,vig:e,viking:e,villas:e,vin:e,vip:e,virgin:e,visa:e,vision:e,viva:e,vivo:e,vlaanderen:e,vodka:e,volvo:e,vote:e,voting:e,voto:e,voyage:e,wales:e,walmart:e,walter:e,wang:e,wanggou:e,watch:e,watches:e,weather:e,weatherchannel:e,webcam:e,weber:e,website:Yl,wed:e,wedding:e,weibo:e,weir:e,whoswho:e,wien:e,wiki:Yl,williamhill:e,win:e,windows:e,wine:e,winners:e,wme:e,wolterskluwer:e,woodside:e,work:e,works:e,world:e,wow:e,wtc:e,wtf:e,xbox:e,xerox:e,xfinity:e,xihuan:e,xin:e,"xn--11b4c3d":e,\u0915\u0949\u092E:e,"xn--1ck2e1b":e,\u30BB\u30FC\u30EB:e,"xn--1qqw23a":e,\u4F5B\u5C71:e,"xn--30rr7y":e,\u6148\u5584:e,"xn--3bst00m":e,\u96C6\u56E2:e,"xn--3ds443g":e,\u5728\u7EBF:e,"xn--3pxu8k":e,\u70B9\u770B:e,"xn--42c2d9a":e,\u0E04\u0E2D\u0E21:e,"xn--45q11c":e,\u516B\u5366:e,"xn--4gbrim":e,\u0645\u0648\u0642\u0639:e,"xn--55qw42g":e,\u516C\u76CA:e,"xn--55qx5d":e,\u516C\u53F8:e,"xn--5su34j936bgsg":e,\u9999\u683C\u91CC\u62C9:e,"xn--5tzm5g":e,\u7F51\u7AD9:e,"xn--6frz82g":e,\u79FB\u52A8:e,"xn--6qq986b3xl":e,\u6211\u7231\u4F60:e,"xn--80adxhks":e,\u043C\u043E\u0441\u043A\u0432\u0430:e,"xn--80aqecdr1a":e,\u043A\u0430\u0442\u043E\u043B\u0438\u043A:e,"xn--80asehdb":e,\u043E\u043D\u043B\u0430\u0439\u043D:e,"xn--80aswg":e,\u0441\u0430\u0439\u0442:e,"xn--8y0a063a":e,\u8054\u901A:e,"xn--9dbq2a":e,\u05E7\u05D5\u05DD:e,"xn--9et52u":e,\u65F6\u5C1A:e,"xn--9krt00a":e,\u5FAE\u535A:e,"xn--b4w605ferd":e,\u6DE1\u9A6C\u9521:e,"xn--bck1b9a5dre4c":e,\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3:e,"xn--c1avg":e,\u043E\u0440\u0433:e,"xn--c2br7g":e,\u0928\u0947\u091F:e,"xn--cck2b3b":e,\u30B9\u30C8\u30A2:e,"xn--cckwcxetd":e,\u30A2\u30DE\u30BE\u30F3:e,"xn--cg4bki":e,\uC0BC\uC131:e,"xn--czr694b":e,\u5546\u6807:e,"xn--czrs0t":e,\u5546\u5E97:e,"xn--czru2d":e,\u5546\u57CE:e,"xn--d1acj3b":e,\u0434\u0435\u0442\u0438:e,"xn--eckvdtc9d":e,\u30DD\u30A4\u30F3\u30C8:e,"xn--efvy88h":e,\u65B0\u95FB:e,"xn--fct429k":e,\u5BB6\u96FB:e,"xn--fhbei":e,\u0643\u0648\u0645:e,"xn--fiq228c5hs":e,\u4E2D\u6587\u7F51:e,"xn--fiq64b":e,\u4E2D\u4FE1:e,"xn--fjq720a":e,\u5A31\u4E50:e,"xn--flw351e":e,\u8C37\u6B4C:e,"xn--fzys8d69uvgm":e,\u96FB\u8A0A\u76C8\u79D1:e,"xn--g2xx48c":e,\u8D2D\u7269:e,"xn--gckr3f0f":e,\u30AF\u30E9\u30A6\u30C9:e,"xn--gk3at1e":e,\u901A\u8CA9:e,"xn--hxt814e":e,\u7F51\u5E97:e,"xn--i1b6b1a6a2e":e,\u0938\u0902\u0917\u0920\u0928:e,"xn--imr513n":e,\u9910\u5385:e,"xn--io0a7i":e,\u7F51\u7EDC:e,"xn--j1aef":e,\u043A\u043E\u043C:e,"xn--jlq480n2rg":e,\u4E9A\u9A6C\u900A:e,"xn--jvr189m":e,\u98DF\u54C1:e,"xn--kcrx77d1x4a":e,\u98DE\u5229\u6D66:e,"xn--kput3i":e,\u624B\u673A:e,"xn--mgba3a3ejt":e,\u0627\u0631\u0627\u0645\u0643\u0648:e,"xn--mgba7c0bbn0a":e,\u0627\u0644\u0639\u0644\u064A\u0627\u0646:e,"xn--mgbab2bd":e,\u0628\u0627\u0632\u0627\u0631:e,"xn--mgbca7dzdo":e,\u0627\u0628\u0648\u0638\u0628\u064A:e,"xn--mgbi4ecexp":e,\u0643\u0627\u062B\u0648\u0644\u064A\u0643:e,"xn--mgbt3dhd":e,\u0647\u0645\u0631\u0627\u0647:e,"xn--mk1bu44c":e,\uB2F7\uCEF4:e,"xn--mxtq1m":e,\u653F\u5E9C:e,"xn--ngbc5azd":e,\u0634\u0628\u0643\u0629:e,"xn--ngbe9e0a":e,\u0628\u064A\u062A\u0643:e,"xn--ngbrx":e,\u0639\u0631\u0628:e,"xn--nqv7f":e,\u673A\u6784:e,"xn--nqv7fs00ema":e,\u7EC4\u7EC7\u673A\u6784:e,"xn--nyqy26a":e,\u5065\u5EB7:e,"xn--otu796d":e,\u62DB\u8058:e,"xn--p1acf":[1,{"xn--90amc":t,"xn--j1aef":t,"xn--j1ael8b":t,"xn--h1ahn":t,"xn--j1adp":t,"xn--c1avg":t,"xn--80aaa0cvac":t,"xn--h1aliz":t,"xn--90a1af":t,"xn--41a":t}],\u0440\u0443\u0441:[1,{\u0431\u0438\u0437:t,\u043A\u043E\u043C:t,\u043A\u0440\u044B\u043C:t,\u043C\u0438\u0440:t,\u043C\u0441\u043A:t,\u043E\u0440\u0433:t,\u0441\u0430\u043C\u0430\u0440\u0430:t,\u0441\u043E\u0447\u0438:t,\u0441\u043F\u0431:t,\u044F:t}],"xn--pssy2u":e,\u5927\u62FF:e,"xn--q9jyb4c":e,\u307F\u3093\u306A:e,"xn--qcka1pmc":e,\u30B0\u30FC\u30B0\u30EB:e,"xn--rhqv96g":e,\u4E16\u754C:e,"xn--rovu88b":e,\u66F8\u7C4D:e,"xn--ses554g":e,\u7F51\u5740:e,"xn--t60b56a":e,\uB2F7\uB137:e,"xn--tckwe":e,\u30B3\u30E0:e,"xn--tiq49xqyj":e,\u5929\u4E3B\u6559:e,"xn--unup4y":e,\u6E38\u620F:e,"xn--vermgensberater-ctb":e,verm\u00F6gensberater:e,"xn--vermgensberatung-pwb":e,verm\u00F6gensberatung:e,"xn--vhquv":e,\u4F01\u4E1A:e,"xn--vuq861b":e,\u4FE1\u606F:e,"xn--w4r85el8fhu5dnra":e,\u5609\u91CC\u5927\u9152\u5E97:e,"xn--w4rs40l":e,\u5609\u91CC:e,"xn--xhq521b":e,\u5E7F\u4E1C:e,"xn--zfr164b":e,\u653F\u52A1:e,xyz:[1,{blogsite:t,localzone:t,crafting:t,zapto:t,telebit:n}],yachts:e,yahoo:e,yamaxun:e,yandex:e,yodobashi:e,yoga:e,yokohama:e,you:e,youtube:e,yun:e,zappos:e,zara:e,zero:e,zip:e,zone:[1,{cloud66:t,hs:t,triton:n,lima:t}],zuerich:e}]}();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function c_(e,t,r){if(!t.allowPrivateDomains&&e.length>3){let n=e.length-1,o=e.charCodeAt(n),i=e.charCodeAt(n-1),s=e.charCodeAt(n-2),a=e.charCodeAt(n-3);if(o===109&&i===111&&s===99&&a===46)return r.isIcann=!0,r.isPrivate=!1,r.publicSuffix="com",!0;if(o===103&&i===114&&s===111&&a===46)return r.isIcann=!0,r.isPrivate=!1,r.publicSuffix="org",!0;if(o===117&&i===100&&s===101&&a===46)return r.isIcann=!0,r.isPrivate=!1,r.publicSuffix="edu",!0;if(o===118&&i===111&&s===103&&a===46)return r.isIcann=!0,r.isPrivate=!1,r.publicSuffix="gov",!0;if(o===116&&i===101&&s===110&&a===46)return r.isIcann=!0,r.isPrivate=!1,r.publicSuffix="net",!0;if(o===101&&i===100&&s===46)return r.isIcann=!0,r.isPrivate=!1,r.publicSuffix="de",!0}return!1}function u_(e,t,r,n){let o=null,i=t;for(;i!==void 0&&(i[0]&n&&(o={index:r+1,isIcann:i[0]===1,isPrivate:i[0]===2}),r!==-1);){let s=i[1];i=Object.prototype.hasOwnProperty.call(s,e[r])?s[e[r]]:s["*"],r-=1}return o}function d_(e,t,r){if(c_(e,t,r))return;let n=e.split("."),o=(t.allowPrivateDomains?2:0)|(t.allowIcannDomains?1:0),i=u_(n,a_,n.length-1,o);if(i!==null){r.isIcann=i.isIcann,r.isPrivate=i.isPrivate,r.publicSuffix=n.slice(i.index+1).join(".");return}let s=u_(n,l_,n.length-1,o);if(s!==null){r.isIcann=s.isIcann,r.isPrivate=s.isPrivate,r.publicSuffix=n.slice(s.index).join(".");return}r.isIcann=!1,r.isPrivate=!1,r.publicSuffix=n[n.length-1]??null}function Rp(e,t){let r={domain:null,subdomain:null,isIcann:null,isPrivate:null,publicSuffix:null};return d_(e,{allowIcannDomains:!0,allowPrivateDomains:t},r),r.publicSuffix===null||(r.domain=Cp(r.publicSuffix,e),r.domain===null)||(r.subdomain=Ap(e,r.domain)),r}function br(e){return typeof e!="string"?!1:!!e.match(/^blob:(http|null|chrome-extension)/)}function mc(e){let t=Nt(e);return t.success?Nt(t.value.pathname):t}function m_(e,t=!1){if(e.startsWith("/")||e.startsWith("#"))return;let r=br(e)?mc(e):Nt(e);if(!r.success)return;let n=r.value.hostname,o=Rp(n,t).domain;return o===null?void 0:o}function wA(e){let t=br(e)?mc(e):Nt(e);if(t.success)return t.value.hostname}function EA(){return m_(window.location.href)??window.location.hostname}function SA(e,t=!1){if(e.startsWith("/")||e.startsWith("#"))return;let r=br(e)?mc(e):Nt(e);if(!r.success)return;let n=r.value.hostname,o=Rp(n,t);if(o.domain!=null)return{rootDomain:o.domain??void 0,subDomain:o.subdomain??void 0,tld:o.publicSuffix??void 0}}function Nt(e){return it(()=>new URL(e))}var ti={getDomainName:m_,getWindowDomain:EA,getHostname:wA,getURLComponents:SA,getBlobInternalUrl:mc,isBlobUrl:br,createSafeURL:Nt};function We(e,t="https"){return`${t}://public.sqrx.com${e?`/${e}`:""}`}function pc(e,t){let r=Nt(e);if(!r.success)return!1;let n=r.value;return!(n.hostname!=="public.sqrx.com"||!n.pathname.startsWith("/display")||n.searchParams.get("type")!==t)}function kA(){return`https://${[443,80].includes(443)?"public.sqrx.com":"public.sqrx.com:443"}/display`}var Pp=kA(),IA=async(e,t)=>(await W.tabs.query({url:`${Pp}/*`,windowId:t})).find(n=>{let o=Nt(n.url??"");if(!o.success)return!1;let i=Array.from(o.value.searchParams),s=o.value.searchParams.get("type"),a=o.value.searchParams.get("country");if(s===Ne)return s===e.type&&a===e.country&&i.length===2;if(s===we)return s===e.type&&i.length==1});var Cr=async(e,t)=>{let r=await IA(e,t);if(r&&r.id)(r.title==="SquareX: Session Disposed"||r.title==="SquareX: Failed to Launch")&&await W.tabs.reload(r.id),await W.tabs.update(r.id,{active:!0});else{let n=e.type===we?`${Pp}/?type=${e.type}`:`${Pp}/?country=${e.country}&type=${e.type}`;await W.tabs.create({url:n})}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Mt(e){return z.object().schema({target:z.string().equals("background-core"),data:e??z.anything()}).partial({module_source:z.string()})}var DA=Mt(),p_=oe(DA);var CA=Mt(z.string().equals("request-logout")),AA=Mt(z.string().equals("request-login"));var aQ=oe(CA),lQ=oe(AA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var RA=z.string().equals("event_propagation"),Ta=z.object().schema({type:RA,event:z.object().schema({type:z.string(),data:z.anything()})}),IQ=oe(Ta);function f_(e,t){return{type:"event_propagation",event:{type:e,data:t}}}var PA=Mt(Ta),h_=oe(PA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var fc=z.string().equals("runtime");function Np(e){return z.object().schema({target:fc,data:e??z.anything()})}var NA=Np(),g_=oe(NA);function y_(e){return{target:"runtime",data:e}}var MA=Np(z.object().schema({type:z.string().equals("exposed_event_callback"),source_id:z.string(),args:z.array().items(z.anything())})),mY=oe(MA);var OA=Np(z.object().schema({type:z.string().equals("core_event_callback"),source_id:z.string(),args:z.array().items(z.anything())})),pY=oe(OA);function b_(e,t){return{target:"runtime",data:{type:"core_event_callback",source_id:e,args:t}}}var LA=Mt(z.object().schema({type:z.string().equals("execute_exposed_function"),fn:z.object().schema({name:z.string(),args:z.array()})})),__=oe(LA);var FA=Mt(z.object().schema({type:z.string().equals("execute_core_function"),fn:z.object().schema({module:z.string(),name:z.string(),args:z.array()})})),v_=oe(FA);var BA=Mt(z.object().schema({type:z.string().equals("requested_exposed_function_availability"),fn:z.string()})),x_=oe(BA);var UA=Mt(z.object().schema({type:z.string().equals("exposed_event_call"),source:z.object().schema({id:z.string(),target:z.oneof(fc)}),event_name:z.string(),listener_action:z.string().allowed("add","remove")})),T_=oe(UA);var VA=Mt(z.object().schema({type:z.string().equals("core_event_call"),source:z.object().schema({id:z.string(),target:z.oneof(fc)}),module_name:z.string(),event_name:z.string(),listener_action:z.string().allowed("add","remove")})),OY=oe(VA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var zA=z.string().equals("content-core");function Mp(e){return z.object().schema({target:zA,data:e??z.anything()})}var qA=Mp(),vX=oe(qA);function w_(e){return{target:"content-core",data:e}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var KA=Mp(Ta),VX=oe(KA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var jA=z.object().schema({source:z.string().equals("tab-worker"),tab_id:z.number()}),HA=z.object().schema({source:z.string().equals("unspecified")}),GA=z.oneof(jA,HA),E_=z.string().equals("module");function WA(e){return z.object().schema({target:E_,module:z.string(),source:GA,data:e??z.anything()})}var $A=WA(),QA=z.object().schema({target:z.string().equals("module_event_forward"),module:z.string(),event:z.string(),args:z.array().items(z.anything())});function S_(e,t,r){return{target:"module_event_forward",module:e,event:t,args:r}}var EZ=oe(QA),YA=z.object().schema({target:z.string().equals("exposed_event_forward"),module_source:z.string(),event:z.string(),args:z.array().items(z.anything())});function k_(e,t,r){return{target:"exposed_event_forward",module_source:e,event:t,args:r}}var SZ=oe(YA),kZ=oe(E_),I_=oe($A);function is(e,t,r){return{target:"module",module:e,data:t,source:r??{source:"unspecified"}}}var XA=z.object().schema({target:z.string().equals("module_direct_call"),module:z.string(),call:z.object().schema({name:z.string(),args:z.array()})}),D_=oe(XA);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function C_(e){return Rt(e)&&e.type==="error-report"&&Zb(e,"report")}function A_(e){return Rt(e)&&e.type==="log-event"&&Rt(e.event)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ZA="module-manager-request",JA="fetch-modules-request",e0="toggle-module-request";function R_(e){return Mt(z.object().schema({type:z.string().equals(ZA),request:e}))}var P_=R_(z.object().schema({type:z.string().equals(JA)})),N_=oe(P_);var M_=R_(z.object().schema({type:z.string().equals(e0),name:z.string(),value:z.boolean()})),O_=oe(M_);var t0=z.oneof(P_,M_),L_=oe(t0);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function F_(e){return p_(e)&&Rt(e.data)&&e.data.type==="toggle-extension-event"&&Rt(e.data.event)&&typeof e.data.event.state=="boolean"}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Op=te("c.background.content_script_injection");W.runtime.onConnect.addListener(()=>{});async function Lp(e,t){let n=W.runtime.getManifest().content_scripts?.[0]?.js?.[0];if(n)Op.log("Loaded content script name",n);else{Op.warn("Unable to load content script name from manifest");return}let o=await $(()=>W.tabs.query({}));if(!o.success){e.reportError({handled_at:"core",error:{location:"background-script",known_code:`tab_query_failed_during_${t?"oninstall":"onstartup"}_script_injection`,data:{reason:t},exception:o.error}});return}let i=o.value.filter(s=>!!(!s.discarded&&s.id&&s.url?.startsWith("http")));for(let s of i){try{return await W.tabs.sendMessage(s.id,"ping")}catch{W.runtime.lastError&&W.runtime.lastError}try{await W.scripting.executeScript({target:{tabId:s.id,allFrames:!0},injectImmediately:!0,files:[n]})}catch(a){Op.warn("Content script is not injected to tab",s,a)}}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Kr(e){return e.filter(t=>!!(t.id&&t.id!==-1))}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Fp=te("common.event_emitter"),hc=class{constructor(){this.addListener=this.addListener.bind(this),this.removeListener=this.removeListener.bind(this),this.addEventPropagator=this.addEventPropagator.bind(this),this.emit=this.emit.bind(this)}_propagator=null;_listeners={};getListeners=t=>this._listeners[t]??[];setListeners=(t,r)=>{this._listeners[t]=r};addListener(t,r){let n=this.getListeners(t);if(n.indexOf(r)!==-1)return Fp.warn(`Tried to add existing listener for [${t.toString()}]. This is a noop`,r);n.push(r),this.setListeners(t,n)}removeListener(t,r){let n=this.getListeners(t),o=n.indexOf(r);if(o===-1)return Fp.warn(`Tried to remove missing listener for [${t.toString()}]. This is a noop`,r);n.splice(o,1),this.setListeners(t,n)}addEventPropagator(t){this._propagator=t}emit(t,r,n=!1){(()=>{this.getListeners(t).forEach(async i=>{try{await i(r,t)}catch(s){Fp.error(`Event listener error for [${t.toString()}] with`,r,i,s)}}),this._propagator&&!n&&this._propagator(t.toString(),r)})()}};var Ve=new hc;Ve.addEventPropagator(async(e,t)=>{let r=Kr(await W.tabs.query({})),n=f_(e,t);r.forEach(o=>{W.tabs.sendMessage(o.id,w_(n),()=>{W.runtime.lastError&&W.runtime.lastError})}),W.runtime.sendMessage(y_(n),()=>{W.runtime.lastError&&W.runtime.lastError})});l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var B_=te("common.fetcher");function U_(e,t){if(e===void 0)throw new Error("URL was not passed");return t==="path"?We(e):e}async function V_(e){let{urlType:t="path",path:r,payload:n,headers:o={}}=e;if(!r)throw new Error("Path not passed to get");let i=Object.entries(n||{}).reduce((s,[a,w])=>{let E=`${a}=${w}`;return s===""?`?${E}`:`${s}&${E}`},"");try{let s=`${U_(r,t)}${i}`;return await(await fetch(s,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",...o}})).json()}catch(s){B_.error("Error making GET request",s)}}async function wa(e){let{urlType:t="path",path:r,payload:n={},headers:o={}}=e;if(!r)throw new Error("Path not passed to get");try{let i=U_(r,t);return await(await fetch(i,{method:"POST",body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json",...o}})).json()}catch(i){B_.error("Error making POST request",i)}}var r0={maxAttempts:5,maxBackoffInMs:6e4,backoffMode:"none",backoffIncrementInMs:1e3,immediateFirstRetry:!0};async function nn(e,t){let r={...r0,...t??{}},n=0,o=r.immediateFirstRetry?0:r.backoffIncrementInMs;async function i(){if(r.backoffMode!=="none"){if(o===0){o=r.backoffIncrementInMs;return}if(r.backoffMode==="static")return xa(r.backoffIncrementInMs);if(r.backoffMode==="linear"){await xa(o),o=o+r.backoffIncrementInMs>r.maxBackoffInMs?r.maxBackoffInMs:o+r.backoffIncrementInMs;return}await xa(o),o=o*2>r.maxBackoffInMs?r.maxBackoffInMs:o*2}}let s=null;for(;n<r.maxAttempts;){let a=await $(e);if(n++,!a.success){s=Error(`Failed to fetch after [${n}] attempts`),await i();continue}return je(a.value)}return Ue(s)}function n0(e){return wa({urlType:"path",path:"api/log",payload:e})}function z_(e){return $(()=>n0({logs:e}))}var q_="event_logs",Pn="log_events_v2",gc=class{core;_ready=!1;_init;constructor(t){this.core=t,this._init=new Promise(r=>{this.init(r)}),W.alarms.create("logflush",{periodInMinutes:1}),W.alarms.onAlarm.addListener(r=>{r.name==="logflush"&&this.flush()})}init=t=>{let r=globalThis.indexedDB.open(q_,1);r.addEventListener("upgradeneeded",()=>{r.result.createObjectStore(Pn,{keyPath:"id"}),this._ready=!0,t()})};get ready(){return this._ready}waitUntilReady=async()=>{if(!this._ready)return new Promise(t=>this._init.finally(()=>t()))};open=async()=>new Promise((t,r)=>{let n=indexedDB.open(q_,1);n.onsuccess=()=>t(n.result),n.onerror=o=>r(o)});countTransaction(t){return new Promise((r,n)=>{let i=t.transaction(Pn).objectStore(Pn).count();i.onerror=s=>n(s),i.onsuccess=()=>r(i.result)})}writeEventTransaction(t,r){return new Promise((n,o)=>{let s=t.transaction(Pn,"readwrite").objectStore(Pn).add(r);s.onerror=a=>o(a),s.onsuccess=()=>n(s.result)})}getAllEvents(t){return new Promise((r,n)=>{let i=t.transaction(Pn).objectStore(Pn).getAll();i.onsuccess=()=>r(i.result),i.onerror=s=>n(s)})}clearEvents(t,r){let n=t.transaction(Pn,"readwrite");r.forEach(o=>n.objectStore(Pn).delete(o))}count=async()=>$(async()=>{let t=await this.open();return await this.countTransaction(t)});log=async t=>$(async()=>{let r=await this.open();return await this.writeEventTransaction(r,t)});flush=async()=>$(async()=>{let t=await this.open(),r=await this.getAllEvents(t);if(r.length===0)return;let n=await z_(r);if(!n.success)return n;if(Rt(n.value)&&Xb(n.value,"ingested_events")){let o=n.value.ingested_events.filter(s=>Rt(s)&&typeof s.id=="string").map(s=>s.id),i=await this.open();this.clearEvents(i,o)}})};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Bp(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}var o0=te("c.background.module_api"),oo=class{name;_module;_timers;_message;_exposedFunctions;_exposedEvents;_report;_notifications;_user;_tabs;_createObjectURL;_workers;_oldWorkers;get systemEvents(){return Ve}get settings(){return this._module.cachedSettings}get isRunning(){return this._module.running}get isEnabled(){return this._module.core.moduleManager.getEnabledState(this.name)}get user(){return this._user||(this._user={getLastAuthSuccess:()=>this._module.core.userManager.lastAuthSuccess,getLatestApiSessions:()=>this._module.core.userManager.currentSessions,getLatestApiRegions:()=>this._module.core.userManager.currentRegions,getLatestApiUser:()=>this._module.core.userManager.currentUser,authorize:()=>this._module.core.userManager.authorize(),logout:()=>this._module.core.userManager.logout()}),this._user}static create(t){return new Proxy(new oo(t),{get:(r,n,o)=>{let i=n.toString();if(t.core){if(i==="setModuleManagementSwitch")return(a,w)=>{t.core.moduleManager.setSwitchValue(a,w)};if(i==="addExternalMessageListener")return(a,w)=>{t.core.addMessageListener(a,w)};if(i==="removeExternalMessageListener")return a=>{t.core.removeMessageListener(a)}}let s=Reflect.get(r,n,o);return s||t.core.moduleManager.getCoreModuleInterface(n.toString(),{caller_type:"sw_module",sender:t.name})}})}get report(){return this._report||(this._report={log:t=>{let r=Ht(t);t.occurred_on&&(r.occurred_on=t.occurred_on),this._module.core.logdb.log(r)},error:t=>{(async()=>this._module.core.reportError({handled_at:"module",module:this.name,error:{location:"background-script",...t}}))()}}),this._report}get timers(){return this._timers?this._timers:{setInterval:this._module.setInterval,setTimeout:this._module.setTimeout,clearInterval:this._module.clearInterval,clearTimeout:this._module.clearTimeout}}get exposedFunctions(){if(!this._exposedFunctions){let t=[].concat(this._module.manifest.module.required_exposed_functions?.background??[],this._module.manifest.module.optional_exposed_functions?.background??[]);this._exposedFunctions=t.reduce((r,n)=>{let o=this._module.core.exposedInterfaces.bindExposedFunction(n,this._module.name);return o&&(r[n]=o),r},{})}return this._exposedFunctions}get exposedEvents(){return this._exposedEvents||(this._exposedEvents=this._module.core.exposedInterfaces.eventsList.reduce((t,r)=>{if(t[r.name])return o0.warn("Duplication of exposed event!",r.name),t;let n=this._module.core.exposedInterfaces.bindExposedEvent(r.name,this._module.name);return n&&(t[r.name]=n),t},{})),this._exposedEvents}get message(){return this._message||(this._message={sendToContentScript:async(t,r,n)=>{let o=await $(()=>n?W.tabs.sendMessage(t,is(this.name,r),n):W.tabs.sendMessage(t,is(this.name,r)));return o.success||W.runtime.lastError,o}}),this._message}get notifications(){return this._notifications||(this._notifications={addEmailListener:t=>this._module.core.firebaseNotificationManager.onEmailNotifications.addListener(t),removeEmailListener:t=>this._module.core.firebaseNotificationManager.onEmailNotifications.removeListener(t),addGenericListener:t=>this._module.core.firebaseNotificationManager.onGenericNotifications.removeListener(t),removeGenericListener:t=>this._module.core.firebaseNotificationManager.onGenericNotifications.addListener(t)}),this._notifications}get tabs(){return this._tabs||(this._tabs={getUrlOfTab:t=>this._module.core.tabMemoryManager.getTabUrl(t),getTabsForUrl:t=>this._module.core.tabMemoryManager.getTabsByUrl(t),getTabDetails:t=>this._module.core.tabMemoryManager.getTabDetails(t),getTabActiveStatus:t=>this._module.core.tabMemoryManager.getTabActiveStatus(t)}),this._tabs}get createObjectURL(){return this._createObjectURL||(this._createObjectURL={fromBinary:this._module.core.offscreenManager.generateObjectURLFromBytes,fromOPFS:this._module.core.offscreenManager.generateObjectURLFromOPFS}),this._createObjectURL}get workers(){if(!this._workers){let t=r=>(...n)=>this._module.core.offscreenManager.executeWorker(Bp(r),n,15e3);this._workers=new Proxy({},{get:(r,n)=>t(typeof n=="symbol"?n.toString():n)})}return this._workers}get oldWorkers(){if(!this._oldWorkers){let t=r=>(n,o,i)=>this._module.core.offscreenManager.executeOldWorker(Bp(r),n,o,i);this._oldWorkers=new Proxy({},{get:(r,n)=>t(typeof n=="symbol"?n.toString():n)})}return this._oldWorkers}constructor(t){this.name=t.name,this._module=t}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Up=class extends st{constructor(t,r){super(`The exposed function [${t}] can not run because the module [${r}] is not available`),this._type=Up.SerializedType,this.setState({functionName:t,moduleName:r})}},ri=Up;ie(ri,"SerializedType","ExposedFunctionUnavailableError");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ot=te("c.background.exposed_function_manager"),yc=class{_functions=new Map;_functionToModuleMap=new Map;_events=new Map;_core;_wrappedEventListeners=new Map;_functionAvailabilityListeners=new Map;constructor(t){this._core=t,Ve.addListener("modules_synchronized",this.onModulesSynchronized)}get events(){return this._events}get eventsList(){return Array.from(this._events.entries()).map(([t,r])=>({name:t,event:r}))}addAvailabilityListener=(t,r)=>{let n=this._functionAvailabilityListeners.get(t)??[];n.push(r),this._functionAvailabilityListeners.set(t,n)};removeAvailabilityListener=(t,r)=>{let n=this._functionAvailabilityListeners.get(t)??[],o=n.indexOf(r);o!==-1&&n.splice(o,1),this._functionAvailabilityListeners.set(t,n)};onModulesSynchronized=async t=>{for(let[r,n]of this._functionAvailabilityListeners.entries()){let o=this._functionToModuleMap.get(r);if(!o){Ot.warn(`Unable to find mapping from exposed function [${r}] to module`);continue}let i=o.name,s=t.find(a=>a.module===i);!s||!s.hasChanged||n.forEach(a=>{it(()=>a(s.running)).success||Ot.error(`Error running function availability listener for [${r}]`,a)})}};async executeFunctionFromRuntime({name:t,args:r},n,o){let i=this._functions.get(t);return i?o?i(`_contentscript:${o}`)({caller_type:"cs_module",module:o,sender:n},...r):i("__runtime")({caller_type:"runtime",sender:n},...r):Ue(new Error(`Exposed function [${t}] does not exist`))}async executeFunctionFromExternal({name:t,args:r},n){let o=this._functions.get(t);if(!o){let i=`Exposed function [${t}] does not exist`;return Ot.warn(i),Ue(new Error(i))}return o("__external")({caller_type:"external_site",sender:n},...r)}async getFunctionAvailability(t){return this._functionToModuleMap.get(t)?.running}executeEventActionFromRuntime({event_name:t,listener_action:r,source:n}){let o=this._events.get(t);if(!o){let i=`Exposed event [${name}] does not exist`;return Ot.warn(i),Ue(new Error(i))}if(r==="add"){let i=this._wrappedEventListeners.get(n.id);if(i)return je(o("__runtime").addListener(i));let s=n.target==="runtime"?async(...a)=>{let w=await $(()=>W.runtime.sendMessage(b_(n.id,a)));w.success||(this._wrappedEventListeners.delete(n.id),o("__runtime").removeListener(s),Ot.warn("Failed to send event callback response to popup, listener will be removed",w.error))}:()=>{Ot.warn("Unknown runtime target for exposed event callback",n.target)};try{return o("__runtime").addListener(s),je(n.id)}catch(a){return Ue(a instanceof Error?Zo(a):a)}}else{let i=this._wrappedEventListeners.get(n.id);if(i)try{return o("__runtime").removeListener(i),this._wrappedEventListeners.delete(i),je(n.id)}catch(a){return Ue(a instanceof Error?Zo(a):a)}let s=`Unable to find an event listener for the given callback ID ${n.id}`;return Ot.warn(s),Ue(new Error(s))}}addExposedFunction(t,r,n){this._functions.set(t,this.createWrappedFunction(t,r,n)),this._functionToModuleMap.set(t,n),Ot.info(`Added exposed function [${t}] from module [${n.name}]`)}addExposedEvent(t,r,n){this._events.set(t,this.createWrappedEvent(t,r,n)),Ot.info(`Added exposed function [${t}] from module [${n.name}]`)}bindExposedFunction(t,r){let n=this._functions.get(t);if(!n)return null;let o=n(r),i=(...s)=>o({caller_type:"sw_module",sender:r},...s);return i.isAvailable=o.isAvailable,i}bindExposedEvent(t,r){let n=this._events.get(t);return n?n(r):null}createWrappedEvent(t,r,n){return o=>(Ot.info(`Binding exposed event [${t}] in module [${n.name}] for caller [${o}]`),{addListener:i=>{Ot.info(`Event addListener call to [${t}:${n.name}] from [${o}]`);let s=this._wrappedEventListeners.get(i);if(s)return r.addListener(s);let a=(...w)=>{Ot.info(`Called wrapped event listener of [${o}] for event [${t}:${n.name}]`),i(...w)};this._wrappedEventListeners.set(i,a),r.addListener(a)},removeListener:i=>{Ot.info(`Event removeListener call to [${t}:${n.name}] from [${o}]`);let s=this._wrappedEventListeners.get(i);if(s){r.removeListener(s),this._wrappedEventListeners.delete(i);return}Ot.warn("Unable to find an event listener for the given function signature"),r.removeListener(i)}})}createWrappedFunction(t,r,n){return o=>{Ot.info(`Binding exposed function [${t}] in module [${n.name}] for caller [${o}]`);let i=async(s,...a)=>{if(!n.running){let w=new ri(t,n.name);return Ot.error(w.message),Ue(w)}Ot.info(`Call to exposed function [${t}] in module [${n.name}] for caller [${o}]`,s,...a);try{let w=r.call(oo.create(n),...a,s);return lc(w)?w.then(E=>cc(E)?E:je(E)).catch(E=>(this._core.reportError({handled_at:"core",module:n.name,error:{known_code:"unhandled_exception_in_exposed_function",exception:E,location:"background-exposed-function",name:t,caller:o}}),Ue(E instanceof Error?Zo(E):E))):je(w)}catch(w){return this._core.reportError({handled_at:"core",module:n.name,error:{known_code:"unhandled_exception_in_exposed_function",exception:w,location:"background-exposed-function",name:t,caller:o}}),Ue(w instanceof Error?Zo(w):w)}};return i.isAvailable=()=>n.running,i.addAvailabilityListener=s=>this.addAvailabilityListener(t,s),i.removeAvailabilityListener=s=>this.removeAvailabilityListener(t,s),i}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var io=te("c.background.module_instance"),bc=class{timerListeners=[];name;_running;_dependencies;_settingsConfig;_cachedSettings=null;_modulePolicy=null;_exposedToModuleEventNames=[];_internalClass;_tabEventSubscriptions=[];manifest;core;get diagnostics(){return{name:this.name,enabled:this._running,timerListeners:this.timerListeners.length}}get running(){return this._running}get cachedSettings(){return this._cachedSettings}get dependencies(){return this._dependencies}get requiresAuthentication(){return!!this.manifest.module.requires_authentication}get systemPolicyEnabled(){return typeof this._modulePolicy?.enabled=="boolean"?this._modulePolicy.enabled:!0}get policy(){return this._modulePolicy}get internalClass(){return this._internalClass}constructor(t,r,n){let{manifest:o,settings:i,dependencies:s,moduleClass:a,exposedToModuleEvents:w,exposedToPublicEvents:E}=r;this._settingsConfig=i,this._dependencies=s,this.name=t,this.manifest=o,this._running=!1,this.core=n,this._internalClass=a?new a:null,globalThis.BackgroundModule[this.name]=this._internalClass,this._internalClass&&(this._internalClass.api=oo.create(this)),this._exposedToModuleEventNames=w,this.configureModuleEventForwarding(w),this.configureModuleEventForwarding(E,!1)}configureModuleEventForwarding=(t,r=!0)=>{for(let n of t){let o=this._internalClass?.__INTERNAL_USE_ONLY_GET_MEMBER(n);if(!o){io.warn(`Missing event manager for [${n}] in module [${name}]`);continue}if(o?.addListener(this.makeEventForwarder(n,r)),typeof o.clearAllListeners!="function"){io.warn(`Module exposed event for [${n}] can not be managed from the module instance in [${name}]`);continue}o.clearAllListeners=new Proxy(o.clearAllListeners,{apply:(i,s,a)=>{let w=Reflect.apply(i,s,a);return s.addListener(this.makeEventForwarder(n,r)),w}})}};makeEventForwarder=(t,r=!0)=>async(...n)=>{let o=r?S_(this.name,t,n):k_(this.name,t,n),i=await $(()=>W.tabs.query({}));if(!i.success)return io.warn("Unable to query for tabs while running event forwarding");i.value.forEach(async s=>{let a=s.id;if(!a)return;let w=await $(()=>W.tabs.sendMessage(a,o));return w.success||W.runtime.lastError,w})};setSystemPolicy=async t=>{this._modulePolicy=t;let r=t?.enforce_settings;if(r)return this._settingsConfig?.store.transact(async n=>{let o=n.get(),i=Object.entries(r).reduce((s,[a,w])=>(s[a]=w,s),{});return n.set(o?{...o,...i}:i)})};hasExposedFunction=t=>typeof this.internalClass?.[t]=="function";async initialize(){let t=await $(()=>this._internalClass?.onInit?.call(this._internalClass));return t.success||this.core.reportError({handled_at:"core",module:this.name,error:{location:"background-script",known_code:"oninit_unhandled_exception",exception:t.error}}),t}clearTimeout=t=>{this.clearTimer(!1,t)};clearInterval=t=>{this.clearTimer(!0,t)};clearTimer=(t,r)=>{(t?globalThis.clearInterval:globalThis.clearTimeout)(r);let o=this.timerListeners.findIndex(i=>i.handle===r);o!==-1&&this.timerListeners.splice(o,1)};setInterval=(t,r)=>this.setTimer(!0,t,r);setTimeout=(t,r)=>this.setTimer(!1,t,r);setTimer=(t,r,n)=>{let o=async()=>{try{await r()}catch(a){io.error(`An error occurred in an interval timer configured on [${this.name}]`,a)}},s=(t?globalThis.setInterval:globalThis.setTimeout)(o,n);return this.timerListeners.push({listener:r,timeout:n,handle:s,boundListener:o,isInterval:t}),s};unloadCallbacks=()=>{this.timerListeners.forEach(t=>{t.isInterval?globalThis.clearInterval(t.handle):globalThis.clearTimeout(t.handle)}),this.timerListeners=[]};stop=async()=>{this.unloadCallbacks(),this._running=!1,this.internalClass?.onStop&&this.internalClass.onStop?.call(this.internalClass)};hasRequiredPermissions=t=>this.getMissingPermissions(t).length===0;getMissingPermissions=t=>{let r=t.permissions;return Array.from(new Set((this.manifest.module.requires_permissions??[]).concat(this.manifest.module.requires_optional_permissions??[]))).filter(o=>!r||!r.includes(o))};start=async()=>{if(!this.internalClass?.onStart){this._running=!0;return}try{this._running=!0,await this.internalClass.onStart.call(this.internalClass)}catch(t){throw this.unloadCallbacks(),this._running=!1,t}};handleTabMessage=async(t,r,n)=>{if(!this.running)return io.warn(`Tab->background message for module [${t.module}] not handled as the module is not running`,t);if(!this.internalClass?.onTabMessage)return io.warn(`Tab->background message for module [${t.module}] not handled as it has no onTabMessage handler`,t);try{return await this.internalClass.onTabMessage.call(this.internalClass,t.data,r,n)}catch(o){this.core.reportError({handled_at:"core",module:this.name,error:{location:"background-script",known_code:"ontabmessage_unhandled_exception",exception:o}})}};handleRuntimeMessage=async(t,r,n)=>{if(!this.running)return io.warn(`Runtime->background message for module [${t.module}] not handled as the module is not running`,t);if(!this.internalClass?.onMessage)return io.warn(`Runtime->background message for module [${t.module}] not handled as it has no onMessage handler`,t);try{return await this.internalClass?.onMessage.call(this.internalClass,t.data,r,n)}catch(o){this.core.reportError({handled_at:"core",module:this.name,error:{location:"background-script",known_code:"onmessage_unhandled_exception",exception:o}})}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function ni(e,t){return e.reduce((r,n)=>(r[t(n)?"includes":"excludes"].push(n),r),{includes:[],excludes:[]})}function K_(e,t=r=>r){return e.reduce((r,[n,o])=>(r[t(n)]=o,r),{})}var so=te("c.background.module_manager"),_c=class{_core;_modules=new Map;_module_list;_categorized_module_list;_cachedUser=null;_cachedEnabled=void 0;_cachedToggles=void 0;_initialized=!1;_management_switches=new Map(D.map(t=>[t,!0]));_core_interface_cache=new Map;get modules(){return this._modules}get module_list(){return this._module_list=this._module_list??this.getModulesInDependencyOrder(),this._module_list}get categorized_module_list(){if(!this._categorized_module_list){let{includes:t,excludes:r}=ni(this.module_list,n=>n.core_module);this._categorized_module_list={core:t,auxillary:r}}return this._categorized_module_list}get initialized(){return this._initialized}get user(){return this._cachedUser}get core(){return this._core}constructor(t){this._core=t,this.loadModules=this.loadModules.bind(this)}getModulesInDependencyOrder(){let t=Array.from(this._modules.values()),{includes:r,excludes:n}=ni(t,i=>i.dependencies.length===0);if(r.length===0)throw new Error("No root modules available");let o=r.length;for(;o>0;){o=0;let i=r.map(s=>s.id);for(let s=0;s<n.length;s++){let a=n[s];a.dependencies.every(E=>i.includes(E))&&(r.push(n.splice(s,1)[0]),i.push(a.id),o++,s--)}}return r}getExternalInfoForModules=async()=>{let t=await this.core.permissionsManager.getCachedPermissions();return this.module_list.map(r=>({name:r.instance.name,running:r.instance.running,policy:r.instance.policy,manifest:r.manifest,is_core:r.core_module,missing_permissions:r.instance.getMissingPermissions(t)}))};getModuleForExtensionFunction(t){return this.module_list.find(r=>r.instance.hasExposedFunction(t))}getStandaloneModuleRunSetting(t,r){let n=!!t.instance.requiresAuthentication;return(t.manifest.module.requires_switches??[]).some(i=>!this.getSwitchValue(i))||n&&!this._cachedUser||!this._cachedEnabled||!this._cachedToggles?.[t.id]||!t.instance.systemPolicyEnabled||!t.instance.hasRequiredPermissions(r)?"disabled":"enabled"}async synchronizeModules(){let t=await this.core.permissionsManager.getCachedPermissions(),r=!1,n=new Set,{core:o,auxillary:i}=this.categorized_module_list;do r=!1,await Promise.all(o.map(async s=>{let a=s.dependencies.every(w=>this._modules.get(w)?.instance.running)?"enabled":"disabled";if(a==="disabled"&&s.instance.running)return so.error("[BUG]: Core module is being disabled by dependency run setting"),r=!0,n.add(s.id),await s.instance.stop();if(a==="enabled"&&!s.instance.running)return r=!0,n.add(s.id),await s.instance.start()}));while(r);do r=!1,await Promise.all(i.map(async s=>{let a=this.getStandaloneModuleRunSetting(s,t),w=s.dependencies.every(E=>this._modules.get(E)?.instance.running)?"enabled":"disabled";a==="enabled"&&w==="enabled"?s.instance.running||(r=!0,n.add(s.id),await s.instance.start()):s.instance.running&&(r=!0,n.add(s.id),await s.instance.stop())}));while(r);Ve.emit("modules_synchronized",this.module_list.map(s=>({module:s.id,running:s.instance.running,hasChanged:n.has(s.id)})))}async initializeToggles(){await Re.modulesEnabled.transact(async t=>{let r=await t.get()??{},n={};this.module_list.forEach(o=>{n[o.id]=r[o.id]??!o.manifest.module.optional}),await t.set({...r,...n})})}async initializeSettings(){await Promise.allSettled(this.module_list.map(async t=>{if(!t.settings)return;let r=t.settings;return await r.store.transact(async o=>{let i=r.getDefault(),s=await o.get();return s?r.schema(s).hasError?(await o.set(i),i):s:(await o.set(i),i)})}))}async initialize(t,r,n){this._cachedUser=t,this._cachedEnabled=n,this._cachedToggles=await Re.modulesEnabled.unsafeGet(),this.module_list.forEach(s=>{let a=r.modules.find(w=>w.id===s.id);s.instance.setSystemPolicy(a??null)}),await this.initializeSettings(),await this.initializeToggles(),await this.core.permissionsManager.getCachedPermissions();let{core:o,auxillary:i}=this.categorized_module_list;await Promise.all(o.map(s=>s.instance.initialize())),await Promise.all(i.map(s=>s.instance.initialize())),Re.user.onChange.addListener(s=>{this._cachedUser=s??null,this.synchronizeModules()}),Re.modulesEnabled.onChange.addListener(s=>{this._cachedToggles=s,this.synchronizeModules()}),Re.extensionEnabled.onChange.addListener(s=>{this._cachedEnabled=s,this.synchronizeModules()}),Re.systemPolicy.onChange.addListener(async s=>{await Promise.allSettled(this.module_list.map(a=>{let w=s?.modules.find(E=>E.id===a.id)??null;return a.instance.setSystemPolicy(w)})),this.synchronizeModules()}),this.synchronizeModules(),this._initialized=!0}loadModules(t){let r=Object.values(t);for(let n of r)this._modules.set(n.id,{...n,instance:new bc(n.id,n,this._core),dependents:[]});for(let n of this.module_list){let o=n.instance.internalClass;if(!o)continue;n.exposedToPublicFunctions.forEach(s=>{this._core.exposedInterfaces.addExposedFunction(s,o.__INTERNAL_USE_ONLY_GET_MEMBER(s),n.instance)}),n.exposedToPublicEvents.forEach(s=>{this._core.exposedInterfaces.addExposedEvent(s,o.__INTERNAL_USE_ONLY_GET_MEMBER(s),n.instance)}),(n.manifest.module.required_exposed_functions?.background??[]).forEach(s=>{let a=this.getModuleForExtensionFunction(s);if(!a){so.error(`[BUG] Missing expected module for function [${s}]!`);return}!a.dependents.includes(n.id)&&a.dependents.push(n.id)})}}async handleTargetedMessage(t,r,n){let o=this.modules.get(t.module);return o?r.tab?.id?o.instance.handleTabMessage(t,r,n):o.instance.handleRuntimeMessage(t,r,n):so.warn(`Content->background message for module [${t.module}] but that modules doesn't exist`)}toggleModule=async(t,r)=>{let n=this.modules.get(t);if(!n){so.error("Received a toggle for a module that doesnt exist!",t);return}if(r){let o=await this.core.permissionsManager.getCachedPermissions();if(!n.instance.hasRequiredPermissions(o)){so.warn(`Module [${t}] can not run on this browser`);return}}if(!r&&n.manifest.module.prevent_disable){so.warn(`Module [${t}] can not be disabled, as it is a core requirement.`);return}return Re.modulesEnabled.transact(async o=>{let i=await o.get()??{};o.set({...i,[n.instance.name]:r})})};async handleRequest(t){if(N_(t))return this.getExternalInfoForModules();if(O_(t))return this.toggleModule(t.data.request.name,t.data.request.value)}async handleContentScriptCall(t,r){let n=this._modules.get(t.module);if(!n)return Ue(`Call to module [${t.module}] failed because the module was not found`);let o=n.instance.internalClass?.__INTERNAL_USE_ONLY_GET_MEMBER(t.call.name);return!o||typeof o!="function"?Ue(`Call to module function [${t.module}:${t.call.name}] failed because the module does not have a method to call`):(so.info(`Content script in [${t.module}] has called direct execution of background function [${t.call.name}]`),$(()=>o.apply(n.instance.internalClass,[...t.call.args,r])))}async getEnabledState(t){let r=await Re.modulesEnabled.get();return r.success?je(!!r.value?.[t]):r}runCoreFunction=(t,r,n,o)=>{let i=this.getCoreModuleInterface(t,n);if(!i)return Ue(new st(`Missing core interface for module [${t}]`));let s=it(()=>i[r]);return s.success?s.value(...o):s};getCoreModuleInterfaces=()=>{this.categorized_module_list.core.forEach(r=>r.exposedToPublicFunctions)};getCoreModuleInterface=(t,r)=>{let n=this._modules.get(t);if(!n)return null;let o=(()=>r.caller_type==="runtime"?"__runtime":r.caller_type==="external_site"?"__external":r.caller_type==="sw_module"?`__sw:${r.sender}`:`__cs:${r.sender}`)(),i=this._core_interface_cache.get(t),s=i??new Map;if(i){if(i.has(o))return i.get(o)}else this._core_interface_cache.set(t,s);let a=new Proxy({},{get:(w,E)=>{let V=E.toString(),q=n.instance.internalClass?.__INTERNAL_USE_ONLY_GET_MEMBER(V);if(!q)throw new Error(`Missing core module interface! [${t}.${V}]`);return typeof q=="function"?(...K)=>{let H=it(()=>q(...K,r));return H.success&&H.value instanceof Promise?$(()=>H.value):H}:q}});return s.set(o,a),a};getSwitchValue=t=>!!this._management_switches.get(t);setSwitchValue=(t,r)=>{let n=this._management_switches.get(t),o=r==="on";n===!0&&o||n===!1&&!o||(this._management_switches.set(t,o),this.synchronizeModules().catch(i=>so.error(`Failed to synchronize modules after switch modification [${t}]`,i)))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var i0=z.object().schema({id:z.string()}).partial({enabled:z.boolean(),name:z.string(),description:z.string(),category:z.string(),enforce_settings:z.record(z.anything())}),j_=z.object().schema({modules:z.array().items(i0)}),Vp=z.object().schema({policy:j_}),fse=oe(Vp),hse=oe(j_);function vc(){return{modules:[]}}var xc=class{_core;_currentPolicy=null;constructor(t){this._core=t,Re.systemPolicy.onChange.addListener(this.systemPolicyChanged,!0)}get core(){return this._core}get currentPolicy(){return this._currentPolicy}updatePolicy=async()=>{let t=await this.getSystemPolicy();t.success&&await Re.systemPolicy.set(t.value)};systemPolicyChanged=t=>{this._currentPolicy=t??vc(),Ve.emit("system_policy_update",this._currentPolicy)};getSystemPolicy=async()=>$(async()=>{let r=await(await fetch(We("api/policy"))).json(),n=Vp(r);if(n.hasError)throw n.error;return n.result.policy});initialize=async()=>{let t=await Re.systemPolicy.get();return this._currentPolicy=t.success?t.value??vc():vc(),Ve.addListener("data_refresh_time_updated",this.updatePolicy),this._currentPolicy}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ze=class extends st{_statusCode;_statusMessage;constructor(t,r,n){super(`HTTPError [${t}] for ${r}`),this._statusCode=t,this._statusMessage=n,this._type="HTTPError",this.setState({url:r,code:t,message:n})}get statusCode(){return this._statusCode}get statusMessage(){return this._statusMessage}static fromCode(t,r,n){switch(t){case 0:return new oi(r);case 401:return new ii(r,n);case 403:return new zp(r,n);case 404:return new qp(r,n);case 405:return new Kp(r,n);case 410:return new Mn(r,n);case 425:return new si(r,n);case 500:return new jp(r,n);case 501:return new Hp(r,n);case 502:return new Gp(r,n);case 503:return new Wp(r,n);case 504:return new $p(r,n);default:return new ze(t,r,"Unknown HTTP Error")}}},ao=class extends ze{constructor(t,r,n="ClientHTTPError"){super(t,r,n)}},Nn=class extends ze{constructor(t,r,n="ServerHTTPError"){super(t,r,n)}},oi=class extends ze{constructor(t){super(0,t,"Unable to connect to the server")}},ii=class extends ao{constructor(t,r="Unauthorized"){super(401,t,r)}},zp=class extends ao{constructor(t,r="Forbidden"){super(403,t,r)}},qp=class extends ao{constructor(t,r="Not Found"){super(404,t,r)}},Kp=class extends ao{constructor(t,r="Method Not Allowed"){super(405,t,r)}},Mn=class extends ao{constructor(t,r="Gone"){super(410,t,r)}},si=class extends ao{constructor(t,r="Too Early"){super(425,t,r)}},jp=class extends Nn{constructor(t,r="Internal Server Error"){super(500,t,r)}},Hp=class extends Nn{constructor(t,r="Not Implemented"){super(501,t,r)}},Gp=class extends Nn{constructor(t,r="Bad Gateway"){super(502,t,r)}},Wp=class extends Nn{constructor(t,r="Service Unavailable"){super(503,t,r)}},$p=class extends Nn{constructor(t,r="Gateway Timeout"){super(504,t,r)}};var s0=te("api.authorize_user"),a0=z.object().schema({country:z.string(),is_activated:z.boolean(),name:z.string(),email:z.string(),dmail:z.string(),status:z.string().equals("success"),regions:z.array().items(z.object().schema({code:z.string(),name:z.string()}))}).partial({ttl:z.number(),refresh:z.string().toCustom(e=>isNaN(Number(e))?null:Number(e)),sessions:z.array().items(z.oneof(z.object().schema({session:z.string(),type:z.string().equals(we)}),z.object().schema({session:z.string(),type:z.string().equals(Ne),country:z.string()})))}),l0=z.object().schema({status:z.string().equals("failed"),reason:z.optional(z.string())}),c0=z.oneof(a0,l0),u0=()=>We("api/authorize");async function d0(){return await fetch(u0(),{method:"POST",body:JSON.stringify({}),credentials:"include",headers:{"Content-Type":"application/json"}})}async function H_(){let e=await $(async()=>{let t=await nn(d0,{immediateFirstRetry:!1,backoffMode:"exponential",backoffIncrementInMs:20,maxBackoffInMs:1e3,maxAttempts:4});if(!t.success)throw t.error;let r=t.value;if(r.status===401)return null;if(!r.ok)throw ze.fromCode(r.status,r.url);let n=await $(()=>r.json());if(!n.success)throw new Jt("UserAuthResponse",{_:"non_json_body"});let o=c0(n.value);if(o.hasError)throw new Jt("UserAuthResponse",rn(o));let i=o.result;if(i.status!=="success"){if(i.reason==="No Auth")return null;throw new Jt("UserAuthResponse",{reason:`status was [failed] but reason was [${i.reason}], expected [No Auth] for reason`})}return i});return e.success||s0.error("Error authenticating user",e.error),e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var m0=We("api/logout");async function p0(){return await fetch(m0,{method:"POST",credentials:"include",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}})}async function G_(){return $(()=>p0())}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var W_=z.object().schema({type:z.string().equals("request-logout")}),$_=z.object().schema({type:z.string().equals("request-login")}),Q_=z.object().schema({type:z.string().equals("request-latest-api-data")}),f0=Mt(z.object().schema({type:z.string().equals("user-manager-request"),request:z.oneof(Q_,$_,W_)})),Y_=oe(f0),X_=oe(W_),Z_=oe($_),J_=oe(Q_);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ev=We("api/status");function h0(){return fetch(ev,{method:"GET",headers:{"Content-Type":"application/json"}})}function tv(){return $(async()=>{let e=await h0();if(e.ok)return!0;if(e.status===401)return!1;throw ze.fromCode(e.status,ev,"Error while checking authorizations status")})}var g0=1e3,y0=Ye("data_refresh_time"),rv=te("c.background.user_manager"),Tc=class{_lastDataRefreshTime=0;_lastAuthSuccess=null;_currentUser;_currentSessions=[];_currentRegions=[];_core;_pollhandle=null;_authTTL=null;constructor(t){this._core=t,this._currentUser=null,Re.user.onChange.addListener(this.userChanged,!0),Re.availableRegions.onChange.addListener(this.regionsChanged,!0)}get currentUser(){return this._currentUser}get currentSessions(){return this._currentSessions}get currentRegions(){return this._currentRegions}get lastAuthSuccess(){return this._lastAuthSuccess}get lastDataRefreshTime(){return this._lastDataRefreshTime}get nextPolltime(){return Math.max(Math.min(this.expectedExpiry?(this.expectedExpiry-new Date().getTime())/2:3e5,3e5),g0)}get expectedExpiry(){return this._authTTL?new Date().getTime()+this._authTTL*1e3:null}userChanged=async t=>{this._currentUser=t??null,this._currentUser?(this.startStatusPolling(),Ve.emit("user_available",this._currentUser)):(this.stopStatusPolling(),Ve.emit("user_unavailable",void 0))};startStatusPolling=()=>{this._pollhandle&&globalThis.clearInterval(this._pollhandle);let t=this.nextPolltime;this._pollhandle=globalThis.setInterval(async()=>{let r=await tv();r.success&&!r.value?(this.stopStatusPolling(),this.logout()):this.nextPolltime!==t&&globalThis.queueMicrotask(this.startStatusPolling)},t)};stopStatusPolling=()=>{this._pollhandle&&(globalThis.clearInterval(this._pollhandle),this._pollhandle=null)};regionsChanged=async t=>{this._currentRegions=t??[],t&&Ve.emit("regions_available_from_api",this._currentRegions)};handleRequest=async t=>{if(Z_(t.data.request))return this.authorize();if(X_(t.data.request))return this.logout();if(J_(t.data.request))return{user:this.currentUser,sessions:this.currentSessions,regions:this.currentRegions,lastAuthSuccess:this._lastAuthSuccess}};updateDataRefreshTime=async t=>{let r=await y0.transact(async o=>{let i=await o.get();return t?i?i>t?(rv.warn("Received refresh data token that is older than the currently stored token"),this._lastDataRefreshTime=i,null):i===t?(this._lastDataRefreshTime=i,null):(await o.set(t),t):(await o.set(t),t):(i&&(this._lastDataRefreshTime=i),null)});r.success||rv.warn("Failed to read data refresh storage");let n=r.success?r.value:null;n&&(this._lastDataRefreshTime=n,Ve.emit("data_refresh_time_updated",n))};authorize=async()=>{Ve.emit("user_authorization_started",void 0);let t=await H_();t.success?Ve.emit("user_authorization_complete",t.value):Ve.emit("user_authorization_error",t.error instanceof Error?t.error:new Error(String(t.error)));let r=t.success?t.value?.refresh:null;await this.updateDataRefreshTime(r??null);let n=t.success?t.value:null;n&&(this._lastAuthSuccess=n,this._authTTL=n.ttl||null);let o=n?{name:n.name,email:n.email,dmail:n.dmail,country:n.country,authenticated:!0,is_activated:n.is_activated}:void 0,i=await Re.user.set(o);i.success||this._core.reportError({handled_at:"core",error:{known_code:"storage_access_error",location:"background-script",exception:i.error,data:{store:"user"}}});let s=n?n.regions:[],a=await Re.availableRegions.set(s);return a.success||this._core.reportError({handled_at:"core",error:{known_code:"storage_access_error",location:"background-script",exception:a.error,data:{store:"availableRegions"}}}),n&&(this._currentSessions=n.sessions??[]),this._currentSessions&&Ve.emit("session_available_from_api",this._currentSessions),n??null};logout=async()=>{let t=await G_();t.success||this._core.reportError({handled_at:"core",error:{known_code:"logout_server_error",location:"background-script",exception:t.error}}),this._lastAuthSuccess=null;let r=await Re.user.remove(),n=await Re.availableRegions.remove();r.success||this._core.reportError({handled_at:"core",error:{known_code:"storage_access_error",location:"background-script",exception:r.error,data:{store:"user"}}}),n.success||this._core.reportError({handled_at:"core",error:{known_code:"storage_access_error",location:"background-script",exception:n.error,data:{store:"availableRegions"}}}),Ve.emit("user_logout_complete",void 0)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var nv=z.object().schema({status:z.string().equals("success"),version:z.string()}),Rce=oe(nv);async function b0(e,t){let r=We("api/evc");return await fetch(r,{method:"POST",body:JSON.stringify({version:e,extension_id:t}),headers:{"Content-Type":"application/json"}})}async function ov(){return $(async()=>{let e=await b0(W.runtime.getManifest().version,W.runtime.id);if(!e.ok)throw ze.fromCode(e.status,e.url,e.statusText);let t=await e.json(),r=nv(t);if(r.hasError)throw new Jt("VersionCheckResponse",rn(r));return r.result.version})}var wc=class{_core;constructor(t){this._core=t,W.alarms.onAlarm.addListener(r=>{r.name==="checkForAvailableUpdates"&&this.checkForUpdates()})}initialize=async()=>{let t=await Re.latestExtensionVersion.get(),n=((!t.success||typeof t.value!="object"?0:t.value.last_updated??0)-(new Date().getTime()-1e3*60*60*24))/(60*1e3);W.alarms.create("checkForAvailableUpdates",{delayInMinutes:n<=1?1:n,periodInMinutes:60*24})};checkForUpdates=async()=>{let t=await nn(ov,{backoffMode:"linear",backoffIncrementInMs:2e3,maxAttempts:20,maxBackoffInMs:1e4,immediateFirstRetry:!0});return t.success||this.reportVersionLookupError(t.error),await Re.latestExtensionVersion.set({last_updated:new Date().getTime(),version:t.success?t.value:W.runtime.getManifest().version}),t};reportVersionLookupError=t=>this._core.reportError({handled_at:"core",error:{location:"background-script",known_code:"failed_to_read_extension_version_from_server",exception:t}})};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ec=te("api.report_error");var Qp=We("api/error");async function iv(e){return await fetch(Qp,{method:"POST",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}var Yp=class{_cache=new Map;constructor(){globalThis.setInterval(this.reportCache,1e4)}get epochTime(){return Math.floor(new Date().getTime()/1e3)}report=async t=>{let r=this.createCachedError(t);return r?this.reportSingle(r):je(void 0)};reportSingle=async t=>{let r=await $(async()=>await(await iv(t)).json());return r.success||Ec.error("Error reporting error :/",r.error),r.success?je(void 0):r};reportCache=async()=>{(await nn(async()=>{let r=this.getCacheAsArray();if(r.length===0)return;let n=await iv(r);if(!n.ok){if(n.status===401)return new ii(Qp,"Not authorized");throw ze.fromCode(n.status,Qp,n.statusText)}return await n.json()},{backoffMode:"exponential",backoffIncrementInMs:1e3,maxAttempts:6,maxBackoffInMs:6e4})).success?this.wipeCacheStats():Ec.warn("Failed to report cached results")};wipeCacheStats=()=>{for(let[t]of this._cache.entries())this._cache.set(t,[0,this.epochTime])};getCacheAsArray=()=>{let t=this.epochTime;return Array.from(this._cache.entries()).map(([r,[n,o]])=>{let i=it(()=>JSON.parse(r));return i.success?{...i.value,reportCount:n,reportPeriodStart:o,reportPeriodEnd:t}:(Ec.warn("Unable to parse cached event",r),null)}).filter(r=>!!r&&r.reportCount>0)};createCachedError=t=>{let r=it(()=>JSON.stringify(t));if(!r.success)return Ec.warn("Error can not be reported");let n=this._cache.get(r.value);if(!n)return this._cache.set(r.value,[1,this.epochTime]),t;this._cache.set(r.value,[n[0]+1,n[1]])}},Sc=new Yp;var _0=te("c.background.storage_migration"),v0={[202307111625]:async()=>{let t=(await W.storage.local.get("downloadInterceptorDomainWhitelist")).downloadInterceptorDomainWhitelist??[];await W.storage.local.set({remoteUploadBypassDomainList:t})},[202307261440]:async()=>{let e=await W.storage.local.get("sessions")??{},t=e.XX_file_viewer;t&&(e[we]=t,delete e.XX_file_viewer,await W.storage.local.set({sessions:e}))},[202308231323]:async()=>{let e=(await W.storage.local.get("remoteUploadBypassDomainList")).remoteUploadBypassDomainList??[];await W.storage.local.set({downloadBypassDomainList:e})},[202312201557]:async()=>{await W.storage.local.remove("emailNotifications")},[202401161537]:async()=>{let e=await W.storage.local.get("latestExtensionVersion")??null;await W.storage.local.set({latestExtensionVersion:{last_updated:0,version:e??W.runtime.getManifest().version}})}};async function sv(e){let t=await Re.storageMigration.unsafeGet()??0,r=Object.entries(v0).sort(([i],[s])=>{let a=Number(i),w=Number(s);return a>w?1:w>a?-1:0}),n=t===0?r:r.filter(([i])=>Number(i)>t),o=t;for(let[i,s]of n)try{await s(),o=Number(i)}catch(a){Sc.report({handled_at:"core",version:e,error:{location:"background-script",known_code:"failed_store_migration",data:{migration_index:i},exception:a}}),_0.error("Unable to complete migration",a)}o!==t&&await Re.storageMigration.unsafeSet(o)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var kc=class{_permissionsCache=null;_core;constructor(t){this._core=t,W.permissions.onAdded.addListener(this.onPermissionsAdded),W.permissions.onRemoved.addListener(this.onPermissionsRemoved),this.getCachedPermissions()}onPermissionsAdded=t=>{this._permissionsCache&&(t.origins&&(this._permissionsCache.origins=Array.from(new Set((this._permissionsCache.origins??[]).concat(t.origins)))),t.permissions&&(this._permissionsCache.permissions=Array.from(new Set((this._permissionsCache.permissions??[]).concat(t.permissions)))),Ve.emit("permissions_changed",this._permissionsCache))};onPermissionsRemoved=t=>{this._permissionsCache&&(t.origins&&(this._permissionsCache.origins=(this._permissionsCache.origins??[]).filter(r=>t.origins?.includes(r))),t.permissions&&(this._permissionsCache.permissions=(this._permissionsCache.permissions??[]).filter(r=>t.permissions?.includes(r))),Ve.emit("permissions_changed",this._permissionsCache))};getCachedPermissions=async()=>this._permissionsCache?this._permissionsCache:await new Promise(t=>{W.permissions.getAll(r=>{this._permissionsCache=r,t(this._permissionsCache)})})};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var x0=z.object().schema({type:z.string().equals("top-content-message"),module:z.string(),message:z.anything()}),av=oe(x0);var T0=z.object().schema({type:z.string().equals("all-content-script-frames"),module:z.string(),message:z.anything()}),lv=oe(T0);var w0=z.object().schema({type:z.string().equals("forwarded-content-script-message"),module:z.string(),message:z.anything()}),Ede=oe(w0);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var dr=class{constructor(t,r,n){this.name=t;this.instanceFactory=r;this.type=n}multipleInstances=!1;serviceProps={};instantiationMode="LAZY";onInstanceCreated=null;setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function er(e){return e&&e._delegate?e._delegate:e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var uv=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t},E0=function(e){let t=[],r=0,n=0;for(;r<e.length;){let o=e[r++];if(o<128)t[n++]=String.fromCharCode(o);else if(o>191&&o<224){let i=e[r++];t[n++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){let i=e[r++],s=e[r++],a=e[r++],w=((o&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536;t[n++]=String.fromCharCode(55296+(w>>10)),t[n++]=String.fromCharCode(56320+(w&1023))}else{let i=e[r++],s=e[r++];t[n++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return t.join("")},dv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<e.length;o+=3){let i=e[o],s=o+1<e.length,a=s?e[o+1]:0,w=o+2<e.length,E=w?e[o+2]:0,V=i>>2,q=(i&3)<<4|a>>4,K=(a&15)<<2|E>>6,H=E&63;w||(H=64,s||(K=64)),n.push(r[V],r[q],r[K],r[H])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(uv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):E0(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<e.length;){let i=r[e.charAt(o++)],a=o<e.length?r[e.charAt(o)]:0;++o;let E=o<e.length?r[e.charAt(o)]:64;++o;let q=o<e.length?r[e.charAt(o)]:64;if(++o,i==null||a==null||E==null||q==null)throw new Xp;let K=i<<2|a>>4;if(n.push(K),E!==64){let H=a<<4&240|E>>2;if(n.push(H),q!==64){let X=E<<6&192|q;n.push(X)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Xp=class extends Error{name="DecodeBase64StringError"},S0=function(e){let t=uv(e);return dv.encodeByteArray(t,!0)},Ic=function(e){return S0(e).replace(/\./g,"")},Dc=function(e){try{return dv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function mv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var k0=()=>mv().__FIREBASE_DEFAULTS__,I0=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},D0=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Dc(e[1]);return t&&JSON.parse(t)},Zp=()=>{try{return k0()||I0()||D0()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}};var Jp=()=>Zp()?.config,ef=e=>Zp()?.[`_${e}`];l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Cc=class{promise;reject=()=>{};resolve=()=>{};constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function fv(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function hv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gv(){let e=Lt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function yv(){try{return typeof indexedDB=="object"}catch{return!1}}function bv(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(r){t(r)}})}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var C0="FirebaseError",tr=class extends Error{constructor(r,n,o){super(n);this.code=r;this.customData=o;Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jr.prototype.create)}name=C0},jr=class{constructor(t,r,n){this.service=t;this.serviceName=r;this.errors=n}create(t,...r){let n=r[0]||{},o=`${this.service}/${t}`,i=this.errors[t],s=i?A0(i,n):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new tr(o,a,n)}};function A0(e,t){return e.replace(R0,(r,n)=>{let o=t[n];return o!=null?String(o):`<${n}?>`})}var R0=/\{\$([^}]+)}/g;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function as(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let o of r){if(!n.includes(o))return!1;let i=e[o],s=t[o];if(_v(i)&&_v(s)){if(!as(i,s))return!1}else if(i!==s)return!1}for(let o of n)if(!r.includes(o))return!1;return!0}function _v(e){return e!==null&&typeof e=="object"}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ac(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(o=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function vv(e,t){let r=new rf(e,t);return r.subscribe.bind(r)}var rf=class{observers=[];unsubscribes=[];onNoObservers;observerCount=0;task=Promise.resolve();finalized=!1;finalError;constructor(t,r){this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let o;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");P0(t,["next","error","complete"])?o=t:o={next:t,error:r,complete:n},o.next===void 0&&(o.next=tf),o.error===void 0&&(o.error=tf),o.complete===void 0&&(o.complete=tf);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function P0(e,t){if(typeof e!="object"||e===null)return!1;for(let r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function tf(){}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var lo="[DEFAULT]";var Rc=class{constructor(t,r){this.name=t;this.container=r}component=null;instances=new Map;instancesDeferred=new Map;instancesOptions=new Map;onInitCallbacks=new Map;get(t){let r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){let n=new Cc;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:r});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){let r=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(M0(t))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(let[r,n]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(r);try{let i=this.getOrInitializeService({instanceIdentifier:o});n.resolve(i)}catch{}}}}clearInstance(t=lo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=lo){return this.instances.has(t)}getOptions(t=lo){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:n,options:r});for(let[i,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(i);n===a&&s.resolve(o)}return o}onInit(t,r){let n=this.normalizeInstanceIdentifier(r),o=this.onInitCallbacks.get(n)??new Set;o.add(t),this.onInitCallbacks.set(n,o);let i=this.instances.get(n);return i&&t(i,n),()=>{o.delete(t)}}invokeOnInitCallbacks(t,r){let n=this.onInitCallbacks.get(r);if(n)for(let o of n)try{o(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:N0(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=lo){return this.component?this.component.multipleInstances?t:lo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N0(e){return e===lo?void 0:e}function M0(e){return e.instantiationMode==="EAGER"}var Pc=class{constructor(t){this.name=t}providers=new Map;addComponent(t){let r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let r=new Rc(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Nc=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(O0(r)){let n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}};function O0(e){return e.getComponent()?.type==="VERSION"}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var L0=[],Ea=(s=>(s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT",s))(Ea||{}),F0={debug:0,verbose:1,info:2,warn:3,error:4,silent:5},B0=2,U0={[0]:"log",[1]:"log",[2]:"info",[3]:"warn",[4]:"error"},V0=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),o=U0[t];if(o)console[o](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},co=class{constructor(t){this.name=t;L0.push(this)}_logLevel=B0;get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ea))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?F0[t]:t}_logHandler=V0;get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}_userLogHandler=null;get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,0,...t),this._logHandler(this,0,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,1,...t),this._logHandler(this,1,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,2,...t),this._logHandler(this,2,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,3,...t),this._logHandler(this,3,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,4,...t),this._logHandler(this,4,...t)}};var on=new co("@firebase/app");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Sa="[DEFAULT]",xv={["@firebase/app"]:"fire-core",["@firebase/app-compat"]:"fire-core-compat",["@firebase/analytics"]:"fire-analytics",["@firebase/analytics-compat"]:"fire-analytics-compat",["@firebase/app-check"]:"fire-app-check",["@firebase/app-check-compat"]:"fire-app-check-compat",["@firebase/auth"]:"fire-auth",["@firebase/auth-compat"]:"fire-auth-compat",["@firebase/database"]:"fire-rtdb",["@firebase/database-compat"]:"fire-rtdb-compat",["@firebase/functions"]:"fire-fn",["@firebase/functions-compat"]:"fire-fn-compat",["@firebase/installations"]:"fire-iid",["@firebase/installations-compat"]:"fire-iid-compat",["@firebase/messaging"]:"fire-fcm",["@firebase/messaging-compat"]:"fire-fcm-compat",["@firebase/performance"]:"fire-perf",["@firebase/performance-compat"]:"fire-perf-compat",["@firebase/remote-config"]:"fire-rc",["@firebase/remote-config-compat"]:"fire-rc-compat",["@firebase/storage"]:"fire-gcs",["@firebase/storage-compat"]:"fire-gcs-compat",["@firebase/firestore"]:"fire-fst",["@firebase/firestore-compat"]:"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"};var ka=new Map,Oc=new Map;function z0(e,t){try{e.container.addComponent(t)}catch(r){on.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function sn(e){let t=e.name;if(Oc.has(t))return on.debug(`There were multiple attempts to register component ${t}.`),!1;Oc.set(t,e);for(let r of ka.values())z0(r,e);return!0}function ls(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var q0={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Hr=new jr("app","Firebase",q0);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Lc=class{_options;_name;_config;_automaticDataCollectionEnabled;_isDeleted=!1;_container;constructor(t,r,n){this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}};var ai="9.23.0";function Fc(e,t={}){let r=e;typeof t!="object"&&(t={name:t});let n={name:Sa,automaticDataCollectionEnabled:!1,...t},o=n.name;if(typeof o!="string"||!o)throw Hr.create("bad-app-name",{appName:String(o)});if(r||=Jp(),!r)throw Hr.create("no-options");let i=ka.get(o);if(i){if(as(r,i.options)&&as(n,i.config))return i;throw Hr.create("duplicate-app",{appName:o})}let s=new Pc(o);for(let w of Oc.values())s.addComponent(w);let a=new Lc(r,n,s);return ka.set(o,a),a}function nf(e=Sa){let t=ka.get(e);if(!t&&e===Sa&&Jp())return Fc();if(!t)throw Hr.create("no-app",{appName:e});return t}function an(e,t,r){let n=xv[e]??e;r&&(n+=`-${r}`);let o=n.match(/\s|\//),i=t.match(/\s|\//);if(o||i){let s=[`Unable to register library "${n}" with version "${t}":`];o&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&i&&s.push("and"),i&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),on.warn(s.join(" "));return}sn(new dr(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var wv=(e,t)=>t.some(r=>e instanceof r);var Ev,Sv;function K0(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j0(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kv=new WeakMap,sf=new WeakMap,Iv=new WeakMap,of=new WeakMap,lf=new WeakMap;function H0(e){let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{r(ln(e.result)),o()},s=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(r=>{r instanceof IDBCursor&&kv.set(r,e)}).catch(()=>{}),lf.set(t,e),t}function G0(e){if(sf.has(e))return;let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{r(),o()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});sf.set(e,t)}var af={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return sf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Iv.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ln(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Dv(e){af=e(af)}function W0(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){let n=e.call(Bc(this),t,...r);return Iv.set(n,t.sort?t.sort():[t]),ln(n)}:j0().includes(e)?function(...t){return e.apply(Bc(this),t),ln(kv.get(this))}:function(...t){return ln(e.apply(Bc(this),t))}}function $0(e){return typeof e=="function"?W0(e):(e instanceof IDBTransaction&&G0(e),wv(e,K0())?new Proxy(e,af):e)}function ln(e){if(e instanceof IDBRequest)return H0(e);if(of.has(e))return of.get(e);let t=$0(e);return t!==e&&(of.set(e,t),lf.set(t,e)),t}var Bc=e=>lf.get(e);function Cv(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){let s=indexedDB.open(e,t),a=ln(s);return n&&s.addEventListener("upgradeneeded",w=>{n(ln(s.result),w.oldVersion,w.newVersion,ln(s.transaction),w)}),r&&s.addEventListener("blocked",w=>r(w.oldVersion,w.newVersion,w)),a.then(w=>{i&&w.addEventListener("close",()=>i()),o&&w.addEventListener("versionchange",E=>o(E.oldVersion,E.newVersion,E))}).catch(()=>{}),a}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Q0=["get","getKey","getAll","getAllKeys","count"],Y0=["put","add","delete","clear"],cf=new Map;function Av(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cf.get(t))return cf.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,o=Y0.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||Q0.includes(r)))return;let i=async function(s,...a){let w=this.transaction(s,o?"readwrite":"readonly"),E=w.store;return n&&(E=E.index(a.shift())),(await Promise.all([E[r](...a),o&&w.done]))[0]};return cf.set(t,i),i}Dv(e=>({...e,get:(t,r,n)=>Av(t,r)||e.get(t,r,n),has:(t,r)=>!!Av(t,r)||e.has(t,r)}));var X0="firebase-heartbeat-database",Z0=1,Ia="firebase-heartbeat-store",uf=null;function Rv(){return uf||(uf=Cv(X0,Z0,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Ia)}}}).catch(e=>{throw Hr.create("idb-open",{originalErrorMessage:e.message})})),uf}async function Pv(e){try{return await(await Rv()).transaction(Ia).objectStore(Ia).get(Nv(e))}catch(t){if(t instanceof tr)on.warn(t.message);else{let r=Hr.create("idb-get",{originalErrorMessage:t?.message});on.warn(r.message)}}}async function df(e,t){try{let n=(await Rv()).transaction(Ia,"readwrite");await n.objectStore(Ia).put(t,Nv(e)),await n.done}catch(r){if(r instanceof tr)on.warn(r.message);else{let n=Hr.create("idb-set",{originalErrorMessage:r?.message});on.warn(n.message)}}}function Nv(e){return`${e.name}!${e.options.appId}`}var J0=1024,eR=30*24*60*60*1e3,Uc=class{constructor(t){this.container=t;let r=this.container.getProvider("app").getImmediate();this._storage=new mf(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}_storage;_heartbeatsCache=null;_heartbeatsCachePromise;async triggerHeartbeat(){let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Mv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(o=>o.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let i=new Date(o.date).valueOf();return Date.now()-i<=eR}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Mv(),{heartbeatsToSend:r,unsentEntries:n}=tR(this._heartbeatsCache.heartbeats),o=Ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}};function Mv(){return new Date().toISOString().substring(0,10)}function tR(e,t=J0){let r=[],n=e.slice();for(let o of e){let i=r.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),Ov(r)>t){i.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),Ov(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}var mf=class{constructor(t){this.app=t;this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}_canUseIndexedDBPromise;async runIndexedDBEnvironmentCheck(){return yv()?bv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Pv(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){let n=await this.read();return df(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){let n=await this.read();return df(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}};function Ov(e){return Ic(JSON.stringify({version:2,heartbeats:e})).length}var Lv="@firebase/app",Fv="0.9.13";function Bv(e){sn(new dr("platform-logger",t=>new Nc(t),"PRIVATE")),sn(new dr("heartbeat",t=>new Uc(t),"PRIVATE")),an(Lv,Fv,e),an(Lv,Fv,"__BUILD_TARGET__"),an("fire-js","")}Bv("__RUNTIME_ENV__");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var cs=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}},mr=cs;ie(mr,"UNAUTHENTICATED",new cs(null)),ie(mr,"GOOGLE_CREDENTIALS",new cs("google-credentials-uid")),ie(mr,"FIRST_PARTY",new cs("first-party-uid")),ie(mr,"MOCK_USER",new cs("mock-user"));l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var On="9.23.0";function Uv(e){On=e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Vv(e){return JSON.stringify(e)}var li=new co("@firebase/firestore");function pf(){return li.logLevel}function ce(e,...t){if(li.logLevel<=0){let r=t.map(ff);li.debug(`Firestore (${On}): ${e}`,...r)}}function Ft(e,...t){if(li.logLevel<=4){let r=t.map(ff);li.error(`Firestore (${On}): ${e}`,...r)}}function cn(e,...t){if(li.logLevel<=3){let r=t.map(ff);li.warn(`Firestore (${On}): ${e}`,...r)}}function ff(e){if(typeof e=="string")return e;try{return Vv(e)}catch{return e}}function pe(e="Unexpected state"){let t=`FIRESTORE (${On}) INTERNAL ASSERTION FAILED: `+e;throw Ft(t),new Error(t)}function He(e,t){e||pe(t)}function G(e,t){e||pe(t)}function xe(e,t){return G(e instanceof t,`Expected type '${t.name}', but was '${e.constructor.name}'`),e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},le=class extends tr{constructor(r,n){super(r,n);this.code=r;this.message=n;this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}stack};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ar=class{promise;resolve;reject;constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}};var hf=class{constructor(t,r){this.user=r;this.headers.set("Authorization",`Bearer ${t}`)}type="OAuth";headers=new Map},gf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(mr.UNAUTHENTICATED))}shutdown(){}};var Vc=class{constructor(t){this.authProvider=t}tokenListener;currentUser=mr.UNAUTHENTICATED;tokenCounter=0;forceRefresh=!1;auth=null;start(t,r){let n=this.tokenCounter,o=w=>this.tokenCounter!==n?(n=this.tokenCounter,r(w)):Promise.resolve(),i=new Ar;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),i.resolve(),i=new Ar,t.enqueueRetryable(()=>o(this.currentUser))};let s=()=>{let w=i;t.enqueueRetryable(async()=>{await w.promise,await o(this.currentUser)})},a=w=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.tokenListener),s()};this.authProvider.onInit(w=>a(w)),setTimeout(()=>{if(!this.auth){let w=this.authProvider.getImmediate({optional:!0});w?a(w):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ar)}},0),s()}getToken(){G(this.tokenListener!=null,"FirebaseAuthCredentialsProvider not started.");let t=this.tokenCounter,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.tokenCounter!==t?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(He(typeof n.accessToken=="string","Invalid tokenData returned from getToken():"+n),new hf(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let t=this.auth&&this.auth.getUid();return He(t===null||typeof t=="string","Received invalid UID: "+t),new mr(t)}},yf=class{constructor(t,r,n){this.sessionIndex=t;this.iamToken=r;this.authTokenFactory=n}type="FirstParty";user=mr.FIRST_PARTY;_headers=new Map;getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let t=this.getAuthToken();return t&&this._headers.set("Authorization",t),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},bf=class{constructor(t,r,n){this.sessionIndex=t;this.iamToken=r;this.authTokenFactory=n}getToken(){return Promise.resolve(new yf(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(t,r){t.enqueueRetryable(()=>r(mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_f=class{constructor(t){this.value=t;t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}type="AppCheck";headers=new Map},zc=class{constructor(t){this.appCheckProvider=t}tokenListener;forceRefresh=!1;appCheck=null;latestAppCheckToken=null;start(t,r){let n=i=>{i.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);let s=i.token!==this.latestAppCheckToken;return this.latestAppCheckToken=i.token,ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.tokenListener=i=>{t.enqueueRetryable(()=>n(i))};let o=i=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(i=>o(i)),setTimeout(()=>{if(!this.appCheck){let i=this.appCheckProvider.getImmediate({optional:!0});i?o(i):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){G(this.tokenListener!=null,"FirebaseAppCheckTokenProvider not started.");let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(He(typeof r.token=="string","Invalid tokenResult returned from getToken():"+r),this.latestAppCheckToken=r.token,new _f(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}};function zv(e){if(!e)return new gf;switch(e.type){case"firstParty":return new bf(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new le(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var qc=class{constructor(t,r,n,o,i,s,a,w,E){this.databaseId=t;this.appId=r;this.persistenceKey=n;this.host=o;this.ssl=i;this.forceLongPolling=s;this.autoDetectLongPolling=a;this.longPollingOptions=w;this.useFetchStreams=E}},Kc="(default)",uo=class{constructor(t,r){this.projectId=t;this.database=r||Kc}database;static empty(){return new uo("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(t){return t instanceof uo&&t.projectId===this.projectId&&t.database===this.database}};function qv(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new le(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uo(e.options.projectId,t)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Kv(e){G(e>=0,`Expecting non-negative nBytes, got: ${e}`);let t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(Math.random()*256);return r}var us=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;G(0<r&&r<256,`Expect maxMultiple to be (0, 256), but got ${r}`);let n="",o=20;for(;n.length<o;){let i=Kv(40);for(let s=0;s<i.length;++s)n.length<o&&i[s]<r&&(n+=t.charAt(i[s]%t.length))}return G(n.length===o,"Invalid auto ID: "+n),n}};function ve(e,t){return e<t?-1:e>t?1:0}function Rr(e,t,r){return e.length!==t.length?!1:e.every((n,o)=>r(n,t[o]))}var jv=-62135596800,Hv=1e6,ht=class{constructor(t,r){this.seconds=t;this.nanoseconds=r;if(r<0)throw new le(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new le(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<jv)throw new le(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new le(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ht.fromMillis(Date.now())}static fromDate(t){return ht.fromMillis(t.getTime())}static fromMillis(t){let r=Math.floor(t/1e3),n=Math.floor((t-r*1e3)*Hv);return new ht(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/Hv}_compareTo(t){return this.seconds===t.seconds?ve(this.nanoseconds,t.nanoseconds):ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds-jv,r=String(t).padStart(12,"0"),n=String(this.nanoseconds).padStart(9,"0");return r+"."+n}};var me=class{constructor(t){this.timestamp=t}static fromTimestamp(t){return new me(t)}static min(){return new me(new ht(0,0))}static max(){return new me(new ht(253402300799,1e9-1))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return this.timestamp.seconds*1e6+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function vf(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function mo(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Gv(e){G(e!=null&&typeof e=="object","isEmpty() expects object parameter.");for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Wv="__name__",ci=class{segments;offset;len;constructor(t,r,n){r===void 0?r=0:r>t.length&&pe("offset "+r+" out of range "+t.length),n===void 0?n=t.length-r:n>t.length-r&&pe("length "+n+" out of range "+(t.length-r)),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return ci.comparator(this,t)===0}child(t){let r=this.segments.slice(this.offset,this.limit());return t instanceof ci?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,G(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return G(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return G(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]}lastSegment(){return G(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.get(this.length-1)}get(t){return G(t<this.length,"Index out of range"),this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){let n=Math.min(t.length,r.length);for(let o=0;o<n;o++){let i=t.get(o),s=r.get(o);if(i<s)return-1;if(i>s)return 1}return t.length<r.length?-1:t.length>r.length?1:0}},Oe=class extends ci{construct(t,r,n){return new Oe(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){let r=[];for(let n of t){if(n.indexOf("//")>=0)throw new le(ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(o=>o.length>0))}return new Oe(r)}static emptyPath(){return new Oe([])}},rR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tt=class extends ci{construct(t,r,n){return new Tt(t,r,n)}static isValidIdentifier(t){return rR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wv}static keyField(){return new Tt([Wv])}static fromServerFormat(t){let r=[],n="",o=0,i=()=>{if(n.length===0)throw new le(ne.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""},s=!1;for(;o<t.length;){let a=t[o];if(a==="\\"){if(o+1===t.length)throw new le(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let w=t[o+1];if(!(w==="\\"||w==="."||w==="`"))throw new le(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=w,o+=2}else a==="`"?(s=!s,o++):a==="."&&!s?(i(),o++):(n+=a,o++)}if(i(),s)throw new le(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Tt(r)}static emptyPath(){return new Tt([])}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ui=class extends Error{name="Base64DecodeError"};function nR(e){try{return atob(e)}catch(t){throw typeof DOMException<"u"&&t instanceof DOMException?new ui("Invalid base64 string: "+t):t}}function $v(e){let t=nR(e),r=4*Math.ceil(t.length/3);if(e.length!==r)throw new ui("Invalid base64 string");return t}function Qv(e){return btoa(e)}var Da=class{constructor(t){this.binaryString=t}static fromBase64String(t){let r=$v(t);return new Da(r)}static fromUint8Array(t){let r=oR(t);return new Da(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return Qv(this.binaryString)}toUint8Array(){return iR(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(t){return ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}},bt=Da;ie(bt,"EMPTY_BYTE_STRING",new Da(""));function oR(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function iR(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}var sR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(e){if(He(!!e,"Cannot normalize null or undefined timestamp."),typeof e=="string"){let t=0,r=sR.exec(e);if(He(!!r,"invalid timestamp: "+e),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}let n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}else{let t=lt(e.seconds),r=lt(e.nanos);return{seconds:t,nanos:r}}}function lt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function un(e){return typeof e=="string"?bt.fromBase64String(e):bt.fromUint8Array(e)}var Yv="server_timestamp",Xv="__type__",Zv="__previous_value__",Jv="__local_write_time__";function ds(e){return(e?.mapValue?.fields||{})[Xv]?.stringValue===Yv}function ex(e,t){let r={fields:{[Xv]:{stringValue:Yv},[Jv]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ds(t)&&(t=jc(t)),t&&(r.fields[Zv]=t),{mapValue:r}}function jc(e){let t=e.mapValue.fields[Zv];return ds(t)?jc(t):t}function di(e){let t=Pr(e.mapValue.fields[Jv].timestampValue);return new ht(t.seconds,t.nanos)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function po(e){return e==null}function Ca(e){return e===0&&1/e===1/-0}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var se=class{constructor(t){this.path=t;G(se.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}static fromPath(t){return new se(Oe.fromString(t))}static fromName(t){return new se(Oe.fromString(t).popFirst(5))}static empty(){return new se(Oe.emptyPath())}get collectionGroup(){return G(!this.path.isEmpty(),"Cannot get collection group for empty key"),this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return G(!this.path.isEmpty(),"Cannot get collection group for empty key"),this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Oe.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2===0}static fromSegments(t){return new se(new Oe(t.slice()))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var rx="__max__",Hc={mapValue:{fields:{__type__:{stringValue:rx}}}};function Ln(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ds(e)?4:kR(e)?9007199254740991:10:pe("Invalid value type: "+JSON.stringify(e))}function rr(e,t){if(e===t)return!0;let r=Ln(e),n=Ln(t);if(r!==n)return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return di(e).isEqual(di(t));case 3:return lR(e,t);case 5:return e.stringValue===t.stringValue;case 6:return uR(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return cR(e,t);case 2:return dR(e,t);case 9:return Rr(e.arrayValue.values||[],t.arrayValue.values||[],rr);case 10:return mR(e,t);case 9007199254740991:return!0;default:return pe("Unexpected value type: "+JSON.stringify(e))}}function lR(e,t){if(typeof e.timestampValue=="string"&&typeof t.timestampValue=="string"&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=Pr(e.timestampValue),n=Pr(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}function cR(e,t){return lt(e.geoPointValue.latitude)===lt(t.geoPointValue.latitude)&&lt(e.geoPointValue.longitude)===lt(t.geoPointValue.longitude)}function uR(e,t){return un(e.bytesValue).isEqual(un(t.bytesValue))}function dR(e,t){if("integerValue"in e&&"integerValue"in t)return lt(e.integerValue)===lt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=lt(e.doubleValue),n=lt(t.doubleValue);return r===n?Ca(r)===Ca(n):isNaN(r)&&isNaN(n)}return!1}function mR(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(vf(r)!==vf(n))return!1;for(let o in r)if(r.hasOwnProperty(o)&&(n[o]===void 0||!rr(r[o],n[o])))return!1;return!0}function ps(e,t){return(e.values||[]).find(r=>rr(r,t))!==void 0}function Fn(e,t){if(e===t)return 0;let r=Ln(e),n=Ln(t);if(r!==n)return ve(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ve(e.booleanValue,t.booleanValue);case 2:return pR(e,t);case 3:return tx(e.timestampValue,t.timestampValue);case 4:return tx(di(e),di(t));case 5:return ve(e.stringValue,t.stringValue);case 6:return gR(e.bytesValue,t.bytesValue);case 7:return fR(e.referenceValue,t.referenceValue);case 8:return hR(e.geoPointValue,t.geoPointValue);case 9:return yR(e.arrayValue,t.arrayValue);case 10:return bR(e.mapValue,t.mapValue);default:throw pe("Invalid value type: "+r)}}function pR(e,t){let r=lt(e.integerValue||e.doubleValue),n=lt(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}function tx(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ve(e,t);let r=Pr(e),n=Pr(t),o=ve(r.seconds,n.seconds);return o!==0?o:ve(r.nanos,n.nanos)}function fR(e,t){let r=e.split("/"),n=t.split("/");for(let o=0;o<r.length&&o<n.length;o++){let i=ve(r[o],n[o]);if(i!==0)return i}return ve(r.length,n.length)}function hR(e,t){let r=ve(lt(e.latitude),lt(t.latitude));return r!==0?r:ve(lt(e.longitude),lt(t.longitude))}function gR(e,t){let r=un(e),n=un(t);return r.compareTo(n)}function yR(e,t){let r=e.values||[],n=t.values||[];for(let o=0;o<r.length&&o<n.length;++o){let i=Fn(r[o],n[o]);if(i)return i}return ve(r.length,n.length)}function bR(e,t){if(e===Hc.mapValue&&t===Hc.mapValue)return 0;if(e===Hc.mapValue)return 1;if(t===Hc.mapValue)return-1;let r=e.fields||{},n=Object.keys(r),o=t.fields||{},i=Object.keys(o);n.sort(),i.sort();for(let s=0;s<n.length&&s<i.length;++s){let a=ve(n[s],i[s]);if(a!==0)return a;let w=Fn(r[n[s]],o[i[s]]);if(w!==0)return w}return ve(n.length,i.length)}function fo(e){return xf(e)}function xf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?vR(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_R(e.bytesValue):"referenceValue"in e?TR(e.referenceValue):"geoPointValue"in e?xR(e.geoPointValue):"arrayValue"in e?ER(e.arrayValue):"mapValue"in e?wR(e.mapValue):pe("Invalid value type: "+JSON.stringify(e))}function _R(e){return un(e).toBase64()}function vR(e){let t=Pr(e);return`time(${t.seconds},${t.nanos})`}function xR(e){return`geo(${e.latitude},${e.longitude})`}function TR(e){return se.fromName(e).toString()}function wR(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let o of t)n?n=!1:r+=",",r+=`${o}:${xf(e.fields[o])}`;return r+"}"}function ER(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=xf(n);return t+"]"}function Gc(e){return!!e&&"integerValue"in e}function SR(e){return!!e&&"doubleValue"in e}function Tf(e){return Gc(e)||SR(e)}function _r(e){return!!e&&"arrayValue"in e}function mi(e){return!!e&&"referenceValue"in e}function wf(e){return!!e&&"nullValue"in e}function Ef(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wc(e){return!!e&&"mapValue"in e}function ms(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return mo(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=ms(n)),t}else if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ms(e.arrayValue.values[r]);return t}else return{...e}}function kR(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===rx}var nr=class{constructor(t){this.value=t;G(!ds(t),"ServerTimestamps should be converted to ServerTimestampValue")}static empty(){return new nr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!Wc(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){G(!t.isEmpty(),"Cannot set field for empty path on ObjectValue");let n=this.getFieldsMap(t.popLast());n[t.lastSegment()]=ms(r)}setAll(t){let r=Tt.emptyPath(),n={},o=[];t.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){let w=this.getFieldsMap(r);this.applyChanges(w,n,o),n={},o=[],r=a.popLast()}s?n[a.lastSegment()]=ms(s):o.push(a.lastSegment())});let i=this.getFieldsMap(r);this.applyChanges(i,n,o)}delete(t){G(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue");let r=this.field(t.popLast());Wc(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return rr(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let o=r.mapValue.fields[t.get(n)];(!Wc(o)||!o.mapValue.fields)&&(o={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=o),r=o}return r.mapValue.fields}applyChanges(t,r,n){mo(r,(o,i)=>t[o]=i);for(let o of n)delete t[o]}clone(){return new nr(ms(this.value))}};var et=class{constructor(t,r,n,o,i,s,a){this.key=t;this.documentType=r;this.version=n;this.readTime=o;this.createTime=i;this.data=s;this.documentState=a}static newInvalidDocument(t){return new et(t,0,me.min(),me.min(),me.min(),nr.empty(),0)}static newFoundDocument(t,r,n,o){return new et(t,1,r,me.min(),n,o,0)}static newNoDocument(t,r){return new et(t,2,r,me.min(),me.min(),nr.empty(),0)}static newUnknownDocument(t,r){return new et(t,3,r,me.min(),me.min(),nr.empty(),2)}convertToFoundDocument(t,r){return this.createTime.isEqual(me.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return G(this.isValidDocument(),"Invalid documents cannot have committed mutations"),this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof et&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};function nx(e,t,r){let n=t.data.field(e),o=r.data.field(e);return n!==null&&o!==null?Fn(n,o):pe("Trying to compare documents on fields that don't exist")}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var pi=class{constructor(t,r="asc"){this.field=t;this.dir=r}};function ox(e){return e.field.canonicalString()+e.dir}function ix(e){return`${e.field.canonicalString()} (${e.dir})`}function sx(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Aa=class{constructor(t,r){this.position=t;this.inclusive=r}};function lx(e,t,r){G(e.position.length<=t.length,"Bound has more components than query's orderBy");let n=0;for(let o=0;o<e.position.length;o++){let i=t[o],s=e.position[o];if(i.field.isKeyField())G(mi(s),"Bound has a non-key value where the key path is being used."),n=se.comparator(se.fromName(s.referenceValue),r.key);else{let a=r.data.field(i.field);G(a!==null,"Field should exist since document matched the orderBy already."),n=Fn(s,a)}if(i.dir==="desc"&&(n=n*-1),n!==0)break}return n}function cx(e,t,r){let n=lx(e,t,r);return e.inclusive?n>=0:n>0}function ux(e,t,r){let n=lx(e,t,r);return e.inclusive?n<=0:n<0}function Sf(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++){let n=e.position[r],o=t.position[r];if(!rr(n,o))return!1}return!0}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var $c=class{},wt=class extends $c{constructor(r,n,o){super();this.field=r;this.op=n;this.value=o}static create(r,n,o){return r.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(r,n,o):(G(mi(o),"Comparing on key, but filter value not a RefValue"),G(n!=="array-contains"&&n!=="array-contains-any",`'${n.toString()}' queries don't make sense on document keys.`),new kf(r,n,o)):n==="array-contains"?new Cf(r,o):n==="in"?(G(_r(o),"IN filter has invalid value: "+o.toString()),new Af(r,o)):n==="not-in"?(G(_r(o),"NOT_IN filter has invalid value: "+o.toString()),new Rf(r,o)):n==="array-contains-any"?(G(_r(o),"ARRAY_CONTAINS_ANY filter has invalid value: "+o.toString()),new Pf(r,o)):new wt(r,n,o)}static createKeyFieldInFilter(r,n,o){return G(_r(o),`Comparing on key with ${n.toString()}, but filter value not an ArrayValue`),G((o.arrayValue.values||[]).every(i=>mi(i)),`Comparing on key with ${n.toString()}, but an array value was not a RefValue`),n==="in"?new If(r,o):new Df(r,o)}matches(r){let n=r.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fn(n,this.value)):n!==null&&Ln(this.value)===Ln(n)&&this.matchesComparison(Fn(n,this.value))}matchesComparison(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return r===0;case"!=":return r!==0;case">":return r>0;case">=":return r>=0;default:return pe("Unknown FieldFilter operator: "+this.op)}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}},vr=class extends $c{constructor(r,n){super();this.filters=r;this.op=n}memoizedFlattenedFilters=null;static create(r,n){return new vr(r,n)}matches(r){return dx(this)?this.filters.find(n=>!n.matches(r))===void 0:this.filters.find(n=>n.matches(r))!==void 0}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((r,n)=>r.concat(n.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let r=this.findFirstMatchingFilter(n=>n.isInequality());return r!==null?r.field:null}findFirstMatchingFilter(r){for(let n of this.getFlattenedFilters())if(r(n))return n;return null}};function dx(e){return e.op==="and"}function IR(e){return DR(e)&&dx(e)}function DR(e){for(let t of e.filters)if(t instanceof vr)return!1;return!0}function Qc(e){if(G(e instanceof wt||e instanceof vr,"canonifyFilter() only supports FieldFilters and CompositeFilters"),e instanceof wt)return e.field.canonicalString()+e.op.toString()+fo(e.value);if(IR(e))return e.filters.map(t=>Qc(t)).join(",");{let t=e.filters.map(r=>Qc(r)).join(",");return`${e.op}(${t})`}}function Nf(e,t){if(e instanceof wt)return CR(e,t);if(e instanceof vr)return AR(e,t);pe("Only FieldFilters and CompositeFilters can be compared")}function CR(e,t){return t instanceof wt&&e.op===t.op&&e.field.isEqual(t.field)&&rr(e.value,t.value)}function AR(e,t){return t instanceof vr&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce((n,o,i)=>n&&Nf(o,t.filters[i]),!0):!1}function Mf(e){return G(e instanceof wt||e instanceof vr,"stringifyFilter() only supports FieldFilters and CompositeFilters"),e instanceof wt?PR(e):e instanceof vr?RR(e):"Filter"}function RR(e){return e.op.toString()+" {"+e.getFilters().map(Mf).join(" ,")+"}"}function PR(e){return`${e.field.canonicalString()} ${e.op} ${fo(e.value)}`}var kf=class extends wt{key;constructor(t,r,n){super(t,r,n),G(mi(n),"KeyFieldFilter expects a ReferenceValue"),this.key=se.fromName(n.referenceValue)}matches(t){let r=se.comparator(t.key,this.key);return this.matchesComparison(r)}},If=class extends wt{keys;constructor(t,r){super(t,"in",r),this.keys=mx("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}},Df=class extends wt{keys;constructor(t,r){super(t,"not-in",r),this.keys=mx("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}};function mx(e,t){return G(_r(t),"KeyFieldInFilter/KeyFieldNotInFilter expects an ArrayValue"),(t.arrayValue?.values||[]).map(r=>(G(mi(r),`Comparing on key with ${e.toString()}, but an array value was not a ReferenceValue`),se.fromName(r.referenceValue)))}var Cf=class extends wt{constructor(t,r){super(t,"array-contains",r)}matches(t){let r=t.data.field(this.field);return _r(r)&&ps(r.arrayValue,this.value)}},Af=class extends wt{constructor(t,r){super(t,"in",r),G(_r(r),"InFilter expects an ArrayValue")}matches(t){let r=t.data.field(this.field);return r!==null&&ps(this.value.arrayValue,r)}},Rf=class extends wt{constructor(t,r){super(t,"not-in",r),G(_r(r),"NotInFilter expects an ArrayValue")}matches(t){if(ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let r=t.data.field(this.field);return r!==null&&!ps(this.value.arrayValue,r)}},Pf=class extends wt{constructor(t,r){super(t,"array-contains-any",r),G(_r(r),"ArrayContainsAnyFilter expects an ArrayValue")}matches(t){let r=t.data.field(this.field);return!_r(r)||!r.arrayValue.values?!1:r.arrayValue.values.some(n=>ps(this.value.arrayValue,n))}};var Yc=class{constructor(t,r=null,n=[],o=[],i=null,s=null,a=null){this.path=t;this.collectionGroup=r;this.orderBy=n;this.filters=o;this.limit=i;this.startAt=s;this.endAt=a}memoizedCanonicalId=null};function Of(e,t=null,r=[],n=[],o=null,i=null,s=null){return new Yc(e,t,r,n,o,i,s)}function fs(e){let t=xe(e,Yc);if(t.memoizedCanonicalId===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>Qc(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>ox(n)).join(","),po(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>fo(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>fo(n)).join(",")),t.memoizedCanonicalId=r}return t.memoizedCanonicalId}function px(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Mf(r)).join(", ")}]`),po(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>ix(r)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fo(r)).join(",")),`Target(${t})`}function hs(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!sx(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Nf(e.filters[r],t.filters[r]))return!1;return e.collectionGroup!==t.collectionGroup||!e.path.isEqual(t.path)||!Sf(e.startAt,t.startAt)?!1:Sf(e.endAt,t.endAt)}function Ra(e){return se.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var fi=class{constructor(t,r=null,n=[],o=[],i=null,s="F",a=null,w=null){this.path=t;this.collectionGroup=r;this.explicitOrderBy=n;this.filters=o;this.limit=i;this.limitType=s;this.startAt=a;this.endAt=w;this.startAt&&G(this.startAt.position.length<=ho(this).length,"Bound is longer than orderBy"),this.endAt&&G(this.endAt.position.length<=ho(this).length,"Bound is longer than orderBy")}memoizedOrderBy=null;memoizedTarget=null};function gs(e){return new fi(e)}function fx(e,t){return new fi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function Lf(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function NR(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function MR(e){for(let t of e.filters){let r=t.getFirstInequalityField();if(r!==null)return r}return null}function hx(e){return se.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Xc(e){return e.collectionGroup!==null}function ho(e){let t=xe(e,fi);if(t.memoizedOrderBy===null){t.memoizedOrderBy=[];let r=MR(t),n=NR(t);if(r!==null&&n===null)r.isKeyField()||t.memoizedOrderBy.push(new pi(r)),t.memoizedOrderBy.push(new pi(Tt.keyField(),"asc"));else{G(r===null||n!==null&&r.isEqual(n),"First orderBy should match inequality field.");let o=!1;for(let i of t.explicitOrderBy)t.memoizedOrderBy.push(i),i.field.isKeyField()&&(o=!0);if(!o){let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.memoizedOrderBy.push(new pi(Tt.keyField(),i))}}}return t.memoizedOrderBy}function Nr(e){let t=xe(e,fi);if(!t.memoizedTarget)if(t.limitType==="F")t.memoizedTarget=Of(t.path,t.collectionGroup,ho(t),t.filters,t.limit,t.startAt,t.endAt);else{let r=[];for(let i of ho(t)){let s=i.dir==="desc"?"asc":"desc";r.push(new pi(i.field,s))}let n=t.endAt?new Aa(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new Aa(t.startAt.position,t.startAt.inclusive):null;t.memoizedTarget=Of(t.path,t.collectionGroup,r,t.filters,t.limit,n,o)}return t.memoizedTarget}function Ff(e,t,r){return new fi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function go(e,t){return hs(Nr(e),Nr(t))&&e.limitType===t.limitType}function Zc(e){return`${fs(Nr(e))}|lt:${e.limitType}`}function yo(e){return`Query(target=${px(Nr(e))}; limitType=${e.limitType})`}function bo(e,t){return t.isFoundDocument()&&OR(e,t)&&LR(e,t)&&FR(e,t)&&BR(e,t)}function OR(e,t){let r=t.key.path;return e.collectionGroup!==null?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):se.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function LR(e,t){for(let r of ho(e))if(!r.field.isKeyField()&&t.data.field(r.field)===null)return!1;return!0}function FR(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function BR(e,t){return!(e.startAt&&!ux(e.startAt,ho(e),t)||e.endAt&&!cx(e.endAt,ho(e),t))}function gx(e){return e.collectionGroup||(e.path.length%2===1?e.path.lastSegment():e.path.get(e.path.length-2))}function ys(e){return(t,r)=>{let n=!1;for(let o of ho(e)){let i=UR(o,t,r);if(i!==0)return i;n=n||o.field.isKeyField()}return G(n,"orderBy used that doesn't compare on key field"),0}}function UR(e,t,r){let n=e.field.isKeyField()?se.comparator(t.key,r.key):nx(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return pe("Unknown direction: "+e.dir)}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var pr=class{constructor(t,r){this.mapKeyFn=t;this.equalsFn=r}inner={};innerSize=0;get(t){let r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(let[o,i]of n)if(this.equalsFn(o,t))return i}}has(t){return this.get(t)!==void 0}set(t,r){let n=this.mapKeyFn(t),o=this.inner[n];if(o===void 0){this.inner[n]=[[t,r]],this.innerSize++;return}for(let i=0;i<o.length;i++)if(this.equalsFn(o[i][0],t)){o[i]=[t,r];return}o.push([t,r]),this.innerSize++}delete(t){let r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],t))return n.length===1?delete this.inner[r]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(t){mo(this.inner,(r,n)=>{for(let[o,i]of n)t(o,i)})}isEmpty(){return Gv(this.inner)}size(){return this.innerSize}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ie=class{constructor(t,r){this.comparator=t;this.root=r||mn.EMPTY}root;insert(t,r){return new Ie(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(t){return new Ie(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mn.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){let n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){let o=this.comparator(t,n.key);if(o===0)return r+n.left.size;o<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){let t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bs(this.root,t,this.comparator,!1)}getReverseIterator(){return new bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bs(this.root,t,this.comparator,!0)}},bs=class{isReverse;nodeStack;constructor(t,r,n,o){this.isReverse=o,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=r?n(t.key,r):1,r&&o&&(i*=-1),i<0)this.isReverse?t=t.left:t=t.right;else if(i===0){this.nodeStack.push(t);break}else this.nodeStack.push(t),this.isReverse?t=t.right:t=t.left}getNext(){G(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");let t=this.nodeStack.pop(),r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},dn=class{constructor(t,r,n,o,i){this.key=t;this.value=r;this.color=n??dn.RED,this.left=o??dn.EMPTY,this.right=i??dn.EMPTY,this.size=this.left.size+1+this.right.size}color;left;right;size;copy(t,r,n,o,i){return new dn(t??this.key,r??this.value,n??this.color,o??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let o=this,i=n(t,o.key);return i<0?o=o.copy(null,null,null,o.left.insert(t,r,n),null):i===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let t=this;return!t.left.isRed()&&!t.left.left.isRed()&&(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,o=this;if(r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed()&&!o.left.left.isRed()&&(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed()&&(o=o.rotateRight()),!o.right.isEmpty()&&!o.right.isRed()&&!o.right.left.isRed()&&(o=o.moveRedRight()),r(t,o.key)===0){if(o.right.isEmpty())return dn.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw pe("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check();if(t!==this.right.check())throw pe("Black depths differ");return t+(this.isRed()?0:1)}},mn=dn;ie(mn,"EMPTY",null),ie(mn,"RED",!0),ie(mn,"BLACK",!1);var Bf=class{get key(){throw pe("LLRBEmptyNode has no key.")}get value(){throw pe("LLRBEmptyNode has no value.")}get color(){throw pe("LLRBEmptyNode has no color.")}get left(){throw pe("LLRBEmptyNode has no left child.")}get right(){throw pe("LLRBEmptyNode has no right child.")}size=0;copy(t,r,n,o,i){return this}insert(t,r,n){return new mn(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};mn.EMPTY=new Bf;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var $e=class{constructor(t){this.comparator=t;this.data=new Ie(this.comparator)}data;has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let o=n.getNext();if(this.comparator(o.key,t[1])>=0)return;r(o.key)}}forEachWhile(t,r){let n;for(r!==void 0?n=this.data.getIteratorFrom(r):n=this.data.getIterator();n.hasNext();){let o=n.getNext();if(!t(o.key))return}}firstAfterOrEqual(t){let r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Jc(this.data.getIterator())}getIteratorFrom(t){return new Jc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;let r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){let o=r.getNext().key,i=n.getNext().key;if(this.comparator(o,i)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(r=>{t.push(r)}),t}toString(){let t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){let r=new $e(this.comparator);return r.data=t,r}},Jc=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var VR=new Ie(se.comparator);function xr(){return VR}var yx=new Ie(se.comparator);function hi(...e){let t=yx;for(let r of e)t=t.insert(r.key,r);return t}function bx(){return _s()}function _x(e){let t=yx;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Bn(){return _s()}function eu(){return _s()}function _s(){return new pr(e=>e.toString(),(e,t)=>e.isEqual(t))}var DOe=new Ie(se.comparator);var zR=new $e(se.comparator);function ye(...e){let t=zR;for(let r of e)t=t.add(r);return t}var qR=new $e(ve);function vx(){return qR}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var gi=-1;function xx(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,o=me.fromTimestamp(n===1e9?new ht(r+1,0):new ht(r,n));return new Mr(o,se.empty(),t)}function Tx(e){return new Mr(e.readTime,e.key,gi)}var Mr=class{constructor(t,r,n){this.readTime=t;this.documentKey=r;this.largestBatchId=n}static min(){return new Mr(me.min(),se.empty(),gi)}static max(){return new Mr(me.max(),se.empty(),gi)}};function wx(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0||(r=se.comparator(e.documentKey,t.documentKey),r!==0)?r:ve(e.largestBatchId,t.largestBatchId)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Or=class{constructor(t){this.fields=t;t.sort(Tt.comparator),G(!t.some((r,n)=>n!==0&&r.isEqual(t[n-1])),"FieldMask contains field that is not unique: "+t.find((r,n)=>n!==0&&r.isEqual(t[n-1])))}static empty(){return new Or([])}unionWith(t){let r=new $e(Tt.comparator);for(let n of this.fields)r=r.add(n);for(let n of t)r=r.add(n);return new Or(r.toArray())}covers(t){for(let r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Rr(this.fields,t.fields,(r,n)=>r.isEqual(n))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ex(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ca(t)?"-0":t}}function Sx(e){return{integerValue:""+e}}var vs=class{_=void 0};function Ix(e,t,r){return e instanceof Pa?ex(r,t):e instanceof xs?Rx(e,t):e instanceof Ts?Px(e,t):(G(e instanceof ws,"Expected NumericIncrementTransformOperation but was: "+e),KR(e,t))}function Dx(e,t,r){return e instanceof xs?Rx(e,t):e instanceof Ts?Px(e,t):(G(r!==null,"Didn't receive transformResult for non-array transform"),r)}function Cx(e,t){return e instanceof ws?Tf(t)?t:{integerValue:0}:null}function Ax(e,t){return e instanceof xs&&t instanceof xs?Rr(e.elements,t.elements,rr):e instanceof Ts&&t instanceof Ts?Rr(e.elements,t.elements,rr):e instanceof ws&&t instanceof ws?rr(e.operand,t.operand):e instanceof Pa&&t instanceof Pa}var Pa=class extends vs{},xs=class extends vs{constructor(r){super();this.elements=r}};function Rx(e,t){let r=Nx(t);for(let n of e.elements)r.some(o=>rr(o,n))||r.push(n);return{arrayValue:{values:r}}}var Ts=class extends vs{constructor(r){super();this.elements=r}};function Px(e,t){let r=Nx(t);for(let n of e.elements)r=r.filter(o=>!rr(o,n));return{arrayValue:{values:r}}}var ws=class extends vs{constructor(r,n){super();this.serializer=r;this.operand=n;G(Tf(n),"NumericIncrementTransform transform requires a NumberValue")}};function KR(e,t){let r=Cx(e,t),n=kx(r)+kx(e.operand);return Gc(r)&&Gc(e.operand)?Sx(n):Ex(e.serializer,n)}function kx(e){return lt(e.integerValue||e.doubleValue)}function Nx(e){return _r(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function jR(e,t){return e.field.isEqual(t.field)&&Ax(e.transform,t.transform)}function HR(e,t){return e===void 0&&t===void 0?!0:e&&t?Rr(e,t,(r,n)=>jR(r,n)):!1}var Un=class{constructor(t,r){this.updateTime=t;this.exists=r;G(t===void 0||r===void 0,'Precondition can specify "exists" or "updateTime" but not both')}static none(){return new Un}static exists(t){return new Un(void 0,t)}static updateTime(t){return new Un(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function tu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists!==void 0?e.exists===t.isFoundDocument():(G(e.isNone,"Precondition should be empty"),!0)}var Na=class{};function ru(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Oa(e.key,Un.none()):new Ma(e.key,e.data,Un.none());{let r=e.data,n=nr.empty(),o=new $e(Tt.comparator);for(let i of t.fields)if(!o.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),o=o.add(i)}return new yi(e.key,n,new Or(o.toArray()),Un.none())}}function Mx(e,t,r){Ox(e,t),e instanceof Ma?GR(e,t,r):e instanceof yi?$R(e,t,r):(G(e instanceof Oa,"Unexpected mutation type: "+e),YR(e,t,r))}function bi(e,t,r,n){return Ox(e,t),e instanceof Ma?WR(e,t,r,n):e instanceof yi?QR(e,t,r,n):(G(e instanceof Oa,"Unexpected mutation type: "+e),XR(e,t,r))}function Uf(e,t){return e.type!==t.type||!e.key.isEqual(t.key)||!e.precondition.isEqual(t.precondition)||!HR(e.fieldTransforms,t.fieldTransforms)?!1:e.type===0?e.value.isEqual(t.value):e.type===1?e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask):!0}function Ox(e,t){G(t.key.isEqual(e.key),"Can only apply a mutation to a document with the same key")}var Ma=class extends Na{constructor(r,n,o,i=[]){super();this.key=r;this.value=n;this.precondition=o;this.fieldTransforms=i}type=0;getFieldMask(){return null}};function GR(e,t,r){let n=e.value.clone(),o=Fx(e.fieldTransforms,t,r.transformResults);n.setAll(o),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function WR(e,t,r,n){if(!tu(e.precondition,t))return r;let o=e.value.clone(),i=Bx(e.fieldTransforms,n,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}var yi=class extends Na{constructor(r,n,o,i,s=[]){super();this.key=r;this.data=n;this.fieldMask=o;this.precondition=i;this.fieldTransforms=s}type=1;getFieldMask(){return this.fieldMask}};function $R(e,t,r){if(!tu(e.precondition,t)){t.convertToUnknownDocument(r.version);return}let n=Fx(e.fieldTransforms,t,r.transformResults),o=t.data;o.setAll(Lx(e)),o.setAll(n),t.convertToFoundDocument(r.version,o).setHasCommittedMutations()}function QR(e,t,r,n){if(!tu(e.precondition,t))return r;let o=Bx(e.fieldTransforms,n,t),i=t.data;return i.setAll(Lx(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),r===null?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(s=>s.field))}function Lx(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function Fx(e,t,r){let n=new Map;He(e.length===r.length,`server transform result count (${r.length}) should match field transform count (${e.length})`);for(let o=0;o<r.length;o++){let i=e[o],s=i.transform,a=t.data.field(i.field);n.set(i.field,Dx(s,a,r[o]))}return n}function Bx(e,t,r){let n=new Map;for(let o of e){let i=o.transform,s=r.data.field(o.field);n.set(o.field,Ix(i,s,t))}return n}var Oa=class extends Na{constructor(r,n){super();this.key=r;this.precondition=n}type=2;fieldTransforms=[];getFieldMask(){return null}};function YR(e,t,r){G(r.transformResults.length===0,"Transform results received by DeleteMutation."),t.convertToNoDocument(r.version).setHasCommittedMutations()}function XR(e,t,r){return G(t.key.isEqual(e.key),"Can only apply mutation to document with same key"),tu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var nu=class{constructor(t,r){this.overlayedDocument=t;this.mutatedFields=r}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var re=class{nextCallback=null;catchCallback=null;result=void 0;error=void 0;isDone=!1;callbackAttached=!1;constructor(t){t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&pe("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new re((n,o)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(n,o)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,o)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{let r=t();return r instanceof re?r:re.resolve(r)}catch(r){return re.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):re.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):re.reject(r)}static resolve(t){return new re((r,n)=>{r(t)})}static reject(t){return new re((r,n)=>{n(t)})}static waitFor(t){return new re((r,n)=>{let o=0,i=0,s=!1;t.forEach(a=>{++o,a.next(()=>{++i,s&&i===o&&r()},w=>n(w))}),s=!0,i===o&&r()})}static or(t){let r=re.resolve(!1);for(let n of t)r=r.next(o=>o?re.resolve(o):n());return r}static forEach(t,r){let n=[];return t.forEach((o,i)=>{n.push(r.call(this,o,i))}),this.waitFor(n)}static mapArray(t,r){return new re((n,o)=>{let i=t.length,s=new Array(i),a=0;for(let w=0;w<i;w++){let E=w;r(t[E]).next(V=>{s[E]=V,++a,a===i&&n(s)},V=>o(V))}})}static doWhile(t,r){return new re((n,o)=>{let i=()=>{t()===!0?r().next(()=>{i()},o):n()};i()})}};var ou=class{constructor(t,r,n,o){this.remoteDocumentCache=t;this.mutationQueue=r;this.documentOverlayCache=n;this.indexManager=o}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(o=>(n=o,this.remoteDocumentCache.getEntry(t,r))).next(o=>(n!==null&&bi(n.mutation,o,Or.empty(),ht.now()),o))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,ye()).next(()=>n))}getLocalViewOfDocuments(t,r,n=ye()){let o=Bn();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,n).next(i=>{let s=hi();return i.forEach((a,w)=>{s=s.insert(a,w.overlayedDocument)}),s}))}getOverlayedDocuments(t,r){let n=Bn();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,ye()))}populateOverlays(t,r,n){let o=[];return n.forEach(i=>{r.has(i)||o.push(i)}),this.documentOverlayCache.getOverlays(t,o).next(i=>{i.forEach((s,a)=>{r.set(s,a)})})}computeViews(t,r,n,o){let i=xr(),s=_s(),a=bx();return r.forEach((w,E)=>{let V=n.get(E.key);o.has(E.key)&&(V===void 0||V.mutation instanceof yi)?i=i.insert(E.key,E):V!==void 0?(s.set(E.key,V.mutation.getFieldMask()),bi(V.mutation,E,V.mutation.getFieldMask(),ht.now())):s.set(E.key,Or.empty())}),this.recalculateAndSaveOverlays(t,i).next(w=>(w.forEach((E,V)=>s.set(E,V)),r.forEach((E,V)=>a.set(E,new nu(V,s.get(E)??null))),a))}recalculateAndSaveOverlays(t,r){let n=_s(),o=new Ie((s,a)=>s-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(s=>{for(let a of s)a.keys().forEach(w=>{let E=r.get(w);if(E===null)return;let V=n.get(w)||Or.empty();V=a.applyToLocalView(E,V),n.set(w,V);let q=(o.get(a.batchId)||ye()).add(w);o=o.insert(a.batchId,q)})}).next(()=>{let s=[],a=o.getReverseIterator();for(;a.hasNext();){let w=a.getNext(),E=w.key,V=w.value,q=eu();V.forEach(K=>{if(!i.has(K)){let H=ru(r.get(K),n.get(K));H!==null&&q.set(K,H),i=i.add(K)}}),s.push(this.documentOverlayCache.saveOverlays(t,E,q))}return re.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n){return hx(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):Xc(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n):this.getDocumentsMatchingCollectionQuery(t,r,n)}getNextDocuments(t,r,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,o).next(i=>{let s=o-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,o-i.size):re.resolve(Bn()),a=gi,w=i;return s.next(E=>re.forEach(E,(V,q)=>(a<q.largestBatchId&&(a=q.largestBatchId),i.get(V)?re.resolve():this.remoteDocumentCache.getEntry(t,V).next(K=>{w=w.insert(V,K)}))).next(()=>this.populateOverlays(t,E,i)).next(()=>this.computeViews(t,w,E,ye())).next(V=>({batchId:a,changes:_x(V)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new se(r)).next(n=>{let o=hi();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o})}getDocumentsMatchingCollectionGroupQuery(t,r,n){G(r.path.isEmpty(),"Currently we only support collection group queries at the root.");let o=r.collectionGroup,i=hi();return this.indexManager.getCollectionParents(t,o).next(s=>re.forEach(s,a=>{let w=fx(r,a.child(o));return this.getDocumentsMatchingCollectionQuery(t,w,n).next(E=>{E.forEach((V,q)=>{i=i.insert(V,q)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n){let o;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,o))).next(i=>{o.forEach((a,w)=>{let E=w.getKey();i.get(E)===null&&(i=i.insert(E,et.newInvalidDocument(E)))});let s=hi();return i.forEach((a,w)=>{let E=o.get(a);E!==void 0&&bi(E.mutation,w,Or.empty(),ht.now()),bo(r,w)&&(s=s.insert(a,w))}),s})}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Vn(e){return e.name==="IndexedDbTransactionError"}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Tr=class{constructor(t,r,n,o,i=me.min(),s=me.min(),a=bt.EMPTY_BYTE_STRING,w=null){this.target=t;this.targetId=r;this.purpose=n;this.sequenceNumber=o;this.snapshotVersion=i;this.lastLimboFreeSnapshotVersion=s;this.resumeToken=a;this.expectedCount=w}withSequenceNumber(t){return new Tr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var zf="LocalStore",ZR=5*60*1e6,Gr=class{constructor(t,r,n,o){this.persistence=t;this.queryEngine=r;this.serializer=o;G(t.started,"LocalStore was passed an unstarted persistence implementation"),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.initializeUserComponents(n)}mutationQueue;documentOverlayCache;remoteDocuments;localDocuments;indexManager;targetCache;targetDataByTarget=new Ie(ve);targetIdByTarget=new pr(t=>fs(t),hs);collectionGroupReadTime=new Map;initializeUserComponents(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ou(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.targetDataByTarget))}};function Ux(e,t,r,n){return new Gr(e,t,r,n)}async function iu(e,t){let r=xe(e,Gr);return await r.persistence.runTransaction("Handle user change","readonly",o=>{let i;return r.mutationQueue.getAllMutationBatches(o).next(s=>(i=s,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(o))).next(s=>{let a=[],w=[],E=ye();for(let V of i){a.push(V.batchId);for(let q of V.mutations)E=E.add(q.key)}for(let V of s){w.push(V.batchId);for(let q of V.mutations)E=E.add(q.key)}return r.localDocuments.getDocuments(o,E).next(V=>({affectedDocuments:V,removedBatchIds:a,addedBatchIds:w}))})})}function qf(e){let t=xe(e,Gr);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.targetCache.getLastRemoteSnapshotVersion(r))}function Vx(e,t){let r=xe(e,Gr),n=t.snapshotVersion,o=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});o=r.targetDataByTarget;let a=[];t.targetChanges.forEach((V,q)=>{let K=o.get(q);if(!K)return;a.push(r.targetCache.removeMatchingKeys(i,V.removedDocuments,q).next(()=>r.targetCache.addMatchingKeys(i,V.addedDocuments,q)));let H=K.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(q)!==null?H=H.withResumeToken(bt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):V.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(V.resumeToken,n)),o=o.insert(q,H),eP(K,H,V)&&a.push(r.targetCache.updateTargetData(i,H))});let w=xr(),E=ye();if(t.documentUpdates.forEach(V=>{t.resolvedLimboDocuments.has(V)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(i,V))}),a.push(JR(i,s,t.documentUpdates).next(V=>{w=V.changedDocuments,E=V.existenceChangedKeys})),!n.isEqual(me.min())){let V=r.targetCache.getLastRemoteSnapshotVersion(i).next(q=>(G(n.compareTo(q)>=0,"Watch stream reverted to previous snapshot?? "+n+" < "+q),r.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)));a.push(V)}return re.waitFor(a).next(()=>s.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,w,E)).next(()=>w)}).then(i=>(r.targetDataByTarget=o,i))}function JR(e,t,r){let n=ye(),o=ye();return r.forEach(i=>n=n.add(i)),t.getEntries(e,n).next(i=>{let s=xr();return r.forEach((a,w)=>{let E=i.get(a);w.isFoundDocument()!==E.isFoundDocument()&&(o=o.add(a)),w.isNoDocument()&&w.version.isEqual(me.min())?(t.removeEntry(a,w.readTime),s=s.insert(a,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||w.version.compareTo(E.version)===0&&E.hasPendingWrites?(G(!me.min().isEqual(w.readTime),"Cannot add a document when the remote version is zero"),t.addEntry(w),s=s.insert(a,w)):ce(zf,"Ignoring outdated watch update for ",a,". Current version:",E.version," Watch version:",w.version)}),{changedDocuments:s,existenceChangedKeys:o}})}function eP(e,t,r){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=ZR?!0:r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function zx(e,t){let r=xe(e,Gr);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>re.forEach(t,o=>re.forEach(o.addedKeys,i=>r.persistence.referenceDelegate.addReference(n,o.targetId,i)).next(()=>re.forEach(o.removedKeys,i=>r.persistence.referenceDelegate.removeReference(n,o.targetId,i)))))}catch(n){if(Vn(n))ce(zf,"Failed to update sequence numbers: "+n);else throw n}for(let n of t){let o=n.targetId;if(!n.fromCache){let i=r.targetDataByTarget.get(o);G(i!==null,`Can't set limbo-free snapshot version for unknown target: ${o}`);let s=i.snapshotVersion,a=i.withLastLimboFreeSnapshotVersion(s);r.targetDataByTarget=r.targetDataByTarget.insert(o,a)}}}function qx(e,t){let r=xe(e,Gr);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let o;return r.targetCache.getTargetData(n,t).next(i=>i?(o=i,re.resolve(o)):r.targetCache.allocateTargetId(n).next(s=>(o=new Tr(t,s,"TargetPurposeListen",n.currentSequenceNumber),r.targetCache.addTargetData(n,o).next(()=>o))))}).then(n=>{let o=r.targetDataByTarget.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(n.targetId,n),r.targetIdByTarget.set(t,n.targetId)),n})}function tP(e,t,r){let n=xe(e,Gr),o=n.targetIdByTarget.get(r);return o!==void 0?re.resolve(n.targetDataByTarget.get(o)):n.targetCache.getTargetData(t,r)}async function su(e,t,r){let n=xe(e,Gr),o=n.targetDataByTarget.get(t);G(o!==null,`Tried to release nonexistent target: ${t}`);let i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,s=>n.persistence.referenceDelegate.removeTarget(s,o))}catch(s){if(Vn(s))ce(zf,`Failed to update sequence numbers for target ${t}: ${s}`);else throw s}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(o.target)}function Kf(e,t,r){let n=xe(e,Gr),o=me.min(),i=ye();return n.persistence.runTransaction("Execute query","readonly",s=>tP(n,s,Nr(t)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(s,a.targetId).next(w=>{i=w})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(s,t,r?o:me.min(),r?i:ye())).next(a=>(rP(n,gx(t),a),{documents:a,remoteKeys:i})))}function rP(e,t,r){let n=e.collectionGroupReadTime.get(t)||me.min();r.forEach((o,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),e.collectionGroupReadTime.set(t,n)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var nP="AsyncQueue";var Es=class{constructor(t,r,n,o,i){this.asyncQueue=t;this.timerId=r;this.targetTimeMs=n;this.op=o;this.removalCallback=i;this.deferred.promise.catch(s=>{})}timerHandle;deferred=new Ar;static createAndSchedule(t,r,n,o,i){let s=Date.now()+n,a=new Es(t,r,s,o,i);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(ne.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}then=this.deferred.promise.then.bind(this.deferred.promise);handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function au(e,t){if(Ft(nP,`${t}: ${e}`),Vn(e))return new le(ne.UNAVAILABLE,`${t}: ${e}`);throw e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var oP="ExponentialBackoff",iP=1e3,sP=1.5,aP=60*1e3,Ss=class{constructor(t,r,n=iP,o=sP,i=aP){this.queue=t;this.timerId=r;this.initialDelayMs=n;this.backoffFactor=o;this.maxDelayMs=i;this.reset()}currentBaseMs=0;timerPromise=null;lastAttemptTime=Date.now();reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(t){this.cancel();let r=Math.floor(this.currentBaseMs+this.jitterDelayMs()),n=Math.max(0,Date.now()-this.lastAttemptTime),o=Math.max(0,r-n);o>0&&ce(oP,`Backing off for ${o} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,()=>(this.lastAttemptTime=Date.now(),t())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var lu=class{constructor(t,r){this.count=t;this.unchangedNames=r}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Kx=(Q=>(Q[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS",Q))(Kx||{});function jx(e){let t=Kx[e];if(t!==void 0)return jf(t)}function jf(e){if(e===void 0)return Ft("GRPC error has no .code"),ne.UNKNOWN;switch(e){case 0:return ne.OK;case 1:return ne.CANCELLED;case 2:return ne.UNKNOWN;case 4:return ne.DEADLINE_EXCEEDED;case 8:return ne.RESOURCE_EXHAUSTED;case 13:return ne.INTERNAL;case 14:return ne.UNAVAILABLE;case 16:return ne.UNAUTHENTICATED;case 3:return ne.INVALID_ARGUMENT;case 5:return ne.NOT_FOUND;case 6:return ne.ALREADY_EXISTS;case 7:return ne.PERMISSION_DENIED;case 9:return ne.FAILED_PRECONDITION;case 10:return ne.ABORTED;case 11:return ne.OUT_OF_RANGE;case 12:return ne.UNIMPLEMENTED;case 15:return ne.DATA_LOSS;default:return pe("Unknown status code: "+e)}}function Hx(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(t)>=0?t:ne.UNKNOWN}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var pn=class{static emptySet(t){return new pn(t.comparator)}comparator;keyedMap;sortedSet;constructor(t){t?this.comparator=(r,n)=>t(r,n)||se.comparator(r.key,n.key):this.comparator=(r,n)=>se.comparator(r.key,n.key),this.keyedMap=hi(),this.sortedSet=new Ie(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){let r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){let r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof pn)||this.size!==t.size)return!1;let r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){let o=r.getNext().key,i=n.getNext().key;if(!o.isEqual(i))return!1}return!0}toString(){let t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){let n=new pn;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}};var La=class{changeMap=new Ie(se.comparator);track(t){let r=t.doc.key,n=this.changeMap.get(r);if(!n){this.changeMap=this.changeMap.insert(r,t);return}t.type!==0&&n.type===3?this.changeMap=this.changeMap.insert(r,t):t.type===3&&n.type!==1?this.changeMap=this.changeMap.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.changeMap=this.changeMap.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.changeMap=this.changeMap.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.changeMap=this.changeMap.remove(r):t.type===1&&n.type===2?this.changeMap=this.changeMap.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.changeMap=this.changeMap.insert(r,{type:2,doc:t.doc}):pe("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))}getChanges(){let t=[];return this.changeMap.inorderTraversal((r,n)=>{t.push(n)}),t}},fn=class{constructor(t,r,n,o,i,s,a,w,E){this.query=t;this.docs=r;this.oldDocs=n;this.docChanges=o;this.mutatedKeys=i;this.fromCache=s;this.syncStateChanged=a;this.excludesMetadataChanges=w;this.hasCachedResults=E}static fromInitialDocuments(t,r,n,o,i){let s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new fn(t,r,pn.emptySet(r),s,n,o,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(this.fromCache!==t.fromCache||this.hasCachedResults!==t.hasCachedResults||this.syncStateChanged!==t.syncStateChanged||!this.mutatedKeys.isEqual(t.mutatedKeys)||!go(this.query,t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;let r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++)if(r[o].type!==n[o].type||!r[o].doc.isEqual(n[o].doc))return!1;return!0}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var lP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$r={},ae,mh=mh||{},he=lP||self;function wu(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Ya(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function cP(e){return Object.prototype.hasOwnProperty.call(e,Hf)&&e[Hf]||(e[Hf]=++uP)}var Hf="closure_uid_"+(1e9*Math.random()>>>0),uP=0;function dP(e,t,r){return e.call.apply(e.bind,arguments)}function mP(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function Gt(e,t,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Gt=dP:Gt=mP,Gt.apply(null,arguments)}function cu(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function It(e,t){function r(){}r.prototype=t.prototype,e.$=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ac=function(n,o,i){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[o].apply(n,s)}}function _o(){this.s=this.s,this.o=this.o}var pP=0;_o.prototype.s=!1;_o.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),pP!=0)&&cP(this)};_o.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var oT=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};function ph(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function Gx(e,t){for(let r=1;r<arguments.length;r++){let n=arguments[r];if(wu(n)){let o=e.length||0,i=n.length||0;e.length=o+i;for(let s=0;s<i;s++)e[o+s]=n[s]}else e.push(n)}}function Wt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var fP=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{he.addEventListener("test",()=>{},t),he.removeEventListener("test",()=>{},t)}catch{}return e}();function qa(e){return/^[\s\xa0]*$/.test(e)}function Eu(){var e=he.navigator;return e&&(e=e.userAgent)?e:""}function hn(e){return Eu().indexOf(e)!=-1}function fh(e){return fh[" "](e),e}fh[" "]=function(){};function hP(e,t){var r=nN;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}var gP=hn("Opera"),Cs=hn("Trident")||hn("MSIE"),iT=hn("Edge"),Yf=iT||Cs,sT=hn("Gecko")&&!(Eu().toLowerCase().indexOf("webkit")!=-1&&!hn("Edge"))&&!(hn("Trident")||hn("MSIE"))&&!hn("Edge"),yP=Eu().toLowerCase().indexOf("webkit")!=-1&&!hn("Edge");function aT(){var e=he.document;return e?e.documentMode:void 0}var Xf;e:{if(uu="",du=function(){var e=Eu();if(sT)return/rv:([^\);]+)(\)|;)/.exec(e);if(iT)return/Edge\/([\d\.]+)/.exec(e);if(Cs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(yP)return/WebKit\/(\S+)/.exec(e);if(gP)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),du&&(uu=du?du[1]:""),Cs&&(mu=aT(),mu!=null&&mu>parseFloat(uu))){Xf=String(mu);break e}Xf=uu}var uu,du,mu,Zf;he.document&&Cs?(Gf=aT(),Zf=Gf||parseInt(Xf,10)||void 0):Zf=void 0;var Gf,bP=Zf;function Ka(e,t){if(Wt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sT){e:{try{fh(t.nodeName);var o=!0;break e}catch{}o=!1}o||(t=null)}}else r=="mouseover"?t=e.fromElement:r=="mouseout"&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:_P[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ka.$.h.call(this)}}It(Ka,Wt);var _P={2:"touch",3:"pen",4:"mouse"};Ka.prototype.h=function(){Ka.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xa="closure_listenable_"+(1e6*Math.random()|0),vP=0;function xP(e,t,r,n,o){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.la=o,this.key=++vP,this.fa=this.ia=!1}function Su(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function hh(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function TP(e,t){for(let r in e)t.call(void 0,e[r],r,e)}function lT(e){let t={};for(let r in e)t[r]=e[r];return t}var Wx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cT(e,t){let r,n;for(let o=1;o<arguments.length;o++){n=arguments[o];for(r in n)e[r]=n[r];for(let i=0;i<Wx.length;i++)r=Wx[i],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function ku(e){this.src=e,this.g={},this.h=0}ku.prototype.add=function(e,t,r,n,o){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var s=eh(e,t,n,o);return-1<s?(t=e[s],r||(t.ia=!1)):(t=new xP(t,this.src,i,!!n,o),t.ia=r,e.push(t)),t};function Jf(e,t){var r=t.type;if(r in e.g){var n=e.g[r],o=oT(n,t),i;(i=0<=o)&&Array.prototype.splice.call(n,o,1),i&&(Su(t),e.g[r].length==0&&(delete e.g[r],e.h--))}}function eh(e,t,r,n){for(var o=0;o<e.length;++o){var i=e[o];if(!i.fa&&i.listener==t&&i.capture==!!r&&i.la==n)return o}return-1}var gh="closure_lm_"+(1e6*Math.random()|0),Wf={};function uT(e,t,r,n,o){if(n&&n.once)return mT(e,t,r,n,o);if(Array.isArray(t)){for(var i=0;i<t.length;i++)uT(e,t[i],r,n,o);return null}return r=_h(r),e&&e[Xa]?e.O(t,r,Ya(n)?!!n.capture:!!n,o):dT(e,t,r,!1,n,o)}function dT(e,t,r,n,o,i){if(!t)throw Error("Invalid event type");var s=Ya(o)?!!o.capture:!!o,a=bh(e);if(a||(e[gh]=a=new ku(e)),r=a.add(t,r,n,s,i),r.proxy)return r;if(n=wP(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)fP||(o=s),o===void 0&&(o=!1),e.addEventListener(t.toString(),n,o);else if(e.attachEvent)e.attachEvent(fT(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function wP(){function e(r){return t.call(e.src,e.listener,r)}let t=EP;return e}function mT(e,t,r,n,o){if(Array.isArray(t)){for(var i=0;i<t.length;i++)mT(e,t[i],r,n,o);return null}return r=_h(r),e&&e[Xa]?e.P(t,r,Ya(n)?!!n.capture:!!n,o):dT(e,t,r,!0,n,o)}function pT(e,t,r,n,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)pT(e,t[i],r,n,o);else n=Ya(n)?!!n.capture:!!n,r=_h(r),e&&e[Xa]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],r=eh(i,r,n,o),-1<r&&(Su(i[r]),Array.prototype.splice.call(i,r,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=bh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=eh(t,r,n,o)),(r=-1<e?t[e]:null)&&yh(r))}function yh(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Xa])Jf(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(fT(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=bh(t))?(Jf(r,e),r.h==0&&(r.src=null,t[gh]=null)):Su(e)}}}function fT(e){return e in Wf?Wf[e]:Wf[e]="on"+e}function EP(e,t){if(e.fa)e=!0;else{t=new Ka(t,this);var r=e.listener,n=e.la||e.src;e.ia&&yh(e),e=r.call(n,t)}return e}function bh(e){return e=e[gh],e instanceof ku?e:null}var $f="__closure_events_fn_"+(1e9*Math.random()>>>0);function _h(e){return typeof e=="function"?e:(e[$f]||(e[$f]=function(t){return e.handleEvent(t)}),e[$f])}function kt(){_o.call(this),this.i=new ku(this),this.S=this,this.J=null}It(kt,_o);kt.prototype[Xa]=!0;kt.prototype.removeEventListener=function(e,t,r,n){pT(this,e,t,r,n)};function Ut(e,t){var r,n=e.J;if(n)for(r=[];n;n=n.J)r.push(n);if(e=e.S,n=t.type||t,typeof t=="string")t=new Wt(t,e);else if(t instanceof Wt)t.target=t.target||e;else{var o=t;t=new Wt(n,e),cT(t,o)}if(o=!0,r)for(var i=r.length-1;0<=i;i--){var s=t.g=r[i];o=pu(s,n,!0,t)&&o}if(s=t.g=e,o=pu(s,n,!0,t)&&o,o=pu(s,n,!1,t)&&o,r)for(i=0;i<r.length;i++)s=t.g=r[i],o=pu(s,n,!1,t)&&o}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var r=e.g[t],n=0;n<r.length;n++)Su(r[n]);delete e.g[t],e.h--}}this.J=null};kt.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)};kt.prototype.P=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};function pu(e,t,r,n){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.fa&&s.capture==r){var a=s.listener,w=s.la||s.src;s.ia&&Jf(e.i,s),o=a.call(w,n)!==!1&&o}}return o&&!n.defaultPrevented}var vh=he.JSON.stringify,th=class{constructor(t,r){this.i=t,this.j=r,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function SP(){var e=xh;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var rh=class{constructor(){this.h=this.g=null}add(t,r){let n=hT.get();n.set(t,r),this.h?this.h.next=n:this.g=n,this.h=n}},hT=new th(()=>new nh,e=>e.reset()),nh=class{constructor(){this.next=this.g=this.h=null}set(t,r){this.h=t,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}};function kP(e){var t=1;e=e.split(":");let r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function IP(e){he.setTimeout(()=>{throw e},0)}var ja,Ha=!1,xh=new rh,gT=()=>{let e=he.Promise.resolve(void 0);ja=()=>{e.then(DP)}},DP=()=>{for(var e;e=SP();){try{e.h.call(e.g)}catch(r){IP(r)}var t=hT;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ha=!1};function Iu(e,t){kt.call(this),this.h=e||1,this.g=t||he,this.j=Gt(this.qb,this),this.l=Date.now()}It(Iu,kt);ae=Iu.prototype;ae.ga=!1;ae.T=null;ae.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ut(this,"tick"),this.ga&&(Th(this),this.start()))}};ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Th(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}ae.N=function(){Iu.$.N.call(this),Th(this),delete this.g};function wh(e,t,r){if(typeof e=="function")r&&(e=Gt(e,r));else if(e&&typeof e.handleEvent=="function")e=Gt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:he.setTimeout(e,t||0)}function yT(e){e.g=wh(()=>{e.g=null,e.i&&(e.i=!1,yT(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var oh=class extends _o{constructor(t,r){super(),this.m=t,this.j=r,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:yT(this)}N(){super.N(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ga(e){_o.call(this),this.h=e,this.g={}}It(Ga,_o);var $x=[];function bT(e,t,r,n){Array.isArray(r)||(r&&($x[0]=r.toString()),r=$x);for(var o=0;o<r.length;o++){var i=uT(t,r[o],n||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function _T(e){hh(e.g,function(t,r){this.g.hasOwnProperty(r)&&yh(t)},e),e.g={}}Ga.prototype.N=function(){Ga.$.N.call(this),_T(this)};Ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Du(){this.g=!0}Du.prototype.Ea=function(){this.g=!1};function CP(e,t,r,n,o,i){e.info(function(){if(e.g)if(i)for(var s="",a=i.split("&"),w=0;w<a.length;w++){var E=a[w].split("=");if(1<E.length){var V=E[0];E=E[1];var q=V.split("_");s=2<=q.length&&q[1]=="type"?s+(V+"="+E+"&"):s+(V+"=redacted&")}}else s=null;else s=i;return"XMLHTTP REQ ("+n+") [attempt "+o+"]: "+t+`
`+r+`
`+s})}function AP(e,t,r,n,o,i,s){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+o+"]: "+t+`
`+r+`
`+i+" "+s})}function Is(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+PP(e,r)+(n?" "+n:"")})}function RP(e,t){e.info(function(){return"TIMEOUT: "+t})}Du.prototype.info=function(){};function PP(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var o=n[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if(i!="noop"&&i!="stop"&&i!="close")for(var s=1;s<o.length;s++)o[s]=""}}}}return vh(r)}catch{return t}}var Ti={},Qx=null;function Cu(){return Qx=Qx||new kt}Ti.Ta="serverreachability";function vT(e){Wt.call(this,Ti.Ta,e)}It(vT,Wt);function Wa(e){let t=Cu();Ut(t,new vT(t))}Ti.STAT_EVENT="statevent";function xT(e,t){Wt.call(this,Ti.STAT_EVENT,e),this.stat=t}It(xT,Wt);function or(e){let t=Cu();Ut(t,new xT(t,e))}Ti.Ua="timingevent";function TT(e,t){Wt.call(this,Ti.Ua,e),this.size=t}It(TT,Wt);function Za(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){e()},t)}var Au={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},wT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Eh(){}Eh.prototype.h=null;function Yx(e){return e.h||(e.h=e.i())}function ET(){}var Ja={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sh(){Wt.call(this,"d")}It(Sh,Wt);function kh(){Wt.call(this,"c")}It(kh,Wt);var ih;function Ru(){}It(Ru,Eh);Ru.prototype.g=function(){return new XMLHttpRequest};Ru.prototype.i=function(){return{}};ih=new Ru;function el(e,t,r,n){this.l=e,this.j=t,this.m=r,this.W=n||1,this.U=new Ga(this),this.P=NP,e=Yf?125:void 0,this.V=new Iu(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ST}function ST(){this.i=null,this.g="",this.h=!1}var NP=45e3,sh={},gu={};ae=el.prototype;ae.setTimeout=function(e){this.P=e};function ah(e,t,r){e.L=1,e.v=Nu(qn(t)),e.s=r,e.S=!0,kT(e,null)}function kT(e,t){e.G=Date.now(),tl(e),e.A=qn(e.v);var r=e.A,n=e.W;Array.isArray(n)||(n=[String(n)]),MT(r.i,"t",n),e.C=0,r=e.l.J,e.h=new ST,e.g=tw(e.l,r?t:null,!e.s),0<e.O&&(e.M=new oh(Gt(e.Pa,e,e.g),e.O)),bT(e.U,e.g,"readystatechange",e.nb),t=e.I?lT(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Wa(),CP(e.j,e.u,e.A,e.m,e.W,e.s)}ae.nb=function(e){e=e.target;let t=this.M;t&&gn(e)==3?t.l():this.Pa(e)};ae.Pa=function(e){try{if(e==this.g)e:{let V=gn(this.g);var t=this.g.Ia();let q=this.g.da();if(!(3>V)&&(V!=3||Yf||this.g&&(this.h.h||this.g.ja()||eT(this.g)))){this.J||V!=4||t==7||(t==8||0>=q?Wa(3):Wa(2)),Pu(this);var r=this.g.da();this.ca=r;t:if(IT(this)){var n=eT(this.g);e="";var o=n.length,i=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),za(this);var s="";break t}this.h.i=new he.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:i&&t==o-1});n.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=r==200,AP(this.j,this.u,this.A,this.m,this.W,V,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,w=this.g;if((a=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qa(a)){var E=a;break t}}E=null}if(r=E)Is(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lh(this,r);else{this.i=!1,this.o=3,or(12),_i(this),za(this);break e}}this.S?(DT(this,V,s),Yf&&this.i&&V==3&&(bT(this.U,this.V,"tick",this.mb),this.V.start())):(Is(this.j,this.m,s,null),lh(this,s)),V==4&&_i(this),this.i&&!this.J&&(V==4?XT(this.l,this):(this.i=!1,tl(this)))}else eN(this.g),r==400&&0<s.indexOf("Unknown SID")?(this.o=3,or(12)):(this.o=0,or(13)),_i(this),za(this)}}}catch{}finally{}};function IT(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function DT(e,t,r){let n=!0,o;for(;!e.J&&e.C<r.length;)if(o=MP(e,r),o==gu){t==4&&(e.o=4,or(14),n=!1),Is(e.j,e.m,null,"[Incomplete Response]");break}else if(o==sh){e.o=4,or(15),Is(e.j,e.m,r,"[Invalid Chunk]"),n=!1;break}else Is(e.j,e.m,o,null),lh(e,o);IT(e)&&o!=gu&&o!=sh&&(e.h.g="",e.C=0),t!=4||r.length!=0||e.h.h||(e.o=1,or(16),n=!1),e.i=e.i&&n,n?0<r.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),Ph(t),t.M=!0,or(11))):(Is(e.j,e.m,r,"[Invalid Chunked Response]"),_i(e),za(e))}ae.mb=function(){if(this.g){var e=gn(this.g),t=this.g.ja();this.C<t.length&&(Pu(this),DT(this,e,t),this.i&&e!=4&&tl(this))}};function MP(e,t){var r=e.C,n=t.indexOf(`
`,r);return n==-1?gu:(r=Number(t.substring(r,n)),isNaN(r)?sh:(n+=1,n+r>t.length?gu:(t=t.slice(n,n+r),e.C=n+r,t)))}ae.cancel=function(){this.J=!0,_i(this)};function tl(e){e.Y=Date.now()+e.P,CT(e,e.P)}function CT(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Za(Gt(e.lb,e),t)}function Pu(e){e.B&&(he.clearTimeout(e.B),e.B=null)}ae.lb=function(){this.B=null;let e=Date.now();0<=e-this.Y?(RP(this.j,this.A),this.L!=2&&(Wa(),or(17)),_i(this),this.o=2,za(this)):CT(this,this.Y-e)};function za(e){e.l.H==0||e.J||XT(e.l,e)}function _i(e){Pu(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Th(e.V),_T(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function lh(e,t){try{var r=e.l;if(r.H!=0&&(r.g==e||ch(r.i,e))){if(!e.K&&ch(r.i,e)&&r.H==3){try{var n=r.Ja.g.parse(t)}catch{n=null}if(Array.isArray(n)&&n.length==3){var o=n;if(o[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<e.G)_u(r),Lu(r);else break e;Rh(r),or(18)}}else r.Fa=o[1],0<r.Fa-r.V&&37500>o[2]&&r.G&&r.A==0&&!r.v&&(r.v=Za(Gt(r.ib,r),6e3));if(1>=FT(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else vi(r,11)}else if((e.K||r.g==e)&&_u(r),!qa(t))for(o=r.Ja.g.parse(t),t=0;t<o.length;t++){let E=o[t];if(r.V=E[0],E=E[1],r.H==2)if(E[0]=="c"){r.K=E[1],r.pa=E[2];let V=E[3];V!=null&&(r.ra=V,r.l.info("VER="+r.ra));let q=E[4];q!=null&&(r.Ga=q,r.l.info("SVER="+r.Ga));let K=E[5];K!=null&&typeof K=="number"&&0<K&&(n=1.5*K,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;let H=e.g;if(H){let X=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var i=n.i;i.g||X.indexOf("spdy")==-1&&X.indexOf("quic")==-1&&X.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Ih(i,i.h),i.h=null))}if(n.F){let Y=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;Y&&(n.Da=Y,Xe(n.I,n.F,Y))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-e.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var s=e;if(n.wa=ew(n,n.J?n.pa:null,n.Y),s.K){BT(n.i,s);var a=s,w=n.L;w&&a.setTimeout(w),a.B&&(Pu(a),tl(a)),n.g=s}else QT(n);0<r.j.length&&Fu(r)}else E[0]!="stop"&&E[0]!="close"||vi(r,7);else r.H==3&&(E[0]=="stop"||E[0]=="close"?E[0]=="stop"?vi(r,7):Ah(r):E[0]!="noop"&&r.h&&r.h.Aa(E),r.A=0)}}Wa(4)}catch{}}function OP(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(wu(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}t=[],r=0;for(n in e)t[r++]=e[n];return t}function LP(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(wu(e)||typeof e=="string"){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}t=[],r=0;for(let n in e)t[r++]=n;return t}}}function AT(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(wu(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var r=LP(e),n=OP(e),o=n.length,i=0;i<o;i++)t.call(void 0,n[i],r&&r[i],e)}var RT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FP(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),o=null;if(0<=n){var i=e[r].substring(0,n);o=e[r].substring(n+1)}else i=e[r];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function xi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof xi){this.h=e.h,yu(this,e.j),this.s=e.s,this.g=e.g,bu(this,e.m),this.l=e.l;var t=e.i,r=new $a;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),Xx(this,r),this.o=e.o}else e&&(t=String(e).match(RT))?(this.h=!1,yu(this,t[1]||"",!0),this.s=Ua(t[2]||""),this.g=Ua(t[3]||"",!0),bu(this,t[4]),this.l=Ua(t[5]||"",!0),Xx(this,t[6]||"",!0),this.o=Ua(t[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}xi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Va(t,Zx,!0),":");var r=this.g;return(r||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Va(t,Zx,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&e.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&e.push("/"),e.push(Va(r,r.charAt(0)=="/"?VP:UP,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",Va(r,qP)),e.join("")};function qn(e){return new xi(e)}function yu(e,t,r){e.j=r?Ua(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xx(e,t,r){t instanceof $a?(e.i=t,KP(e.i,e.h)):(r||(t=Va(t,zP)),e.i=new $a(t,e.h))}function Xe(e,t,r){e.i.set(t,r)}function Nu(e){return Xe(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ua(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Va(e,t,r){return typeof e=="string"?(e=encodeURI(e).replace(t,BP),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function BP(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Zx=/[#\/\?@]/g,UP=/[#\?:]/g,VP=/[#\?]/g,zP=/[#\?@]/g,qP=/#/g;function $a(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vo(e){e.g||(e.g=new Map,e.h=0,e.i&&FP(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}ae=$a.prototype;ae.add=function(e,t){vo(this),this.i=null,e=As(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this};function PT(e,t){vo(e),t=As(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function NT(e,t){return vo(e),t=As(e,t),e.g.has(t)}ae.forEach=function(e,t){vo(this),this.g.forEach(function(r,n){r.forEach(function(o){e.call(t,o,n,this)},this)},this)};ae.ta=function(){vo(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let o=e[n];for(let i=0;i<o.length;i++)r.push(t[n])}return r};ae.Z=function(e){vo(this);let t=[];if(typeof e=="string")NT(this,e)&&(t=t.concat(this.g.get(As(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t};ae.set=function(e,t){return vo(this),this.i=null,e=As(this,e),NT(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ae.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function MT(e,t,r){PT(e,t),0<r.length&&(e.i=null,e.g.set(As(e,t),ph(r)),e.h+=r.length)}ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let i=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var o=i;s[n]!==""&&(o+="="+encodeURIComponent(String(s[n]))),e.push(o)}}return this.i=e.join("&")};function As(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function KP(e,t){t&&!e.j&&(vo(e),e.i=null,e.g.forEach(function(r,n){var o=n.toLowerCase();n!=o&&(PT(this,n),MT(this,o,r))},e)),e.j=t}var jP=class{constructor(e,t){this.g=e,this.map=t}};function OT(e){this.l=e||HP,he.PerformanceNavigationTiming?(e=he.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(he.g&&he.g.Ka&&he.g.Ka()&&he.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HP=10;function LT(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function FT(e){return e.h?1:e.g?e.g.size:0}function ch(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ih(e,t){e.g?e.g.add(t):e.h=t}function BT(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}OT.prototype.cancel=function(){if(this.i=UT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function UT(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let r of e.g.values())t=t.concat(r.F);return t}return ph(e.i)}var GP=class{stringify(e){return he.JSON.stringify(e,void 0)}parse(e){return he.JSON.parse(e,void 0)}};function WP(){this.g=new GP}function $P(e,t,r){let n=r||"";try{AT(e,function(o,i){let s=o;Ya(o)&&(s=vh(o)),t.push(n+i+"="+encodeURIComponent(s))})}catch(o){throw t.push(n+"type="+encodeURIComponent("_badmap")),o}}function QP(e,t){let r=new Du;if(he.Image){let n=new Image;n.onload=cu(fu,r,n,"TestLoadImage: loaded",!0,t),n.onerror=cu(fu,r,n,"TestLoadImage: error",!1,t),n.onabort=cu(fu,r,n,"TestLoadImage: abort",!1,t),n.ontimeout=cu(fu,r,n,"TestLoadImage: timeout",!1,t),he.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}function fu(e,t,r,n,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(n)}catch{}}function rl(e){this.l=e.fc||null,this.j=e.ob||!1}It(rl,Eh);rl.prototype.g=function(){return new Mu(this.l,this.j)};rl.prototype.i=function(e){return function(){return e}}({});function Mu(e,t){kt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Dh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It(Mu,kt);var Dh=0;ae=Mu.prototype;ae.open=function(e,t){if(this.readyState!=Dh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qa(this)};ae.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||he).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=Dh};ae.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof he.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VT(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function VT(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}ae.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nl(this):Qa(this),this.readyState==3&&VT(this)}};ae.Za=function(e){this.g&&(this.response=this.responseText=e,nl(this))};ae.Ya=function(e){this.g&&(this.response=e,nl(this))};ae.ka=function(){this.g&&nl(this)};function nl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qa(e)}ae.setRequestHeader=function(e,t){this.v.append(e,t)};ae.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ae.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join(`\r
`)};function Qa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var YP=he.JSON.parse;function gt(e){kt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zT,this.L=this.M=!1}It(gt,kt);var zT="",XP=/^https?$/i,ZP=["POST","PUT"];ae=gt.prototype;ae.Oa=function(e){this.M=e};ae.ha=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ih.g(),this.C=this.u?Yx(this.u):Yx(ih),this.g.onreadystatechange=Gt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Jx(this,i);return}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var o in n)r.set(o,n[o]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(let i of n.keys())r.set(i,n.get(i));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(i=>i.toLowerCase()=="content-type"),o=he.FormData&&e instanceof he.FormData,!(0<=oT(ZP,t))||n||o||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[i,s]of r)this.g.setRequestHeader(i,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jT(this),0<this.B&&((this.L=JP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gt(this.ua,this)):this.A=wh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Jx(this,i)}};function JP(e){return Cs&&typeof e.timeout=="number"&&e.ontimeout!==void 0}ae.ua=function(){typeof mh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ut(this,"timeout"),this.abort(8))};function Jx(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qT(e),Ou(e)}function qT(e){e.F||(e.F=!0,Ut(e,"complete"),Ut(e,"error"))}ae.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ut(this,"complete"),Ut(this,"abort"),Ou(this))};ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ou(this,!0)),gt.$.N.call(this)};ae.La=function(){this.s||(this.G||this.v||this.l?KT(this):this.kb())};ae.kb=function(){KT(this)};function KT(e){if(e.h&&typeof mh<"u"&&(!e.C[1]||gn(e)!=4||e.da()!=2)){if(e.v&&gn(e)==4)wh(e.La,0,e);else if(Ut(e,"readystatechange"),gn(e)==4){e.h=!1;try{let s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var n;if(n=s===0){var o=String(e.I).match(RT)[1]||null;!o&&he.self&&he.self.location&&(o=he.self.location.protocol.slice(0,-1)),n=!XP.test(o?o.toLowerCase():"")}r=n}if(r)Ut(e,"complete"),Ut(e,"success");else{e.m=6;try{var i=2<gn(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",qT(e)}}finally{Ou(e)}}}}function Ou(e,t){if(e.g){jT(e);let r=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ut(e,"ready");try{r.onreadystatechange=n}catch{}}}function jT(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(he.clearTimeout(e.A),e.A=null)}ae.isActive=function(){return!!this.g};function gn(e){return e.g?e.g.readyState:0}ae.da=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}};ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ae.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),YP(t)}};function eT(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case zT:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function eN(e){let t={};e=(e.g&&2<=gn(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<e.length;n++){if(qa(e[n]))continue;var r=kP(e[n]);let o=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();let i=t[o]||[];t[o]=i,i.push(r)}TP(t,function(n){return n.join(", ")})}ae.Ia=function(){return this.m};ae.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function HT(e){let t="";return hh(e,function(r,n){t+=n,t+=":",t+=r,t+=`\r
`}),t}function Ch(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=HT(r),typeof e=="string"?r!=null&&encodeURIComponent(String(r)):Xe(e,t,r))}function Fa(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function GT(e){this.Ga=0,this.j=[],this.l=new Du,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fa("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fa("baseRetryDelayMs",5e3,e),this.hb=Fa("retryDelaySeedMs",1e4,e),this.eb=Fa("forwardChannelMaxRetries",2,e),this.xa=Fa("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new OT(e&&e.concurrentRequestLimit),this.Ja=new WP,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ae=GT.prototype;ae.ra=8;ae.H=1;function Ah(e){if(WT(e),e.H==3){var t=e.W++,r=qn(e.I);if(Xe(r,"SID",e.K),Xe(r,"RID",t),Xe(r,"TYPE","terminate"),ol(e,r),t=new el(e,e.l,t),t.L=2,t.v=Nu(qn(r)),r=!1,he.navigator&&he.navigator.sendBeacon)try{r=he.navigator.sendBeacon(t.v.toString(),"")}catch{}!r&&he.Image&&(new Image().src=t.v,r=!0),r||(t.g=tw(t.l,null),t.g.ha(t.v)),t.G=Date.now(),tl(t)}JT(e)}function Lu(e){e.g&&(Ph(e),e.g.cancel(),e.g=null)}function WT(e){Lu(e),e.u&&(he.clearTimeout(e.u),e.u=null),_u(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&he.clearTimeout(e.m),e.m=null)}function Fu(e){if(!LT(e.i)&&!e.m){e.m=!0;var t=e.Na;ja||gT(),Ha||(ja(),Ha=!0),xh.add(t,e),e.C=0}}function tN(e,t){return FT(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Za(Gt(e.Na,e,t),ZT(e,e.C)),e.C++,!0)}ae.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let o=new el(this,this.l,e),i=this.s;if(this.U&&(i?(i=lT(i),cT(i,this.U)):i=this.U),this.o!==null||this.O||(o.I=i,i=null),this.P)e:{for(var t=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(t+=n,4096<t){t=r;break e}if(t===4096||r===this.j.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=$T(this,o,t),r=qn(this.I),Xe(r,"RID",e),Xe(r,"CVER",22),this.F&&Xe(r,"X-HTTP-Session-Id",this.F),ol(this,r),i&&(this.O?t="headers="+encodeURIComponent(String(HT(i)))+"&"+t:this.o&&Ch(r,this.o,i)),Ih(this.i,o),this.bb&&Xe(r,"TYPE","init"),this.P?(Xe(r,"$req",t),Xe(r,"SID","null"),o.aa=!0,ah(o,r,null)):ah(o,r,t),this.H=2}}else this.H==3&&(e?tT(this,e):this.j.length==0||LT(this.i)||tT(this))};function tT(e,t){var r;t?r=t.m:r=e.W++;let n=qn(e.I);Xe(n,"SID",e.K),Xe(n,"RID",r),Xe(n,"AID",e.V),ol(e,n),e.o&&e.s&&Ch(n,e.o,e.s),r=new el(e,e.l,r,e.C+1),e.o===null&&(r.I=e.s),t&&(e.j=t.F.concat(e.j)),t=$T(e,r,1e3),r.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ih(e.i,r),ah(r,n,t)}function ol(e,t){e.na&&hh(e.na,function(r,n){Xe(t,n,r)}),e.h&&AT({},function(r,n){Xe(t,n,r)})}function $T(e,t,r){r=Math.min(e.j.length,r);var n=e.h?Gt(e.h.Va,e.h,e):null;e:{var o=e.j;let i=-1;for(;;){let s=["count="+r];i==-1?0<r?(i=o[0].g,s.push("ofs="+i)):i=0:s.push("ofs="+i);let a=!0;for(let w=0;w<r;w++){let E=o[w].g,V=o[w].map;if(E-=i,0>E)i=Math.max(0,o[w].g-100),a=!1;else try{$P(V,s,"req"+E+"_")}catch{n&&n(V)}}if(a){n=s.join("&");break e}}}return e=e.j.splice(0,r),t.F=e,n}function QT(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ja||gT(),Ha||(ja(),Ha=!0),xh.add(t,e),e.A=0}}function Rh(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Za(Gt(e.Ma,e),ZT(e,e.A)),e.A++,!0)}ae.Ma=function(){if(this.u=null,YT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Za(Gt(this.jb,this),e)}};ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,or(10),Lu(this),YT(this))};function Ph(e){e.B!=null&&(he.clearTimeout(e.B),e.B=null)}function YT(e){e.g=new el(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=qn(e.wa);Xe(t,"RID","rpc"),Xe(t,"SID",e.K),Xe(t,"AID",e.V),Xe(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Xe(t,"TO",e.qa),Xe(t,"TYPE","xmlhttp"),ol(e,t),e.o&&e.s&&Ch(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var r=e.g;e=e.pa,r.L=1,r.v=Nu(qn(t)),r.s=null,r.S=!0,kT(r,e)}ae.ib=function(){this.v!=null&&(this.v=null,Lu(this),Rh(this),or(19))};function _u(e){e.v!=null&&(he.clearTimeout(e.v),e.v=null)}function XT(e,t){var r=null;if(e.g==t){_u(e),Ph(e),e.g=null;var n=2}else if(ch(e.i,t))r=t.F,BT(e.i,t),n=1;else return;if(e.H!=0){if(t.i)if(n==1){r=t.s?t.s.length:0,t=Date.now()-t.G;var o=e.C;n=Cu(),Ut(n,new TT(n,r)),Fu(e)}else QT(e);else if(o=t.o,o==3||o==0&&0<t.ca||!(n==1&&tN(e,t)||n==2&&Rh(e)))switch(r&&0<r.length&&(t=e.i,t.i=t.i.concat(r)),o){case 1:vi(e,5);break;case 4:vi(e,10);break;case 3:vi(e,6);break;default:vi(e,2)}}}function ZT(e,t){let r=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(r*=2),r*t}function vi(e,t){if(e.l.info("Error code "+t),t==2){var r=null;e.h&&(r=null);var n=Gt(e.pb,e);r||(r=new xi("//www.google.com/images/cleardot.gif"),he.location&&he.location.protocol=="http"||yu(r,"https"),Nu(r)),QP(r.toString(),n)}else or(2);e.H=0,e.h&&e.h.za(t),JT(e),WT(e)}ae.pb=function(e){e?(this.l.info("Successfully pinged google.com"),or(2)):(this.l.info("Failed to ping google.com"),or(1))};function JT(e){if(e.H=0,e.ma=[],e.h){let t=UT(e.i);(t.length!=0||e.j.length!=0)&&(Gx(e.ma,t),Gx(e.ma,e.j),e.i.i.length=0,ph(e.j),e.j.length=0),e.h.ya()}}function ew(e,t,r){var n=r instanceof xi?qn(r):new xi(r);if(n.g!="")t&&(n.g=t+"."+n.g),bu(n,n.m);else{var o=he.location;n=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var i=new xi(null);n&&yu(i,n),t&&(i.g=t),o&&bu(i,o),r&&(i.l=r),n=i}return r=e.F,t=e.Da,r&&t&&Xe(n,r,t),Xe(n,"VER",e.ra),ol(e,n),n}function tw(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=r&&e.Ha&&!e.va?new gt(new rl({ob:!0})):new gt(e.va),t.Oa(e.J),t}ae.isActive=function(){return!!this.h&&this.h.isActive(this)};function rw(){}ae=rw.prototype;ae.Ba=function(){};ae.Aa=function(){};ae.za=function(){};ae.ya=function(){};ae.isActive=function(){return!0};ae.Va=function(){};function vu(){if(Cs&&!(10<=Number(bP)))throw Error("Environmental error: no available transport.")}vu.prototype.g=function(e,t){return new wr(e,t)};function wr(e,t){kt.call(this),this.g=new GT(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!qa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!qa(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Rs(this)}It(wr,kt);wr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,r=this.h||void 0;or(0),e.Y=t,e.na=r||{},e.G=e.aa,e.I=ew(e,null,e.Y),Fu(e)};wr.prototype.close=function(){Ah(this.g)};wr.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var r={};r.__data__=e,e=r}else this.v&&(r={},r.__data__=vh(e),e=r);t.j.push(new jP(t.fb++,e)),t.H==3&&Fu(t)};wr.prototype.N=function(){this.g.h=null,delete this.j,Ah(this.g),delete this.g,wr.$.N.call(this)};function nw(e){Sh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}It(nw,Sh);function ow(){kh.call(this),this.status=1}It(ow,kh);function Rs(e){this.g=e}It(Rs,rw);Rs.prototype.Ba=function(){Ut(this.g,"a")};Rs.prototype.Aa=function(e){Ut(this.g,new nw(e))};Rs.prototype.za=function(e){Ut(this.g,new ow)};Rs.prototype.ya=function(){Ut(this.g,"b")};function rN(){this.blockSize=-1}function Wr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}It(Wr,rN);Wr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qf(e,t,r){r||(r=0);var n=Array(16);if(typeof t=="string")for(var o=0;16>o;++o)n[o]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(o=0;16>o;++o)n[o]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],o=e.g[2];var i=e.g[3],s=t+(i^r&(o^i))+n[0]+3614090360&4294967295;t=r+(s<<7&4294967295|s>>>25),s=i+(o^t&(r^o))+n[1]+3905402710&4294967295,i=t+(s<<12&4294967295|s>>>20),s=o+(r^i&(t^r))+n[2]+606105819&4294967295,o=i+(s<<17&4294967295|s>>>15),s=r+(t^o&(i^t))+n[3]+3250441966&4294967295,r=o+(s<<22&4294967295|s>>>10),s=t+(i^r&(o^i))+n[4]+4118548399&4294967295,t=r+(s<<7&4294967295|s>>>25),s=i+(o^t&(r^o))+n[5]+1200080426&4294967295,i=t+(s<<12&4294967295|s>>>20),s=o+(r^i&(t^r))+n[6]+2821735955&4294967295,o=i+(s<<17&4294967295|s>>>15),s=r+(t^o&(i^t))+n[7]+4249261313&4294967295,r=o+(s<<22&4294967295|s>>>10),s=t+(i^r&(o^i))+n[8]+1770035416&4294967295,t=r+(s<<7&4294967295|s>>>25),s=i+(o^t&(r^o))+n[9]+2336552879&4294967295,i=t+(s<<12&4294967295|s>>>20),s=o+(r^i&(t^r))+n[10]+4294925233&4294967295,o=i+(s<<17&4294967295|s>>>15),s=r+(t^o&(i^t))+n[11]+2304563134&4294967295,r=o+(s<<22&4294967295|s>>>10),s=t+(i^r&(o^i))+n[12]+1804603682&4294967295,t=r+(s<<7&4294967295|s>>>25),s=i+(o^t&(r^o))+n[13]+4254626195&4294967295,i=t+(s<<12&4294967295|s>>>20),s=o+(r^i&(t^r))+n[14]+2792965006&4294967295,o=i+(s<<17&4294967295|s>>>15),s=r+(t^o&(i^t))+n[15]+1236535329&4294967295,r=o+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[1]+4129170786&4294967295,t=r+(s<<5&4294967295|s>>>27),s=i+(r^o&(t^r))+n[6]+3225465664&4294967295,i=t+(s<<9&4294967295|s>>>23),s=o+(t^r&(i^t))+n[11]+643717713&4294967295,o=i+(s<<14&4294967295|s>>>18),s=r+(i^t&(o^i))+n[0]+3921069994&4294967295,r=o+(s<<20&4294967295|s>>>12),s=t+(o^i&(r^o))+n[5]+3593408605&4294967295,t=r+(s<<5&4294967295|s>>>27),s=i+(r^o&(t^r))+n[10]+38016083&4294967295,i=t+(s<<9&4294967295|s>>>23),s=o+(t^r&(i^t))+n[15]+3634488961&4294967295,o=i+(s<<14&4294967295|s>>>18),s=r+(i^t&(o^i))+n[4]+3889429448&4294967295,r=o+(s<<20&4294967295|s>>>12),s=t+(o^i&(r^o))+n[9]+568446438&4294967295,t=r+(s<<5&4294967295|s>>>27),s=i+(r^o&(t^r))+n[14]+3275163606&4294967295,i=t+(s<<9&4294967295|s>>>23),s=o+(t^r&(i^t))+n[3]+4107603335&4294967295,o=i+(s<<14&4294967295|s>>>18),s=r+(i^t&(o^i))+n[8]+1163531501&4294967295,r=o+(s<<20&4294967295|s>>>12),s=t+(o^i&(r^o))+n[13]+2850285829&4294967295,t=r+(s<<5&4294967295|s>>>27),s=i+(r^o&(t^r))+n[2]+4243563512&4294967295,i=t+(s<<9&4294967295|s>>>23),s=o+(t^r&(i^t))+n[7]+1735328473&4294967295,o=i+(s<<14&4294967295|s>>>18),s=r+(i^t&(o^i))+n[12]+2368359562&4294967295,r=o+(s<<20&4294967295|s>>>12),s=t+(r^o^i)+n[5]+4294588738&4294967295,t=r+(s<<4&4294967295|s>>>28),s=i+(t^r^o)+n[8]+2272392833&4294967295,i=t+(s<<11&4294967295|s>>>21),s=o+(i^t^r)+n[11]+1839030562&4294967295,o=i+(s<<16&4294967295|s>>>16),s=r+(o^i^t)+n[14]+4259657740&4294967295,r=o+(s<<23&4294967295|s>>>9),s=t+(r^o^i)+n[1]+2763975236&4294967295,t=r+(s<<4&4294967295|s>>>28),s=i+(t^r^o)+n[4]+1272893353&4294967295,i=t+(s<<11&4294967295|s>>>21),s=o+(i^t^r)+n[7]+4139469664&4294967295,o=i+(s<<16&4294967295|s>>>16),s=r+(o^i^t)+n[10]+3200236656&4294967295,r=o+(s<<23&4294967295|s>>>9),s=t+(r^o^i)+n[13]+681279174&4294967295,t=r+(s<<4&4294967295|s>>>28),s=i+(t^r^o)+n[0]+3936430074&4294967295,i=t+(s<<11&4294967295|s>>>21),s=o+(i^t^r)+n[3]+3572445317&4294967295,o=i+(s<<16&4294967295|s>>>16),s=r+(o^i^t)+n[6]+76029189&4294967295,r=o+(s<<23&4294967295|s>>>9),s=t+(r^o^i)+n[9]+3654602809&4294967295,t=r+(s<<4&4294967295|s>>>28),s=i+(t^r^o)+n[12]+3873151461&4294967295,i=t+(s<<11&4294967295|s>>>21),s=o+(i^t^r)+n[15]+530742520&4294967295,o=i+(s<<16&4294967295|s>>>16),s=r+(o^i^t)+n[2]+3299628645&4294967295,r=o+(s<<23&4294967295|s>>>9),s=t+(o^(r|~i))+n[0]+4096336452&4294967295,t=r+(s<<6&4294967295|s>>>26),s=i+(r^(t|~o))+n[7]+1126891415&4294967295,i=t+(s<<10&4294967295|s>>>22),s=o+(t^(i|~r))+n[14]+2878612391&4294967295,o=i+(s<<15&4294967295|s>>>17),s=r+(i^(o|~t))+n[5]+4237533241&4294967295,r=o+(s<<21&4294967295|s>>>11),s=t+(o^(r|~i))+n[12]+1700485571&4294967295,t=r+(s<<6&4294967295|s>>>26),s=i+(r^(t|~o))+n[3]+2399980690&4294967295,i=t+(s<<10&4294967295|s>>>22),s=o+(t^(i|~r))+n[10]+4293915773&4294967295,o=i+(s<<15&4294967295|s>>>17),s=r+(i^(o|~t))+n[1]+2240044497&4294967295,r=o+(s<<21&4294967295|s>>>11),s=t+(o^(r|~i))+n[8]+1873313359&4294967295,t=r+(s<<6&4294967295|s>>>26),s=i+(r^(t|~o))+n[15]+4264355552&4294967295,i=t+(s<<10&4294967295|s>>>22),s=o+(t^(i|~r))+n[6]+2734768916&4294967295,o=i+(s<<15&4294967295|s>>>17),s=r+(i^(o|~t))+n[13]+1309151649&4294967295,r=o+(s<<21&4294967295|s>>>11),s=t+(o^(r|~i))+n[4]+4149444226&4294967295,t=r+(s<<6&4294967295|s>>>26),s=i+(r^(t|~o))+n[11]+3174756917&4294967295,i=t+(s<<10&4294967295|s>>>22),s=o+(t^(i|~r))+n[2]+718787259&4294967295,o=i+(s<<15&4294967295|s>>>17),s=r+(i^(o|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+i&4294967295}Wr.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var r=t-this.blockSize,n=this.m,o=this.h,i=0;i<t;){if(o==0)for(;i<=r;)Qf(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(n[o++]=e.charCodeAt(i++),o==this.blockSize){Qf(this,n),o=0;break}}else for(;i<t;)if(n[o++]=e[i++],o==this.blockSize){Qf(this,n),o=0;break}}this.h=o,this.i+=t};Wr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=r&255,r/=256;for(this.j(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};function qe(e,t){this.h=t;for(var r=[],n=!0,o=e.length-1;0<=o;o--){var i=e[o]|0;n&&i==t||(r[o]=i,n=!1)}this.g=r}var nN={};function Nh(e){return-128<=e&&128>e?hP(e,function(t){return new qe([t|0],0>t?-1:0)}):new qe([e|0],0>e?-1:0)}function yn(e){if(isNaN(e)||!isFinite(e))return Ds;if(0>e)return Bt(yn(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=uh;return new qe(t,0)}function iw(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Bt(iw(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=yn(Math.pow(t,8)),n=Ds,o=0;o<e.length;o+=8){var i=Math.min(8,e.length-o),s=parseInt(e.substring(o,o+i),t);8>i?(i=yn(Math.pow(t,i)),n=n.R(i).add(yn(s))):(n=n.R(r),n=n.add(yn(s)))}return n}var uh=4294967296,Ds=Nh(0),dh=Nh(1),rT=Nh(16777216);ae=qe.prototype;ae.ea=function(){if(Lr(this))return-Bt(this).ea();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.D(r);e+=(0<=n?n:uh+n)*t,t*=uh}return e};ae.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(zn(this))return"0";if(Lr(this))return"-"+Bt(this).toString(e);for(var t=yn(Math.pow(e,6)),r=this,n="";;){var o=Tu(r,t).g;r=xu(r,o.R(t));var i=((0<r.g.length?r.g[0]:r.h)>>>0).toString(e);if(r=o,zn(r))return i+n;for(;6>i.length;)i="0"+i;n=i+n}};ae.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function zn(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Lr(e){return e.h==-1}ae.X=function(e){return e=xu(this,e),Lr(e)?-1:zn(e)?0:1};function Bt(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new qe(r,~e.h).add(dh)}ae.abs=function(){return Lr(this)?Bt(this):this};ae.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,o=0;o<=t;o++){var i=n+(this.D(o)&65535)+(e.D(o)&65535),s=(i>>>16)+(this.D(o)>>>16)+(e.D(o)>>>16);n=s>>>16,i&=65535,s&=65535,r[o]=s<<16|i}return new qe(r,r[r.length-1]&-2147483648?-1:0)};function xu(e,t){return e.add(Bt(t))}ae.R=function(e){if(zn(this)||zn(e))return Ds;if(Lr(this))return Lr(e)?Bt(this).R(Bt(e)):Bt(Bt(this).R(e));if(Lr(e))return Bt(this.R(Bt(e)));if(0>this.X(rT)&&0>e.X(rT))return yn(this.ea()*e.ea());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var o=0;o<e.g.length;o++){var i=this.D(n)>>>16,s=this.D(n)&65535,a=e.D(o)>>>16,w=e.D(o)&65535;r[2*n+2*o]+=s*w,hu(r,2*n+2*o),r[2*n+2*o+1]+=i*w,hu(r,2*n+2*o+1),r[2*n+2*o+1]+=s*a,hu(r,2*n+2*o+1),r[2*n+2*o+2]+=i*a,hu(r,2*n+2*o+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new qe(r,0)};function hu(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ba(e,t){this.g=e,this.h=t}function Tu(e,t){if(zn(t))throw Error("division by zero");if(zn(e))return new Ba(Ds,Ds);if(Lr(e))return t=Tu(Bt(e),t),new Ba(Bt(t.g),Bt(t.h));if(Lr(t))return t=Tu(e,Bt(t)),new Ba(Bt(t.g),t.h);if(30<e.g.length){if(Lr(e)||Lr(t))throw Error("slowDivide_ only works with positive integers.");for(var r=dh,n=t;0>=n.X(e);)r=nT(r),n=nT(n);var o=ks(r,1),i=ks(n,1);for(n=ks(n,2),r=ks(r,2);!zn(n);){var s=i.add(n);0>=s.X(e)&&(o=o.add(r),i=s),n=ks(n,1),r=ks(r,1)}return t=xu(e,o.R(t)),new Ba(o,t)}for(o=Ds;0<=e.X(t);){for(r=Math.max(1,Math.floor(e.ea()/t.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),i=yn(r),s=i.R(t);Lr(s)||0<s.X(e);)r-=n,i=yn(r),s=i.R(t);zn(i)&&(i=dh),o=o.add(i),e=xu(e,s)}return new Ba(o,e)}ae.gb=function(e){return Tu(this,e).h};ae.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)&e.D(n);return new qe(r,this.h&e.h)};ae.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)|e.D(n);return new qe(r,this.h|e.h)};ae.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)^e.D(n);return new qe(r,this.h^e.h)};function nT(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.D(n)<<1|e.D(n-1)>>>31;return new qe(r,e.h)}function ks(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,o=[],i=0;i<n;i++)o[i]=0<t?e.D(i+r)>>>t|e.D(i+r+1)<<32-t:e.D(i+r);return new qe(o,e.h)}vu.prototype.createWebChannel=vu.prototype.g;wr.prototype.send=wr.prototype.u;wr.prototype.open=wr.prototype.m;wr.prototype.close=wr.prototype.close;Au.NO_ERROR=0;Au.TIMEOUT=8;Au.HTTP_ERROR=6;wT.COMPLETE="complete";ET.EventType=Ja;Ja.OPEN="a";Ja.CLOSE="b";Ja.ERROR="c";Ja.MESSAGE="d";kt.prototype.listen=kt.prototype.O;gt.prototype.listenOnce=gt.prototype.P;gt.prototype.getLastError=gt.prototype.Sa;gt.prototype.getLastErrorCode=gt.prototype.Ia;gt.prototype.getStatus=gt.prototype.da;gt.prototype.getResponseJson=gt.prototype.Wa;gt.prototype.getResponseText=gt.prototype.ja;gt.prototype.send=gt.prototype.ha;gt.prototype.setWithCredentials=gt.prototype.Oa;Wr.prototype.digest=Wr.prototype.l;Wr.prototype.reset=Wr.prototype.reset;Wr.prototype.update=Wr.prototype.j;qe.prototype.add=qe.prototype.add;qe.prototype.multiply=qe.prototype.R;qe.prototype.modulo=qe.prototype.gb;qe.prototype.compare=qe.prototype.X;qe.prototype.toNumber=qe.prototype.ea;qe.prototype.toString=qe.prototype.toString;qe.prototype.getBits=qe.prototype.D;qe.fromNumber=yn;qe.fromString=iw;var sw=$r.createWebChannelTransport=function(){return new vu},aw=$r.getStatEventTarget=function(){return Cu()},Bu=$r.ErrorCode=Au,lw=$r.EventType=wT,cw=$r.Event=Ti,Mh=$r.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uw=$r.FetchXmlHttpFactory=rl,il=$r.WebChannel=ET,dw=$r.XhrIo=gt,mw=$r.Md5=Wr,wi=$r.Integer=qe;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function pw(){return new TextEncoder}var oN=new wi([4294967295,4294967295],0);function fw(e){let t=pw().encode(e),r=new mw;return r.update(t),new Uint8Array(r.digest())}function hw(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),o=t.getUint32(8,!0),i=t.getUint32(12,!0),s=new wi([r,n],0),a=new wi([o,i],0);return[s,a]}var Ps=class{constructor(t,r,n){this.bitmap=t;this.padding=r;this.hashCount=n;if(r<0||r>=8)throw new xo(`Invalid padding: ${r}`);if(n<0)throw new xo(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new xo(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new xo(`Invalid padding when bitmap length is 0: ${r}`);this.bitCount=t.length*8-r,this.bitCountInInteger=wi.fromNumber(this.bitCount)}bitCount;bitCountInInteger;getBitIndex(t,r,n){let o=t.add(r.multiply(wi.fromNumber(n)));return o.compare(oN)===1&&(o=new wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.bitCountInInteger).toNumber()}isBitSet(t){let r=this.bitmap[Math.floor(t/8)],n=t%8;return(r&1<<n)!==0}mightContain(t){if(this.bitCount===0)return!1;let r=fw(t),[n,o]=hw(r);for(let i=0;i<this.hashCount;i++){let s=this.getBitIndex(n,o,i);if(!this.isBitSet(s))return!1}return!0}static create(t,r,n){let o=t%8===0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new Ps(i,o,r);return n.forEach(a=>s.insert(a)),s}insert(t){if(this.bitCount===0)return;let r=fw(t),[n,o]=hw(r);for(let i=0;i<this.hashCount;i++){let s=this.getBitIndex(n,o,i);this.setBit(s)}}setBit(t){let r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}},xo=class extends Error{name="BloomFilterError"};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var To=class{constructor(t,r,n,o,i){this.snapshotVersion=t;this.targetChanges=r;this.targetMismatches=n;this.documentUpdates=o;this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,r,n){let o=new Map;return o.set(t,Kn.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new To(me.min(),o,new Ie(ve),xr(),ye())}},Kn=class{constructor(t,r,n,o,i){this.resumeToken=t;this.current=r;this.addedDocuments=n;this.modifiedDocuments=o;this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Kn(n,r,ye(),ye(),ye())}};var wo=class{constructor(t,r,n,o){this.updatedTargetIds=t;this.removedTargetIds=r;this.key=n;this.newDoc=o}},Ns=class{constructor(t,r){this.targetId=t;this.existenceFilter=r}};var Ei=class{constructor(t,r,n=bt.EMPTY_BYTE_STRING,o=null){this.state=t;this.targetIds=r;this.resumeToken=n;this.cause=o}},Uu=class{pendingResponses=0;documentChanges=yw();_resumeToken=bt.EMPTY_BYTE_STRING;_current=!1;_hasPendingChanges=!0;get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return this.pendingResponses!==0}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(t){t.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=t)}toTargetChange(){let t=ye(),r=ye(),n=ye();return this.documentChanges.forEach((o,i)=>{switch(i){case 0:t=t.add(o);break;case 2:r=r.add(o);break;case 1:n=n.add(o);break;default:pe("Encountered invalid change type: "+i)}}),new Kn(this._resumeToken,this._current,t,r,n)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=yw()}addDocumentChange(t,r){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,r)}removeDocumentChange(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1}markCurrent(){this._hasPendingChanges=!0,this._current=!0}},iN="WatchChangeAggregator",Vu=class{constructor(t){this.metadataProvider=t}targetStates=new Map;pendingDocumentUpdates=xr();pendingDocumentTargetMapping=gw();pendingTargetResets=new Ie(ve);handleDocumentChange(t){for(let r of t.updatedTargetIds)t.newDoc&&t.newDoc.isFoundDocument()?this.addDocumentToTarget(r,t.newDoc):this.removeDocumentFromTarget(r,t.key,t.newDoc);for(let r of t.removedTargetIds)this.removeDocumentFromTarget(r,t.key,t.newDoc)}handleTargetChange(t){this.forEachTarget(t,r=>{let n=this.ensureTargetState(r);switch(t.state){case 0:this.isActiveTarget(r)&&n.updateResumeToken(t.resumeToken);break;case 1:n.recordTargetResponse(),n.isPending||n.clearPendingChanges(),n.updateResumeToken(t.resumeToken);break;case 2:n.recordTargetResponse(),n.isPending||this.removeTarget(r),G(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:this.isActiveTarget(r)&&(n.markCurrent(),n.updateResumeToken(t.resumeToken));break;case 4:this.isActiveTarget(r)&&(this.resetTarget(r),n.updateResumeToken(t.resumeToken));break;default:pe("Unknown target watch change state: "+t.state)}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.targetStates.forEach((n,o)=>{this.isActiveTarget(o)&&r(o)})}handleExistenceFilter(t){let r=t.targetId,n=t.existenceFilter.count,o=this.targetDataForActiveTarget(r);if(o){let i=o.target;if(Ra(i))if(n===0){let s=new se(i.path);this.removeDocumentFromTarget(r,s,et.newNoDocument(s,me.min()))}else He(n===1,"Single document existence filter with count: "+n);else{let s=this.getCurrentDocumentCountForTarget(r);if(s!==n){let a=this.applyBloomFilter(t,s);if(a!==0){this.resetTarget(r);let w=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(r,w)}}}}}applyBloomFilter(t,r){let{unchangedNames:n,count:o}=t.existenceFilter;if(!n||!n.bits)return 1;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n,w;try{w=un(i).toUint8Array()}catch(q){if(q instanceof ui)return cn("Decoding the base64 bloom filter in existence filter failed ("+q.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw q}let E;try{E=new Ps(w,s,a)}catch(q){return q instanceof xo?cn("BloomFilter error: ",q):cn("Applying bloom filter failed: ",q),1}if(E.bitCount===0)return 1;let V=this.filterRemovedDocuments(t.targetId,E);return o!==r-V?2:0}filterRemovedDocuments(t,r){let n=this.metadataProvider.getRemoteKeysForTarget(t),o=0;return n.forEach(i=>{let s=this.metadataProvider.getDatabaseId(),a=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;r.mightContain(a)||(this.removeDocumentFromTarget(t,i,null),o++)}),o}createRemoteEvent(t){let r=new Map;this.targetStates.forEach((i,s)=>{let a=this.targetDataForActiveTarget(s);if(a){if(i.current&&Ra(a.target)){let w=new se(a.target.path);this.pendingDocumentUpdates.get(w)===null&&!this.targetContainsDocument(s,w)&&this.removeDocumentFromTarget(s,w,et.newNoDocument(w,t))}i.hasPendingChanges&&(r.set(s,i.toTargetChange()),i.clearPendingChanges())}});let n=ye();this.pendingDocumentTargetMapping.forEach((i,s)=>{let a=!0;s.forEachWhile(w=>{let E=this.targetDataForActiveTarget(w);return E&&E.purpose!=="TargetPurposeLimboResolution"?(a=!1,!1):!0}),a&&(n=n.add(i))}),this.pendingDocumentUpdates.forEach((i,s)=>s.setReadTime(t));let o=new To(t,r,this.pendingTargetResets,this.pendingDocumentUpdates,n);return this.pendingDocumentUpdates=xr(),this.pendingDocumentTargetMapping=gw(),this.pendingTargetResets=new Ie(ve),o}addDocumentToTarget(t,r){if(!this.isActiveTarget(t))return;let n=this.targetContainsDocument(t,r.key)?2:0;this.ensureTargetState(t).addDocumentChange(r.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(r.key,r),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(r.key,this.ensureDocumentTargetMapping(r.key).add(t))}removeDocumentFromTarget(t,r,n){if(!this.isActiveTarget(t))return;let o=this.ensureTargetState(t);this.targetContainsDocument(t,r)?o.addDocumentChange(r,1):o.removeDocumentChange(r),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(r,this.ensureDocumentTargetMapping(r).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(r,n))}removeTarget(t){this.targetStates.delete(t)}getCurrentDocumentCountForTarget(t){let n=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}recordPendingTargetRequest(t){this.ensureTargetState(t).recordPendingTargetRequest()}ensureTargetState(t){let r=this.targetStates.get(t);return r||(r=new Uu,this.targetStates.set(t,r)),r}ensureDocumentTargetMapping(t){let r=this.pendingDocumentTargetMapping.get(t);return r||(r=new $e(ve),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,r)),r}isActiveTarget(t){let r=this.targetDataForActiveTarget(t)!==null;return r||ce(iN,"Detected inactive target",t),r}targetDataForActiveTarget(t){let r=this.targetStates.get(t);return r&&r.isPending?null:this.metadataProvider.getTargetDataForTarget(t)}resetTarget(t){G(!this.targetStates.get(t).isPending,"Should only reset active targets"),this.targetStates.set(t,new Uu),this.metadataProvider.getRemoteKeysForTarget(t).forEach(n=>{this.removeDocumentFromTarget(t,n,null)})}targetContainsDocument(t,r){return this.metadataProvider.getRemoteKeysForTarget(t).has(r)}};function gw(){return new Ie(se.comparator)}function yw(){return new Ie(se.comparator)}var aN=(()=>{let e={};return e["asc"]="ASCENDING",e["desc"]="DESCENDING",e})(),lN=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e["in"]="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),cN=(()=>{let e={};return e["and"]="AND",e["or"]="OR",e})();function Qr(e,t){G(!po(e),t+" is missing")}var Ku=class{constructor(t,r){this.databaseId=t;this.useProto3Json=r}};function uN(e){let t=e.code===void 0?ne.UNKNOWN:jf(e.code);return new le(t,e.message||"")}function Lh(e,t){return e.useProto3Json||po(t)?t:{value:t}}function dN(e,t){if(e.useProto3Json){let n=new Date(t.seconds*1e3).toISOString().replace(/\.\d*/,"").replace("Z",""),o=("000000000"+t.nanoseconds).slice(-9);return`${n}.${o}Z`}else return{seconds:""+t.seconds,nanos:t.nanoseconds}}function mN(e){let t=Pr(e);return new ht(t.seconds,t.nanos)}function pN(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fN(e,t){return e.useProto3Json?(He(t===void 0||typeof t=="string","value must be undefined or a string when using proto3 Json"),bt.fromBase64String(t||"")):(He(t===void 0||t instanceof Uint8Array,"value must be undefined or Uint8Array"),bt.fromUint8Array(t||new Uint8Array))}function qu(e){return He(!!e,"Trying to deserialize version that isn't set"),me.fromTimestamp(mN(e))}function hN(e,t){return yN(e).child("documents").child(t).canonicalString()}function gN(e){let t=Oe.fromString(e);return He(Uh(t),"Tried to deserialize invalid key "+t.toString()),t}function Oh(e,t){let r=gN(t);if(r.get(1)!==e.databaseId.projectId)throw new le(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new le(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new se(bN(r))}function Fh(e,t){return hN(e.databaseId,t)}function Bh(e){return new Oe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yN(e){return new Oe(["projects",e.projectId,"databases",e.database])}function bN(e){return He(e.length>4&&e.get(4)==="documents","tried to deserialize invalid key "+e.toString()),e.popFirst(5)}function bw(e,t){let r;if("targetChange"in t){Qr(t.targetChange,"targetChange");let n=_N(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],i=fN(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&uN(s);r=new Ei(n,o,i,a||null)}else if("documentChange"in t){Qr(t.documentChange,"documentChange");let n=t.documentChange;Qr(n.document,"documentChange.name"),Qr(n.document.name,"documentChange.document.name"),Qr(n.document.updateTime,"documentChange.document.updateTime");let o=Oh(e,n.document.name),i=qu(n.document.updateTime),s=n.document.createTime?qu(n.document.createTime):me.min(),a=new nr({mapValue:{fields:n.document.fields}}),w=et.newFoundDocument(o,i,s,a),E=n.targetIds||[],V=n.removedTargetIds||[];r=new wo(E,V,w.key,w)}else if("documentDelete"in t){Qr(t.documentDelete,"documentDelete");let n=t.documentDelete;Qr(n.document,"documentDelete.document");let o=Oh(e,n.document),i=n.readTime?qu(n.readTime):me.min(),s=et.newNoDocument(o,i),a=n.removedTargetIds||[];r=new wo([],a,s.key,s)}else if("documentRemove"in t){Qr(t.documentRemove,"documentRemove");let n=t.documentRemove;Qr(n.document,"documentRemove");let o=Oh(e,n.document),i=n.removedTargetIds||[];r=new wo([],i,o,null)}else if("filter"in t){Qr(t.filter,"filter");let n=t.filter;Qr(n.targetId,"filter.targetId");let{count:o=0,unchangedNames:i}=n,s=new lu(o,i),a=n.targetId;r=new Ns(a,s)}else return pe("Unknown change type "+JSON.stringify(t));return r}function _N(e){return e==="NO_CHANGE"?0:e==="ADD"?1:e==="REMOVE"?2:e==="CURRENT"?3:e==="RESET"?4:pe("Got unexpected TargetChange.state: "+e)}function _w(e){if(!("targetChange"in e))return me.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?me.min():t.readTime?qu(t.readTime):me.min()}function vN(e,t){return{documents:[Fh(e,t.path)]}}function xN(e,t){let r={structuredQuery:{}},n=t.path;t.collectionGroup!==null?(G(n.length%2===0,"Collection Group queries should be within a document path or root."),r.parent=Fh(e,n),r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(G(n.length%2!==0,"Document queries with filters are not supported."),r.parent=Fh(e,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);let o=wN(t.filters);o&&(r.structuredQuery.where=o);let i=EN(t.orderBy);i&&(r.structuredQuery.orderBy=i);let s=Lh(e,t.limit);return s!==null&&(r.structuredQuery.limit=s),t.startAt&&(r.structuredQuery.startAt=SN(t.startAt)),t.endAt&&(r.structuredQuery.endAt=kN(t.endAt)),r}function vw(e,t){let r=TN(t.purpose);return r==null?null:{"goog-listen-tags":r}}function TN(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe("Unrecognized query purpose: "+e)}}function xw(e,t){let r,n=t.target;if(Ra(n)?r={documents:vN(e,n)}:r={query:xN(e,n)},r.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=pN(e,t.resumeToken);let o=Lh(e,t.expectedCount);o!==null&&(r.expectedCount=o)}else if(t.snapshotVersion.compareTo(me.min())>0){r.readTime=dN(e,t.snapshotVersion.toTimestamp());let o=Lh(e,t.expectedCount);o!==null&&(r.expectedCount=o)}return r}function wN(e){if(e.length!==0)return Tw(vr.create(e,"and"))}function EN(e){if(e.length!==0)return e.map(t=>AN(t))}function SN(e){return{before:e.inclusive,values:e.position}}function kN(e){return{before:!e.inclusive,values:e.position}}function IN(e){return aN[e]}function DN(e){return lN[e]}function CN(e){return cN[e]}function Ms(e){return{fieldPath:e.canonicalString()}}function AN(e){return{field:Ms(e.field),direction:IN(e.dir)}}function Tw(e){return e instanceof wt?PN(e):e instanceof vr?RN(e):pe("Unrecognized filter type "+JSON.stringify(e))}function RN(e){let t=e.getFilters().map(r=>Tw(r));return t.length===1?t[0]:{compositeFilter:{op:CN(e.op),filters:t}}}function PN(e){if(e.op==="=="){if(Ef(e.value))return{unaryFilter:{field:Ms(e.field),op:"IS_NAN"}};if(wf(e.value))return{unaryFilter:{field:Ms(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ef(e.value))return{unaryFilter:{field:Ms(e.field),op:"IS_NOT_NAN"}};if(wf(e.value))return{unaryFilter:{field:Ms(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(e.field),op:DN(e.op),value:e.value}}}function Uh(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var ww="PersistentStream";var NN=60*1e3,MN=10*1e3,Vh=class{constructor(t,r,n,o,i,s,a,w){this.queue=t;this.idleTimerId=n;this.healthTimerId=o;this.connection=i;this.authCredentialsProvider=s;this.appCheckCredentialsProvider=a;this.listener=w;this.backoff=new Ss(t,r)}state=0;closeCount=0;idleTimer=null;healthCheck=null;stream=null;backoff;isStarted(){return this.state===1||this.state===5||this.isOpen()}isOpen(){return this.state===2||this.state===3}start(){if(this.state===4){this.performBackoff();return}G(this.state===0,"Already started"),this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){G(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&this.idleTimer===null&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,NN,()=>this.handleIdleCloseTimer()))}sendRequest(t){this.cancelIdleCheck(),this.stream.send(t)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(t,r){G(this.isStarted(),"Only started streams should be closed."),G(t===4||po(r),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,t!==4?this.backoff.reset():r&&r.code===ne.RESOURCE_EXHAUSTED?(Ft(r.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):r&&r.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,await this.listener.onClose(r)}tearDown(){}auth(){G(this.state===0,"Must be in initial state to auth"),this.state=1;let t=this.getCloseGuardedDispatcher(this.closeCount),r=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,o])=>{this.closeCount===r&&this.startStream(n,o)},n=>{t(()=>{let o=new le(ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.handleStreamClose(o)})})}startStream(t,r){G(this.state===1,"Trying to start stream in a non-starting state");let n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t,r),this.stream.onOpen(()=>{n(()=>(G(this.state===1,"Expected stream to be in state Starting, but was "+this.state),this.state=2,G(this.healthCheck===null,"Expected healthCheck to be null"),this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,MN,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(o=>{n(()=>this.handleStreamClose(o))}),this.stream.onMessage(o=>{n(()=>this.onMessage(o))})}performBackoff(){G(this.state===4,"Should only perform backoff when in Error state"),this.state=5,this.backoff.backoffAndRun(async()=>{G(this.state===5,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),G(this.isStarted(),"PersistentStream should have started")})}handleStreamClose(t){return G(this.isStarted(),"Can't handle server close on non-started stream"),ce(ww,`close with error: ${t}`),this.stream=null,this.close(4,t)}getCloseGuardedDispatcher(t){return r=>{this.queue.enqueueAndForget(()=>this.closeCount===t?r():(ce(ww,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ju=class extends Vh{constructor(r,n,o,i,s,a){super(r,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,i,a);this.serializer=s}startRpc(r,n){return this.connection.openStream("Listen",r,n)}onMessage(r){this.backoff.reset();let n=bw(this.serializer,r),o=_w(r);return this.listener.onWatchChange(n,o)}watch(r){let n={};n.database=Bh(this.serializer),n.addTarget=xw(this.serializer,r);let o=vw(this.serializer,r);o&&(n.labels=o),this.sendRequest(n)}unwatch(r){let n={};n.database=Bh(this.serializer),n.removeTarget=r,this.sendRequest(n)}};var zh=class{},Hu=class extends zh{constructor(r,n,o,i){super();this.authCredentials=r;this.appCheckCredentials=n;this.connection=o;this.serializer=i}terminated=!1;verifyInitialized(){if(G(!!this.connection,"Datastore.start() not called"),this.terminated)throw new le(ne.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(r,n,o){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.invokeRPC(r,n,o,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(ne.UNKNOWN,i.toString())})}invokeStreamingRPC(r,n,o,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.invokeStreamingRPC(r,n,o,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new le(ne.UNKNOWN,s.toString())})}terminate(){this.terminated=!0}};function Sw(e,t,r,n){return new Hu(e,t,r,n)}function kw(e,t,r){let n=xe(e,Hu);return n.verifyInitialized(),new ju(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ON="OnlineStateTracker",Iw=1,Dw=10*1e3,Gu=class{constructor(t,r){this.asyncQueue=t;this.onlineStateHandler=r}state="Unknown";watchStreamFailures=0;onlineStateTimer=null;shouldWarnClientIsOffline=!0;handleWatchStreamStart(){this.watchStreamFailures===0&&(this.setAndBroadcast("Unknown"),G(this.onlineStateTimer===null,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",Dw,()=>(this.onlineStateTimer=null,G(this.state==="Unknown","Timer should be canceled if we transitioned to a different state."),this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${Dw/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(t){this.state==="Online"?(this.setAndBroadcast("Unknown"),G(this.watchStreamFailures===0,"watchStreamFailures must be 0"),G(this.onlineStateTimer===null,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=Iw&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${Iw} times. Most recent error: ${t.toString()}`),this.setAndBroadcast("Offline")))}set(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t==="Online"&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)}setAndBroadcast(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}logClientOfflineWarningIfNecessary(t){let r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(Ft(r),this.shouldWarnClientIsOffline=!1):ce(ON,r)}clearOnlineStateTimer(){this.onlineStateTimer!==null&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}};var Os="RemoteStore";var bn=class{constructor(t,r,n,o,i){this.localStore=t;this.datastore=r;this.asyncQueue=n;this.connectivityMonitor=i,this.connectivityMonitor.addCallback(s=>{n.enqueueAndForget(async()=>{ll(this)&&(ce(Os,"Restarting streams for network reachability change."),await zN(this))})}),this.onlineStateTracker=new Gu(n,o)}remoteSyncer={};writePipeline=[];listenTargets=new Map;connectivityMonitor;watchStream;watchChangeAggregator;offlineCauses=new Set;onNetworkStatusChange=[];onlineStateTracker};function Aw(e,t,r,n,o){return new bn(e,t,r,n,o)}async function $u(e){if(ll(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function al(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function Rw(e){let t=xe(e,bn);ce(Os,"RemoteStore shutting down."),t.offlineCauses.add(5),await al(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function qh(e,t){let r=xe(e,bn);r.listenTargets.has(t.targetId)||(r.listenTargets.set(t.targetId,t),sl(r)?Hh(r):Ls(r).isOpen()&&jh(r,t))}function Kh(e,t){let r=xe(e,bn),n=Ls(r);G(r.listenTargets.has(t),`unlisten called on target no currently watched: ${t}`),r.listenTargets.delete(t),n.isOpen()&&Pw(r,t),r.listenTargets.size===0&&(n.isOpen()?n.markIdle():ll(r)&&r.onlineStateTracker.set("Unknown"))}function jh(e,t){if(e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(me.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Ls(e).watch(t)}function Pw(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),Ls(e).unwatch(t)}function Hh(e){G(sl(e),"startWatchStream() called when shouldStartWatchStream() is false."),G(!!e.remoteSyncer.getRemoteKeysForTarget,"getRemoteKeysForTarget() not set"),e.watchChangeAggregator=new Vu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null,getDatabaseId:()=>e.datastore.serializer.databaseId}),Ls(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function sl(e){return ll(e)&&!Ls(e).isStarted()&&e.listenTargets.size>0}function ll(e){return xe(e,bn).offlineCauses.size===0}function Nw(e){e.watchChangeAggregator=void 0}async function LN(e){e.listenTargets.forEach((t,r)=>{jh(e,t)})}async function FN(e,t){t===void 0&&G(!sl(e),"Watch stream was stopped gracefully while still needed."),Nw(e),sl(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),Hh(e)):e.onlineStateTracker.set("Unknown")}async function BN(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof Ei&&t.state===2&&t.cause){try{await VN(e,t)}catch(n){ce(Os,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Cw(e,n)}return}if(t instanceof wo?e.watchChangeAggregator.handleDocumentChange(t):t instanceof Ns?e.watchChangeAggregator.handleExistenceFilter(t):(G(t instanceof Ei,"Expected watchChange to be an instance of WatchTargetChange"),e.watchChangeAggregator.handleTargetChange(t)),!r.isEqual(me.min()))try{let n=await qf(e.localStore);r.compareTo(n)>=0&&await UN(e,r)}catch(n){ce(Os,"Failed to raise snapshot:",n),await Cw(e,n)}}async function Cw(e,t,r){if(Vn(t))G(!e.offlineCauses.has(1),"Unexpected network event when IndexedDB was marked failed."),e.offlineCauses.add(1),await al(e),e.onlineStateTracker.set("Offline"),r||(r=()=>qf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ce(Os,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await $u(e)});else throw t}function UN(e,t){G(!t.isEqual(me.min()),"Can't raise event for unknown SnapshotVersion");let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((n,o)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.listenTargets.get(o);i&&e.listenTargets.set(o,i.withResumeToken(n.resumeToken,t))}}),r.targetMismatches.forEach((n,o)=>{let i=e.listenTargets.get(n);if(!i)return;e.listenTargets.set(n,i.withResumeToken(bt.EMPTY_BYTE_STRING,i.snapshotVersion)),Pw(e,n);let s=new Tr(i.target,n,o,i.sequenceNumber);jh(e,s)}),G(!!e.remoteSyncer.applyRemoteEvent,"applyRemoteEvent() not set"),e.remoteSyncer.applyRemoteEvent(r)}async function VN(e,t){G(!!e.remoteSyncer.rejectListen,"rejectListen() not set"),G(!!t.cause,"Handling target error without a cause");let r=t.cause;for(let n of t.targetIds)e.listenTargets.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.listenTargets.delete(n),e.watchChangeAggregator.removeTarget(n))}async function zN(e){let t=xe(e,bn);t.offlineCauses.add(4),await al(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await $u(t)}async function Gh(e,t){let r=xe(e,bn);r.asyncQueue.verifyOperationInProgress(),G(!!r.remoteSyncer.handleCredentialChange,"handleCredentialChange() not set"),ce(Os,"RemoteStore received new credentials");let n=ll(r);r.offlineCauses.add(3),await al(r),n&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await $u(r)}async function Mw(e,t){let r=xe(e,bn);t?(r.offlineCauses.delete(2),await $u(r)):t||(r.offlineCauses.add(2),await al(r),r.onlineStateTracker.set("Unknown"))}function Ls(e){return e.watchStream||(e.watchStream=kw(e.datastore,e.asyncQueue,{onOpen:LN.bind(null,e),onClose:FN.bind(null,e),onWatchChange:BN.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),sl(e)?Hh(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),Nw(e))})),e.watchStream}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Qu=class{constructor(t){this.observer=t}muted=!1;next(t){this.observer.next&&this.scheduleEvent(this.observer.next,t)}error(t){this.observer.error?this.scheduleEvent(this.observer.error,t):Ft("Uncaught Error in snapshot listener:",t.toString())}mute(){this.muted=!0}scheduleEvent(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Si=class{constructor(t,r){this.previousValue=t;r&&(r.sequenceNumberHandler=n=>this.setPreviousValue(n),this.writeNewSequenceNumber=n=>r.writeSequenceNumber(n))}writeNewSequenceNumber;setPreviousValue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t}};ie(Si,"INVALID",-1);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Yu=class{constructor(t,r){this.largestBatchId=t;this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Xu=class{overlays=new Ie(se.comparator);overlayByBatchId=new Map;getOverlay(t,r){return re.resolve(this.overlays.get(r))}getOverlays(t,r){let n=Bn();return re.forEach(r,o=>this.getOverlay(t,o).next(i=>{i!==null&&n.set(o,i)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((o,i)=>{this.saveOverlay(t,r,i)}),re.resolve()}removeOverlaysForBatchId(t,r,n){let o=this.overlayByBatchId.get(n);return o!==void 0&&(o.forEach(i=>this.overlays=this.overlays.remove(i)),this.overlayByBatchId.delete(n)),re.resolve()}getOverlaysForCollection(t,r,n){let o=Bn(),i=r.length+1,s=new se(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let E=a.getNext().value,V=E.getKey();if(!r.isPrefixOf(V.path))break;V.path.length===i&&E.largestBatchId>n&&o.set(E.getKey(),E)}return re.resolve(o)}getOverlaysForCollectionGroup(t,r,n,o){let i=new Ie((E,V)=>E-V),s=this.overlays.getIterator();for(;s.hasNext();){let V=s.getNext().value;if(V.getKey().getCollectionGroup()===r&&V.largestBatchId>n){let K=i.get(V.largestBatchId);K===null&&(K=Bn(),i=i.insert(V.largestBatchId,K)),K.set(V.getKey(),V)}}let a=Bn(),w=i.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((q,K)=>a.set(q,K)),!(a.size()>=o)););return re.resolve(a)}saveOverlay(t,r,n){let o=this.overlays.get(n.key);if(o!==null){let s=this.overlayByBatchId.get(o.largestBatchId).delete(n.key);this.overlayByBatchId.set(o.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Yu(r,n));let i=this.overlayByBatchId.get(r);i===void 0&&(i=ye(),this.overlayByBatchId.set(r,i)),this.overlayByBatchId.set(r,i.add(n.key))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Zu=class{collectionParentIndex=new Wh;addToCollectionParentIndex(t,r){return this.collectionParentIndex.add(r),re.resolve()}getCollectionParents(t,r){return re.resolve(this.collectionParentIndex.getEntries(r))}addFieldIndex(t,r){return re.resolve()}deleteFieldIndex(t,r){return re.resolve()}getDocumentsMatchingTarget(t,r){return re.resolve(null)}getIndexType(t,r){return re.resolve(0)}getFieldIndexes(t,r){return re.resolve([])}getNextCollectionGroupToUpdate(t){return re.resolve(null)}getMinOffset(t,r){return re.resolve(Mr.min())}getMinOffsetFromCollectionGroup(t,r){return re.resolve(Mr.min())}updateCollectionGroup(t,r,n){return re.resolve()}updateIndexEntries(t,r){return re.resolve()}},Wh=class{index={};add(t){G(t.length%2===1,"Expected a collection path.");let r=t.lastSegment(),n=t.popLast(),o=this.index[r]||new $e(Oe.comparator),i=!o.has(n);return this.index[r]=o.add(n),i}has(t){let r=t.lastSegment(),n=t.popLast(),o=this.index[r];return o&&o.has(n)}getEntries(t){return(this.index[t]||new $e(Oe.comparator)).toArray()}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ju=class{constructor(t,r,n,o){this.batchId=t;this.localWriteTime=r;this.baseMutations=n;this.mutations=o;G(o.length>0,"Cannot create an empty mutation batch")}applyToRemoteDocument(t,r){let n=r.mutationResults;G(n.length===this.mutations.length,`Mismatch between mutations length
      (${this.mutations.length}) and mutation results length
      (${n.length}).`);for(let o=0;o<this.mutations.length;o++){let i=this.mutations[o];if(i.key.isEqual(t.key)){let s=n[o];Mx(i,t,s)}}}applyToLocalView(t,r){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(r=bi(n,t,r,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(r=bi(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){let n=eu();return this.mutations.forEach(o=>{let i=t.get(o.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields);a=r.has(o.key)?null:a;let w=ru(s,a);w!==null&&n.set(o.key,w),s.isValidDocument()||s.convertToNoDocument(me.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),ye())}isEqual(t){return this.batchId===t.batchId&&Rr(this.mutations,t.mutations,(r,n)=>Uf(r,n))&&Rr(this.baseMutations,t.baseMutations,(r,n)=>Uf(r,n))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Eo=class{refsByKey=new $e(_t.compareByKey);refsByTarget=new $e(_t.compareByTargetId);isEmpty(){return this.refsByKey.isEmpty()}addReference(t,r){let n=new _t(t,r);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)}addReferences(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.removeRef(new _t(t,r))}removeReferences(t,r){t.forEach(n=>this.removeReference(n,r))}removeReferencesForId(t){let r=new se(new Oe([])),n=new _t(r,t),o=new _t(r,t+1),i=[];return this.refsByTarget.forEachInRange([n,o],s=>{this.removeRef(s),i.push(s.key)}),i}removeAllReferences(){this.refsByKey.forEach(t=>this.removeRef(t))}removeRef(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)}referencesForId(t){let r=new se(new Oe([])),n=new _t(r,t),o=new _t(r,t+1),i=ye();return this.refsByTarget.forEachInRange([n,o],s=>{i=i.add(s.key)}),i}containsKey(t){let r=new _t(t,0),n=this.refsByKey.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}},_t=class{constructor(t,r){this.key=t;this.targetOrBatchId=r}static compareByKey(t,r){return se.comparator(t.key,r.key)||ve(t.targetOrBatchId,r.targetOrBatchId)}static compareByTargetId(t,r){return ve(t.targetOrBatchId,r.targetOrBatchId)||se.comparator(t.key,r.key)}};var ed=class{constructor(t,r){this.indexManager=t;this.referenceDelegate=r}mutationQueue=[];nextBatchId=1;batchesByDocumentKey=new $e(_t.compareByKey);checkEmpty(t){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,o){G(o.length!==0,"Mutation batches should not be empty");let i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){let a=this.mutationQueue[this.mutationQueue.length-1];G(a.batchId<i,"Mutation batchIDs must be monotonically increasing order")}let s=new Ju(i,r,n,o);this.mutationQueue.push(s);for(let a of o)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return re.resolve(s)}lookupMutationBatch(t,r){return re.resolve(this.findMutationBatch(r))}getNextMutationBatchAfterBatchId(t,r){let n=r+1,o=this.indexOfBatchId(n),i=o<0?0:o;return re.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.nextBatchId-1)}getAllMutationBatches(t){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){let n=new _t(r,0),o=new _t(r,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([n,o],s=>{G(r.isEqual(s.key),"Should only iterate over a single key's batches");let a=this.findMutationBatch(s.targetOrBatchId);G(a!==null,"Batches in the index must exist in the main table"),i.push(a)}),re.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new $e(ve);return r.forEach(o=>{let i=new _t(o,0),s=new _t(o,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([i,s],a=>{G(o.isEqual(a.key),"For each key, should only iterate over a single key's batches"),n=n.add(a.targetOrBatchId)})}),re.resolve(this.findMutationBatches(n))}getAllMutationBatchesAffectingQuery(t,r){G(!Xc(r),"CollectionGroup queries should be handled in LocalDocumentsView");let n=r.path,o=n.length+1,i=n;se.isDocumentKey(i)||(i=i.child(""));let s=new _t(new se(i),0),a=new $e(ve);return this.batchesByDocumentKey.forEachWhile(w=>{let E=w.key.path;return n.isPrefixOf(E)?(E.length===o&&(a=a.add(w.targetOrBatchId)),!0):!1},s),re.resolve(this.findMutationBatches(a))}findMutationBatches(t){let r=[];return t.forEach(n=>{let o=this.findMutationBatch(n);o!==null&&r.push(o)}),r}removeMutationBatch(t,r){let n=this.indexOfExistingBatchId(r.batchId,"removed");He(n===0,"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();let o=this.batchesByDocumentKey;return re.forEach(r.mutations,i=>{let s=new _t(i.key,r.batchId);return o=o.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.batchesByDocumentKey=o})}removeCachedMutationKeys(t){}containsKey(t,r){let n=new _t(r,0),o=this.batchesByDocumentKey.firstAfterOrEqual(n);return re.resolve(r.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length===0&&G(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),re.resolve()}indexOfExistingBatchId(t,r){let n=this.indexOfBatchId(t);return G(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+r),n}indexOfBatchId(t){if(this.mutationQueue.length===0)return 0;let r=this.mutationQueue[0].batchId;return t-r}findMutationBatch(t){let r=this.indexOfBatchId(t);if(r<0||r>=this.mutationQueue.length)return null;let n=this.mutationQueue[r];return G(n.batchId===t,"If found batch must match"),n}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var td=class{changes=new pr(t=>t.toString(),(t,r)=>t.isEqual(r));changesApplied=!1;addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,et.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();let n=this.changes.get(r);return n!==void 0?re.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){G(!this.changesApplied,"Changes have already been applied.")}};function jN(){return new Ie(se.comparator)}var $h=class{constructor(t){this.sizer=t}docs=jN();indexManager;size=0;setIndexManager(t){this.indexManager=t}addEntry(t,r){G(!r.readTime.isEqual(me.min()),"Cannot add a document with a read time of zero");let n=r.key,o=this.docs.get(n),i=o?o.size:0,s=this.sizer(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){let n=this.docs.get(r);return re.resolve(n?n.document.mutableCopy():et.newInvalidDocument(r))}getEntries(t,r){let n=xr();return r.forEach(o=>{let i=this.docs.get(o);n=n.insert(o,i?i.document.mutableCopy():et.newInvalidDocument(o))}),re.resolve(n)}getDocumentsMatchingQuery(t,r,n,o){let i=xr(),s=r.path,a=new se(s.child("")),w=this.docs.getIteratorFrom(a);for(;w.hasNext();){let{key:E,value:{document:V}}=w.getNext();if(!s.isPrefixOf(E.path))break;E.path.length>s.length+1||wx(Tx(V),n)<=0||!o.has(V.key)&&!bo(r,V)||(i=i.insert(V.key,V.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(t,r,n,o){pe("getAllFromCollectionGroup() is not supported.")}forEachDocumentKey(t,r){return re.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Qh(this)}getSize(t){return re.resolve(this.size)}};function Ow(e){return new $h(e)}var Qh=class extends td{constructor(r){super();this.documentCache=r}applyChanges(r){let n=[];return this.changes.forEach((o,i)=>{i.isValidDocument()?n.push(this.documentCache.addEntry(r,i)):this.documentCache.removeEntry(o)}),re.waitFor(n)}getFromCache(r,n){return this.documentCache.getEntry(r,n)}getAllFromCache(r,n){return this.documentCache.getEntries(r,n)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Yh=2,_n=class{constructor(t){this.lastId=t}next(){return this.lastId+=Yh,this.lastId}static forTargetCache(){return new _n(2-Yh)}static forSyncEngine(){return new _n(1-Yh)}};var rd=class{constructor(t){this.persistence=t}targets=new pr(t=>fs(t),hs);lastRemoteSnapshotVersion=me.min();highestTargetId=0;highestSequenceNumber=0;references=new Eo;targetCount=0;targetIdGenerator=_n.forTargetCache();forEachTarget(t,r){return this.targets.forEach((n,o)=>r(o)),re.resolve()}getLastRemoteSnapshotVersion(t){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return re.resolve(this.highestSequenceNumber)}allocateTargetId(t){return this.highestTargetId=this.targetIdGenerator.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.highestSequenceNumber&&(this.highestSequenceNumber=r),re.resolve()}saveTargetData(t){this.targets.set(t.target,t);let r=t.targetId;r>this.highestTargetId&&(this.targetIdGenerator=new _n(r),this.highestTargetId=r),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)}addTargetData(t,r){return G(!this.targets.has(r.target),"Adding a target that already exists"),this.saveTargetData(r),this.targetCount+=1,re.resolve()}updateTargetData(t,r){return G(this.targets.has(r.target),"Updating a non-existent target"),this.saveTargetData(r),re.resolve()}removeTargetData(t,r){return G(this.targetCount>0,"Removing a target from an empty cache"),G(this.targets.has(r.target),"Removing a non-existent target from the cache"),this.targets.delete(r.target),this.references.removeReferencesForId(r.targetId),this.targetCount-=1,re.resolve()}removeTargets(t,r,n){let o=0,i=[];return this.targets.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.targets.delete(s),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),o++)}),re.waitFor(i).next(()=>o)}getTargetCount(t){return re.resolve(this.targetCount)}getTargetData(t,r){let n=this.targets.get(r)||null;return re.resolve(n)}addMatchingKeys(t,r,n){return this.references.addReferences(r,n),re.resolve()}removeMatchingKeys(t,r,n){this.references.removeReferences(r,n);let o=this.persistence.referenceDelegate,i=[];return o&&r.forEach(s=>{i.push(o.markPotentiallyOrphaned(t,s))}),re.waitFor(i)}removeMatchingKeysForTargetId(t,r){return this.references.removeReferencesForId(r),re.resolve()}getMatchingKeysForTargetId(t,r){let n=this.references.referencesForId(r);return re.resolve(n)}containsKey(t,r){return re.resolve(this.references.containsKey(r))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Lw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nd=class{onCommittedListeners=[];addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};var HN="MemoryPersistence",od=class{indexManager;mutationQueues={};overlays={};remoteDocumentCache;targetCache;listenSequence=new Si(0);_started=!1;referenceDelegate;constructor(t){this._started=!0,this.referenceDelegate=t(this),this.targetCache=new rd(this);let r=n=>this.referenceDelegate.documentSize(n);this.indexManager=new Zu,this.remoteDocumentCache=Ow(r)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Xu,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.mutationQueues[t.toKey()];return n||(n=new ed(r,this.referenceDelegate),this.mutationQueues[t.toKey()]=n),n}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}runTransaction(t,r,n){ce(HN,"Starting transaction:",t);let o=new Xh(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(o).next(i=>this.referenceDelegate.onTransactionCommitted(o).next(()=>i)).toPromise().then(i=>(o.raiseOnCommittedEvent(),i))}mutationQueuesContainKey(t,r){return re.or(Object.values(this.mutationQueues).map(n=>()=>n.containsKey(t,r)))}},Xh=class extends nd{constructor(r){super();this.currentSequenceNumber=r}},Fs=class{constructor(t){this.persistence=t}localViewReferences=new Eo;_orphanedDocuments=null;static factory(t){return new Fs(t)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw pe("orphanedDocuments is only valid during a transaction.")}addReference(t,r,n){return this.localViewReferences.addReference(n,r),this.orphanedDocuments.delete(n.toString()),re.resolve()}removeReference(t,r,n){return this.localViewReferences.removeReference(n,r),this.orphanedDocuments.add(n.toString()),re.resolve()}markPotentiallyOrphaned(t,r){return this.orphanedDocuments.add(r.toString()),re.resolve()}removeTarget(t,r){this.localViewReferences.removeReferencesForId(r.targetId).forEach(i=>this.orphanedDocuments.add(i.toString()));let o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(s=>this.orphanedDocuments.add(s.toString()))}).next(()=>o.removeTargetData(t,r))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.orphanedDocuments,o=>{let i=se.fromPath(o);return this.isReferenced(t,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this._orphanedDocuments=null,n.apply(t)))}updateLimboDocument(t,r){return this.isReferenced(t,r).next(n=>{n?this.orphanedDocuments.delete(r.toString()):this.orphanedDocuments.add(r.toString())})}documentSize(t){return 0}isReferenced(t,r){return re.or([()=>re.resolve(this.localViewReferences.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.mutationQueuesContainKey(t,r)])}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var id=class{localDocumentsView;indexManager;initialized=!1;initialize(t,r){this.localDocumentsView=t,this.indexManager=r,this.initialized=!0}getDocumentsMatchingQuery(t,r,n,o){return G(this.initialized,"initialize() not called"),this.performQueryUsingIndex(t,r).next(i=>i||this.performQueryUsingRemoteKeys(t,r,o,n)).next(i=>i||this.executeFullCollectionScan(t,r))}performQueryUsingIndex(t,r){if(Lf(r))return re.resolve(null);let n=Nr(r);return this.indexManager.getIndexType(t,n).next(o=>o===0?null:(r.limit!==null&&o===1&&(r=Ff(r,null,"F"),n=Nr(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{G(!!i,"Index manager must return results for partial and full indexes.");let s=ye(...i);return this.localDocumentsView.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,n).next(w=>{let E=this.applyQuery(r,a);return this.needsRefill(r,E,s,w.readTime)?this.performQueryUsingIndex(t,Ff(r,null,"F")):this.appendRemainingResults(t,E,r,w)}))})))}performQueryUsingRemoteKeys(t,r,n,o){return Lf(r)?this.executeFullCollectionScan(t,r):o.isEqual(me.min())?this.executeFullCollectionScan(t,r):this.localDocumentsView.getDocuments(t,n).next(i=>{let s=this.applyQuery(r,i);return this.needsRefill(r,s,n,o)?this.executeFullCollectionScan(t,r):(pf()<=0&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(r)),this.appendRemainingResults(t,s,r,xx(o,gi)))})}applyQuery(t,r){let n=new $e(ys(t));return r.forEach((o,i)=>{bo(t,i)&&(n=n.add(i))}),n}needsRefill(t,r,n,o){if(t.limit===null)return!1;if(n.size!==r.size)return!0;let i=t.limitType==="F"?r.last():r.first();return i?i.hasPendingWrites||i.version.compareTo(o)>0:!1}executeFullCollectionScan(t,r){return pf()<=0&&ce("QueryEngine","Using full collection scan to execute query:",yo(r)),this.localDocumentsView.getDocumentsMatchingQuery(t,r,Mr.min())}appendRemainingResults(t,r,n,o){return this.localDocumentsView.getDocumentsMatchingQuery(t,n,o).next(i=>(r.forEach(s=>{i=i.insert(s.key,s)}),i))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var sd=class{activeTargetIds=vx();addQueryTarget(t){this.activeTargetIds=this.activeTargetIds.add(t)}removeQueryTarget(t){this.activeTargetIds=this.activeTargetIds.delete(t)}toWebStorageJSON(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},ad=class{localState=new sd;queryState={};onlineStateHandler=null;sequenceNumberHandler=null;addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"}updateQueryState(t,r,n){this.queryState[t]=r}removeLocalQueryTarget(t){this.localState.removeQueryTarget(t)}isLocalQueryTarget(t){return this.localState.activeTargetIds.has(t)}clearQueryState(t){delete this.queryState[t]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(t){return this.localState.activeTargetIds.has(t)}start(){return this.localState=new sd,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ld=class{addCallback(t){}shutdown(){}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var cd=null;function GN(){return 268435456+Math.round(2147483648*Math.random())}function cl(){return cd===null?cd=GN():cd++,"0x"+cd.toString(16)}var Zh="RestConnection",ul={};ul.BatchGetDocuments="batchGet";ul.Commit="commit";ul.RunQuery="runQuery";ul.RunAggregationQuery="runAggregationQuery";var WN="v1";function $N(){return"gl-js/ fire/"+On}var ud=class{constructor(t){this.databaseInfo=t;this.databaseId=t.databaseId;let r=t.ssl?"https":"http";this.baseUrl=r+"://"+t.host,this.databaseRoot="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}databaseId;baseUrl;databaseRoot;get shouldResourcePathBeIncludedInRequest(){return!1}invokeRPC(t,r,n,o,i){let s=cl(),a=this.makeUrl(t,r);ce(Zh,`Sending RPC '${t}' ${s}:`,a,n);let w={};return this.modifyHeadersForRequest(w,o,i),this.performRPCRequest(t,a,w,n).then(E=>(ce(Zh,`Received RPC '${t}' ${s}: `,E),E),E=>{throw cn(Zh,`RPC '${t}' ${s} failed with error: `,E,"url: ",a,"request:",n),E})}invokeStreamingRPC(t,r,n,o,i,s){return this.invokeRPC(t,r,n,o,i)}modifyHeadersForRequest(t,r,n){t["X-Goog-Api-Client"]=$N(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,i)=>t[i]=o),n&&n.headers.forEach((o,i)=>t[i]=o)}makeUrl(t,r){let n=ul[t];return G(n!==void 0,"Unknown REST mapping for: "+t),`${this.baseUrl}/${WN}/${r}:${n}`}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var dd=class{wrappedOnOpen;wrappedOnClose;wrappedOnMessage;sendFn;closeFn;constructor(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}onOpen(t){G(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t}onClose(t){G(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t}onMessage(t){G(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t}close(){this.closeFn()}send(t){this.sendFn(t)}callOnOpen(){G(this.wrappedOnOpen!==void 0,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()}callOnClose(t){G(this.wrappedOnClose!==void 0,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)}callOnMessage(t){G(this.wrappedOnMessage!==void 0,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)}};var $t="WebChannelConnection",QN="google.firestore.v1.Firestore",YN=15,md=class extends ud{forceLongPolling;autoDetectLongPolling;useFetchStreams;longPollingOptions;constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}performRPCRequest(t,r,n,o){let i=cl();return new Promise((s,a)=>{let w=new dw;w.setWithCredentials(!0),w.listenOnce(lw.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Bu.NO_ERROR:{let V=w.getResponseJson();ce($t,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(V)),s(V);break}case Bu.TIMEOUT:ce($t,`RPC '${t}' ${i} timed out`),a(new le(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:{let V=w.getStatus();if(ce($t,`RPC '${t}' ${i} failed with status:`,V,"response text:",w.getResponseText()),V>0){let q=w.getResponseJson();Array.isArray(q)&&(q=q[0]);let K=q?.error;if(K&&K.status&&K.message){let H=Hx(K.status);a(new le(H,K.message))}else a(new le(ne.UNKNOWN,"Server responded with status "+w.getStatus()))}else a(new le(ne.UNAVAILABLE,"Connection failed."));break}default:pe(`RPC '${t}' ${i} failed with unanticipated webchannel error: `+w.getLastErrorCode()+": "+w.getLastError()+", giving up.")}}finally{ce($t,`RPC '${t}' ${i} completed.`)}});let E=JSON.stringify(o);ce($t,`RPC '${t}' ${i} sending request:`,o),w.send(r,"POST",E,n,YN)})}openStream(t,r,n){let o=cl(),i=[this.baseUrl,"/",QN,"/",t,"/channel"],s=sw(),a=aw(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:10*60*1e3},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(w.longPollingTimeout=Math.round(E*1e3)),this.useFetchStreams&&(w.xmlHttpFactory=new uw({})),this.modifyHeadersForRequest(w.initMessageHeaders,r,n),w.encodeInitMessageHeaders=!0;let V=i.join("");ce($t,`Creating RPC '${t}' stream ${o}: ${V}`,w);let q=s.createWebChannel(V,w),K=!1,H=!1,X=new dd({sendFn:ee=>{H?ce($t,`Not sending because RPC '${t}' stream ${o} is closed:`,ee):(K||(ce($t,`Opening RPC '${t}' stream ${o} transport.`),q.open(),K=!0),ce($t,`RPC '${t}' stream ${o} sending:`,ee),q.send(ee))},closeFn:()=>q.close()}),Y=(ee,Q,Z)=>{ee.listen(Q,J=>{try{Z(J)}catch(ue){setTimeout(()=>{throw ue},0)}})};return Y(q,il.EventType.OPEN,()=>{H||ce($t,`RPC '${t}' stream ${o} transport opened.`)}),Y(q,il.EventType.CLOSE,()=>{H||(H=!0,ce($t,`RPC '${t}' stream ${o} transport closed`),X.callOnClose())}),Y(q,il.EventType.ERROR,ee=>{H||(H=!0,cn($t,`RPC '${t}' stream ${o} transport errored:`,ee),X.callOnClose(new le(ne.UNAVAILABLE,"The operation could not be completed")))}),Y(q,il.EventType.MESSAGE,ee=>{if(!H){let Q=ee.data[0];He(!!Q,"Got a webchannel message without data.");let Z=Q,J=Z.error||Z[0]?.error;if(J){ce($t,`RPC '${t}' stream ${o} received error:`,J);let ue=J.status,be=jx(ue),ge=J.message;be===void 0&&(be=ne.INTERNAL,ge="Unknown error status: "+ue+" with message "+J.message),H=!0,X.callOnClose(new le(be,ge)),q.close()}else ce($t,`RPC '${t}' stream ${o} received:`,Q),X.callOnMessage(Q)}}),Y(a,cw.STAT_EVENT,ee=>{ee.stat===Mh.PROXY?ce($t,`RPC '${t}' stream ${o} detected buffering proxy`):ee.stat===Mh.NOPROXY&&ce($t,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{X.callOnOpen()},0),X}};function Bw(){return new ld}function Uw(e){return new md(e)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Jh(e){return new Ku(e,!0)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var eg=class{viewSnap=void 0;listeners=[]};function Vw(){return new So}var So=class{queries=new pr(t=>Zc(t),go);onlineState="Unknown";snapshotsInSyncListeners=new Set;onListen;onUnlisten};async function zw(e,t){let r=xe(e,So);G(!!r.onListen,"onListen not set");let n=t.query,o=!1,i=r.queries.get(n);if(i||(o=!0,i=new eg),o)try{i.viewSnap=await r.onListen(n)}catch(a){let w=au(a,`Initialization of query '${yo(t.query)}' failed`);t.onError(w);return}r.queries.set(n,i),i.listeners.push(t);let s=t.applyOnlineStateChange(r.onlineState);G(!s,"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),i.viewSnap&&t.onViewSnapshot(i.viewSnap)&&tg(r)}async function qw(e,t){let r=xe(e,So);G(!!r.onUnlisten,"onUnlisten not set");let n=t.query,o=!1,i=r.queries.get(n);if(i){let s=i.listeners.indexOf(t);s>=0&&(i.listeners.splice(s,1),o=i.listeners.length===0)}if(o)return r.queries.delete(n),r.onUnlisten(n)}function Kw(e,t){let r=xe(e,So),n=!1;for(let o of t){let i=o.query,s=r.queries.get(i);if(s){for(let a of s.listeners)a.onViewSnapshot(o)&&(n=!0);s.viewSnap=o}}n&&tg(r)}function jw(e,t,r){let n=xe(e,So),o=n.queries.get(t);if(o)for(let i of o.listeners)i.onError(r);n.queries.delete(t)}function Hw(e,t){let r=xe(e,So);r.onlineState=t;let n=!1;r.queries.forEach((o,i)=>{for(let s of i.listeners)s.applyOnlineStateChange(t)&&(n=!0)}),n&&tg(r)}function tg(e){e.snapshotsInSyncListeners.forEach(t=>{t.next()})}var pd=class{constructor(t,r,n){this.query=t;this.queryObserver=r;this.options=n||{}}raisedInitialEvent=!1;options;snap=null;onlineState="Unknown";onViewSnapshot(t){if(G(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){let n=[];for(let o of t.docChanges)o.type!==3&&n.push(o);t=new fn(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),r=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),r=!0),this.snap=t,r}onError(t){this.queryObserver.error(t)}applyOnlineStateChange(t){this.onlineState=t;let r=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),r=!0),r}shouldRaiseInitialEvent(t,r){if(G(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;let n=r!=="Offline";return this.options.waitForSyncWhenOnline&&n?(G(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||t.hasCachedResults||r==="Offline"}shouldRaiseEvent(t){if(t.docChanges.length>0)return!0;let r=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return t.syncStateChanged||r?this.options.includeMetadataChanges===!0:!1}raiseInitialEvent(t){G(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=fn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(t)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function fd(e){if(e.code===ne.FAILED_PRECONDITION&&e.message===Lw)ce("LocalStore","Unexpectedly lost primary lease");else throw e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Bs=class{constructor(t,r,n,o){this.targetId=t;this.fromCache=r;this.addedKeys=n;this.removedKeys=o}static fromSnapshot(t,r){let n=ye(),o=ye();for(let i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:o=o.add(i.doc.key);break;default:}return new Bs(t,r.fromCache,n,o)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var dl=class{constructor(t){this.key=t}},ml=class{constructor(t){this.key=t}},hd=class{constructor(t,r){this.query=t;this._syncedDocuments=r;this.docComparator=ys(t),this.documentSet=new pn(this.docComparator)}syncState=null;hasCachedResults=!1;current=!1;documentSet;limboDocuments=ye();mutatedKeys=ye();docComparator;get syncedDocuments(){return this._syncedDocuments}computeDocChanges(t,r){let n=r?r.changeSet:new La,o=r?r.documentSet:this.documentSet,i=r?r.mutatedKeys:this.mutatedKeys,s=o,a=!1,w=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,E=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((V,q)=>{let K=o.get(V),H=bo(this.query,q)?q:null,X=K?this.mutatedKeys.has(K.key):!1,Y=H?H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations:!1,ee=!1;K&&H?K.data.isEqual(H.data)?X!==Y&&(n.track({type:3,doc:H}),ee=!0):this.shouldWaitForSyncedDocument(K,H)||(n.track({type:2,doc:H}),ee=!0,(w&&this.docComparator(H,w)>0||E&&this.docComparator(H,E)<0)&&(a=!0)):!K&&H?(n.track({type:0,doc:H}),ee=!0):K&&!H&&(n.track({type:1,doc:K}),ee=!0,(w||E)&&(a=!0)),ee&&(H?(s=s.add(H),Y?i=i.add(V):i=i.delete(V)):(s=s.delete(V),i=i.delete(V)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let V=this.query.limitType==="F"?s.last():s.first();s=s.delete(V.key),i=i.delete(V.key),n.track({type:1,doc:V})}return G(!a||!r,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:n,needsRefill:a,mutatedKeys:i}}shouldWaitForSyncedDocument(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n){G(!t.needsRefill,"Cannot apply changes that need a refill");let o=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;let i=t.changeSet.getChanges();i.sort((V,q)=>XN(V.type,q.type)||this.docComparator(V.doc,q.doc)),this.applyTargetChange(n);let s=r?this.updateLimboDocuments():[],w=this.limboDocuments.size===0&&this.current?1:0,E=w!==this.syncState;return this.syncState=w,i.length===0&&!E?{limboChanges:s}:{snapshot:new fn(this.query,t.documentSet,o,i,t.mutatedKeys,w===0,E,!1,n?n.resumeToken.approximateByteSize()>0:!1),limboChanges:s}}applyOnlineStateChange(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new La,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(t){return!(this._syncedDocuments.has(t)||!this.documentSet.has(t)||this.documentSet.get(t).hasLocalMutations)}applyTargetChange(t){t&&(t.addedDocuments.forEach(r=>this._syncedDocuments=this._syncedDocuments.add(r)),t.modifiedDocuments.forEach(r=>{G(this._syncedDocuments.has(r),`Modified document ${r} not found in view.`)}),t.removedDocuments.forEach(r=>this._syncedDocuments=this._syncedDocuments.delete(r)),this.current=t.current)}updateLimboDocuments(){if(!this.current)return[];let t=this.limboDocuments;this.limboDocuments=ye(),this.documentSet.forEach(n=>{this.shouldBeInLimbo(n.key)&&(this.limboDocuments=this.limboDocuments.add(n.key))});let r=[];return t.forEach(n=>{this.limboDocuments.has(n)||r.push(new ml(n))}),this.limboDocuments.forEach(n=>{t.has(n)||r.push(new dl(n))}),r}synchronizeWithPersistedState(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=ye();let r=this.computeDocChanges(t.documents);return this.applyChanges(r,!0)}computeInitialSnapshot(){return fn.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===0,this.hasCachedResults)}};function XN(e,t){let r=n=>{switch(n){case 0:return 1;case 2:return 2;case 3:return 2;case 1:return 0;default:return pe("Unknown ChangeType: "+n)}};return r(e)-r(t)}var ig="SyncEngine",rg=class{constructor(t,r,n){this.query=t;this.targetId=r;this.view=n}},ng=class{constructor(t){this.key=t}receivedDocument=!1},Yr=class{constructor(t,r,n,o,i,s){this.localStore=t;this.remoteStore=r;this.eventManager=n;this.sharedClientState=o;this.currentUser=i;this.maxConcurrentLimboResolutions=s}syncEngineListener={};applyDocChanges;queryViewsByQuery=new pr(t=>Zc(t),go);queriesByTarget=new Map;enqueuedLimboResolutions=new Set;activeLimboTargetsByKey=new Ie(se.comparator);activeLimboResolutionsByTarget=new Map;limboDocumentRefs=new Eo;mutationUserCallbacks={};pendingWritesCallbacks=new Map;limboTargetIdGenerator=_n.forSyncEngine();onlineState="Unknown";_isPrimaryClient=void 0;get isPrimaryClient(){return this._isPrimaryClient===!0}};function Gw(e,t,r,n,o,i,s){let a=new Yr(e,t,r,n,o,i);return s&&(a._isPrimaryClient=!0),a}async function Ww(e,t){let r=iM(e),n,o,i=r.queryViewsByQuery.get(t);if(i)n=i.targetId,r.sharedClientState.addLocalQueryTarget(n),o=i.view.computeInitialSnapshot();else{let s=await qx(r.localStore,Nr(t)),a=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,o=await JN(r,t,n,a==="current",s.resumeToken),r.isPrimaryClient&&qh(r.remoteStore,s)}return o}async function JN(e,t,r,n,o){e.applyDocChanges=(q,K,H)=>nM(e,q,K,H);let i=await Kf(e.localStore,t,!0),s=new hd(t,i.remoteKeys),a=s.computeDocChanges(i.documents),w=Kn.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",o),E=s.applyChanges(a,e.isPrimaryClient,w);Xw(e,r,E.limboChanges),G(!!E.snapshot,"applyChanges for new view should always return a snapshot");let V=new rg(t,r,s);return e.queryViewsByQuery.set(t,V),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),E.snapshot}async function $w(e,t){let r=xe(e,Yr),n=r.queryViewsByQuery.get(t);G(!!n,"Trying to unlisten on query not found:"+yo(t));let o=r.queriesByTarget.get(n.targetId);if(o.length>1){r.queriesByTarget.set(n.targetId,o.filter(i=>!go(i,t))),r.queryViewsByQuery.delete(t);return}r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await su(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),Kh(r.remoteStore,n.targetId),og(r,n.targetId)}).catch(fd)):(og(r,n.targetId),await su(r.localStore,n.targetId,!0))}async function Qw(e,t){let r=xe(e,Yr);try{let n=await Vx(r.localStore,t);t.targetChanges.forEach((o,i)=>{let s=r.activeLimboResolutionsByTarget.get(i);s&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),o.addedDocuments.size>0?s.receivedDocument=!0:o.modifiedDocuments.size>0?He(s.receivedDocument,"Received change for limbo target document without add."):o.removedDocuments.size>0&&(He(s.receivedDocument,"Received remove for limbo target document without add."),s.receivedDocument=!1))}),await Zw(r,n,t)}catch(n){await fd(n)}}function sg(e,t,r){let n=xe(e,Yr);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){let o=[];n.queryViewsByQuery.forEach((i,s)=>{let a=s.view.applyOnlineStateChange(t);G(a.limboChanges.length===0,"OnlineState should not affect limbo documents."),a.snapshot&&o.push(a.snapshot)}),Hw(n.eventManager,t),o.length&&(G(!!n.syncEngineListener.onWatchChange,"Active views but EventManager callbacks are not assigned"),n.syncEngineListener.onWatchChange(o)),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function eM(e,t,r){let n=xe(e,Yr);n.sharedClientState.updateQueryState(t,"rejected",r);let o=n.activeLimboResolutionsByTarget.get(t),i=o&&o.key;if(i){let s=new Ie(se.comparator);s=s.insert(i,et.newNoDocument(i,me.min()));let a=ye().add(i),w=new To(me.min(),new Map,new Ie(ve),s,a);await Qw(n,w),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(i),n.activeLimboResolutionsByTarget.delete(t),ag(n)}else await su(n.localStore,t,!1).then(()=>og(n,t,r)).catch(fd)}function tM(e,t){e.pendingWritesCallbacks.forEach(r=>{r.forEach(n=>{n.reject(new le(ne.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function og(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t),G(e.queriesByTarget.has(t)&&e.queriesByTarget.get(t).length!==0,`There are no queries mapped to target id ${t}`);for(let n of e.queriesByTarget.get(t))e.queryViewsByQuery.delete(n),r&&e.syncEngineListener.onWatchError(n,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(o=>{e.limboDocumentRefs.containsKey(o)||Yw(e,o)})}function Yw(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);r!==null&&(Kh(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),ag(e))}function Xw(e,t,r){for(let n of r)n instanceof dl?(e.limboDocumentRefs.addReference(n.key,t),rM(e,n)):n instanceof ml?(ce(ig,"Document no longer in limbo: "+n.key),e.limboDocumentRefs.removeReference(n.key,t),e.limboDocumentRefs.containsKey(n.key)||Yw(e,n.key)):pe("Unknown limbo change: "+JSON.stringify(n))}function rM(e,t){let r=t.key,n=r.path.canonicalString();!e.activeLimboTargetsByKey.get(r)&&!e.enqueuedLimboResolutions.has(n)&&(ce(ig,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(n),ag(e))}function ag(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new se(Oe.fromString(t)),n=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(n,new ng(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,n),qh(e.remoteStore,new Tr(Nr(gs(r.path)),n,"TargetPurposeLimboResolution",Si.INVALID))}}async function Zw(e,t,r){let n=xe(e,Yr),o=[],i=[],s=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((a,w)=>{G(!!n.applyDocChanges,"ApplyDocChangesHandler not set"),s.push(n.applyDocChanges(w,t,r).then(E=>{if((E||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(w.targetId,E?.fromCache?"not-current":"current"),E){o.push(E);let V=Bs.fromSnapshot(w.targetId,E);i.push(V)}}))}),await Promise.all(s),n.syncEngineListener.onWatchChange(o),await zx(n.localStore,i))}async function nM(e,t,r,n){let o=t.view.computeDocChanges(r);o.needsRefill&&(o=await Kf(e.localStore,t.query,!1).then(({documents:a})=>t.view.computeDocChanges(a,o)));let i=n&&n.targetChanges.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,i);return Xw(e,t.targetId,s.limboChanges),s.snapshot}async function Jw(e,t){let r=xe(e,Yr);if(!r.currentUser.isEqual(t)){ce(ig,"User change. New user:",t.toKey());let o=await iu(r.localStore,t);r.currentUser=t,tM(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await Zw(r,o.affectedDocuments)}}function oM(e,t){let r=xe(e,Yr),n=r.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return ye().add(n.key);{let o=ye(),i=r.queriesByTarget.get(t);if(!i)return o;for(let s of i){let a=r.queryViewsByQuery.get(s);G(!!a,`No query view found for ${yo(s)}`),o=o.unionWith(a.view.syncedDocuments)}return o}}function iM(e){let t=xe(e,Yr);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eM.bind(null,t),t.syncEngineListener.onWatchChange=Kw.bind(null,t.eventManager),t.syncEngineListener.onWatchError=jw.bind(null,t.eventManager),t}var pl=class{persistence;sharedClientState;localStore;gcScheduler;indexBackfillerScheduler;synchronizeTabs=!1;serializer;async initialize(t){this.serializer=Jh(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return Ux(this.persistence,new id,t.initialUser,this.serializer)}createPersistence(t){return new od(Fs.factory)}createSharedClientState(t){return new ad}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},gd=class{localStore;sharedClientState;datastore;eventManager;remoteStore;syncEngine;async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>sg(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jw.bind(null,this.syncEngine),await Mw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return Vw()}createDatastore(t){let r=Jh(t.databaseInfo.databaseId),n=Uw(t.databaseInfo);return Sw(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return Aw(this.localStore,this.datastore,t.asyncQueue,r=>sg(this.syncEngine,r,0),Bw())}createSyncEngine(t,r){return Gw(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return Rw(this.remoteStore)}};var ko="FirestoreClient",sM=100,aM=11,lM=20,cM=22,yd=class{constructor(t,r,n,o){this.authCredentials=t;this.appCheckCredentials=r;this.asyncQueue=n;this.databaseInfo=o;this.authCredentials.start(n,async i=>{ce(ko,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ce(ko,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}user=mr.UNAUTHENTICATED;clientId=us.newId();authCredentialListener=()=>Promise.resolve();appCheckCredentialListener=()=>Promise.resolve();_uninitializedComponentsProvider;_offlineComponents;_onlineComponents;async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:sM}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new le(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){let n=au(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}};async function lg(e,t){e.asyncQueue.verifyOperationInProgress(),ce(ko,"Initializing OfflineComponentProvider");let r=await e.getConfiguration();await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async o=>{n.isEqual(o)||(await iu(t.localStore,o),n=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function eE(e,t){e.asyncQueue.verifyOperationInProgress();let r=await dM(e);ce(ko,"Initializing OnlineComponentProvider");let n=await e.getConfiguration();await t.initialize(r,n),e.setCredentialChangeListener(o=>Gh(t.remoteStore,o)),e.setAppCheckTokenChangeListener((o,i)=>Gh(t.remoteStore,i)),e._onlineComponents=t}function uM(e){return e.name==="FirebaseError"?e.code===ne.FAILED_PRECONDITION||e.code===ne.UNIMPLEMENTED:typeof DOMException<"u"&&e instanceof DOMException?e.code===cM||e.code===lM||e.code===aM:!0}async function dM(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ce(ko,"Using user provided OfflineComponentProvider");try{await lg(e,e._uninitializedComponentsProvider._offline)}catch(t){let r=t;if(!uM(r))throw r;cn("Error using user provided cache. Falling back to memory cache: "+r),await lg(e,new pl)}}else ce(ko,"Using default OfflineComponentProvider"),await lg(e,new pl);return e._offlineComponents}async function mM(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ce(ko,"Using user provided OnlineComponentProvider"),await eE(e,e._uninitializedComponentsProvider._online)):(ce(ko,"Using default OnlineComponentProvider"),await eE(e,new gd))),e._onlineComponents}async function tE(e){let t=await mM(e),r=t.eventManager;return r.onListen=Ww.bind(null,t.syncEngine),r.onUnlisten=$w.bind(null,t.syncEngine),r}function rE(e,t,r,n){let o=new Qu(n),i=new pd(t,o,r);return e.asyncQueue.enqueueAndForget(async()=>{let s=await tE(e);return zw(s,i)}),()=>{o.mute(),e.asyncQueue.enqueueAndForget(async()=>{let s=await tE(e);return qw(s,i)})}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function nE(e,t){return e.timeoutSeconds===t.timeoutSeconds}function bd(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var pM="ComponentProvider",oE=new Map;function iE(e){let t=oE.get(e);t&&(ce(pM,"Removing Datastore"),oE.delete(e),t.terminate())}function sE(e,t,r,n){return new qc(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,bd(n.experimentalLongPollingOptions),n.useFetchStreams)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var _d=-1,cg=40*1024*1024,jn=class{constructor(t,r,n){this.cacheSizeCollectionThreshold=t;this.percentileToCollect=r;this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new jn(t,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}},Us=jn;ie(Us,"DEFAULT_COLLECTION_PERCENTILE",10),ie(Us,"DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT",1e3),ie(Us,"DEFAULT",new jn(cg,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)),ie(Us,"DISABLED",new jn(_d,0,0));l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function aE(e,t,r){if(!r)throw new le(ne.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lE(e,t,r,n){if(t===!0&&n===!0)throw new le(ne.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function ug(e){if(!se.isDocumentKey(e))throw new le(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fM(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=hM(e);return t?`a custom ${t} object`:"an object"}}else return typeof e=="function"?"a function":pe("Unknown wrong type: "+typeof e)}function hM(e){return e.constructor?e.constructor.name:null}function vd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new le(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=fM(e);throw new le(ne.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}var gM="firestore.googleapis.com",uE=!0,dE=5,mE=30,yM=!0,fl=class{host;ssl;cacheSizeBytes;experimentalForceLongPolling;experimentalAutoDetectLongPolling;experimentalLongPollingOptions;ignoreUndefinedProperties;useFetchStreams;cache;credentials;constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new le(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gM,this.ssl=uE}else this.host=t.host,this.ssl=t.ssl??uE;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=cg;else{if(t.cacheSizeBytes!==_d&&t.cacheSizeBytes<1048576)throw new le(ne.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${1048576}`);this.cacheSizeBytes=t.cacheSizeBytes}lE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=yM:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bd(t.experimentalLongPollingOptions??{}),bM(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&nE(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}};function bM(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new le(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<dE)throw new le(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is ${dE})`);if(e.timeoutSeconds>mE)throw new le(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is ${mE})`)}}var Vs=class{constructor(t,r,n,o){this._authCredentials=t;this._appCheckCredentials=r;this._databaseId=n;this._app=o}type="firestore-lite";_persistenceKey="(lite)";_settings=new fl({});_settingsFrozen=!1;_terminateTask;get app(){if(!this._app)throw new le(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new le(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fl(t),t.credentials!==void 0&&(this._authCredentials=zv(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return iE(this),Promise.resolve()}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var _M="AsyncQueue",dg=class{tail=Promise.resolve();retryableOps=[];_isShuttingDown=!1;delayedOperations=[];failure=null;operationInProgress=!1;skipNonRestrictedTasks=!1;timerIdsToSkip=[];backoff=new Ss(this,"async_queue_retry");get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.verifyNotFailed(),this.enqueueInternal(t)}enterRestrictedMode(t){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=t||!1)}enqueue(t){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let r=new Ar;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.retryableOps.push(t),this.retryNextOp()))}async retryNextOp(){if(this.retryableOps.length!==0){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(t){if(Vn(t))ce(_M,"Operation failed with retryable error: "+t);else throw t}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(t){let r=this.tail.then(()=>(this.operationInProgress=!0,t().catch(n=>{this.failure=n,this.operationInProgress=!1;let o=pE(n);throw Ft("INTERNAL UNHANDLED ERROR: ",o),n}).then(n=>(this.operationInProgress=!1,n))));return this.tail=r,r}enqueueAfterDelay(t,r,n){this.verifyNotFailed(),G(r>=0,`Attempted to schedule an operation with a negative delay of ${r}`),this.timerIdsToSkip.indexOf(t)>-1&&(r=0);let o=Es.createAndSchedule(this,t,r,n,i=>this.removeDelayedOperation(i));return this.delayedOperations.push(o),o}verifyNotFailed(){this.failure&&pe("AsyncQueue is already failed: "+pE(this.failure))}verifyOperationInProgress(){G(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")}async drain(){let t;do t=this.tail,await t;while(t!==this.tail)}containsDelayedOperation(t){for(let r of this.delayedOperations)if(r.timerId===t)return!0;return!1}runAllDelayedOperationsUntil(t){return this.drain().then(()=>{this.delayedOperations.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(let r of this.delayedOperations)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.drain()})}skipDelaysForTimerId(t){this.timerIdsToSkip.push(t)}removeDelayedOperation(t){let r=this.delayedOperations.indexOf(t);G(r>=0,"Delayed operation not found."),this.delayedOperations.splice(r,1)}};function fE(){return new dg}function pE(e){let t=e.message||"";return e.stack&&(e.stack.includes(e.message)?t=e.stack:t=e.message+`
`+e.stack),t}var Hn=class extends Vs{type="firestore";_queue=fE();_firestoreClient;constructor(t,r,n,o){super(t,r,n,o),this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gE(this),this._firestoreClient.terminate()}};function xd(e){return ls(e,"firestore").getImmediate({identifier:Kc})}function hE(e){return e._firestoreClient||gE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function gE(e){let t=e._freezeSettings();G(!!t.host,"FirestoreSettings.host is not set"),G(!e._firestoreClient,"configureFirestore() called multiple times");let r=sE(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._firestoreClient=new yd(e._authCredentials,e._appCheckCredentials,e._queue,r),t.cache?._offlineComponentProvider&&t.cache?._onlineComponentProvider&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:t.cache.kind,_offline:t.cache._offlineComponentProvider,_online:t.cache._onlineComponentProvider})}var yE="@firebase/firestore",bE="3.13.0";function _E(e,t=!0){Uv(ai),sn(new dr("firestore",(r,{instanceIdentifier:n,options:o})=>{let i=r.getProvider("app").getImmediate(),s=new Hn(new Vc(r.getProvider("auth-internal")),new zc(r.getProvider("app-check-internal")),qv(i,n),i);return o={useFetchStreams:t,...o},s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),an(yE,bE,e),an(yE,bE,"__BUILD_TARGET__")}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Er=class{constructor(t,r,n){this.converter=r;this._key=n;this.firestore=t}type="document";firestore;get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Er(this.firestore,t,this._key)}},ki=class{constructor(t,r,n){this.converter=r;this._query=n;this.firestore=t}type="query";firestore;withConverter(t){return new ki(this.firestore,t,this._query)}},Ii=class extends ki{constructor(r,n,o){super(r,n,gs(o));this._path=o}type="collection";get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let r=this._path.popLast();return r.isEmpty()?null:new Er(this.firestore,null,new se(r))}withConverter(r){return new Ii(this.firestore,r,this._path)}};function Td(e,t,...r){if(e=er(e),arguments.length===1&&(t=us.newId()),aE("doc","path",t),e instanceof Vs){let n=Oe.fromString(t,...r);return ug(n),new Er(e,null,new se(n))}else{if(!(e instanceof Er)&&!(e instanceof Ii))throw new le(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(Oe.fromString(t,...r));return ug(n),new Er(e.firestore,e instanceof Ii?e.converter:null,new se(n))}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function mg(e){return vM(e,["next","error","complete"])}function vM(e,t){if(typeof e!="object"||e===null)return!1;let r=e;for(let n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Di=class{_byteString;constructor(t){this._byteString=t}static fromBase64String(t){try{return new Di(bt.fromBase64String(t))}catch(r){throw new le(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Di(bt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function vE(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new le(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var wd=class{_lat;_long;constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new le(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new le(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ve(this._lat,t._lat)||ve(this._long,t._long)}};var Ed=class{convertValue(t,r="none"){switch(Ln(t)){case 0:return null;case 1:return t.booleanValue;case 2:return lt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(un(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 10:return this.convertObject(t.mapValue,r);default:throw pe("Invalid value type: "+JSON.stringify(t))}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){let n={};return mo(t,(o,i)=>{n[o]=this.convertValue(i,r)}),n}convertGeoPoint(t){return new wd(lt(t.latitude),lt(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":{let n=jc(t);return n==null?null:this.convertValue(n,r)}case"estimate":return this.convertTimestamp(di(t));default:return null}}convertTimestamp(t){let r=Pr(t);return new ht(r.seconds,r.nanos)}convertDocumentKey(t,r){let n=Oe.fromString(t);He(Uh(n),"ReferenceValue is not valid "+t);let o=new uo(n.get(1),n.get(3)),i=new se(n.popFirst(5));return o.isEqual(r)||Ft(`Document ${i} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var zs=class{_internalPath;constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new le(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var xM=new RegExp("[~\\*/\\[\\]]");function TE(e,t,r){if(t.search(xM)>=0)throw xE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new zs(...t.split("."))._internalPath}catch{throw xE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function xE(e,t,r,n,o){let i=n&&!n.isEmpty(),s=o!==void 0,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let w="";return(i||s)&&(w+=" (found",i&&(w+=` in field ${n}`),s&&(w+=` in document ${o}`),w+=")"),new le(ne.INVALID_ARGUMENT,a+e+w)}var hl=class{constructor(t,r,n,o,i){this._firestore=t;this._userDataWriter=r;this._key=n;this._document=o;this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document)if(this._converter){let t=new pg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}else return this._userDataWriter.convertValue(this._document.data.value);else return}get(t){if(this._document){let r=this._document.data.field(fg("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}},pg=class extends hl{data(){return super.data()}};function fg(e,t){return typeof t=="string"?TE(e,t):t instanceof zs?t._internalPath:t._delegate._internalPath}var Io=class{hasPendingWrites;fromCache;constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},gl=class extends hl{constructor(r,n,o,i,s,a){super(r,n,o,i,a);this._firestore=r;this._firestoreImpl=r,this.metadata=s}_firestoreImpl;metadata;exists(){return super.exists()}data(r={}){if(this._document)if(this._converter){let n=new qs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,r)}else return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps);else return}get(r,n={}){if(this._document){let o=this._document.data.field(fg("DocumentSnapshot.get",r));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}},qs=class extends gl{data(t={}){return super.data(t)}},Sd=class{constructor(t,r,n,o){this._firestore=t;this._userDataWriter=r;this._snapshot=o;this.metadata=new Io(o.hasPendingWrites,o.fromCache),this.query=n}metadata;query;_cachedChanges;_cachedChangesIncludeMetadataChanges;get docs(){let t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new qs(this._firestore,this._userDataWriter,n.key,n,new Io(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new le(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return(!this._cachedChanges||this._cachedChangesIncludeMetadataChanges!==r)&&(this._cachedChanges=TM(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}};function TM(e,t){if(e._snapshot.oldDocs.isEmpty()){let r,n=0;return e._snapshot.docChanges.map(o=>{G(o.type===0,"Invalid event type for first snapshot"),G(!r||ys(e._snapshot.query)(r,o.doc)<0,"Got added events in wrong order");let i=new qs(e._firestore,e._userDataWriter,o.doc.key,o.doc,new Io(e._snapshot.mutatedKeys.has(o.doc.key),e._snapshot.fromCache),e.query.converter);return r=o.doc,{type:"added",doc:i,oldIndex:-1,newIndex:n++}})}else{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(n=>t||n.type!==3).map(n=>{let o=new qs(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Io(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return n.type!==0&&(i=r.indexOf(n.doc.key),G(i>=0,"Index for document not found"),r=r.delete(n.doc.key)),n.type!==1&&(r=r.add(n.doc),s=r.indexOf(n.doc.key)),{type:wM(n.type),doc:o,oldIndex:i,newIndex:s}})}}function wM(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe("Unknown change type: "+e)}}var kd=class extends Ed{constructor(r){super();this.firestore=r}convertBytes(r){return new Di(r)}convertReference(r){let n=this.convertDocumentKey(r,this.firestore._databaseId);return new Er(this.firestore,null,n)}};function Id(e,...t){e=er(e);let r={includeMetadataChanges:!1},n=0;typeof t[n]=="object"&&!mg(t[n])&&(r=t[n],n++);let o={includeMetadataChanges:r.includeMetadataChanges};if(mg(t[n])){let E=t[n];t[n]=E.next?.bind(E),t[n+1]=E.error?.bind(E),t[n+2]=E.complete?.bind(E)}let i,s,a;if(e instanceof Er)s=vd(e.firestore,Hn),a=gs(e._key.path),i={next:E=>{t[n]&&t[n](EM(s,e,E))},error:t[n+1],complete:t[n+2]};else{let E=vd(e,ki);s=vd(E.firestore,Hn),a=E._query;let V=new kd(s);i={next:q=>{t[n]&&t[n](new Sd(s,V,E,q))},error:t[n+1],complete:t[n+2]},vE(e._query)}let w=hE(s);return rE(w,a,o,i)}function EM(e,t,r){G(r.docs.size<=1,"Expected zero or a single result on a document-only query");let n=r.docs.get(t._key),o=new kd(e);return new gl(e,o,t._key,n,new Io(r.hasPendingWrites,r.fromCache),t.converter)}_E();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function wE(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hg=wE,Dd=new jr("auth","Firebase",wE());l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Cd=new co("@firebase/auth");function EE(e,...t){Cd.logLevel<=3&&Cd.warn(`Auth (${ai}): ${e}`,...t)}function Ks(e,...t){Cd.logLevel<=4&&Cd.error(`Auth (${ai}): ${e}`,...t)}function js(e,...t){throw yg(e,...t)}function gg(e,...t){return yg(e,...t)}function SE(e,t,r){let n={...hg(),[t]:r};return new jr("auth","Firebase",n).create(t,{appName:e.name})}function yg(e,...t){if(typeof e!="string"){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Dd.create(e,...t)}function De(e,t,...r){if(!e)throw yg(t,...r)}function Ci(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Ks(t),new Error(t)}function Ai(e,t){e||Ci(t)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var kE=new Map;function Do(e){Ai(e instanceof Function,"Expected a class definition");let t=kE.get(e);return t?(Ai(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kE.set(e,t),t)}function bg(e,t){let r=ls(e,"auth");if(r.isInitialized()){let o=r.getImmediate(),i=r.getOptions();if(as(i,t??{}))return o;js(o,"already-initialized")}return r.initialize({options:t})}function IE(e,t){let r=t?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Do);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Hs="__sak";var Ad=class{type="NONE";storage={};async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}};ie(Ad,"type","NONE");var Ri=Ad;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function CE(){return DE()==="http:"||DE()==="https:"}function DE(){return typeof self<"u"&&self.location?.protocol||null}function AE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CE()||fv()||"connection"in navigator)?navigator.onLine:!0}function RE(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Rd=class{constructor(t,r){this.shortDelay=t;this.longDelay=r;Ai(r>t,"Short delay should be less than long delay!"),this.isMobile=pv()||hv()}isMobile;get(){return AE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function PE(e,t){Ai(e.emulator,"Emulator should always be set here");let{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Gn=class{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};ie(Gn,"fetchImpl"),ie(Gn,"headersImpl"),ie(Gn,"responseImpl");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var NE={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"};var SM=new Rd(3e4,6e4);function ME(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function xg(e,t,r,n,o={}){return Tg(e,o,async()=>{let i={},s={};n&&(t==="GET"?s=n:i={body:JSON.stringify(n)});let a=Ac({key:e.config.apiKey,...s}).slice(1),w=await e._getAdditionalHeaders();return w["Content-Type"]="application/json",e.languageCode&&(w["X-Firebase-Locale"]=e.languageCode),Gn.fetch()(wg(e,e.config.apiHost,r,a),{method:t,headers:w,referrerPolicy:"no-referrer",...i})})}async function Tg(e,t,r){e._canInitEmulator=!1;let n={...NE,...t};try{let o=new vg(e),i=await Promise.race([r(),o.promise]);o.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw Pd(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let a=i.ok?s.errorMessage:s.error.message,[w,E]=a.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(e,"credential-already-in-use",s);if(w==="EMAIL_EXISTS")throw Pd(e,"email-already-in-use",s);if(w==="USER_DISABLED")throw Pd(e,"user-disabled",s);let V=n[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw SE(e,V,E);js(e,V)}}catch(o){if(o instanceof tr)throw o;js(e,"network-request-failed",{message:String(o)})}}async function OE(e,t,r,n,o={}){let i=await xg(e,t,r,n,o);return"mfaPendingCredential"in i&&js(e,"multi-factor-auth-required",{_serverResponse:i}),i}function wg(e,t,r,n){let o=`${t}${r}?${n}`;return e.config.emulator?PE(e.config,o):`${e.config.apiScheme}://${o}`}var vg=class{constructor(t){this.auth=t}timer=null;promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gg(this.auth,"network-request-failed")),SM.get())});clearNetworkTimeout(){clearTimeout(this.timer)}};function Pd(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let o=gg(e,t,n);return o.customData._tokenResponse=r,o}async function FE(e,t){return OE(e,"POST","/v1/accounts:signInWithCustomToken",ME(e,t))}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Pi(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Sg(e,t=!1){let r=er(e),n=await r.getIdToken(t),o=BE(n);De(o&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error");let i=typeof o.firebase=="object"?o.firebase:void 0,s=i?.sign_in_provider;return{claims:o,token:n,authTime:Pi(Eg(o.auth_time)),issuedAtTime:Pi(Eg(o.iat)),expirationTime:Pi(Eg(o.exp)),signInProvider:s||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Eg(e){return Number(e)*1e3}function BE(e){let[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return Ks("JWT malformed, contained fewer than 3 sections"),null;try{let o=Dc(r);return o?JSON.parse(o):(Ks("Failed to decode base64 JWT payload"),null)}catch(o){return Ks("Caught error parsing JWT payload as JSON",o?.toString()),null}}function UE(e){let t=BE(e);return De(t,"internal-error"),De(typeof t.exp<"u","internal-error"),De(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function Nd(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof tr&&IM(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function IM({code:e}){return e===`auth/${"user-disabled"}`||e===`auth/${"user-token-expired"}`}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Md=class{constructor(t){this.user=t}isRunning=!1;timerId=null;errorBackoff=3e4;_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;let r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code===`auth/${"network-request-failed"}`&&this.schedule(!0);return}this.schedule()}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function VE(e,t){return xg(e,"POST","/v1/accounts:lookup",t)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Gs=class{constructor(t,r){this.createdAt=t;this.lastLoginAt=r;this._initializeTime()}creationTime;lastSignInTime;_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Od(e){let t=e.auth,r=await e.getIdToken(),n=await Nd(e,VE(t,{idToken:r}));De(n?.users.length,t,"internal-error");let o=n.users[0];e._notifyReloadListener(o);let i=o.providerUserInfo?.length?CM(o.providerUserInfo):[],s=DM(e.providerData,i),a=e.isAnonymous,w=!(e.email&&o.passwordHash)&&!s?.length,E=a?w:!1,V={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Gs(o.createdAt,o.lastLoginAt),isAnonymous:E};Object.assign(e,V)}async function zE(e){let t=er(e);await Od(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function DM(e,t){return[...e.filter(n=>!t.some(o=>o.providerId===n.providerId)),...t]}function CM(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function qE(e,t){let r=await Tg(e,{},async()=>{let n=Ac({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:i}=e.config,s=wg(e,o,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Gn.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}var Co=class{refreshToken=null;accessToken=null;expirationTime=null;get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){De(t.idToken,"internal-error"),De(typeof t.idToken<"u","internal-error"),De(typeof t.refreshToken<"u","internal-error");let r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):UE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}async getToken(t,r=!1){return De(!this.accessToken||this.refreshToken,t,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){let{accessToken:n,refreshToken:o,expiresIn:i}=await qE(t,r);this.updateTokensAndExpiration(n,o,Number(i))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){let{refreshToken:n,accessToken:o,expirationTime:i}=r,s=new Co;return n&&(De(typeof n=="string","internal-error",{appName:t}),s.refreshToken=n),o&&(De(typeof o=="string","internal-error",{appName:t}),s.accessToken=o),i&&(De(typeof i=="number","internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return Ci("not implemented")}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ao(e,t){De(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Xr=class{providerId="firebase";stsTokenManager;accessToken;uid;auth;emailVerified;isAnonymous;tenantId;metadata;providerData;displayName;email;phoneNumber;photoURL;_redirectEventId;proactiveRefresh=new Md(this);constructor({uid:t,auth:r,stsTokenManager:n,...o}){this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gs(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){let r=await Nd(this,this.stsTokenManager.getToken(this.auth,t));return De(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Sg(this,t)}reload(){return zE(this)}reloadUserInfo=null;reloadListener=null;_assign(t){this!==t&&(De(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let r=new Xr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await Od(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){let n=r.displayName??void 0,o=r.email??void 0,i=r.phoneNumber??void 0,s=r.photoURL??void 0,a=r.tenantId??void 0,w=r._redirectEventId??void 0,E=r.createdAt??void 0,V=r.lastLoginAt??void 0,{uid:q,emailVerified:K,isAnonymous:H,providerData:X,stsTokenManager:Y}=r;De(q&&Y,t,"internal-error");let ee=Co.fromJSON(this.name,Y);De(typeof q=="string",t,"internal-error"),Ao(n,t.name),Ao(o,t.name),De(typeof K=="boolean",t,"internal-error"),De(typeof H=="boolean",t,"internal-error"),Ao(i,t.name),Ao(s,t.name),Ao(a,t.name),Ao(w,t.name),Ao(E,t.name),Ao(V,t.name);let Q=new Xr({uid:q,auth:t,email:o,emailVerified:K,displayName:n,isAnonymous:H,photoURL:s,phoneNumber:i,tenantId:a,stsTokenManager:ee,createdAt:E,lastLoginAt:V});return X&&Array.isArray(X)&&(Q.providerData=X.map(Z=>({...Z}))),w&&(Q._redirectEventId=w),Q}static async _fromIdTokenResponse(t,r,n=!1){let o=new Co;o.updateFromServerResponse(r);let i=new Xr({uid:r.localId,auth:t,stsTokenManager:o,isAnonymous:n});return await Od(i),i}};var Ni=class{user;providerId;_tokenResponse;operationType;constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,o=!1){let i=await Xr._fromIdTokenResponse(t,n,o),s=KE(n);return new Ni({user:i,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);let o=KE(n);return new Ni({user:t,providerId:o,_tokenResponse:n,operationType:r})}};function KE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function kg(e,t,r){return`firebase:${e}:${t}:${r}`}var Wn=class{constructor(t,r,n){this.persistence=t;this.auth=r;this.userKey=n;let{config:o,name:i}=this.auth;this.fullUserKey=kg(this.userKey,o.apiKey,i),this.fullPersistenceKey=kg("persistence",o.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}fullUserKey;fullPersistenceKey;boundEventHandler;setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){let t=await this.persistence._get(this.fullUserKey);return t?Xr._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;let r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Wn(Do(Ri),t,n);let o=(await Promise.all(r.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E),i=o[0]||Do(Ri),s=kg(n,t.config.apiKey,t.name),a=null;for(let E of r)try{let V=await E._get(s);if(V){let q=Xr._fromJSON(t,V);E!==i&&(a=q),i=E;break}}catch{}let w=o.filter(E=>E._shouldAllowMigration);return!i._shouldAllowMigration||!w.length?new Wn(i,t,n):(i=w[0],a&&await i._set(s,a.toJSON()),await Promise.all(r.map(async E=>{if(E!==i)try{await E._remove(s)}catch{}})),new Wn(i,t,n))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ig(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PM(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(GE(t))return"Blackberry";if(WE(t))return"Webos";if(Dg(t))return"Safari";if((t.includes("chrome/")||NM(t))&&!t.includes("edge/"))return"Chrome";if(HE(t))return"Android";{let r=/([a-zA-Z\d.]+)\/[a-zA-Z\d.]*$/,n=e.match(r);if(n?.length===2)return n[1]}return"Other"}function PM(e=Lt()){return/firefox\//i.test(e)}function Dg(e=Lt()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function NM(e=Lt()){return/crios\//i.test(e)}function jE(e=Lt()){return/iemobile/i.test(e)}function HE(e=Lt()){return/android/i.test(e)}function GE(e=Lt()){return/blackberry/i.test(e)}function WE(e=Lt()){return/webos/i.test(e)}function Cg(e=Lt()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $E(){return gv()&&document.documentMode===10}function QE(e=Lt()){return Cg(e)||HE(e)||WE(e)||GE(e)||/windows phone/i.test(e)||jE(e)}function YE(){try{return!!(window&&window!==window.top)}catch{return!1}}function Ld(e,t=[]){let r;switch(e){case"Browser":r=Ig(Lt());break;case"Worker":r=`${Ig(Lt())}-${e}`;break;default:r=e}let n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${ai}/${n}`}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Fd=class{constructor(t){this.auth=t}queue=[];pushCallback(t,r){let n=i=>new Promise((s,a)=>{try{let w=t(i);s(w)}catch(w){a(w)}});n.onAbort=r,this.queue.push(n);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;let r=[];try{for(let n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(let o of r)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}};var Bd=class{constructor(t,r,n,o){this.app=t;this.heartbeatServiceProvider=r;this.appCheckServiceProvider=n;this.config=o;this.name=t.name,this.clientVersion=o.sdkClientVersion}currentUser=null;emulatorConfig=null;operations=Promise.resolve();persistenceManager;redirectPersistenceManager;authStateSubscription=new Ud(this);idTokenSubscription=new Ud(this);beforeStateQueue=new Fd(this);redirectUser=null;isProactiveRefreshEnabled=!1;_canInitEmulator=!0;_isInitialized=!1;_deleted=!1;_initializationPromise=null;_errorFactory=Dd;name;lastNotifiedUid=void 0;languageCode=null;tenantId=null;settings={appVerificationDisabledForTesting:!1};_initializeWithPersistence(t){return this._initializationPromise=this.queue(async()=>{this._deleted||(this.persistenceManager=await Wn.create(this,t),!this._deleted&&(this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}useDeviceLanguage(){this.languageCode=RE()}async _delete(){this._deleted=!0}async updateCurrentUser(t){let r=t?er(t):null;return r&&De(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&De(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),this.redirectPersistenceManager&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Do(t))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new jr("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t){let r=await this.getOrInitRedirectPersistenceManager();return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(){return this.redirectPersistenceManager||(De(null,this,"argument-error"),this.redirectPersistenceManager=await Wn.create(this,[Do(null._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()),this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,o){if(this._deleted)return()=>{};let i=typeof r=="function"?r:r.next.bind(r),s=this._isInitialized?Promise.resolve():this._initializationPromise;return De(s,this,"internal-error"),s.then(()=>i(this.currentUser)),typeof r=="function"?t.addObserver(r,n,o):t.addObserver(r)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}frameworks=[];clientVersion;_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ld(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){let t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&EE(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Vd(e){return er(e)}var Ud=class{constructor(t){this.auth=t}observer=null;addObserver=vv(t=>this.observer=t);get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};async function zd(e,t){let r=Vd(e),n=await FE(r,{token:t,returnSecureToken:!0}),o=await Ni._fromIdTokenResponse(r,"signIn",n);return await r._updateCurrentUser(o.user),o}function Ag(e,t){return er(e).setPersistence(t)}function XE(e,t,r,n){return er(e).onIdTokenChanged(t,r,n)}function ZE(e,t,r){return er(e).beforeAuthStateChanged(t,r)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var qd=class{constructor(t){this.auth=t}internalListeners=new Map;getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let r=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};var JE="@firebase/auth",eS="0.23.2";function OM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function tS(e){sn(new dr("auth",(t,{options:r})=>{let n=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;De(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});let w={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ld(e)},E=new Bd(n,o,i,w);return IE(E,r),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),sn(new dr("auth-internal",t=>{let r=Vd(t.getProvider("auth").getImmediate());return(n=>new qd(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(JE,eS,OM(e)),an(JE,eS,"__BUILD_TARGET__")}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ws=class{constructor(t,r){this.storageRetriever=t;this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Hs,"1"),this.storage.removeItem(Hs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){let r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function LM(){let e=Lt();return Dg(e)||Cg(e)}var FM=1e3,BM=10,Kd=class extends Ws{constructor(){super(()=>window.localStorage,"LOCAL")}boundEventHandler=(t,r)=>this.onStorageEvent(t,r);listeners={};localCache={};pollTimer=null;safariLocalStorageNotSynced=LM()&&YE();fallbackToPolling=QE();_shouldAllowMigration=!0;forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let n=this.storage.getItem(r),o=this.localCache[r];n!==o&&t(r,o,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((s,a,w)=>{this.notifyListeners(s,w)});return}let n=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let s=this.storage.getItem(n);if(t.newValue!==s)t.newValue!==null?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!r)return}let o=()=>{let s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},i=this.storage.getItem(n);$E()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,BM):o()}notifyListeners(t,r){this.localCache[t]=r;let n=this.listeners[t];if(n)for(let o of Array.from(n))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},FM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}};ie(Kd,"type","LOCAL");var rS=Kd;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var jd=class extends Ws{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}};ie(jd,"type","SESSION");var nS=jd;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function oS(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}var Rg=class{constructor(t){this.eventTarget=t;this.boundEventHandler=this.handleEvent.bind(this)}boundEventHandler;handlersMap={};static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let n=new Rg(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:n,eventType:o,data:i}=r.data,s=this.handlersMap[o];if(!s?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:o});let a=Array.from(s).map(async E=>E(r.origin,i)),w=await oS(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:w})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}},yl=Rg;ie(yl,"receivers",[]);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function iS(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}var Hd=class{constructor(t){this.target=t}handlers=new Set;removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){let o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let i,s;return new Promise((a,w)=>{let E=iS("",20);o.port1.start();let V=setTimeout(()=>{w(new Error("unsupported_event"))},n);s={messageChannel:o,onMessage(q){let K=q;if(K.data.eventId===E)switch(K.data.status){case"ack":clearTimeout(V),i=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(K.data.response);break;default:clearTimeout(V),clearTimeout(i),w(new Error("invalid_response"));break}}},this.handlers.add(s),o.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:E,data:r},[o.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Pg(){return window}function Ng(){return typeof Pg().WorkerGlobalScope<"u"&&typeof Pg().importScripts=="function"}async function sS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aS(){return navigator?.serviceWorker?.controller||null}function lS(){return Ng()?self:null}var dS="firebaseLocalStorageDb",zM=1,Wd="firebaseLocalStorage",mS="fbase_key",Mi=class{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}};function $d(e,t){return e.transaction([Wd],t?"readwrite":"readonly").objectStore(Wd)}function qM(){let e=indexedDB.deleteDatabase(dS);return new Mi(e).toPromise()}function Mg(){let e=indexedDB.open(dS,zM);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let n=e.result;try{n.createObjectStore(Wd,{keyPath:mS})}catch(o){r(o)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(Wd)?t(n):(n.close(),await qM(),t(await Mg()))})})}async function cS(e,t,r){let n=$d(e,!0).put({[mS]:t,value:r});return new Mi(n).toPromise()}async function KM(e,t){let r=$d(e,!1).get(t),n=await new Mi(r).toPromise();return n===void 0?null:n.value}function uS(e,t){let r=$d(e,!0).delete(t);return new Mi(r).toPromise()}var jM=800,HM=3,Gd=class{type="LOCAL";db;_shouldAllowMigration=!0;listeners={};localCache={};pollTimer=null;pendingWrites=0;receiver=null;sender=null;serviceWorkerReceiverAvailable=!1;activeServiceWorker=null;_workerInitializationPromise;constructor(){this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(t){let r=0;for(;;)try{let n=await this._openDb();return await t(n)}catch(n){if(r++>HM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ng()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yl._getInstance(lS()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sS(),!this.activeServiceWorker)return;this.sender=new Hd(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||aS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Mg();return await cS(t,Hs,"1"),await uS(t,Hs),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>cS(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(n=>KM(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uS(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let i=$d(o,!1).getAll();return new Mi(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],n=new Set;for(let{fbase_key:o,value:i}of t)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(i)&&(this.notifyListeners(o,i),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let n=this.listeners[t];if(n)for(let o of Array.from(n))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}};ie(Gd,"type","LOCAL");var pS=Gd;var GM=5*60,WM=ef("authIdTokenMaxAge")||GM,fS=null,$M=e=>async t=>{let r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>WM)return;let o=r?.token;fS!==o&&(fS=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Og(e=nf()){let t=ls(e,"auth");if(t.isInitialized())return t.getImmediate();let r=bg(e,{persistence:[pS,rS,nS]}),n=ef("authTokenSyncURL");if(n){let o=$M(n);ZE(r,o,()=>o(r.currentUser)),XE(r,i=>o(i))}return r}tS("Browser");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var hS=We("api/create_custom_token"),gS=z.object().schema({customToken:z.string()}),zEt=oe(gS);function QM(){return fetch(hS,{method:"POST",headers:{"Content-Type":"application/json"}})}function yS(){return $(async()=>{let e=await QM();if(!e.ok)throw ze.fromCode(e.status,hS,"Error while creating custom token");let t=await $(()=>e.json());if(!t.success)throw new Jt("CustomTokenResponse",{_:"Invalid JSON response"});let r=gS(t.value);if(r.hasError)throw new Jt("CustomTokenResponse",rn(r));return r.result})}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var YM=te("common.generic_listener_manager"),Qt=class{_listeners=[];_reportError;constructor(t){this._reportError=t??((r,n,o)=>YM.error("Error in event listener",r,n,o)),this.runAllListeners=this.runAllListeners.bind(this)}get nonExecutable(){return{addListener:this.addListener,removeListener:this.removeListener,clearAllListeners:this.clearAllListeners}}addListener=t=>{this._listeners.includes(t)||this._listeners.push(t)};removeListener=t=>{let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)};clearAllListeners=(t=!1)=>{t?this._listeners.splice(0,this._listeners.length):this._listeners=[]};runAllListeners(t,r="single_microtask"){if(r==="synchronous")return $(()=>Promise.allSettled([...this._listeners.map(n=>this.runListener("synchronous",n,t))]).then(()=>{}));r==="single_microtask"?globalThis.queueMicrotask(()=>this._listeners.forEach(n=>this.runListener("single_microtask",n,t))):this._listeners.map(n=>this.runListener("invidividual_microtasks",n,t))}runListener=async(t,r,n)=>{if(t==="invidividual_microtasks")return globalThis.queueMicrotask(async()=>{r.caller;let o=await $(()=>r(...n));o.success||this._reportError("listener_error",o.error,{args:n,listener:r.toString()})});{let o=await $(()=>r(...n));o.success||this._reportError("listener_error",o.error,{args:n,listener:r.toString()})}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var bS=z.object().schema({seconds:z.number(),nanoseconds:z.number()}),_S=z.object().schema({message_id:z.string(),receiver:z.string(),received_on:bS,sender:z.string(),subject:z.string()}).toCustom(e=>({...e,timestamp:e.received_on.seconds*1e3+Math.floor(e.received_on.nanoseconds/1e6)})),SSt=oe(_S),Lg=z.object().partial({revocation_time:bS,emails:z.object().schema({content:z.array().items(_S),unread_emails:z.number()}),generic:z.array().items(z.object().schema({id:z.string(),cancelable:z.string(),priority:z.string(),status:z.string(),cta:z.array().items(z.object().schema({text:z.string(),url:z.string()})),type:z.string()}))}),kSt=oe(Lg);var fr=te("c.background.notification_socket_manager"),Qd=class{_core;_lastUpdate={};_firebase_app;_firebase_auth;_firebase_db;_auth_unsub=null;_snapshot_unsub=null;_firebase_user=null;_custom_token=null;_user_credential=null;_onGenericNotifications;_onEmailNotifications;get userCredential(){return this._user_credential}get customToken(){return this._custom_token}get firebaseUser(){return this._firebase_user}get onGenericNotifications(){return this._onGenericNotifications.nonExecutable}get onEmailNotifications(){return this._onEmailNotifications.nonExecutable}get latestEmailCount(){return this._lastUpdate.emails?.unread_emails??0}constructor(t){this._core=t,this._onEmailNotifications=new Qt(this.reportListenerError),this._onGenericNotifications=new Qt(this.reportListenerError);let r={apiKey:"AIzaSyC3FmGiIim0l5ttvHGqkr2aFiqRgsoLBQk",appId:"1:502198204851:web:e7917a3b1d9b4100aff3c6",authDomain:"public.sqrx.com",messagingSenderId:"502198204851",projectId:"sqrx-public",storageBucket:"sqrx-public.appspot.com"};this._firebase_app=Fc(r),this._firebase_auth=Og(this._firebase_app),this._firebase_db=xd(this._firebase_app),this.init(),fr.info("Initialized",this._firebase_auth.currentUser),Ve.addListener("user_authorization_complete",this.onUserAuthorizationComplete),Ve.addListener("user_logout_complete",this.onUserLogout),Ve.addListener("user_unavailable",this.onUserLogout)}reportListenerError=(t,r,n)=>{$(()=>this._core.reportError({handled_at:"core",error:{location:"background-script-handler",handler:"notification-socket-manager",known_code:t,exception:r,data:n}}))};init=async()=>{await Ag(this._firebase_auth,Ri),fr.info("Auth state is ready with",this._firebase_auth.currentUser),this._auth_unsub=this._firebase_auth.onAuthStateChanged(this.onAuthStateChanged)};onUserLogout=async()=>{await this._firebase_auth.signOut(),fr.info("User logout received")};onUserAuthorizationComplete=async t=>(fr.info("User authorization complete received",t),t?this.onUserLogin(t):this.onUserLogout());onUserLogin=async t=>{if(this._firebase_auth.currentUser)return;fr.info("Creating new firebase login for authorization result",t);let r=await yS();if(!r.success)return r.error instanceof ze&&r.error.statusCode===401?fr.warn("Cannot login to firebase because the SquareX server says the user is not authenticated"):fr.error("Failed to create custom token",r.error);if(r.value.customToken===this._custom_token)return;this._custom_token=r.value.customToken;let n=await $(()=>zd(this._firebase_auth,r.value.customToken));if(!n.success)return fr.error("Failed to authenticate in firebase with custom token",n.error,r.value.customToken);this._user_credential=n.value,fr.info("Authenticated on firebase")};onAuthStateChanged=t=>{if(this._firebase_user=t,!t){fr.info("Snapshot unsub called"),this._snapshot_unsub?.(),this._snapshot_unsub=null,this._core.userManager.lastAuthSuccess&&this.onUserLogin(this._core.userManager.lastAuthSuccess);return}let r=it(()=>{let n=Td(this._firebase_db,"notifications",t.uid);return Id(n,o=>{let i=JSON.parse(JSON.stringify(o.data())),s=Lg(i);if(s.hasError)return fr.warn("Errors in schema",rn(s));this._lastUpdate=s.result,s.result.emails&&this._onEmailNotifications.runAllListeners([s.result.emails]),s.result.generic&&this._onGenericNotifications.runAllListeners([s.result.generic])},o=>{fr.error("Unable to connect to firestore subscriber",o.cause,o.code,o.customData,o.message,o.name)})});if(!r.success)return fr.error("Failed to subscribe to firestore snapshot changes",r.error);fr.info("Subscribed to firestore snapshots"),this._snapshot_unsub=r.value};handleRequest=t=>{if(t.data.request.type==="latest-notification-snapshot-request")return this._lastUpdate}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var vS=z.object().schema({type:z.string().equals("latest-notification-snapshot-request")}),Dkt=oe(vS),XM=Mt(z.object().schema({type:z.string().equals("firebase-notification-manager-request"),request:z.oneof(vS)})),xS=oe(XM);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Fr=class{_list;_opt;_onClean=new Qt;_currentInterval=null;constructor(t){this._opt=t,this._list=[],this._currentInterval=globalThis.setInterval(this.cleanFn,this._opt.pollingTime)}get nextExpiry(){return"itemRetentionTime"in this._opt?new Date().getTime()+this._opt.itemRetentionTime:-1}get onClean(){return this._onClean.nonExecutable}get values(){return this._list.map(t=>t.v)}get isPaused(){return this._currentInterval===null}cleanFn=()=>{let t=new Date().getTime(),r="itemRetentionFunction"in this._opt?this._opt.itemRetentionFunction:null,n=r?s=>r(s.v,t):s=>s.expiry>t,{includes:o,excludes:i}=ni(this._list,n);this._list=o,this._onClean.runAllListeners([i.map(s=>s.v)],"single_microtask")};pause(){this._currentInterval&&(globalThis.clearInterval(this._currentInterval),this._currentInterval=null)}unpause(){this._currentInterval||(this._currentInterval=globalThis.setInterval(this.cleanFn,this._opt.pollingTime))}push(...t){return this._list.push(...t.map(r=>({v:r,expiry:this.nextExpiry})))}filter(t){let r=new Fr(this._opt);return r._list=this._list.filter(n=>t(n.v)),r}find(t){return this._list.find(r=>t(r.v))?.v}clear(){let t=this._list.map(r=>r.v);return this._list=[],t}slice(t=0,r=void 0){let n=new Fr(this._opt);return n._list=this._list.slice(t,r),n}get(t){return this._list[t]}removeAtIndex(t){return this._list.splice(t,1)[0].v}removeWhere(t){let r=[];for(let n=0;n<this._list.length;n++){let o=this._list[n];t(o.v)&&(this._list.splice(n--,1),r.push(o.v))}return r}};var TS=te("c.background.tab_memory_manager"),Yd=class{_sourceOpenerList=new Fr({itemRetentionTime:6e4,pollingTime:5});_tabUrlMemory=new Map;_tabMemory=new Map;_currentlyActiveTabs=new Map;_tabActivity=new Map;constructor(){W.tabs.onActivated.addListener(this.onTabActivated),W.tabs.onUpdated.addListener(this.onTabUpdated),W.tabs.onCreated.addListener(this.onTabCreated),W.tabs.onRemoved.addListener(this.onTabRemoved),W.webNavigation?.onCreatedNavigationTarget.addListener(this.onCreatedNavigationTarget),this.init()}init=async()=>{(await W.tabs.query({})).forEach(r=>this.onTabCreated(r))};onCreatedNavigationTarget=t=>{this._sourceOpenerList.push(t)};onTabActivated=t=>{let r=this._currentlyActiveTabs.get(t.windowId);r&&this._tabActivity.set(r,{active:!1,lastActive:new Date().getTime()}),this._tabActivity.set(t.tabId,{active:!0,lastActive:new Date().getTime()}),this._currentlyActiveTabs.set(t.windowId,t.tabId),TS.log("ACTIVE TABS CHANGED",this._tabActivity)};onTabUpdated=(t,r)=>{let n=this._tabMemory.get(t);if(!n)return TS.warn("Missing in memory tab on tab update",t,r);n.audible=r.audible??n.audible,n.autoDiscardable=r.autoDiscardable??n.autoDiscardable,n.discarded=r.discarded??n.discarded,n.favIconUrl=r.favIconUrl??n.favIconUrl,n.groupId=r.groupId??n.groupId,n.mutedInfo=r.mutedInfo??n.mutedInfo,n.pinned=r.pinned??n.pinned,n.status=r.status??n.status,n.title=r.title??n.title,n.url=r.url??n.url,this._tabMemory.set(t,n),r.url&&this._tabUrlMemory.set(t,r.url)};onTabCreated=t=>{if(!t.id)return;let{active:r,...n}=t;this._tabMemory.set(t.id,n),this._tabActivity.set(t.id,{active:t.active,lastActive:null}),t.active&&this._currentlyActiveTabs.set(t.windowId,t.id);let o=t.url??t.pendingUrl;o&&this._tabUrlMemory.set(t.id,o)};onTabRemoved=t=>{this._tabUrlMemory.delete(t),this._tabMemory.delete(t)};getTabOpenerId=t=>this._sourceOpenerList.find(r=>r.tabId===t)?.sourceTabId;getTabOpenerDetails=t=>{let r=this.getTabOpenerId(t);if(r)return this._tabMemory.get(r)};getTabDetails=t=>this._tabMemory.get(t);getTabActiveStatus=t=>this._tabActivity.get(t);getTabUrl=t=>this._tabUrlMemory.get(t);getTabsByUrl=t=>Array.from(this._tabUrlMemory.entries()).filter(([,r])=>r===t).map(([r])=>r)};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ro=class{_resolver=at;_rejecter=at;_promise;_settled=!1;get[Symbol.toStringTag](){return"[object SynchronizingPromise]"}constructor(){this._promise=new Promise((t,r)=>{this._resolver=n=>{this._settled=!0,t(n)},this._rejecter=n=>{this._settled=!0,r(n)}})}get isSettled(){return this._settled}get reject(){return this._rejecter}get resolve(){return this._resolver}then(t,r){return this._promise.then(t,r)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var wS=te("common.opfs"),Xd=class extends st{constructor(t){let r=t instanceof Error?t.message:t;super(`Error during OPFS operation: ${r}`),this.setState({originalError:t})}};ie(Xd,"SerializedType","OPFSError");var Dt=class{static async asFailable(t){let r=await $(t);return r.success?r:Ue(new Xd(r.error instanceof Error?r.error:JSON.stringify(r)))}static async _getRootDirectory(){return navigator.storage.getDirectory()}static async _getDirectoryHandle(t){if(!t.endsWith("/")&&t!=="")throw new Error("path should end with / or should be blank for root");t==="/"&&(t="");let r=await Dt._getRootDirectory(),n=t.split("/"),o=r;for(let i=0;i<n.length-1;i++){let s=await $(()=>o.getDirectoryHandle(n[i],{create:!0}));if(s.success)o=s.value;else throw wS.error(`error getting directory handle for [${n[i]}]`,s.error),new Error(`error getting directory handle for [${n[i]}]`)}return o}static async _getFileHandle(t,r){let n=t.lastIndexOf("/"),o=await Dt._getDirectoryHandle(t.substring(0,n+1)),i=t.substring(n+1);return await o.getFileHandle(i,r)}static async _getFile(t){return(await this._getFileHandle(t,{create:!1})).getFile()}static async _getFileWriteStream(t,r){return(await this._getFileHandle(t,{create:r?.create??!1})).createWritable({keepExistingData:r?.keepExistingData??!1})}static async _writeFile(t,r,n={keepExistingData:!1}){let o=await Dt._getFileWriteStream(t,{keepExistingData:n.keepExistingData,create:!0});await o.write(r),await o.close()}static async getFileWriteStream(t,r){return Dt.asFailable(()=>Dt._getFileWriteStream(t,r))}static async writeFile(t,r,n){return Dt.asFailable(()=>Dt._writeFile(t,r,n))}static async getFileReadStream(t){return Dt.asFailable(async()=>(await Dt._getFile(t)).stream())}static async getFile(t){return Dt.asFailable(()=>Dt._getFile(t))}static async readAllFileBytes(t){return Dt.asFailable(async()=>{let r=(await Dt._getFile(t)).stream(),n=new Response(r);return new Uint8Array(await n.arrayBuffer())})}static async destroyFileInDir(t,r){return Dt.asFailable(async()=>await r.removeEntry(t,{recursive:!0}))}static async destroyFile(t){return Dt.asFailable(async()=>{let r=t.lastIndexOf("/"),n=await Dt._getDirectoryHandle(t.substring(0,r+1)),o=t.substring(r+1);return await n.removeEntry(o,{recursive:!0})})}static async _listFiles(t){let r=t.values(),n=[];for await(let o of r){let i=o;i.kind==="directory"?n.push(...await this._listFiles(i)):n.push({dirHandle:t,fileName:i.name})}return n}static async listFiles(t){let r=await $(()=>this._getDirectoryHandle(t));return r.success?this._listFiles(r.value):(wS.error("error getting handle",r.error),[])}},Fe=Dt;ie(Fe,"isSupported",()=>typeof navigator.storage?.getDirectory=="function");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ZM=z.object().schema({target:z.string().equals("offscreen_manager"),task_id:z.string(),response:z.oneof(z.object().schema({success:z.boolean().true(),value:z.string()}),z.object().schema({success:z.boolean().false(),error:z.anything()}))}),ES=oe(ZM);var SS=z.object().schema({request:z.string().equals("create_opfs_url"),request_id:z.string(),opfs_location:z.string(),mime_type:z.string()}),kS=z.object().schema({request:z.string().equals("destroy_opfs_url"),request_id:z.string()}),IS=z.object().schema({legacy:z.boolean().true(),allowed_time:z.number(),worker_name:z.string(),parameters:z.anything(),binary_location:z.oneof(z.string(),z.null())}),DS=z.object().schema({task_id:z.string(),legacy:z.boolean().false(),allowed_time:z.number(),worker_name:z.string(),binary_location:z.string()}),JM=z.object().schema({target:z.string().equals("offscreen"),data:z.oneof(SS,kS,IS,DS)}),fDt=oe(JM),hDt=oe(SS),gDt=oe(kS);function eO(e,t,r){return{request:"create_opfs_url",request_id:e,opfs_location:t,mime_type:r}}function tO(e){return{request:"destroy_opfs_url",request_id:e}}function CS(e,t,r){return{target:"offscreen",data:eO(e,t,r)}}function AS(e){return{target:"offscreen",data:tO(e)}}function RS(e,t,r,n){return{target:"offscreen",data:{legacy:!0,worker_name:e,allowed_time:t,binary_location:r,parameters:n}}}function PS(e,t,r,n){return{target:"offscreen",data:{task_id:e,legacy:!1,worker_name:t,allowed_time:r,binary_location:n}}}var yDt=oe(DS),bDt=oe(IS);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Fg=class extends Error{_element;constructor(t,r){super(`Elements of type [${r}] cannot be packed across contexts`),this._element=t}get element(){return this._element}},Zr=class{_binaries;_packedBuffer;_packHeader;constructor(){this._binaries={},this._packedBuffer=new Uint8Array,this._packHeader={packTime:0,rootPackType:{type:"undefined"},binaryLengths:{}}}get packHeader(){return this._packHeader}get packedBuffer(){return this._packedBuffer}get nextBinIndex(){return Object.keys(this._binaries).length}get combinedBinaryLength(){return Object.values(this._binaries).reduce((t,r)=>t+r.byteLength,0)}packUintArray=(t,r,n)=>{let o=n.nextBinIndex;return n._binaries[o]=r.buffer,{type:"binary",binaryType:t,index:o,byteLength:r.byteLength}};packUnknownElement=async(t,r)=>{let n=Zr.getPackingConstraints(t);if(n)throw new Fg(t,n);if(t===null)return{type:"null"};if(t===void 0)return{type:"undefined"};if(typeof t=="string")return{type:"string",value:t};if(typeof t=="number")return{type:"number",value:t};if(typeof t=="boolean")return{type:"boolean",value:t};if(t instanceof Date)return{type:"date",value:t.getTime()};if(t instanceof BigInt)return{type:"bigint",radix:16,value:t.toString(36)};if(t instanceof Blob){let i=r.nextBinIndex,s=await t.arrayBuffer();return r._binaries[i]=s,{type:"binary",binaryType:0,index:i,byteLength:s.byteLength,mimeType:t.type}}return t instanceof Uint8Array?this.packUintArray(1,t,r):t instanceof Uint8ClampedArray?this.packUintArray(2,t,r):t instanceof Uint16Array?this.packUintArray(3,t,r):t instanceof Uint32Array?this.packUintArray(4,t,r):Array.isArray(t)?{type:"array",values:Object.fromEntries(await Promise.all(t.map(async(i,s)=>[s,await this.packUnknownElement(i,r)])))}:{type:"object",value:await Promise.all(Object.entries(t).map(async([i,s])=>({key:i,value:await this.packUnknownElement(s,r)}),[]))}};unpackUnknownValue=(t,r)=>{if(t.type!=="undefined"){if(t.type==="null")return null;if(t.type==="string"||t.type==="boolean"||t.type==="number")return t.value;if(t.type==="date")return new Date(t.value);if(t.type==="bigint")return BigInt(`0x${t.value}`);if(t.type==="binary")return this.unpackBinary(t,r);if(t.type==="array")return Zr.sortObjectAsEntries(t.values).map(([,o])=>this.unpackUnknownValue(o,r));if(t.type==="object")return t.value.reduce((n,{key:o,value:i})=>(n[o]=this.unpackUnknownValue(i,r),n),{});throw new Error(`Unknown packing type [${t.type}]`)}};unpackBinary(t,r){let n=t.index;if(t.binaryType===0)return new Blob([r._binaries[n]],{type:t.mimeType});if(t.binaryType===1)return new Uint8Array(r._binaries[n]);if(t.binaryType===2)return new Uint8ClampedArray(r._binaries[n]);if(t.binaryType===3)return new Uint16Array(r._binaries[n]);if(t.binaryType===4)return new Uint32Array(r._binaries[n]);throw new Error("Unable to unpack unknown binary")}},Br=Zr;ie(Br,"sortObjectAsEntries",t=>Object.entries(t).sort(([r],[n])=>Number(r)-Number(n))),ie(Br,"safePack",t=>$(()=>Zr.pack(t))),ie(Br,"pack",async t=>{let r=new Zr,n=await r.packUnknownElement(t,r),o=Zr.sortObjectAsEntries(r._binaries),i={packTime:new Date().getTime(),rootPackType:n,binaryLengths:o.reduce((V,[q,K])=>(V[q]=K.byteLength,V),{})},s=new TextEncoder().encode(JSON.stringify(i)),a=new Uint8Array(4+s.byteLength+r.combinedBinaryLength),w=new DataView(new ArrayBuffer(4));w.setInt32(0,s.byteLength),a.set(new Uint8Array(w.buffer),0),a.set(s,4);let E=4+s.length;for(let[,V]of o){let q=new Uint8Array(V);a.set(q,E),E+=q.byteLength}return r._packedBuffer=a,r._packHeader=i,r}),ie(Br,"isBinaryType",t=>t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Blob),ie(Br,"getPackingConstraints",t=>{if(!(!t||Array.isArray(t)||Zr.isBinaryType(t))){if(typeof t=="symbol"||typeof t=="function")return typeof t;if(t instanceof Promise)return"promise";if(typeof t=="object"&&t.constructor.name!=="Object")return t.constructor.name}}),ie(Br,"safeUnpack",t=>it(()=>Zr.unpack(t))),ie(Br,"unpack",t=>{if(t.byteLength<4)throw new Error("Invalid buffer in binary pack");let r=t.slice(0,4),n=4,o=new DataView(r.buffer).getInt32(0),i=t.slice(n,n+o),s=new TextDecoder().decode(i),a=Jb(s);if(!a.success)throw new Error("Unable to decode binary pack header");n+=o;let w=new Zr;w._packHeader=a.value,w._packedBuffer=t;let E=Zr.sortObjectAsEntries(w._packHeader.binaryLengths);for(let[V,q]of E){let K=t.slice(n,n+q);n+=q,w._binaries[V]=K.buffer}return w.unpackUnknownValue(w._packHeader.rootPackType,w)});var $s=te("c.background.offscreen_manager"),Zd=class{_core;_hasDocument=!1;_closing=null;_opening=null;_closeTimer=null;_directTasks=new Map;_ongoingTasks=new Map;constructor(t){this._core=t}createDocument=()=>{let t=new Ro;return this._opening=t,$(()=>W.offscreen.createDocument({url:"offscreen.html",reasons:[W.offscreen.Reason.WORKERS,W.offscreen.Reason.BLOBS],justification:"Executing long running tasks out of the main thread, and creating blobs"})).then(r=>{r.success?(this._hasDocument=!0,t.resolve(r)):t.reject(r),this._opening=null}),this._opening};closeDocument=()=>{let t=new Ro;return this._closing=t,$(()=>W.offscreen.closeDocument()).then(r=>{r.success?(this._hasDocument=!1,t.resolve(r)):t.reject(r),this._closing=null}),this._closing};waitForStart=()=>{if(this._closing)return this._closing;if(this._closeTimer){clearTimeout(this._closeTimer.handle),this._closeTimer.promise.resolve(je(void 0)),this._closeTimer=null;return}if(!this._hasDocument)return this._opening?this._opening:this.createDocument()};waitForStop=async()=>{if(this._closing)return this._closing;if(this._hasDocument){{let r=new Ro,n=self.setTimeout(()=>{this._closeTimer=null,this.closeDocument().then(o=>!r.isSettled&&r.resolve(o)).catch(o=>!r.isSettled&&r.reject(o))},5e3);return this._closeTimer={promise:r,handle:n},r}return await this.closeDocument()}};endDirectTask=t=>{this._directTasks.delete(t),this._directTasks.size===0&&this._ongoingTasks.size===0&&this.waitForStop()};endOngoingTask=t=>{this._ongoingTasks.delete(t),this._directTasks.size===0&&this._ongoingTasks.size===0&&this.waitForStop()};generateOPFSTransferLocation=async t=>{let r=`__offscreen_transfer_${ft()}`,n=await Fe.writeFile(r,t);return n.success?je(r):($s.error("Unable to write to location",r,n.error),Ue(n.error))};handleWorkerTaskResponse=async({task_id:t,response:r})=>{let n=this._ongoingTasks.get(t);if(!n)return void $s.warn(`Missing ongoing task for response [${t}]`,r);if(this.endOngoingTask(t),!r.success)return n.resolve(r);typeof r.value!="string"&&n.resolve(Ue(new Error("Received non-string value from worker")));let o=await Fe.readAllFileBytes(r.value);if(!o.success)return o;let i=await Fe.destroyFile(r.value);i.success||$s.error(`Failed to destroy OPFS file at [${r.value}]`,i.error);let s=Br.unpack(o.value);return n.resolve(je(s))};generateObjectURLFromBytes=async(t,r,n=3e4)=>{let o=await this.generateOPFSTransferLocation(t);if(!o.success)return o;let i=o.value,s=await this.generateObjectURLFromOPFS(i,r,n),a=await Fe.destroyFile(i);return a.success||$s.error("Unable to destroy temporary OPFS file",a.error),s};generateObjectURLFromOPFS=async(t,r,n=3e4)=>{let o=this.waitForStart(),i=ft();await o;let s=new Ro;this._directTasks.set(i,s);let a=await $(()=>W.runtime.sendMessage(CS(i,t,r)));return a.success?br(a.value)?(o_(s,n).finally(()=>$(()=>W.runtime.sendMessage(AS(i))).catch(E=>{$s.error("Error destroying object URL",i,E)}).finally(()=>{this.endDirectTask(i)})),je({url:a.value,ack:s.resolve})):(this.endDirectTask(i),Ue(new Error(`Invalid URL returned from offscreen [${a.value}]`))):(this.endDirectTask(i),a)};executeWorker=async(t,r,n=15e3)=>{let o=await Br.safePack(r);if(!o.success)return o;let i=await this.generateOPFSTransferLocation(o.value.packedBuffer);if(!i.success)return i;let s=this.waitForStart(),a=ft();await s;let w=new Ro,E=$(()=>W.runtime.sendMessage(PS(a,t,n,i.value)));this._directTasks.set(a,E);let V=await E;return V.success?(this._ongoingTasks.set(a,w),this.endDirectTask(a),w):(this.endDirectTask(a),V)};executeOldWorker=async(t,r,n,o=15e3)=>{let i=r?await this.generateOPFSTransferLocation(r):null;if(i&&!i.success)return i;let s=i&&i.success?i.value:null,a=this.waitForStart(),w=ft();await a;let E=$(()=>W.runtime.sendMessage(RS(t,o,s,n)));this._directTasks.set(w,E);let V=await E;if(s){let q=await Fe.destroyFile(s);q.success||$s.error("Failed to destroy OPFS file",q.error)}return this.endDirectTask(w),V}};var NS=te("c.background.core");function MS(e){return!!(e.tab&&e.tab.id)}var Bg=class{installTriggered=!1;exposedInterfaces=new yc(this);tabMemoryManager=new Yd;moduleManager=new _c(this);userManager=new Tc(this);logdb=new gc(this);systemPolicyManager=new xc(this);versionManager=new wc(this);permissionsManager=new kc(this);firebaseNotificationManager=new Qd(this);offscreenManager=new Zd(this);messageListeners=new Map;get version(){return W.runtime.getManifest().version}addMessageListener=(t,r)=>{this.messageListeners.set(r,oe(t))};removeMessageListener=t=>this.messageListeners.delete(t);reportError=async t=>(t.error.exception=t.error.exception instanceof Error?Zo(t.error.exception):t.error.exception,Sc.report({...t,version:this.version}));loadModules=t=>{this.moduleManager.loadModules(t)};initialize=async()=>{Promise.all([this.systemPolicyManager.initialize(),Re.extensionEnabled.unsafeTransact(async t=>{let r=await t.get();return typeof r=="boolean"?r:(await t.set(!0),!0)})]).then(async([t,r])=>(await this.userManager.authorize(),[t,r])).then(([t,r])=>this.moduleManager.initialize(this.userManager.currentUser,t,r)),this.versionManager.initialize(),sv(this.version),W.runtime.onMessageExternal?.addListener((t,r,n)=>((async()=>{if(t?.type==="comms-check")return n(W.runtime.id);for(let[o,i]of this.messageListeners.entries())if(i(t))return $(()=>o(t));if(Wb(t)){let o=await this.exposedInterfaces.executeFunctionFromExternal({name:"getExistingSession",args:[{type:t.request.type,country:t.request.country}]},r);return o.success?n({success:!0,session:o.value}):o.error instanceof ri?n({success:!1,error:"no_session_available"}):n(o)}if(Qb(t)){let o=await this.exposedInterfaces.executeFunctionFromExternal({name:"launchDisposableBrowser",args:[t.country,{url:t.url,openTabAfterLaunch:!0,trigger:t.trigger??"view_renderer"}]},r);return n(o.success?{success:!0,session:o.value}:{success:!1,error:o.error})}if($b(t)){let o=await this.exposedInterfaces.executeFunctionFromExternal({name:"launchDisposableFileViewer",args:[{upload:t.file?{filename:t.file.filename,contentDetails:{type:"from_url",url:t.file.url,post_body:!1},openTabAfterUpload:!1,trigger:t.trigger??"pwa"}:void 0,openTabOnLaunch:!1}]},r);return n(o.success?{success:!0,session:o.value}:{success:!1,error:o.error})}switch(t.type){case"user-login":{this.userManager.authorize();return}case"user-logout":{this.userManager.logout();return}case"disposeSession":return await this.exposedInterfaces.executeFunctionFromExternal({name:"terminateSession",args:[{type:"file_viewer"}]},r),n({success:!0});case"focus-dfv":{let o=await this.exposedInterfaces.executeFunctionFromExternal({name:"getExistingSession",args:[{type:we}]},r);return o?(await Cr({type:we},r.tab?.windowId??(await W.windows.getCurrent())?.id),n({success:!0,session:o})):(this.reportError({handled_at:"core",error:{location:"background-script",known_code:"external_launch_dfv_request_session_missing",data:{request:t}}}),n({success:!1,error:"Missing session for file viewer"}))}}})(),!0)),this.logdb.waitUntilReady(),W.runtime.onInstalled.addListener(async t=>{this.installTriggered=!0,t.reason===W.runtime.OnInstalledReason.INSTALL&&W.tabs.create({url:"https://public.sqrx.com/get-started",active:!0}),Lp(this,t.reason)}),setTimeout(()=>{this.installTriggered||Lp(this)},100)};onMessage=(t,r,n)=>{let o=!1;function i(a){o=!0,n(a)}let s=(()=>{if(t!=="ping"){if(t==="echo_self")return r;if(!g_(t)){if(ES(t))return this.offscreenManager.handleWorkerTaskResponse(t);if(av(t)){MS(r)&&W.tabs.sendMessage(r.tab.id,is(t.module,t.message),{frameId:0},()=>{W.runtime.lastError&&this.reportError({handled_at:"core",module:t.module,error:{location:"background-script",exception:chrome.runtime.lastError,known_code:"unable_to_propagate_cs_message_to_top"}})});return}if(lv(t)){MS(r)&&W.tabs.sendMessage(r.tab.id,is(t.module,t.message),()=>{W.runtime.lastError&&this.reportError({handled_at:"core",module:t.module,error:{location:"background-script",exception:chrome.runtime.lastError,known_code:"unable_to_propagate_cs_message_to_all_frames"}})});return}if(Y_(t))return this.userManager.handleRequest(t);if(xS(t))return this.firebaseNotificationManager.handleRequest(t);if(C_(t))return this.reportError(t.report);if(A_(t))return this.logdb.log(Ht(t.event));if(__(t))return this.exposedInterfaces.executeFunctionFromRuntime(t.data.fn,r,t.module_source);if(v_(t))return this.moduleManager.runCoreFunction(t.data.fn.module,t.data.fn.name,{caller_type:"runtime",sender:r},t.data.fn.args);if(x_(t))return this.exposedInterfaces.getFunctionAvailability(t.data.fn);if(T_(t))return this.exposedInterfaces.executeEventActionFromRuntime(t.data);if(L_(t))return this.moduleManager.handleRequest(t);if(F_(t))return NS.error("YOU DIDNT IMPLEMENT THIS");if(D_(t))return this.moduleManager.handleContentScriptCall(t,r);if(I_(t))return this.moduleManager.handleTargetedMessage(t,r,i);if(h_(t)){Ve.emit(t.data.event.type,t.data.event.data,!0);return}NS.warn("Received an unknown message",t)}}})();if(lc(s))return s.then(a=>!o&&i(a)),s.catch(a=>i(a)),!0;o||i(s)}},bl=new Bg;var Ug=te("c.background.index");W.runtime.setUninstallURL("https://public.sqrx.com/uninstall",()=>{W.runtime.lastError&&Ug.error("Unable to set uninstall URL!",W.runtime.lastError)});chrome.storage.session.setAccessLevel({accessLevel:"TRUSTED_AND_UNTRUSTED_CONTEXTS"});async function OS(e){bl.loadModules(e),bl.initialize(),globalThis.addEventListener("unhandledrejection",async t=>{let r="uncaught",n="unhandled_promise_rejection";if(t.reason instanceof Error){let o=t.reason;if(!!I.find(s=>s.message===o.message&&s.core!=="content")){Ug.warn("Error is on the logging exclusion list, no report will be made.",t.reason.message);return}}try{await bl.reportError({handled_at:r,module:void 0,error:{location:"background-script",known_code:n,exception:t.reason}})}catch(o){Ug.error("Failed to report error to API",o)}})}W.runtime.onMessage.addListener(bl.onMessage);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var rO="Disposable\u2002File\u2002Viewer",nO="Disposable\u2002Browser";function Jd(e){switch(e){case Ne:return nO;case we:return rO}}async function LS(e,t){let r=Jd(e);return await chrome.tabGroups.query({title:r,windowId:t})}async function Vg(e){let[t]=await LS(we,e),[r]=await LS(Ne,e);return{[we]:t,[Ne]:r}}var FS=te("m.chrome_tab_grouping.background.window_manager");function oO(){return{move_to_browser:[],move_to_file_viewer:[],remove_from_browser:[],remove_from_file_viewer:[]}}var _l=class{_pending_refresh=!1;_window_id;_ready;_file_viewer_group;_browser_group;get ready(){return this._ready}constructor(t){this._window_id=t,this._ready=this.initialize()}destroy(){this._file_viewer_group&&this.destroyGroup(this._file_viewer_group.id),this._browser_group&&this.destroyGroup(this._browser_group.id)}async destroyGroup(t){let r=await $(()=>chrome.tabs.query({groupId:t}));if(!r.success){FS.error("Unable to query tabs from group",t,r.error);return}let n=Kr(r.value).map(o=>o.id);n.length<=0||chrome.tabs.ungroup(n,()=>{chrome.runtime.lastError&&FS.error("Unable to remove tabs from group while destroying window manager",chrome.runtime.lastError)})}initialize=async()=>{let t=await Vg(this._window_id);t[Ne]&&(this._browser_group=t[Ne]),t[we]&&(this._file_viewer_group=t[we])};getChromeGroupProperties=(t,r=!1)=>t===Ne?{collapsed:!r,color:"cyan",title:Jd(Ne)}:{collapsed:!r,color:"green",title:Jd(we)};groupTabs=async t=>{if(await this._ready,this._pending_refresh&&!t)return;this._pending_refresh=!0;let r=await Vg(this._window_id),o=(await chrome.tabs.query({windowId:this._window_id})).reduce((i,s)=>{if(!s.id)return i;let a=s.pendingUrl||s.url||"";return pc(a,Ne)?(s.groupId!==r[Ne]?.id&&i.move_to_browser.push(s),i):pc(a,we)?(s.groupId!==r[we]?.id&&i.move_to_file_viewer.push(s),i):(s.groupId===r[we]?.id?i.remove_from_file_viewer.push(s):s.groupId===r[Ne]?.id&&i.remove_from_browser.push(s),i)},oO());try{if(o.move_to_browser.length>0)if(this._browser_group)await chrome.tabs.group({groupId:this._browser_group.id,tabIds:Kr(o.move_to_browser).map(s=>s.id)});else{let s=await chrome.tabs.group({createProperties:{windowId:this._window_id},tabIds:Kr(o.move_to_browser).map(w=>w.id)}),a=await chrome.tabGroups.update(s,this.getChromeGroupProperties(Ne,!0));this._browser_group=a}if(o.move_to_file_viewer.length>0)if(this._file_viewer_group)await chrome.tabs.group({groupId:this._file_viewer_group.id,tabIds:Kr(o.move_to_file_viewer).map(s=>s.id)});else{let s=await chrome.tabs.group({createProperties:{windowId:this._window_id},tabIds:Kr(o.move_to_file_viewer).map(w=>w.id)}),a=await chrome.tabGroups.update(s,this.getChromeGroupProperties(we,!0));this._file_viewer_group=a}let i=Kr(o.remove_from_browser.concat(o.remove_from_file_viewer));i.length>0&&await chrome.tabs.ungroup(i.map(s=>s.id)),this._pending_refresh=!1}catch{globalThis.setTimeout(()=>this.groupTabs(!0),100)}};update=()=>this.groupTabs();onTabGroupRemoved=async t=>{this._browser_group?.id===t.id?this._browser_group=void 0:this._file_viewer_group?.id===t.id&&(this._file_viewer_group=void 0)}};var em=class{_ready;_window_managers=new Map;get ready(){return this._ready}constructor(){this.disable=this.disable.bind(this),this.enable=this.enable.bind(this),this._ready=this.initialize(),chrome.windows.onCreated.addListener(this.onWindowCreated),chrome.windows.onRemoved.addListener(this.onWindowRemoved),chrome.tabGroups.onRemoved.addListener(this.onTabGroupRemoved)}disable(){chrome.tabs.onUpdated.removeListener(this.onTabUpdated),chrome.tabs.onCreated.removeListener(this.onTabCreated),chrome.tabs.onMoved.removeListener(this.onTabMoved),chrome.tabs.onDetached.removeListener(this.onTabDetached),chrome.tabs.onAttached.removeListener(this.onTabAttached),chrome.windows.onCreated.removeListener(this.onWindowCreated),chrome.windows.onRemoved.removeListener(this.onWindowRemoved),chrome.tabGroups.onRemoved.removeListener(this.onTabGroupRemoved),this._window_managers.forEach(t=>t.destroy()),this._window_managers=new Map,this._ready=new Promise(()=>{})}async enable(){chrome.tabs.onUpdated.addListener(this.onTabUpdated),chrome.tabs.onCreated.addListener(this.onTabCreated),chrome.tabs.onMoved.addListener(this.onTabMoved),chrome.tabs.onDetached.addListener(this.onTabDetached),chrome.tabs.onAttached.addListener(this.onTabAttached),chrome.windows.onCreated.addListener(this.onWindowCreated),chrome.windows.onRemoved.addListener(this.onWindowRemoved),chrome.tabGroups.onRemoved.addListener(this.onTabGroupRemoved),this._ready=this.initialize(),await this._ready,this._window_managers.forEach(t=>t.update())}initialize=async()=>{let t=(await chrome.windows.getAll({windowTypes:["normal"]})).filter(r=>!!(r.id&&r.id!==-1));this._window_managers=new Map(t.map(r=>[r.id,new _l(r.id)]))};onTabGroupRemoved=t=>{this._window_managers.get(t.windowId)?.onTabGroupRemoved(t)};onWindowCreated=t=>{if(!t.id||t.type!=="normal")return;let r=t.id,n=new _l(r);this._window_managers.set(r,n)};onWindowRemoved=t=>{this._window_managers.delete(t)};onTabCreated=async t=>{await this._ready,this._window_managers.get(t.windowId)?.update()};onTabUpdated=async(t,r,n)=>{await this._ready,this._window_managers.get(n.windowId)?.update()};onTabMoved=async t=>{await this._ready;let r=await W.tabs.get(t);this._window_managers.get(r.windowId)?.update()};onTabAttached=async(t,r)=>{await this._ready,this._window_managers.get(r.newWindowId)?.update()};onTabDetached=async(t,r)=>{await this._ready,this._window_managers.get(r.oldWindowId)?.update()}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ee=class{_api;get api(){return this._api}set api(t){if(this._api)throw new Error("The API must only be set once, and should only be called by the core");this._api=t}__INTERNAL_USE_ONLY_GET_MEMBER=t=>this[t]};var BS=te("m.chrome_tab_grouping.background"),tm=class extends Ee{manager=new em;onStart=()=>{navigator.userAgent.toLowerCase().indexOf("opr/")>-1||(BS.log("Enabled tab group manager",this.manager),this.manager.enable())};onStop=()=>{navigator.userAgent.toLowerCase().indexOf("opr/")>-1||(BS.log("Disabled tab group manager",this.manager),this.manager.disable())}};var US={manifest_version:1,module:{name:"Tab Groups",description:"Use Chrome Tab Groups to organise Disposable Browser Tabs. This is only available in Chrome-compatible browsers.",category:"browser",help:{url:""},targets:["chrome"],requires_permissions:["tabGroups"]},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function VS(e){let t=await V_({path:`api/get_email_content/${e}`});if(t?.status==="success"){let{status:r,...n}=t;return n.body||(n.body="<br />"),n}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var zg=Ye("emailNotifications");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var aO=We("api/delete_notifications");async function lO(e){return await fetch(aO,{method:"POST",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async function zS(e){return $(()=>lO(e))}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var qS=z.object().schema({onscreen_notifications:z.boolean()}),rm=Ye("__module_settings_disposable_emails");function KS(){return{onscreen_notifications:!0}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var uO=z.object().schema({type:z.string().equals("close-opened-email-notification")}),eNt=oe(uO);function jS(){return{type:"close-opened-email-notification"}}var nm=te("m.email-notification.background"),om=class extends Ee{onStart=()=>{this.api.notifications.addEmailListener(this.onEmailNotificationsUpdate),nm.log("Started module")};onStop=()=>{this.api.notifications.removeEmailListener(this.onEmailNotificationsUpdate),nm.log("Stopped module")};onEmailNotificationsUpdate=async t=>{zg.set(t.content)};deleteEmailNotifications=t=>zS(t.map(r=>({id:r,type:"emails"})));fetchEmailData=t=>$(()=>VS(t));openEmbeddedLink=async t=>{if(!this.api.exposedFunctions.launchDisposableBrowser.isAvailable())return nm.error("disposable browser module is disabled");let r=this.api.user.getLatestApiUser();if(!r)return nm.error("No user available");await this.api.exposedFunctions.launchDisposableBrowser(r.country,{url:t,openTabAfterLaunch:!0,trigger:"disposable_email_notification"})};clearEmailNotificationsFromStorage=async()=>{zg.set([]);let t=await rm.get();(t.success?t.value?.onscreen_notifications??!1:!1)&&(await W.tabs.query({})).forEach(o=>{o.id&&this.api.message.sendToContentScript(o.id,jS())})}};var HS={manifest_version:1,module:{version:"1",name:"Disposable Emails",description:"Disposable emails module",category:"internal",requires_authentication:!0,requires_sqrx_components:["sqrx-email-notifier"],optional_exposed_functions:{background:["launchDisposableBrowser"]}},settings_schema:{onscreen_notifications:{type:"boolean",default_value:!0}},content_script:{frames:{type:"top"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var qg={doc:[{ext:"docm",mime:"application/vnd.ms-word.document.macroEnabled.12"},{ext:"dotm",mime:"application/vnd.ms-word.document.macroEnabled.12"}],ppt:[{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroEnabled.12"},{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12"},{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroEnabled.12"},{ext:"ppam",mime:"application/vnd.ms-powerpoint.addin.macroEnabled.12"}],xls:[{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroEnabled.12"},{ext:"xlsb",mime:"application/vnd.ms-excel.sheet.binary.macroEnabled.12"},{ext:"xltm",mime:"application/vnd.ms-excel.template.macroEnabled.12"},{ext:"xlam",mime:"application/vnd.ms-excel.addin.macroEnabled.12"}]},GS={doc:[{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:"dotx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},...qg.doc??[]],ppt:[{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:"ppsx",mime:"application/vnd.openxmlformats-officedocument.presentationml.slideshow"},{ext:"potx",mime:"application/vnd.openxmlformats-officedocument.presentationml.template"},...qg.ppt??[]],xls:[{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:"xltx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.template"},...qg.xls??[]]},WS={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.ms-word.document.macroEnabled":"docm","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/vnd.ms-word.template.macroEnabledTemplate":"dotm","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.ms-excel.sheet.macroEnabled":"xlsm","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","application/vnd.ms-excel.template.macroEnabled":"xltm","application/vnd.ms-excel.sheet.binary.macroEnabled":"xlsb","application/vnd.ms-excel.addin.macroEnabled":"xlam","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.ms-powerpoint.presentation.macroEnabled":"pptm","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/vnd.ms-powerpoint.template.macroEnabled":"potm","application/vnd.ms-powerpoint.addin.macroEnabled":"ppam","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","application/vnd.ms-powerpoint.slideshow.macroEnabled":"ppsm"},Kg={pdf:[{ext:"ai",mime:"application/postscript"}],xml:[{ext:"svg",mime:"image/svg+xml"},{ext:"xhtml",mime:"application/xhtml+xml"},{ext:"abw",mime:"application/x-abiword"},{ext:"asx",mime:"video/x-ms-asf"},{ext:"xdr",mime:"application/xml"}],vcf:[{ext:"ics",mime:"text/calendar"}],tif:[{ext:"tiff",mime:"image/tiff"}],oga:[{ext:"ogg",mime:"audio/ogg"}],ogv:[{ext:"ogx",mime:"video/ogg"}],jpeg:[{ext:"jpg",mime:"image/jpeg"},{ext:"jfif",mime:"image/jpeg"},{ext:"jpe",mime:"image/jpeg"}],tar:[{ext:"tbz2",mime:"application/x-tar"}],mp4:[{ext:"m4p",mime:"video/mp4"},{ext:"f4v",mime:"video/mp4"},{ext:"f4p",mime:"video/mp4"}],m4b:[{ext:"f4a",mime:"audio/mp4"},{ext:"f4b",mime:"audio/mp4"}],exe:[{ext:"dll",mime:"application/x-msdownload"}],asf:[{ext:"wma",mime:"audio/x-ms-wma"},{ext:"wmv",mime:"video/x-ms-wmv"}],xz:[{ext:"pub",mime:"application/vnd.ms-publisher"}],mkv:[{ext:"webm",mime:"video/webm"},{ext:"mka",mime:"audio/x-matroska"},{ext:"mks",mime:"application/x-matroska"}],midi:[{ext:"mid",mime:"audio/midi"}],mpeg:[{ext:"mpg",mime:"video/mpeg"}],azw3:[{ext:"azw",mime:"application/vnd.amazon.ebook"}],pcap:[{ext:"cap",mime:"application/vnd.tcpdump.pcap"}],gz:[{ext:"wmz",mime:"application/x-ms-wmz"}],ico:[{ext:"cur",mime:"image/x-icon"}]};function $S(e,t){for(let r of t){let n=r.subarray?e.subarray(r.subarray.offset,r.subarray.offset+r.subarray.size):e,o=QS(n,r);if(o)return o}return null}function QS(e,t){if("bytes"in t)return fO(e,t);if("stringValue"in t)return pO(e,t);let r=t.customFunction(e);return r?{ext:r[0],mime:r[1]}:null}function pO(e,t){return(t.options?yO(e,t.stringValue,t.options):gO(e,t.stringValue))?"fileTypeResult"in t?{ext:t.fileTypeResult[0],mime:t.fileTypeResult[1]}:$S(e,t.subchecks):null}function fO(e,t){return(t.options?Oi(e,t.bytes,t.options):ZS(e,t.bytes))?"fileTypeResult"in t?{ext:t.fileTypeResult[0],mime:t.fileTypeResult[1]}:$S(e,t.subchecks):null}function YS(e){for(let r of hO){let n=QS(e,r);if(n)return n}return bO(e)?{ext:"tar",mime:"application/x-tar"}:{ext:"",mime:""}}var hO=[{bytes:[80,75,3,4],fileTypeResult:["zip","application/zip"]},{bytes:[208,207,17,224,161,177,26,225],fileTypeResult:["office","Microsoft Compound File"]},{stringValue:"%PDF",fileTypeResult:["pdf","application/pdf"]},{bytes:[137,80,78,71,13,10,26,10],subchecks:[{customFunction:e=>{let t=8;for(;t+8<e.byteLength;){let r=e[t]*16777216+e[t+1]*65536+e[t+2]*256+e[t+3],n=String.fromCharCode(e[t+4],e[t+5],e[t+6],e[t+7]),o={length:r,type:n};if(o.length<0)break;switch(t+=8,o.type){case"IDAT":return["png","image/png"];case"acTL":return["apng","image/apng"];default:t+=o.length+4;break}}return["png","image/png"]}}]},{bytes:[255,216,255],fileTypeResult:["jpeg","image/jpeg"]},{bytes:[71,73,70],fileTypeResult:["gif","image/gif"]},{bytes:[66,77],fileTypeResult:["bmp","image/bmp"]},{stringValue:"WEBP",fileTypeResult:["webp","image/webp"],options:{offset:8}},{stringValue:"ftyp",options:{offset:4},subchecks:[{customFunction:e=>{if(!(e[8]&96))return null;let t=String.fromCharCode(...new Uint8Array(e).slice(8,12)).replace(/\0/g," ").trim();switch(t){case"avif":case"avis":return["avif","image/avif"];case"mif1":return["heic","image/heif"];case"msf1":return["heic","image/heif-sequence"];case"heic":case"heix":return["heic","image/heic"];case"hevc":case"hevx":return["heic","image/heic-sequence"];case"qt":return["mov","video/quicktime"];case"M4V":case"M4VH":case"M4VP":return["m4v","video/x-m4v"];case"M4P":return["m4p","video/mp4"];case"M4B":return["m4b","audio/mp4"];case"M4A":return["m4a","audio/x-m4a"];case"crx":return["cr3","image/x-canon-cr3"];default:return t.startsWith("3g")?t.startsWith("3g2")?["3g2","video/3gpp2"]:["3gp","video/3gpp"]:["mp4","video/mp4"]}}}]},{stringValue:"OggS",subchecks:[{bytes:[79,112,117,115,72,101,97,100],subarray:{offset:28,size:8},fileTypeResult:["opus","audio/opus"]},{bytes:[128,116,104,101,111,114,97],subarray:{offset:28,size:8},fileTypeResult:["ogv","video/ogg"]},{bytes:[1,118,105,100,101,111,0],subarray:{offset:28,size:8},fileTypeResult:["ogm","video/ogg"]},{bytes:[127,70,76,65,67],subarray:{offset:28,size:8},fileTypeResult:["oga","audio/ogg"]},{bytes:[83,112,101,101,120,32,32],subarray:{offset:28,size:8},fileTypeResult:["spx","audio/ogg"]},{bytes:[1,118,111,114,98,105,115],subarray:{offset:28,size:8},fileTypeResult:["ogg","audio/ogg"]},{customFunction:()=>["ogg","application/ogg"]}]},{bytes:[70,76,86,1],fileTypeResult:["flv","video/x-flv"]},{bytes:[0,0,1,186],fileTypeResult:["mpeg","video/mpeg"]},{bytes:[0,0,1,179],fileTypeResult:["mpeg","video/mpeg"]},{bytes:[255,224],options:{offset:0,mask:[255,224]},subchecks:[{customFunction:e=>Oi(e,[16],{offset:1,mask:[22]})?Oi(e,[8],{offset:1,mask:[8]})?["aac","audio/aac"]:["aac","audio/aac"]:Oi(e,[2],{offset:1,mask:[6]})?["mp3","audio/mpeg"]:Oi(e,[4],{offset:1,mask:[6]})?["mp2","audio/mpeg"]:Oi(e,[6],{offset:1,mask:[6]})?["mp1","audio/mpeg"]:null}]},{stringValue:"<?xml",fileTypeResult:["xml","application/xml"]},{bytes:[11,119],fileTypeResult:["ac3","audio/vnd.dolby.dd-raw"]},{bytes:[120,1],fileTypeResult:["dmg","application/x-apple-diskimage"]},{bytes:[77,90],fileTypeResult:["exe","application/x-msdownload"]},{bytes:[31,157],fileTypeResult:["Z","application/x-compress"]},{bytes:[199,113],fileTypeResult:["cpio","application/x-cpio"]},{bytes:[96,234],fileTypeResult:["arj","application/x-arj"]},{bytes:[31,139,8],fileTypeResult:["gz","application/x-gzip"]},{bytes:[66,90,104],fileTypeResult:["bz2","application/x-bzip2"]},{bytes:[79,98,106,1],fileTypeResult:["avro","application/avro"]},{bytes:[0,97,115,109],fileTypeResult:["wasm","application/wasm"]},{bytes:[78,69,83,26],fileTypeResult:["nes","application/x-nintendo-nes-rom"]},{bytes:[237,171,238,219],fileTypeResult:["rpm","application/x-rpm"]},{bytes:[197,208,211,198],fileTypeResult:["eps","application/eps"]},{bytes:[40,181,47,253],fileTypeResult:["zst","application/zstd"]},{bytes:[127,69,76,70],fileTypeResult:["elf","application/x-executable"]},{bytes:[33,66,68,78],fileTypeResult:["pst","application/vnd.ms-outlook"]},{bytes:[207,250,237,254],fileTypeResult:["macho","application/x-mach-binary"]},{bytes:[202,254,186,190],fileTypeResult:["class","application/x-java-class"]},{bytes:[79,84,84,79,0],fileTypeResult:["otf","font/otf"]},{bytes:[119,79,70,50],fileTypeResult:["woff2","font/woff2"]},{bytes:[119,79,70,70],fileTypeResult:["woff","font/woff"]},{bytes:[253,55,122,88,90,0],fileTypeResult:["xz","application/x-xz"]},{bytes:[55,122,188,175,39,28],fileTypeResult:["7z","application/x-7z-compressed"]},{bytes:[65,82,82,79,87,49,0,0],fileTypeResult:["arrow","application/x-apache-arrow"]},{bytes:[103,108,84,70,2,0,0,0],fileTypeResult:["glb","model/gltf-binary"]},{bytes:[0,1,0,0,0],fileTypeResult:["ttf","font/ttf"]},{bytes:[6,14,43,52,2,5,1,1,13,1,2,1,1,2],fileTypeResult:["mxf","application/mxf"]},{bytes:[76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70],fileTypeResult:["lnk","application/x.ms.shortcut"]},{bytes:[98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0],fileTypeResult:["alias","application/x.apple.alias"]},{bytes:[6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29],fileTypeResult:["indd","application/x-indesign"]},{stringValue:"MPCK",fileTypeResult:["mpc","audio/x-musepack"]},{stringValue:"FORM",fileTypeResult:["aif","audio/x-aiff"]},{stringValue:"DSD",fileTypeResult:["dsf","audio/x-dsf"]},{stringValue:"LZIP",fileTypeResult:["lz","application/x-lzip"]},{stringValue:"fLaC",fileTypeResult:["flac","audio/x-flac"]},{stringValue:"wvpk",fileTypeResult:["wv","audio/x-wavpack"]},{stringValue:"SQLi",fileTypeResult:["sqlite","application/x-sqlite3"]},{stringValue:"Cr24",fileTypeResult:["crx","application/x-google-chrome-extension"]},{stringValue:"MSCF",fileTypeResult:["cab","application/vnd.ms-cab-compressed"]},{stringValue:"ISc(",fileTypeResult:["cab","application/vnd.ms-cab-compressed"]},{stringValue:"PAR1",fileTypeResult:["parquet","application/x-parquet"]},{stringValue:"#!AMR",fileTypeResult:["amr","audio/amr"]},{stringValue:"{\\rtf",fileTypeResult:["rtf","application/rtf"]},{stringValue:"ITSF",fileTypeResult:["chm","application/vnd.ms-htmlhelp"]},{stringValue:"IMPM",fileTypeResult:["it","audio/x-it"]},{stringValue:"solid",fileTypeResult:["stl","model/stl"]},{stringValue:"070707",fileTypeResult:["cpio","application/x-cpio"]},{stringValue:"BLENDER",fileTypeResult:["blend","application/x-blender"]},{stringValue:"Kaydara FBX Binary  \0",fileTypeResult:["fbx","application/x.autodesk.fbx"]},{stringValue:"-----BEGIN PGP MESSAGE-----",fileTypeResult:["pgp","application/pgp-encrypted"]},{bytes:[82,97,114,33,26,7],subchecks:[{customFunction:e=>e[6]===0||e[6]===1?["rar","application/x-rar-compressed"]:null}]},{bytes:[37,80,68,70],fileTypeResult:["fdf","application/vnd.fdf"]},{bytes:[73,68,51],fileTypeResult:["mp3","audio/mpeg"]},{bytes:[0,1,0,0,83,116,97,110,100,97,114,100,32,65,67,69,32,68,66],fileTypeResult:["accdb","application/msaccess"]},{bytes:[0,1,0,0,83,116,97,110,100,97,114,100,32,74,101,116,32,68,66],fileTypeResult:["mdb","application/msaccess"]},{bytes:[7,100,116,50,100,100,116,100],fileTypeResult:["dtd","application/xml-dtd"]},{bytes:[37,33,80,83,45,65,100,111,98,101,45],fileTypeResult:["ps","application/postscript"]},{bytes:[40,84,104,105,115,32,102,105],fileTypeResult:["hqx","application/mac-binhex40"]},{bytes:[46,82,77,70,0,0,0,18],fileTypeResult:["ra","audio/x-pn-realaudio"]},{bytes:[46,114,97,253,0],fileTypeResult:["ra","audio/x-pn-realaudio"]},{bytes:[46,115,110,100],fileTypeResult:["au","audio/basic"]},{bytes:[48,38,178,117,142,102,207,17],fileTypeResult:["asf","video/x-ms-asf"]},{bytes:[48],fileTypeResult:["cat","application/vnd.ms-pki.seccat"]},{bytes:[73,73,188],fileTypeResult:["jxr","image/vnd.ms-photo"]},{bytes:[73,73,82,79,8,0,0,0,24],fileTypeResult:["orf","image/x-olympus-orf"]},{bytes:[66,80,71,251],fileTypeResult:["bpg","image/bpg"]},{bytes:[73,73,85,0,24,0,0,0,136,231,116,216],fileTypeResult:["rw2","image/x-panasonic-rw2"]},{bytes:[171,75,84,88,32,49,49,187,13,10,26,10],fileTypeResult:["ktx","image/ktx"]},{bytes:[255,79,255,81],fileTypeResult:["j2c","image/j2c"]},{bytes:[255,10],fileTypeResult:["jxl","image/jxl"]},{bytes:[0,0,0,12,74,88,76,32,13,10,135,10],fileTypeResult:["jxl","image/jxl"]},{bytes:[0,0,1,0],fileTypeResult:["ico","image/vnd.microsoft.icon"]},{bytes:[0,0,2,0],fileTypeResult:["cur","image/x-icon"]},{stringValue:"FLIF",fileTypeResult:["flif","image/flif"]},{stringValue:"8BPS",fileTypeResult:["psd","image/vnd.adobe.photoshop"]},{stringValue:"gimp xcf",fileTypeResult:["xcf","image/x-xcf"]},{bytes:[73,32,73],fileTypeResult:["tif","image/tiff"]},{bytes:[73,73,26,0,0,0,72,69],fileTypeResult:["crw","image/x-canon-crw"]},{bytes:[73,73,42,0],fileTypeResult:["tif","image/tiff"]},{bytes:[77,77,0,42],fileTypeResult:["tif","image/tiff"]},{bytes:[77,77,0,43],fileTypeResult:["tif","image/tiff"]},{bytes:[1,218,1,1,0,3],fileTypeResult:["rgb","image/x-rgb"]},{bytes:[80,53,10],fileTypeResult:["pgm","image/x-portable-graymap"]},{bytes:[82,73,70,70],subchecks:[{customFunction:e=>{if(e.length>=12){if(e[8]===65&&e[9]===86&&e[10]===73)return["avi","video/avi"];if(e[8]===81&&e[9]===76&&e[10]===67&&e[11]===77)return["qcp","audio/qcelp"];if(e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69)return["wav","audio/wav"]}return null}}]},{bytes:[66,69,71,73,78,58,86,67],fileTypeResult:["vcf","text/x-vcard"]},{bytes:[67,87,83],fileTypeResult:["swf","application/x-shockwave-flash"]},{bytes:[70,79,82,77,0],fileTypeResult:["aiff","audio/aiff"]},{bytes:[70,87,83],fileTypeResult:["swf","application/x-shockwave-flash"]},{bytes:[77,83,67,70],fileTypeResult:["onepkg","application/msonenote"]},{bytes:[77,84,104,100],fileTypeResult:["midi","audio/midi"]},{bytes:[77,105,99,114,111,115,111,102,116,32,87,105,110,100,111,119,115,32,77,101,100,105,97,32,80,108,97,121,101,114,32,45,45,32],fileTypeResult:["wpl","application/vnd.ms-wpl"]},{bytes:[79,103,103,83,0,2,0,0],fileTypeResult:["oga","audio/ogg"]},{bytes:[83,73,84,33,0],fileTypeResult:["sit","application/x-stuffit"]},{bytes:[83,116,117,102,102,73,116,32],fileTypeResult:["sit","application/x-stuffit"]},{bytes:[87,65,86,69,102,109,116,32],fileTypeResult:["wav","audio/wav"]},{bytes:[90,87,83],fileTypeResult:["swf","application/x-shockwave-flash"]},{bytes:[100,0,0,0],fileTypeResult:["p10","application/pkcs10"]},{bytes:[114,116,115,112,58,47,47],fileTypeResult:["ram","application/x-pn-realaudio"]},{bytes:[26,69,223,163],fileTypeResult:["mkv","video/x-matroska"]},{bytes:[215,205,198,154],fileTypeResult:["wmf","image/x-wmf"]},{bytes:[228,82,92,123,140,216,167,77],fileTypeResult:["one","application/msonenote"]},{bytes:[253,255,255,255,2],fileTypeResult:["pub","application/vnd.ms-publisher"]},{bytes:[212,195,178,161],fileTypeResult:["pcap","application/vnd.tcpdump.pcap"]},{bytes:[161,178,195,212],fileTypeResult:["pcap","application/vnd.tcpdump.pcap"]},{bytes:[26,2],fileTypeResult:["arc","application/x-freearc"]},{bytes:[65,67,49,48,51,50],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,50,55],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,50,52],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,50,49],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,49,56],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,49,53],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,49,52],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,49,50],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,48,57],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,48,54],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,48,52],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,48,51],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,48,48,50],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,50,46,49,48],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,46,53,48],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,46,52,48],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,46,51],fileTypeResult:["dwg","image/vnd.dwg"]},{bytes:[65,67,49,46,50],fileTypeResult:["dwg","image/vnd.dwg"]}];function XS(e){return[...e].map(t=>t.charCodeAt(0))}function ZS(e,t){if(e.length<t.length)return!1;for(let r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0}function Oi(e,t,r){r===void 0&&(r={offset:0,mask:void 0});for(let[n,o]of t.entries())if(r.mask){if(o!==(r.mask[n]&e[n+r.offset]))return!1}else if(o!==e[n+r.offset])return!1;return!0}function gO(e,t){return ZS(e,XS(t))}function yO(e,t,r){return Oi(e,XS(t),r)}function bO(e,t=0){let r=_O(e,t+148,t+154).trim(),n=Number.parseInt(r,8);if(Number.isNaN(n))return!1;let o=8*32;for(let i=t;i<t+148;i++)o+=e[i];for(let i=t+156;i<t+512;i++)o+=e[i];return n===o}function _O(e,t,r){let n="";for(let o=t;o<r&&e[o]!==0;o++)n+=String.fromCharCode(e[o]);return n}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var eOt=vb(ek());l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ur(e){if(typeof e=="string")return"string";if(Object.prototype.toString.call(e)==="[object Array]")return"array";if(e instanceof Uint8Array)return"uint8array";if(e instanceof ArrayBuffer)return"arraybuffer"}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",vO=function(e){let t=[],r=e.length,n,o,i,s,a,w,E,V=0,q=r,K=Ur(e)!=="string";for(;V<e.length;)q=r-V,K?(n=e[V++],o=V<r?e[V++]:0,i=V<r?e[V++]:0):(n=e.charCodeAt(V++),o=V<r?e.charCodeAt(V++):0,i=V<r?e.charCodeAt(V++):0),s=n>>2,a=(n&3)<<4|o>>4,w=q>1?(o&15)<<2|i>>6:64,E=q>2?i&63:64,t.push(vn.charAt(s)+vn.charAt(a)+vn.charAt(w)+vn.charAt(E));return t.join("")},xO=function(e){let t,r,n,o,i,s,a,w=0,E=0,V="data:";if(e.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");e=e.replace(/[^A-Za-z0-9+/=]/g,"");let q=e.length*3/4;if(e.charAt(e.length-1)===vn.charAt(64)&&q--,e.charAt(e.length-2)===vn.charAt(64)&&q--,q%1!==0)throw new Error("Invalid base64 input, bad content length.");let K=new Uint8Array(q|0);for(;w<e.length;)o=vn.indexOf(e.charAt(w++)),i=vn.indexOf(e.charAt(w++)),s=vn.indexOf(e.charAt(w++)),a=vn.indexOf(e.charAt(w++)),t=o<<2|i>>4,r=(i&15)<<4|s>>2,n=(s&3)<<6|a,K[E++]=t,s!==64&&(K[E++]=r),a!==64&&(K[E++]=n);return K},im={encode:vO,decode:xO};function TO(e){return Hg(e,new Uint8Array(e.length))}function sm(e){return e}function Hg(e,t){for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)&255;return t}var jg={stringifyByChunk:function(e,t,r){let n=[],o=e.length,i=0;if(o<=r)return String.fromCharCode.apply(null,e);for(;i<o;)t==="array"||t==="nodebuffer"?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}()}};function am(e){let t=65536,r=!0,n=Ur(e);if(n==="uint8array"&&(r=jg.applyCanBeUsed.uint8array),r)for(;t>1;)try{return jg.stringifyByChunk(e,n,t)}catch{t=Math.floor(t/2)}return jg.stringifyByChar(e)}function tk(e,t){for(let r=0;r<e.length;r++)t[r]=e[r];return t}var Qs={};Qs.string={string:sm,array:function(e){return Hg(e,new Array(e.length))},arraybuffer:function(e){return Qs.string.uint8array(e).buffer},uint8array:function(e){return Hg(e,new Uint8Array(e.length))}};Qs.array={string:am,array:sm,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)}};Qs.arraybuffer={string:function(e){return am(new Uint8Array(e))},array:function(e){return tk(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:sm,uint8array:function(e){return new Uint8Array(e)}};Qs.uint8array={string:am,array:function(e){return tk(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:sm};function rk(e,t){if(t||(t=""),!e)return t;let r=Ur(t);return Qs[r][e](t)}function wO(e){let t=e.split("/"),r=[];for(let n=0;n<t.length;n++){let o=t[n];o==="."||o===""&&n!==0&&n!==t.length-1||(o===".."?r.pop():r.push(o))}return r.join("/")}var EO=65535,SO=-1;function kO(e){let t="",r,n;for(n=0;n<(e||"").length;n++)r=e.charCodeAt(n),t+="\\x"+(r<16?"0":"")+r.toString(16).toUpperCase();return t}function IO(e,t,r){setImmediate(function(){e.apply(r||null,t||[])})}function DO(e,t){let r=function(){};r.prototype=t.prototype,e.prototype=new r}function CO(...e){let t={},r,n;for(r=0;r<e.length;r++)for(n in e[r])Object.prototype.hasOwnProperty.call(e[r],n)&&typeof t[n]>"u"&&(t[n]=e[r][n]);return t}function AO(e,t,r,n,o){return Promise.resolve(t).then(function(s){return(s instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(s))!==-1)&&typeof FileReader<"u"?new Promise(function(w,E){let V=new FileReader;V.onload=function(q){w(q.target.result)},V.onerror=function(q){E(q.target.error)},V.readAsArrayBuffer(s)}):s}).then(function(s){let a=Ur(s);return a?(a==="arraybuffer"?s=rk("uint8array",s):a==="string"&&(o?s=im.decode(s):r&&n!==!0&&(s=TO(s))),s):Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}var de={MAX_VALUE_16BITS:EO,MAX_VALUE_32BITS:SO,pretty:kO,resolve:wO,delay:IO,inherits:DO,extend:CO,prepareContent:AO,applyFromCharCode:am,transformTo:rk};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function nk(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}nk.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return this.isFinished?!1:(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(let r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;let t=this;return e.on("data",function(r){t.processChunk(r)}),e.on("end",function(){t.end()}),e.on("error",function(r){t.error(r)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;let e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(let e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){let e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}};var _e=nk;var vl=new Array(256);for(let e=0;e<256;e++)vl[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;vl[254]=vl[254]=1;var RO=function(e){let t=e.length,r,n,o,i,s=0;for(o=0;o<t;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<t&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),s+=r<128?1:r<2048?2:r<65536?3:4;let a=new Uint8Array(s);for(i=0,o=0;i<s;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<t&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?a[i++]=r:r<2048?(a[i++]=192|r>>>6,a[i++]=128|r&63):r<65536?(a[i++]=224|r>>>12,a[i++]=128|r>>>6&63,a[i++]=128|r&63):(a[i++]=240|r>>>18,a[i++]=128|r>>>12&63,a[i++]=128|r>>>6&63,a[i++]=128|r&63);return a},PO=function(e,t){let r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+vl[e[r]]>t?r:t},NO=function(e){let t,r,n,o,i=e.length,s=new Array(i*2);for(r=0,t=0;t<i;){if(n=e[t++],n<128){s[r++]=n;continue}if(o=vl[n],o>4){s[r++]=65533,t+=o-1;continue}for(n&=o===2?31:o===3?15:7;o>1&&t<i;)n=n<<6|e[t++]&63,o--;if(o>1){s[r++]=65533;continue}n<65536?s[r++]=n:(n-=65536,s[r++]=55296|n>>10&1023,s[r++]=56320|n&1023)}return s.length!==r&&(s.length=r),de.applyFromCharCode(s)};function ok(e){return RO(e)}function Gg(e){return NO(de.transformTo("uint8array",e))}function lm(){_e.call(this,"utf-8 decode"),this.leftOver=null}de.inherits(lm,_e);lm.prototype.processChunk=function(e){let t=de.transformTo("uint8array",e.data);if(this.leftOver&&this.leftOver.length){let o=t;t=new Uint8Array(o.length+this.leftOver.length),t.set(this.leftOver,0),t.set(o,this.leftOver.length),this.leftOver=null}let r=PO(t),n=t;r!==t.length&&(n=t.subarray(0,r),this.leftOver=t.subarray(r,t.length)),this.push({data:Gg(n),meta:e.meta})};lm.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:Gg(this.leftOver),meta:{}}),this.leftOver=null)};function Wg(){_e.call(this,"utf-8 encode")}de.inherits(Wg,_e);Wg.prototype.processChunk=function(e){this.push({data:ok(e.data),meta:e.meta})};var Vt={Utf8EncodeWorker:Wg,Utf8DecodeWorker:lm,utf8decode:Gg,utf8encode:ok};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function $g(e){_e.call(this,"ConvertWorker to "+e),this.destType=e}de.inherits($g,_e);$g.prototype.processChunk=function(e){this.push({data:de.transformTo(this.destType,e.data),meta:e.meta})};var ik=$g;function MO(e,t,r){switch(e){case"blob":return new Blob([de.transformTo("arraybuffer",t)],{type:r});case"base64":return im.encode(t);default:return de.transformTo(e,t)}}function OO(e,t){let r,n=0,o=null,i=0;for(r=0;r<t.length;r++)i+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(i),r=0;r<t.length;r++)o.set(t[r],n),n+=t[r].length;return o;default:throw new Error("concat : unsupported type '"+e+"'")}}function LO(e,t){return new Promise(function(r,n){let o=[],i=e._internalType,s=e._outputType,a=e._mimeType;e.on("data",function(w,E){o.push(w),t&&t(E)}).on("error",function(w){o=[],n(w)}).on("end",function(){try{let w=MO(s,OO(i,o),a);r(w)}catch(w){n(w)}o=[]}).resume()})}function sk(e,t,r){let n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string";break}try{this._internalType=n,this._outputType=t,this._mimeType=r,this._worker=e.pipe(new ik(n)),e.lock()}catch(o){this._worker=new _e("error"),this._worker.error(o)}}sk.prototype={accumulate:function(e){return LO(this,e)},on:function(e,t){let r=this;return e==="data"?this._worker.on(e,function(n){t.call(r,n.data,n.meta)}):this._worker.on(e,function(...n){de.delay(t,n,r)}),this},resume:function(){return de.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this}};var cm=sk;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var xl={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var FO=16*1024;function Ys(e){_e.call(this,"DataWorker");let t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(r){t.dataIsReady=!0,t.data=r,t.max=r&&r.length||0,t.type=Ur(r),t.isPaused||t._tickAndRepeat()},function(r){t.error(r)})}de.inherits(Ys,_e);Ys.prototype.cleanUp=function(){_e.prototype.cleanUp.call(this),this.data=null};Ys.prototype.resume=function(){return _e.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,de.delay(this._tickAndRepeat,[],this)),!0):!1};Ys.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(de.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};Ys.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;let e=FO,t=null,r=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r);break}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var Tl=Ys;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function BO(){let e,t=[];for(let r=0;r<256;r++){e=r;for(let n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var ak=BO();function UO(e,t,r,n){let o=ak,i=n+r;e=e^-1;for(let s=n;s<i;s++)e=e>>>8^o[(e^t[s])&255];return e^-1}function VO(e,t,r,n){let o=ak,i=n+r;e=e^-1;for(let s=n;s<i;s++)e=e>>>8^o[(e^t.charCodeAt(s))&255];return e^-1}function $n(e,t){return typeof e>"u"||!e.length?0:Ur(e)!=="string"?UO(t|0,e,e.length,0):VO(t|0,e,e.length,0)}function Qg(){_e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}de.inherits(Qg,_e);Qg.prototype.processChunk=function(e){this.streamInfo.crc32=$n(e.data,this.streamInfo.crc32||0),this.push(e)};var um=Qg;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Yg(e){_e.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}de.inherits(Yg,_e);Yg.prototype.processChunk=function(e){if(e){let t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}_e.prototype.processChunk.call(this,e)};var dm=Yg;function Xg(e,t,r,n,o){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=o}Xg.prototype={getContentWorker:function(){let e=new Tl(Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new dm("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new Tl(Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};Xg.createWorkerFrom=function(e,t,r){return e.pipe(new um).pipe(new dm("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new dm("compressedSize")).withStreamInfo("compression",t)};var Qn=Xg;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Zg=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};Zg.prototype={internalStream:function(e){let t=null,r="string";try{if(!e)throw new Error("No output type specified.");r=e.toLowerCase();let n=r==="string"||r==="text";(r==="binarystring"||r==="text")&&(r="string"),t=this._decompressWorker();let o=!this._dataBinary;o&&!n&&(t=t.pipe(new Vt.Utf8EncodeWorker)),!o&&n&&(t=t.pipe(new Vt.Utf8DecodeWorker))}catch(n){t=new _e("error"),t.error(n)}return new cm(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof Qn&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();{let r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new Vt.Utf8EncodeWorker)),Qn.createWorkerFrom(r,e,t)}},_decompressWorker:function(){return this._data instanceof Qn?this._data.getContentWorker():this._data instanceof _e?this._data:new Tl(this._data)}};var lk=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],zO=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(let e=0;e<lk.length;e++)Zg.prototype[lk[e]]=zO;var ck=Zg;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function qO(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xs(e,...t){for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)qO(r,n)&&(e[n]=r[n])}}return e}function Li(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)}function ir(e,t,r,n,o){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),o);return}for(let i=0;i<n;i++)e[o+i]=t[r+i]}function mm(e){let t,r,n,o,i;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;let s=new Uint8Array(n);for(o=0,t=0,r=e.length;t<r;t++)i=e[t],s.set(i,o),o+=i.length;return s}var sr=Uint8Array,ar=Uint16Array,wl=Int32Array;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var KO=!0,jO=!0,El=new sr(256);for(let e=0;e<256;e++)El[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;El[254]=El[254]=1;function Sl(e){let t=e.length,r,n,o,i,s=0;for(o=0;o<t;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<t&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),s+=r<128?1:r<2048?2:r<65536?3:4;let a=new sr(s);for(i=0,o=0;i<s;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<t&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?a[i++]=r:r<2048?(a[i++]=192|r>>>6,a[i++]=128|r&63):r<65536?(a[i++]=224|r>>>12,a[i++]=128|r>>>6&63,a[i++]=128|r&63):(a[i++]=240|r>>>18,a[i++]=128|r>>>12&63,a[i++]=128|r>>>6&63,a[i++]=128|r&63);return a}function uk(e,t){if(t<65534&&(e.subarray&&jO||!e.subarray&&KO))return String.fromCharCode.apply(null,Li(e,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}function dk(e){return uk(e,e.length)}function mk(e){let t=new sr(e.length);for(let r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t}function pk(e,t){let r,n,o,i,s=t||e.length,a=new Array(s*2);for(n=0,r=0;r<s;){if(o=e[r++],o<128){a[n++]=o;continue}if(i=El[o],i>4){a[n++]=65533,r+=i-1;continue}for(o&=i===2?31:i===3?15:7;i>1&&r<s;)o=o<<6|e[r++]&63,i--;if(i>1){a[n++]=65533;continue}o<65536?a[n++]=o:(o-=65536,a[n++]=55296|o>>10&1023,a[n++]=56320|o&1023)}return uk(a,n)}function fk(e,t){let r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+El[e[r]]>t?r:t}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var xn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function kl(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var HO=4,gk=0,yk=1,GO=2;function Js(e){let t=e.length;for(;--t>=0;)e[t]=0}var WO=0,wk=1,$O=2,QO=3,YO=258,iy=29,Pl=256,Dl=Pl+1+iy,Zs=30,sy=19,Ek=2*Dl+1,Bi=15,Jg=16,XO=7,ay=256,Sk=16,kk=17,Ik=18,ny=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],pm=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ZO=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Dk=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],JO=512,Yn=new Array((Dl+2)*2);Js(Yn);var Il=new Array(Zs*2);Js(Il);var Cl=new Array(JO);Js(Cl);var Al=new Array(YO-QO+1);Js(Al);var ly=new Array(iy);Js(ly);var fm=new Array(Zs);Js(fm);function ey(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}var Ck,Ak,Rk;function ty(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Pk(e){return e<256?Cl[e]:Cl[256+(e>>>7)]}function Rl(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function hr(e,t,r){e.bi_valid>Jg-r?(e.bi_buf|=t<<e.bi_valid&65535,Rl(e,e.bi_buf),e.bi_buf=t>>Jg-e.bi_valid,e.bi_valid+=r-Jg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Tn(e,t,r){hr(e,r[t*2],r[t*2+1])}function Nk(e,t){let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function eL(e){e.bi_valid===16?(Rl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function tL(e,t){let r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,w=t.stat_desc.max_length,E,V,q,K,H,X,Y=0;for(K=0;K<=Bi;K++)e.bl_count[K]=0;for(r[e.heap[e.heap_max]*2+1]=0,E=e.heap_max+1;E<Ek;E++)V=e.heap[E],K=r[r[V*2+1]*2+1]+1,K>w&&(K=w,Y++),r[V*2+1]=K,!(V>n)&&(e.bl_count[K]++,H=0,V>=a&&(H=s[V-a]),X=r[V*2],e.opt_len+=X*(K+H),i&&(e.static_len+=X*(o[V*2+1]+H)));if(Y!==0){do{for(K=w-1;e.bl_count[K]===0;)K--;e.bl_count[K]--,e.bl_count[K+1]+=2,e.bl_count[w]--,Y-=2}while(Y>0);for(K=w;K!==0;K--)for(V=e.bl_count[K];V!==0;)q=e.heap[--E],!(q>n)&&(r[q*2+1]!==K&&(e.opt_len+=(K-r[q*2+1])*r[q*2],r[q*2+1]=K),V--)}}function Mk(e,t,r){let n=new Array(Bi+1),o=0,i,s;for(i=1;i<=Bi;i++)n[i]=o=o+r[i-1]<<1;for(s=0;s<=t;s++){let a=e[s*2+1];a!==0&&(e[s*2]=Nk(n[a]++,a))}}function rL(){let e,t,r,n,o,i=new Array(Bi+1);for(r=0,n=0;n<iy-1;n++)for(ly[n]=r,e=0;e<1<<ny[n];e++)Al[r++]=n;for(Al[r-1]=n,o=0,n=0;n<16;n++)for(fm[n]=o,e=0;e<1<<pm[n];e++)Cl[o++]=n;for(o>>=7;n<Zs;n++)for(fm[n]=o<<7,e=0;e<1<<pm[n]-7;e++)Cl[256+o++]=n;for(t=0;t<=Bi;t++)i[t]=0;for(e=0;e<=143;)Yn[e*2+1]=8,e++,i[8]++;for(;e<=255;)Yn[e*2+1]=9,e++,i[9]++;for(;e<=279;)Yn[e*2+1]=7,e++,i[7]++;for(;e<=287;)Yn[e*2+1]=8,e++,i[8]++;for(Mk(Yn,Dl+1,i),e=0;e<Zs;e++)Il[e*2+1]=5,Il[e*2]=Nk(e,5);Ck=new ey(Yn,ny,Pl+1,Dl,Bi),Ak=new ey(Il,pm,0,Zs,Bi),Rk=new ey(new Array(0),ZO,0,sy,XO)}function Ok(e){let t;for(t=0;t<Dl;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Zs;t++)e.dyn_dtree[t*2]=0;for(t=0;t<sy;t++)e.bl_tree[t*2]=0;e.dyn_ltree[ay*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Lk(e){e.bi_valid>8?Rl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function nL(e,t,r,n){Lk(e),n&&(Rl(e,r),Rl(e,~r)),ir(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function bk(e,t,r,n){let o=t*2,i=r*2;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]}function ry(e,t,r){let n=e.heap[r],o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&bk(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!bk(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n}function _k(e,t,r){let n,o,i=0,s,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+i*2]<<8|e.pending_buf[e.d_buf+i*2+1],o=e.pending_buf[e.l_buf+i],i++,n===0?Tn(e,o,t):(s=Al[o],Tn(e,s+Pl+1,t),a=ny[s],a!==0&&(o-=ly[s],hr(e,o,a)),n--,s=Pk(n),Tn(e,s,r),a=pm[s],a!==0&&(n-=fm[s],hr(e,n,a)));while(i<e.last_lit);Tn(e,ay,t)}function oy(e,t){let r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems,s,a,w=-1,E;for(e.heap_len=0,e.heap_max=Ek,s=0;s<i;s++)r[s*2]!==0?(e.heap[++e.heap_len]=w=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)E=e.heap[++e.heap_len]=w<2?++w:0,r[E*2]=1,e.depth[E]=0,e.opt_len--,o&&(e.static_len-=n[E*2+1]);for(t.max_code=w,s=e.heap_len>>1;s>=1;s--)ry(e,r,s);E=i;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ry(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,r[E*2]=r[s*2]+r[a*2],e.depth[E]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,r[s*2+1]=r[a*2+1]=E,e.heap[1]=E++,ry(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],tL(e,t),Mk(r,w,e.bl_count)}function vk(e,t,r){let n,o=-1,i,s=t[0*2+1],a=0,w=7,E=4;for(s===0&&(w=138,E=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=s,s=t[(n+1)*2+1],!(++a<w&&i===s)&&(a<E?e.bl_tree[i*2]+=a:i!==0?(i!==o&&e.bl_tree[i*2]++,e.bl_tree[Sk*2]++):a<=10?e.bl_tree[kk*2]++:e.bl_tree[Ik*2]++,a=0,o=i,s===0?(w=138,E=3):i===s?(w=6,E=3):(w=7,E=4))}function xk(e,t,r){let n,o=-1,i,s=t[0*2+1],a=0,w=7,E=4;for(s===0&&(w=138,E=3),n=0;n<=r;n++)if(i=s,s=t[(n+1)*2+1],!(++a<w&&i===s)){if(a<E)do Tn(e,i,e.bl_tree);while(--a!==0);else i!==0?(i!==o&&(Tn(e,i,e.bl_tree),a--),Tn(e,Sk,e.bl_tree),hr(e,a-3,2)):a<=10?(Tn(e,kk,e.bl_tree),hr(e,a-3,3)):(Tn(e,Ik,e.bl_tree),hr(e,a-11,7));a=0,o=i,s===0?(w=138,E=3):i===s?(w=6,E=3):(w=7,E=4)}}function oL(e){let t;for(vk(e,e.dyn_ltree,e.l_desc.max_code),vk(e,e.dyn_dtree,e.d_desc.max_code),oy(e,e.bl_desc),t=sy-1;t>=3&&e.bl_tree[Dk[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function iL(e,t,r,n){let o;for(hr(e,t-257,5),hr(e,r-1,5),hr(e,n-4,4),o=0;o<n;o++)hr(e,e.bl_tree[Dk[o]*2+1],3);xk(e,e.dyn_ltree,t-1),xk(e,e.dyn_dtree,r-1)}function sL(e){let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return gk;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return yk;for(r=32;r<Pl;r++)if(e.dyn_ltree[r*2]!==0)return yk;return gk}var Tk=!1;function aL(e){Tk||(rL(),Tk=!0),e.l_desc=new ty(e.dyn_ltree,Ck),e.d_desc=new ty(e.dyn_dtree,Ak),e.bl_desc=new ty(e.bl_tree,Rk),e.bi_buf=0,e.bi_valid=0,Ok(e)}function Fk(e,t,r,n){hr(e,(WO<<1)+(n?1:0),3),nL(e,t,r,!0)}function lL(e){hr(e,wk<<1,3),Tn(e,ay,Yn),eL(e)}function cL(e,t,r,n){let o,i,s=0;e.level>0?(e.strm.data_type===GO&&(e.strm.data_type=sL(e)),oy(e,e.l_desc),oy(e,e.d_desc),s=oL(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=r+5,r+4<=o&&t!==-1?Fk(e,t,r,n):e.strategy===HO||i===o?(hr(e,(wk<<1)+(n?1:0),3),_k(e,Yn,Il)):(hr(e,($O<<1)+(n?1:0),3),iL(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),_k(e,e.dyn_ltree,e.dyn_dtree)),Ok(e),n&&Lk(e)}function uL(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Al[r]+Pl+1)*2]++,e.dyn_dtree[Pk(t)*2]++),e.last_lit===e.lit_bufsize-1}var kr={_tr_init:aL,_tr_stored_block:Fk,_tr_flush_block:cL,_tr_tally:uL,_tr_align:lL};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function No(e,t,r,n){let o=e&65535|0,i=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do o=o+t[n++]|0,i=i+o|0;while(--s);o%=65521,i%=65521}return o|i<<16|0}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function dL(){let e=[],t;for(let r=0;r<256;r++){t=r;for(let n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var mL=dL();function vt(e,t,r,n){let o=mL,i=n+r;e^=-1;for(let s=n;s<i;s++)e=e>>>8^o[(e^t[s])&255];return e^-1}var qi=0,pL=1,fL=3,Bo=4,Bk=5,En=0,Uk=1,Vr=-2,hL=-3,cy=-5,gL=-1,yL=1,hm=2,bL=3,_L=4,vL=0,xL=2,_m=8,TL=9,wL=15,EL=8,SL=29,kL=256,dy=kL+1+SL,IL=30,DL=19,CL=2*dy+1,AL=15,Ce=3,Lo=258,Jr=Lo+Ce+1,RL=32,vm=42,my=69,gm=73,ym=91,bm=103,Ui=113,Ml=666,Et=1,Ll=2,Vi=3,ta=4,PL=3;function Fo(e,t){return e.msg=xn[t],t}function Vk(e){return(e<<1)-(e>4?9:0)}function Oo(e){let t=e.length;for(;--t>=0;)e[t]=0}function Mo(e){let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(ir(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function zt(e,t){kr._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Mo(e.strm)}function Me(e,t){e.pending_buf[e.pending++]=t}function Nl(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function NL(e,t,r,n){let o=e.avail_in;return o>n&&(o=n),o===0?0:(e.avail_in-=o,ir(t,e.input,e.next_in,o,r),e.state.wrap===1?e.adler=No(e.adler,t,o,r):e.state.wrap===2&&(e.adler=vt(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)}function zk(e,t){let r=e.max_chain_length,n=e.strstart,o,i,s=e.prev_length,a=e.nice_match,w=e.strstart>e.w_size-Jr?e.strstart-(e.w_size-Jr):0,E=e.window,V=e.w_mask,q=e.prev,K=e.strstart+Lo,H=E[n+s-1],X=E[n+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(o=t,!(E[o+s]!==X||E[o+s-1]!==H||E[o]!==E[n]||E[++o]!==E[n+1])){n+=2,o++;do;while(E[++n]===E[++o]&&E[++n]===E[++o]&&E[++n]===E[++o]&&E[++n]===E[++o]&&E[++n]===E[++o]&&E[++n]===E[++o]&&E[++n]===E[++o]&&E[++n]===E[++o]&&n<K);if(i=Lo-(K-n),n=K-Lo,i>s){if(e.match_start=t,s=i,i>=a)break;H=E[n+s-1],X=E[n+s]}}while((t=q[t&V])>w&&--r!==0);return s<=e.lookahead?s:e.lookahead}function zi(e){let t=e.w_size,r,n,o,i,s;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Jr)){ir(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do o=e.head[--r],e.head[r]=o>=t?o-t:0;while(--n);n=t,r=n;do o=e.prev[--r],e.prev[r]=o>=t?o-t:0;while(--n);i+=t}if(e.strm.avail_in===0)break;if(n=NL(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=Ce)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+Ce-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<Ce)););}while(e.lookahead<Jr&&e.strm.avail_in!==0)}function ML(e,t){let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(zi(e),e.lookahead===0&&t===qi)return Et;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;let n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,zt(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Jr&&(zt(e,!1),e.strm.avail_out===0))return Et}return e.insert=0,t===Bo?(zt(e,!0),e.strm.avail_out===0?Vi:ta):(e.strstart>e.block_start&&(zt(e,!1),e.strm.avail_out===0),Et)}function uy(e,t){let r,n;for(;;){if(e.lookahead<Jr){if(zi(e),e.lookahead<Jr&&t===qi)return Et;if(e.lookahead===0)break}if(r=0,e.lookahead>=Ce&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Jr&&(e.match_length=zk(e,r)),e.match_length>=Ce)if(n=kr._tr_tally(e,e.strstart-e.match_start,e.match_length-Ce),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Ce){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=kr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(zt(e,!1),e.strm.avail_out===0))return Et}return e.insert=e.strstart<Ce-1?e.strstart:Ce-1,t===Bo?(zt(e,!0),e.strm.avail_out===0?Vi:ta):e.last_lit&&(zt(e,!1),e.strm.avail_out===0)?Et:Ll}function ea(e,t){let r,n,o;for(;;){if(e.lookahead<Jr){if(zi(e),e.lookahead<Jr&&t===qi)return Et;if(e.lookahead===0)break}if(r=0,e.lookahead>=Ce&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Ce-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Jr&&(e.match_length=zk(e,r),e.match_length<=5&&(e.strategy===yL||e.match_length===Ce&&e.strstart-e.match_start>4096)&&(e.match_length=Ce-1)),e.prev_length>=Ce&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-Ce,n=kr._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Ce),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Ce-1,e.strstart++,n&&(zt(e,!1),e.strm.avail_out===0))return Et}else if(e.match_available){if(n=kr._tr_tally(e,0,e.window[e.strstart-1]),n&&zt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Et}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=kr._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Ce-1?e.strstart:Ce-1,t===Bo?(zt(e,!0),e.strm.avail_out===0?Vi:ta):e.last_lit&&(zt(e,!1),e.strm.avail_out===0)?Et:Ll}function OL(e,t){let r,n,o,i,s=e.window;for(;;){if(e.lookahead<=Lo){if(zi(e),e.lookahead<=Lo&&t===qi)return Et;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Ce&&e.strstart>0&&(o=e.strstart-1,n=s[o],n===s[++o]&&n===s[++o]&&n===s[++o])){i=e.strstart+Lo;do;while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<i);e.match_length=Lo-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Ce?(r=kr._tr_tally(e,1,e.match_length-Ce),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=kr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(zt(e,!1),e.strm.avail_out===0))return Et}return e.insert=0,t===Bo?(zt(e,!0),e.strm.avail_out===0?Vi:ta):e.last_lit&&(zt(e,!1),e.strm.avail_out===0)?Et:Ll}function LL(e,t){let r;for(;;){if(e.lookahead===0&&(zi(e),e.lookahead===0)){if(t===qi)return Et;break}if(e.match_length=0,r=kr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(zt(e,!1),e.strm.avail_out===0))return Et}return e.insert=0,t===Bo?(zt(e,!0),e.strm.avail_out===0?Vi:ta):e.last_lit&&(zt(e,!1),e.strm.avail_out===0)?Et:Ll}function wn(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}var Ol=[new wn(0,0,0,0,ML),new wn(4,4,8,4,uy),new wn(4,5,16,8,uy),new wn(4,6,32,32,uy),new wn(4,4,16,16,ea),new wn(8,16,32,32,ea),new wn(8,16,128,128,ea),new wn(8,32,128,256,ea),new wn(32,128,258,1024,ea),new wn(32,258,258,4096,ea)];function FL(e){e.window_size=2*e.w_size,Oo(e.head),e.max_lazy_match=Ol[e.level].max_lazy,e.good_match=Ol[e.level].good_length,e.nice_match=Ol[e.level].nice_length,e.max_chain_length=Ol[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Ce-1,e.match_available=0,e.ins_h=0}function BL(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ar(CL*2),this.dyn_dtree=new ar((2*IL+1)*2),this.bl_tree=new ar((2*DL+1)*2),Oo(this.dyn_ltree),Oo(this.dyn_dtree),Oo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ar(AL+1),this.heap=new ar(2*dy+1),Oo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ar(2*dy+1),Oo(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qk(e){if(!e||!e.state)return Fo(e,Vr);e.total_in=e.total_out=0,e.data_type=xL;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?vm:Ui,e.adler=t.wrap===2?0:1,t.last_flush=qi,kr._tr_init(t),En}function Kk(e){let t=qk(e);return t===En&&FL(e.state),t}function UL(e,t){return!e||!e.state||e.state.wrap!==2?Vr:(e.state.gzhead=t,En)}function jk(e,t,r,n,o,i){if(!e)return Vr;let s=1;if(t===gL&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>TL||r!==_m||n<8||n>15||t<0||t>9||i<0||i>_L)return Fo(e,Vr);n===8&&(n=9);let a=new BL;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Ce-1)/Ce),a.window=new sr(a.w_size*2),a.head=new ar(a.hash_size),a.prev=new ar(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new sr(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,Kk(e)}function VL(e,t){return jk(e,t,_m,wL,EL,vL)}function zL(e,t){let r,n;if(!e||!e.state||t>Bk||t<0)return e?Fo(e,Vr):Vr;let o=e.state;if(!e.output||!e.input&&e.avail_in!==0||o.status===Ml&&t!==Bo)return Fo(e,e.avail_out===0?cy:Vr);o.strm=e;let i=o.last_flush;if(o.last_flush=t,o.status===vm)if(o.wrap===2)e.adler=0,Me(o,31),Me(o,139),Me(o,8),o.gzhead?(Me(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Me(o,o.gzhead.time&255),Me(o,o.gzhead.time>>8&255),Me(o,o.gzhead.time>>16&255),Me(o,o.gzhead.time>>24&255),Me(o,o.level===9?2:o.strategy>=hm||o.level<2?4:0),Me(o,o.gzhead.os&255),o.gzhead.extra&&o.gzhead.extra.length&&(Me(o,o.gzhead.extra.length&255),Me(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=vt(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=my):(Me(o,0),Me(o,0),Me(o,0),Me(o,0),Me(o,0),Me(o,o.level===9?2:o.strategy>=hm||o.level<2?4:0),Me(o,PL),o.status=Ui);else{let s=_m+(o.w_bits-8<<4)<<8,a=-1;o.strategy>=hm||o.level<2?a=0:o.level<6?a=1:o.level===6?a=2:a=3,s|=a<<6,o.strstart!==0&&(s|=RL),s+=31-s%31,o.status=Ui,Nl(o,s),o.strstart!==0&&(Nl(o,e.adler>>>16),Nl(o,e.adler&65535)),e.adler=1}if(o.status===my)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(o.gzhead.extra.length&65535)&&!(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=vt(e.adler,o.pending_buf,o.pending-r,r)),Mo(e),r=o.pending,o.pending===o.pending_buf_size));)Me(o,o.gzhead.extra[o.gzindex]&255),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(e.adler=vt(e.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=gm)}else o.status=gm;if(o.status===gm)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=vt(e.adler,o.pending_buf,o.pending-r,r)),Mo(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}o.gzindex<o.gzhead.name.length?n=o.gzhead.name.charCodeAt(o.gzindex++)&255:n=0,Me(o,n)}while(n!==0);o.gzhead.hcrc&&o.pending>r&&(e.adler=vt(e.adler,o.pending_buf,o.pending-r,r)),n===0&&(o.gzindex=0,o.status=ym)}else o.status=ym;if(o.status===ym)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=vt(e.adler,o.pending_buf,o.pending-r,r)),Mo(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}o.gzindex<o.gzhead.comment.length?n=o.gzhead.comment.charCodeAt(o.gzindex++)&255:n=0,Me(o,n)}while(n!==0);o.gzhead.hcrc&&o.pending>r&&(e.adler=vt(e.adler,o.pending_buf,o.pending-r,r)),n===0&&(o.status=bm)}else o.status=bm;if(o.status===bm&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Mo(e),o.pending+2<=o.pending_buf_size&&(Me(o,e.adler&255),Me(o,e.adler>>8&255),e.adler=0,o.status=Ui)):o.status=Ui),o.pending!==0){if(Mo(e),e.avail_out===0)return o.last_flush=-1,En}else if(e.avail_in===0&&Vk(t)<=Vk(i)&&t!==Bo)return Fo(e,cy);if(o.status===Ml&&e.avail_in!==0)return Fo(e,cy);if(e.avail_in!==0||o.lookahead!==0||t!==qi&&o.status!==Ml){let s=o.strategy===hm?LL(o,t):o.strategy===bL?OL(o,t):Ol[o.level].func(o,t);if((s===Vi||s===ta)&&(o.status=Ml),s===Et||s===Vi)return e.avail_out===0&&(o.last_flush=-1),En;if(s===Ll&&(t===pL?kr._tr_align(o):t!==Bk&&(kr._tr_stored_block(o,0,0,!1),t===fL&&(Oo(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),Mo(e),e.avail_out===0))return o.last_flush=-1,En}return t!==Bo?En:o.wrap<=0?Uk:(o.wrap===2?(Me(o,e.adler&255),Me(o,e.adler>>8&255),Me(o,e.adler>>16&255),Me(o,e.adler>>24&255),Me(o,e.total_in&255),Me(o,e.total_in>>8&255),Me(o,e.total_in>>16&255),Me(o,e.total_in>>24&255)):(Nl(o,e.adler>>>16),Nl(o,e.adler&65535)),Mo(e),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?En:Uk)}function qL(e){if(!e||!e.state)return Vr;let t=e.state.status;return t!==vm&&t!==my&&t!==gm&&t!==ym&&t!==bm&&t!==Ui&&t!==Ml?Fo(e,Vr):(e.state=null,t===Ui?Fo(e,hL):En)}function KL(e,t){let r=t.length,n,o,i;if(!e||!e.state)return Vr;let s=e.state,a=s.wrap;if(a===2||a===1&&s.status!==vm||s.lookahead)return Vr;a===1&&(e.adler=No(e.adler,t,r,0)),s.wrap=0,r>=s.w_size&&(a===0&&(Oo(s.head),s.strstart=0,s.block_start=0,s.insert=0),i=new sr(s.w_size),ir(i,t,r-s.w_size,s.w_size,0),t=i,r=s.w_size);let w=e.avail_in,E=e.next_in,V=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,zi(s);s.lookahead>=Ce;){n=s.strstart,o=s.lookahead-(Ce-1);do s.ins_h=(s.ins_h<<s.hash_shift^s.window[n+Ce-1])&s.hash_mask,s.prev[n&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=n,n++;while(--o);s.strstart=n,s.lookahead=Ce-1,zi(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=Ce-1,s.match_available=0,e.next_in=E,e.input=V,e.avail_in=w,s.wrap=a,En}var ra={deflateInit:VL,deflateInit2:jk,deflateReset:Kk,deflateResetKeep:qk,deflateSetHeader:UL,deflate:zL,deflateEnd:qL,deflateSetDictionary:KL,deflateInfo:"pako deflate (from Nodeca project)"};var Wk=Object.prototype.toString,jL=0,py=4,na=0,Hk=1,Gk=2,HL=-1,GL=0,WL=8;function Ki(e){if(!(this instanceof Ki))return new Ki(e);this.options=Xs({level:HL,method:WL,chunkSize:16384,windowBits:15,memLevel:8,strategy:GL,to:""},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kl,this.strm.avail_out=0;let r=ra.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==na)throw new Error(xn[r]);if(t.header&&ra.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=Sl(t.dictionary):Wk.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=ra.deflateSetDictionary(this.strm,n),r!==na)throw new Error(xn[r]);this._dict_set=!0}}Ki.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,o;if(this.ended)return!1;let i=t===~~t?t:t===!0?py:jL;typeof e=="string"?r.input=Sl(e):Wk.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new sr(n),r.next_out=0,r.avail_out=n),o=ra.deflate(r,i),o!==Hk&&o!==na)return this.onEnd(o),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(i===py||i===Gk))&&(this.options.to==="string"?this.onData(dk(Li(r.output,r.next_out))):this.onData(Li(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&o!==Hk);return i===py?(o=ra.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===na):(i===Gk&&(this.onEnd(na),r.avail_out=0),!0)};Ki.prototype.onData=function(e){this.chunks.push(e)};Ki.prototype.onEnd=function(e){e===na&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mm(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function fy(e,t){let r=new Ki(t);if(r.push(e,!0),r.err)throw r.msg||xn[r.err];return r.result}function $L(e,t){return t=t||{},t.raw=!0,fy(e,t)}function QL(e,t){return t=t||{},t.gzip=!0,fy(e,t)}var $k={Deflate:Ki,deflate:fy,deflateRaw:$L,gzip:QL};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function hy(e,t){let r,n,o,i,s,a,w,E,V,q,K=e.state;r=e.next_in;let H=e.input,X=r+(e.avail_in-5);n=e.next_out;let Y=e.output,ee=n-(t-e.avail_out),Q=n+(e.avail_out-257),Z=K.dmax,J=K.wsize,ue=K.whave,be=K.wnext,ge=K.window;o=K.hold,i=K.bits;let Ae=K.lencode,Pe=K.distcode,Ge=(1<<K.lenbits)-1,Ke=(1<<K.distbits)-1;e:do{i<15&&(o+=H[r++]<<i,i+=8,o+=H[r++]<<i,i+=8),s=Ae[o&Ge];t:for(;;){if(a=s>>>24,o>>>=a,i-=a,a=s>>>16&255,a===0)Y[n++]=s&65535;else if(a&16){w=s&65535,a&=15,a&&(i<a&&(o+=H[r++]<<i,i+=8),w+=o&(1<<a)-1,o>>>=a,i-=a),i<15&&(o+=H[r++]<<i,i+=8,o+=H[r++]<<i,i+=8),s=Pe[o&Ke];r:for(;;){if(a=s>>>24,o>>>=a,i-=a,a=s>>>16&255,a&16){if(E=s&65535,a&=15,i<a&&(o+=H[r++]<<i,i+=8,i<a&&(o+=H[r++]<<i,i+=8)),E+=o&(1<<a)-1,E>Z){e.msg="invalid distance too far back",K.mode=30;break e}if(o>>>=a,i-=a,a=n-ee,E>a){if(a=E-a,a>ue&&K.sane){e.msg="invalid distance too far back",K.mode=30;break e}if(V=0,q=ge,be===0){if(V+=J-a,a<w){w-=a;do Y[n++]=ge[V++];while(--a);V=n-E,q=Y}}else if(be<a){if(V+=J+be-a,a-=be,a<w){w-=a;do Y[n++]=ge[V++];while(--a);if(V=0,be<w){a=be,w-=a;do Y[n++]=ge[V++];while(--a);V=n-E,q=Y}}}else if(V+=be-a,a<w){w-=a;do Y[n++]=ge[V++];while(--a);V=n-E,q=Y}for(;w>2;)Y[n++]=q[V++],Y[n++]=q[V++],Y[n++]=q[V++],w-=3;w&&(Y[n++]=q[V++],w>1&&(Y[n++]=q[V++]))}else{V=n-E;do Y[n++]=Y[V++],Y[n++]=Y[V++],Y[n++]=Y[V++],w-=3;while(w>2);w&&(Y[n++]=Y[V++],w>1&&(Y[n++]=Y[V++]))}}else if(a&64){e.msg="invalid distance code",K.mode=30;break e}else{s=Pe[(s&65535)+(o&(1<<a)-1)];continue r}break}}else if(a&64)if(a&32){K.mode=12;break e}else{e.msg="invalid literal/length code",K.mode=30;break e}else{s=Ae[(s&65535)+(o&(1<<a)-1)];continue t}break}}while(r<X&&n<Q);w=i>>3,r-=w,i-=w<<3,o&=(1<<i)-1,e.next_in=r,e.next_out=n,e.avail_in=r<X?5+(X-r):5-(r-X),e.avail_out=n<Q?257+(Q-n):257-(n-Q),K.hold=o,K.bits=i}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var oa=15,Qk=852,Yk=592,Xk=0,gy=1,Zk=2,YL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],XL=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ZL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],JL=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function ji(e,t,r,n,o,i,s,a){let w=a.bits,E=0,V=0,q=0,K=0,H=0,X=0,Y=0,ee=0,Q=0,Z=0,J,ue,be,ge,Ae=null,Pe=0,Ge,Ke=new ar(oa+1),nt=new ar(oa+1),j=null,ot=0,$o,Qo,to;for(E=0;E<=oa;E++)Ke[E]=0;for(V=0;V<n;V++)Ke[t[r+V]]++;for(H=w,K=oa;K>=1&&Ke[K]===0;K--);if(H>K&&(H=K),K===0)return o[i++]=1<<24|64<<16|0,o[i++]=1<<24|64<<16|0,a.bits=1,0;for(q=1;q<K&&Ke[q]===0;q++);for(H<q&&(H=q),ee=1,E=1;E<=oa;E++)if(ee<<=1,ee-=Ke[E],ee<0)return-1;if(ee>0&&(e===Xk||K!==1))return-1;for(nt[1]=0,E=1;E<oa;E++)nt[E+1]=nt[E]+Ke[E];for(V=0;V<n;V++)t[r+V]!==0&&(s[nt[t[r+V]]++]=V);e===Xk?(Ae=j=s,Ge=19):e===gy?(Ae=YL,Pe-=257,j=XL,ot-=257,Ge=256):(Ae=ZL,j=JL,Ge=-1),Z=0,V=0,E=q,ge=i,X=H,Y=0,be=-1,Q=1<<H;let Yo=Q-1;if(e===gy&&Q>Qk||e===Zk&&Q>Yk)return 1;for(;;){$o=E-Y,s[V]<Ge?(Qo=0,to=s[V]):s[V]>Ge?(Qo=j[ot+s[V]],to=Ae[Pe+s[V]]):(Qo=32+64,to=0),J=1<<E-Y,ue=1<<X,q=ue;do ue-=J,o[ge+(Z>>Y)+ue]=$o<<24|Qo<<16|to|0;while(ue!==0);for(J=1<<E-1;Z&J;)J>>=1;if(J!==0?(Z&=J-1,Z+=J):Z=0,V++,--Ke[E]===0){if(E===K)break;E=t[r+s[V]]}if(E>H&&(Z&Yo)!==be){for(Y===0&&(Y=H),ge+=q,X=E-Y,ee=1<<X;X+Y<K&&(ee-=Ke[X+Y],!(ee<=0));)X++,ee<<=1;if(Q+=1<<X,e===gy&&Q>Qk||e===Zk&&Q>Yk)return 1;be=Z&Yo,o[be]=H<<24|X<<16|ge-i|0}}return Z!==0&&(o[ge+Z]=E-Y<<24|64<<16|0),a.bits=H,0}var eF=0,EI=1,SI=2,Jk=4,tF=5,xm=6,Hi=0,rF=1,nF=2,zr=-2,kI=-3,Ty=-4,oF=-5,eI=8,II=1,tI=2,rI=3,nI=4,oI=5,iI=6,sI=7,aI=8,lI=9,cI=10,Em=11,Xn=12,yy=13,uI=14,by=15,dI=16,mI=17,pI=18,fI=19,Tm=20,wm=21,hI=22,gI=23,yI=24,bI=25,_I=26,_y=27,vI=28,xI=29,tt=30,wy=31,iF=32,sF=852,aF=592,lF=15,cF=lF;function TI(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function uF(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ar(320),this.work=new ar(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function DI(e){if(!e||!e.state)return zr;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=II,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new wl(sF),t.distcode=t.distdyn=new wl(aF),t.sane=1,t.back=-1,Hi}function CI(e){if(!e||!e.state)return zr;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,DI(e)}function AI(e,t){let r;if(!e||!e.state)return zr;let n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?zr:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,CI(e))}function RI(e,t){if(!e)return zr;let r=new uF;e.state=r,r.window=null;let n=AI(e,t);return n!==Hi&&(e.state=null),n}function dF(e){return RI(e,cF)}var wI=!0,vy,xy;function mF(e){if(wI){let t;for(vy=new wl(512),xy=new wl(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ji(EI,e.lens,0,288,vy,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ji(SI,e.lens,0,32,xy,0,e.work,{bits:5}),wI=!1}e.lencode=vy,e.lenbits=9,e.distcode=xy,e.distbits=5}function PI(e,t,r,n){let o,i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new sr(i.wsize)),n>=i.wsize?(ir(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),ir(i.window,t,r-n,o,i.wnext),n-=o,n?(ir(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function pF(e,t){let r,n,o,i,s,a,w,E,V,q,K,H,X,Y=0,ee,Q,Z,J,ue,be,ge,Ae,Pe=new sr(4),Ge,Ke,nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return zr;let j=e.state;j.mode===Xn&&(j.mode=yy),i=e.next_out,n=e.output,a=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,w=j.hold,E=j.bits,V=s,q=a,Ae=Hi;e:for(;;)switch(j.mode){case II:if(j.wrap===0){j.mode=yy;break}for(;E<16;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(j.wrap&2&&w===35615){j.check=0,Pe[0]=w&255,Pe[1]=w>>>8&255,j.check=vt(j.check,Pe,2,0),w=0,E=0,j.mode=tI;break}if(j.flags=0,j.head&&(j.head.done=!1),!(j.wrap&1)||(((w&255)<<8)+(w>>8))%31){e.msg="incorrect header check",j.mode=tt;break}if((w&15)!==eI){e.msg="unknown compression method",j.mode=tt;break}if(w>>>=4,E-=4,ge=(w&15)+8,j.wbits===0)j.wbits=ge;else if(ge>j.wbits){e.msg="invalid window size",j.mode=tt;break}j.dmax=1<<ge,e.adler=j.check=1,j.mode=w&512?cI:Xn,w=0,E=0;break;case tI:for(;E<16;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(j.flags=w,(j.flags&255)!==eI){e.msg="unknown compression method",j.mode=tt;break}if(j.flags&57344){e.msg="unknown header flags set",j.mode=tt;break}j.head&&(j.head.text=w>>8&1),j.flags&512&&(Pe[0]=w&255,Pe[1]=w>>>8&255,j.check=vt(j.check,Pe,2,0)),w=0,E=0,j.mode=rI;case rI:for(;E<32;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}j.head&&(j.head.time=w),j.flags&512&&(Pe[0]=w&255,Pe[1]=w>>>8&255,Pe[2]=w>>>16&255,Pe[3]=w>>>24&255,j.check=vt(j.check,Pe,4,0)),w=0,E=0,j.mode=nI;case nI:for(;E<16;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}j.head&&(j.head.xflags=w&255,j.head.os=w>>8),j.flags&512&&(Pe[0]=w&255,Pe[1]=w>>>8&255,j.check=vt(j.check,Pe,2,0)),w=0,E=0,j.mode=oI;case oI:if(j.flags&1024){for(;E<16;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}j.length=w,j.head&&(j.head.extra_len=w),j.flags&512&&(Pe[0]=w&255,Pe[1]=w>>>8&255,j.check=vt(j.check,Pe,2,0)),w=0,E=0}else j.head&&(j.head.extra=null);j.mode=iI;case iI:if(j.flags&1024&&(K=j.length,K>s&&(K=s),K&&(j.head&&(ge=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),ir(j.head.extra,r,o,K,ge)),j.flags&512&&(j.check=vt(j.check,r,K,o)),s-=K,o+=K,j.length-=K),j.length))break e;j.length=0,j.mode=sI;case sI:if(j.flags&2048){if(s===0)break e;K=0;do ge=r[o+K++],j.head&&ge&&j.length<65536&&(j.head.name+=String.fromCharCode(ge));while(ge&&K<s);if(j.flags&512&&(j.check=vt(j.check,r,K,o)),s-=K,o+=K,ge)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=aI;case aI:if(j.flags&4096){if(s===0)break e;K=0;do ge=r[o+K++],j.head&&ge&&j.length<65536&&(j.head.comment+=String.fromCharCode(ge));while(ge&&K<s);if(j.flags&512&&(j.check=vt(j.check,r,K,o)),s-=K,o+=K,ge)break e}else j.head&&(j.head.comment=null);j.mode=lI;case lI:if(j.flags&512){for(;E<16;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(w!==(j.check&65535)){e.msg="header crc mismatch",j.mode=tt;break}w=0,E=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),e.adler=j.check=0,j.mode=Xn;break;case cI:for(;E<32;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}e.adler=j.check=TI(w),w=0,E=0,j.mode=Em;case Em:if(j.havedict===0)return e.next_out=i,e.avail_out=a,e.next_in=o,e.avail_in=s,j.hold=w,j.bits=E,nF;e.adler=j.check=1,j.mode=Xn;case Xn:if(t===tF||t===xm)break e;case yy:if(j.last){w>>>=E&7,E-=E&7,j.mode=_y;break}for(;E<3;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}switch(j.last=w&1,w>>>=1,E-=1,w&3){case 0:j.mode=uI;break;case 1:if(mF(j),j.mode=Tm,t===xm){w>>>=2,E-=2;break e}break;case 2:j.mode=mI;break;case 3:e.msg="invalid block type",j.mode=tt}w>>>=2,E-=2;break;case uI:for(w>>>=E&7,E-=E&7;E<32;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if((w&65535)!==(w>>>16^65535)){e.msg="invalid stored block lengths",j.mode=tt;break}if(j.length=w&65535,w=0,E=0,j.mode=by,t===xm)break e;case by:j.mode=dI;case dI:if(K=j.length,K){if(K>s&&(K=s),K>a&&(K=a),K===0)break e;ir(n,r,o,K,i),s-=K,o+=K,a-=K,i+=K,j.length-=K;break}j.mode=Xn;break;case mI:for(;E<14;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(j.nlen=(w&31)+257,w>>>=5,E-=5,j.ndist=(w&31)+1,w>>>=5,E-=5,j.ncode=(w&15)+4,w>>>=4,E-=4,j.nlen>286||j.ndist>30){e.msg="too many length or distance symbols",j.mode=tt;break}j.have=0,j.mode=pI;case pI:for(;j.have<j.ncode;){for(;E<3;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}j.lens[nt[j.have++]]=w&7,w>>>=3,E-=3}for(;j.have<19;)j.lens[nt[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,Ge={bits:j.lenbits},Ae=ji(eF,j.lens,0,19,j.lencode,0,j.work,Ge),j.lenbits=Ge.bits,Ae){e.msg="invalid code lengths set",j.mode=tt;break}j.have=0,j.mode=fI;case fI:for(;j.have<j.nlen+j.ndist;){for(;Y=j.lencode[w&(1<<j.lenbits)-1],ee=Y>>>24,Q=Y>>>16&255,Z=Y&65535,!(ee<=E);){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(Z<16)w>>>=ee,E-=ee,j.lens[j.have++]=Z;else{if(Z===16){for(Ke=ee+2;E<Ke;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(w>>>=ee,E-=ee,j.have===0){e.msg="invalid bit length repeat",j.mode=tt;break}ge=j.lens[j.have-1],K=3+(w&3),w>>>=2,E-=2}else if(Z===17){for(Ke=ee+3;E<Ke;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}w>>>=ee,E-=ee,ge=0,K=3+(w&7),w>>>=3,E-=3}else{for(Ke=ee+7;E<Ke;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}w>>>=ee,E-=ee,ge=0,K=11+(w&127),w>>>=7,E-=7}if(j.have+K>j.nlen+j.ndist){e.msg="invalid bit length repeat",j.mode=tt;break}for(;K--;)j.lens[j.have++]=ge}}if(j.mode===tt)break;if(j.lens[256]===0){e.msg="invalid code -- missing end-of-block",j.mode=tt;break}if(j.lenbits=9,Ge={bits:j.lenbits},Ae=ji(EI,j.lens,0,j.nlen,j.lencode,0,j.work,Ge),j.lenbits=Ge.bits,Ae){e.msg="invalid literal/lengths set",j.mode=tt;break}if(j.distbits=6,j.distcode=j.distdyn,Ge={bits:j.distbits},Ae=ji(SI,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,Ge),j.distbits=Ge.bits,Ae){e.msg="invalid distances set",j.mode=tt;break}if(j.mode=Tm,t===xm)break e;case Tm:j.mode=wm;case wm:if(s>=6&&a>=258){e.next_out=i,e.avail_out=a,e.next_in=o,e.avail_in=s,j.hold=w,j.bits=E,hy(e,q),i=e.next_out,n=e.output,a=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,w=j.hold,E=j.bits,j.mode===Xn&&(j.back=-1);break}for(j.back=0;Y=j.lencode[w&(1<<j.lenbits)-1],ee=Y>>>24,Q=Y>>>16&255,Z=Y&65535,!(ee<=E);){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(Q&&!(Q&240)){for(J=ee,ue=Q,be=Z;Y=j.lencode[be+((w&(1<<J+ue)-1)>>J)],ee=Y>>>24,Q=Y>>>16&255,Z=Y&65535,!(J+ee<=E);){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}w>>>=J,E-=J,j.back+=J}if(w>>>=ee,E-=ee,j.back+=ee,j.length=Z,Q===0){j.mode=_I;break}if(Q&32){j.back=-1,j.mode=Xn;break}if(Q&64){e.msg="invalid literal/length code",j.mode=tt;break}j.extra=Q&15,j.mode=hI;case hI:if(j.extra){for(Ke=j.extra;E<Ke;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}j.length+=w&(1<<j.extra)-1,w>>>=j.extra,E-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=gI;case gI:for(;Y=j.distcode[w&(1<<j.distbits)-1],ee=Y>>>24,Q=Y>>>16&255,Z=Y&65535,!(ee<=E);){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(!(Q&240)){for(J=ee,ue=Q,be=Z;Y=j.distcode[be+((w&(1<<J+ue)-1)>>J)],ee=Y>>>24,Q=Y>>>16&255,Z=Y&65535,!(J+ee<=E);){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}w>>>=J,E-=J,j.back+=J}if(w>>>=ee,E-=ee,j.back+=ee,Q&64){e.msg="invalid distance code",j.mode=tt;break}j.offset=Z,j.extra=Q&15,j.mode=yI;case yI:if(j.extra){for(Ke=j.extra;E<Ke;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}j.offset+=w&(1<<j.extra)-1,w>>>=j.extra,E-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){e.msg="invalid distance too far back",j.mode=tt;break}j.mode=bI;case bI:if(a===0)break e;if(K=q-a,j.offset>K){if(K=j.offset-K,K>j.whave&&j.sane){e.msg="invalid distance too far back",j.mode=tt;break}K>j.wnext?(K-=j.wnext,H=j.wsize-K):H=j.wnext-K,K>j.length&&(K=j.length),X=j.window}else X=n,H=i-j.offset,K=j.length;K>a&&(K=a),a-=K,j.length-=K;do n[i++]=X[H++];while(--K);j.length===0&&(j.mode=wm);break;case _I:if(a===0)break e;n[i++]=j.length,a--,j.mode=wm;break;case _y:if(j.wrap){for(;E<32;){if(s===0)break e;s--,w|=r[o++]<<E,E+=8}if(q-=a,e.total_out+=q,j.total+=q,q&&(e.adler=j.check=j.flags?vt(j.check,n,q,i-q):No(j.check,n,q,i-q)),q=a,(j.flags?w:TI(w))!==j.check){e.msg="incorrect data check",j.mode=tt;break}w=0,E=0}j.mode=vI;case vI:if(j.wrap&&j.flags){for(;E<32;){if(s===0)break e;s--,w+=r[o++]<<E,E+=8}if(w!==(j.total&4294967295)){e.msg="incorrect length check",j.mode=tt;break}w=0,E=0}j.mode=xI;case xI:Ae=rF;break e;case tt:Ae=kI;break e;case wy:return Ty;case iF:default:return zr}return e.next_out=i,e.avail_out=a,e.next_in=o,e.avail_in=s,j.hold=w,j.bits=E,(j.wsize||q!==e.avail_out&&j.mode<tt&&(j.mode<_y||t!==Jk))&&PI(e,e.output,e.next_out,q-e.avail_out)?(j.mode=wy,Ty):(V-=e.avail_in,q-=e.avail_out,e.total_in+=V,e.total_out+=q,j.total+=q,j.wrap&&q&&(e.adler=j.check=j.flags?vt(j.check,n,q,e.next_out-q):No(j.check,n,q,e.next_out-q)),e.data_type=j.bits+(j.last?64:0)+(j.mode===Xn?128:0)+(j.mode===Tm||j.mode===by?256:0),(V===0&&q===0||t===Jk)&&Ae===Hi&&(Ae=oF),Ae)}function fF(e){if(!e||!e.state)return zr;let t=e.state;return t.window&&(t.window=null),e.state=null,Hi}function hF(e,t){if(!e||!e.state)return zr;let r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Hi):zr}function gF(e,t){let r=t.length,n;if(!e||!e.state)return zr;let o=e.state;return o.wrap!==0&&o.mode!==Em?zr:o.mode===Em&&(n=1,n=No(n,t,r,0),n!==o.check)?kI:PI(e,t,r,r)?(o.mode=wy,Ty):(o.havedict=1,Hi)}var Gi={inflateReset:CI,inflateReset2:AI,inflateResetKeep:DI,inflateInit:dF,inflateInit2:RI,inflate:pF,inflateEnd:fF,inflateGetHeader:hF,inflateSetDictionary:gF,inflateInfo:"pako inflate (from Nodeca project)"};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var rt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Ey(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var NI=Object.prototype.toString;function Wi(e){if(!(this instanceof Wi))return new Wi(e);this.options=Xs({chunkSize:16384,windowBits:0,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kl,this.strm.avail_out=0;let r=Gi.inflateInit2(this.strm,t.windowBits);if(r!==rt.Z_OK)throw new Error(xn[r]);if(this.header=new Ey,Gi.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Sl(t.dictionary):NI.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Gi.inflateSetDictionary(this.strm,t.dictionary),r!==rt.Z_OK)))throw new Error(xn[r])}Wi.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,o=this.options.dictionary,i,s,a,w,E,V=!1;if(this.ended)return!1;s=t===~~t?t:t===!0?rt.Z_FINISH:rt.Z_NO_FLUSH,typeof e=="string"?r.input=mk(e):NI.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new sr(n),r.next_out=0,r.avail_out=n),i=Gi.inflate(r,rt.Z_NO_FLUSH),i===rt.Z_NEED_DICT&&o&&(i=Gi.inflateSetDictionary(this.strm,o)),i===rt.Z_BUF_ERROR&&V===!0&&(i=rt.Z_OK,V=!1),i!==rt.Z_STREAM_END&&i!==rt.Z_OK)return this.onEnd(i),this.ended=!0,!1;r.next_out&&(r.avail_out===0||i===rt.Z_STREAM_END||r.avail_in===0&&(s===rt.Z_FINISH||s===rt.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=fk(r.output,r.next_out),w=r.next_out-a,E=pk(r.output,a),r.next_out=w,r.avail_out=n-w,w&&ir(r.output,r.output,a,w,0),this.onData(E)):this.onData(Li(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(V=!0)}while((r.avail_in>0||r.avail_out===0)&&i!==rt.Z_STREAM_END);return i===rt.Z_STREAM_END&&(s=rt.Z_FINISH),s===rt.Z_FINISH?(i=Gi.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===rt.Z_OK):(s===rt.Z_SYNC_FLUSH&&(this.onEnd(rt.Z_OK),r.avail_out=0),!0)};Wi.prototype.onData=function(e){this.chunks.push(e)};Wi.prototype.onEnd=function(e){e===rt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mm(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Sy(e,t){let r=new Wi(t);if(r.push(e,!0),r.err)throw r.msg||xn[r.err];return r.result}function yF(e,t){return t=t||{},t.raw=!0,Sy(e,t)}var MI={Inflate:Wi,inflate:Sy,inflateRaw:yF,ungzip:Sy};var OI={};Xs(OI,$k,MI,rt);var LI=OI;var bF="uint8array",_F="\b\0";function $i(e,t){_e.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}de.inherits($i,_e);$i.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(de.transformTo(bF,e.data),!1)};$i.prototype.flush=function(){_e.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};$i.prototype.cleanUp=function(){_e.prototype.cleanUp.call(this),this._pako=null};$i.prototype._createPako=function(){this._pako=new LI[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});let e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}};var vF=function(e){return new $i("Deflate",e)},xF=function(){return new $i("Inflate",{})},FI={compressWorker:vF,uncompressWorker:xF,magic:_F};var TF={magic:"\0\0",compressWorker:function(){return new _e("STORE compression")},uncompressWorker:function(){return new _e("STORE decompression")}},wF=FI,Qi={STORE:TF,DEFLATE:wF};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var qt={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK\x07",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\x07\b"};var Qe=function(e,t){let r="",n;for(n=0;n<t;n++)r+=String.fromCharCode(e&255),e=e>>>8;return r},EF=function(e,t){let r=e;return e||(r=t?16893:33204),(r&65535)<<16},SF=function(e){return(e||0)&63},BI=function(e,t,r,n,o,i){let s=e.file,a=e.compression,w=i!==Vt.utf8encode,E=de.transformTo("string",i(s.name)),V=de.transformTo("string",Vt.utf8encode(s.name)),q=s.comment,K=de.transformTo("string",i(q)),H=de.transformTo("string",Vt.utf8encode(q)),X=V.length!==s.name.length,Y=H.length!==q.length,ee=s.dir,Q=s.date,Z,J,ue="",be="",ge="",Ae={crc32:0,compressedSize:0,uncompressedSize:0};(!t||r)&&(Ae.crc32=e.crc32,Ae.compressedSize=e.compressedSize,Ae.uncompressedSize=e.uncompressedSize);let Pe=0;t&&(Pe|=8),!w&&(X||Y)&&(Pe|=2048);let Ge=0,Ke=0;ee&&(Ge|=16),o==="UNIX"?(Ke=798,Ge|=EF(s.unixPermissions,ee)):(Ke=20,Ge|=SF(s.dosPermissions)),Z=Q.getUTCHours(),Z=Z<<6,Z=Z|Q.getUTCMinutes(),Z=Z<<5,Z=Z|Q.getUTCSeconds()/2,J=Q.getUTCFullYear()-1980,J=J<<4,J=J|Q.getUTCMonth()+1,J=J<<5,J=J|Q.getUTCDate(),X&&(be=Qe(1,1)+Qe($n(E),4)+V,ue+="up"+Qe(be.length,2)+be),Y&&(ge=Qe(1,1)+Qe($n(K),4)+H,ue+="uc"+Qe(ge.length,2)+ge);let nt="";nt+=`
\0`,nt+=Qe(Pe,2),nt+=a.magic,nt+=Qe(Z,2),nt+=Qe(J,2),nt+=Qe(Ae.crc32,4),nt+=Qe(Ae.compressedSize,4),nt+=Qe(Ae.uncompressedSize,4),nt+=Qe(E.length,2),nt+=Qe(ue.length,2);let j=qt.LOCAL_FILE_HEADER+nt+E+ue,ot=qt.CENTRAL_FILE_HEADER+Qe(Ke,2)+nt+Qe(K.length,2)+"\0\0\0\0"+Qe(Ge,4)+Qe(n,4)+E+ue+K;return{fileRecord:j,dirRecord:ot}},kF=function(e,t,r,n,o){let i="",s=de.transformTo("string",o(n));return i=qt.CENTRAL_DIRECTORY_END+"\0\0\0\0"+Qe(e,2)+Qe(e,2)+Qe(t,4)+Qe(r,4)+Qe(s.length,2)+s,i},IF=function(e){return qt.DATA_DESCRIPTOR+Qe(e.crc32,4)+Qe(e.compressedSize,4)+Qe(e.uncompressedSize,4)};function en(e,t,r,n){_e.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}de.inherits(en,_e);en.prototype.push=function(e){let t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,_e.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))};en.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;let t=this.streamFiles&&!e.file.dir;if(t){let r=BI(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0};en.prototype.closedSource=function(e){this.accumulate=!1;let t=this.streamFiles&&!e.file.dir,r=BI(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:IF(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};en.prototype.flush=function(){let e=this.bytesWritten;for(let n=0;n<this.dirRecords.length;n++)this.push({data:this.dirRecords[n],meta:{percent:100}});let t=this.bytesWritten-e,r=kF(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})};en.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};en.prototype.registerPrevious=function(e){this._sources.push(e);let t=this;return e.on("data",function(r){t.processChunk(r)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(r){t.error(r)}),this};en.prototype.resume=function(){if(!_e.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};en.prototype.error=function(e){let t=this._sources;if(!_e.prototype.error.call(this,e))return!1;for(let r=0;r<t.length;r++)try{t[r].error(e)}catch{}return!0};en.prototype.lock=function(){_e.prototype.lock.call(this);let e=this._sources;for(let t=0;t<e.length;t++)e[t].lock()};var UI=en;var DF=function(e,t){let r=e||t,n=Qi[r];if(!n)throw new Error(r+" is not a valid compression method !");return n};function CF(e,t,r){let n=new UI(t.streamFiles,r,t.platform,t.encodeFileName),o=0;try{e.forEach(function(i,s){o++;let a=DF(s.options.compression,t.compression),w=s.options.compressionOptions||t.compressionOptions||{},E=s.dir,V=s.date;s._compressWorker(a,w).withStreamInfo("file",{name:i,dir:E,date:V,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(n)}),n.entriesCount=o}catch(i){n.error(i)}return n}var VI={generateWorker:CF};var qI=function(e,t,r){let n=Ur(t),o,i=de.extend(r||{},xl);i.date=i.date||new Date,i.compression!==null&&(i.compression=i.compression.toUpperCase()),typeof i.unixPermissions=="string"&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&i.unixPermissions&16384&&(i.dir=!0),i.dosPermissions&&i.dosPermissions&16&&(i.dir=!0),i.dir&&(e=KI(e)),i.createFolders&&(o=AF(e))&&jI.call(this,o,!0);let s=n==="string"&&i.binary===!1&&i.base64===!1;(!r||typeof r.binary>"u")&&(i.binary=!s),(t instanceof Qn&&t.uncompressedSize===0||i.dir||!t||t.length===0)&&(i.base64=!1,i.binary=!0,t="",i.compression="STORE",n="string");let w=null;t instanceof Qn||t instanceof _e?w=t:w=de.prepareContent(e,t,i.binary,i.optimizedBinaryString,i.base64);let E=new ck(e,w,i);this.files[e]=E},AF=function(e){e.slice(-1)==="/"&&(e=e.substring(0,e.length-1));let t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},KI=function(e){return e.slice(-1)!=="/"&&(e+="/"),e},jI=function(e,t){return t=typeof t<"u"?t:xl.createFolders,e=KI(e),this.files[e]||qI.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function zI(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var RF={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){let t,r,n;for(t in this.files)n=this.files[t],r=t.slice(this.root.length,t.length),r&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){let t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(arguments.length===1)if(zI(e)){let n=e;return this.filter(function(o,i){return!i.dir&&n.test(o)})}else{let n=this.files[this.root+e];return n&&!n.dir?n:null}else e=this.root+e,qI.call(this,e,t,r);return this},folder:function(e){if(!e)return this;if(zI(e))return this.filter(function(o,i){return i.dir&&e.test(o)});let t=this.root+e,r=jI.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;let t=this.files[e];if(t||(e.slice(-1)!=="/"&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else{let r=this.filter(function(n,o){return o.name.slice(0,e.length)===e});for(let n=0;n<r.length;n++)delete this.files[r[n].name]}return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){let t,r={};try{if(r=de.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Vt.utf8encode}),r.type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),r.type==="binarystring"&&(r.type="string"),!r.type)throw new Error("No output type specified.");(r.platform==="darwin"||r.platform==="freebsd"||r.platform==="linux"||r.platform==="sunos")&&(r.platform="UNIX"),r.platform==="win32"&&(r.platform="DOS");let n=r.comment||this.comment||"";t=VI.generateWorker(this,r,n)}catch(n){t=new _e("error"),t.error(n)}return new cm(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)}},HI=RF;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function GI(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}GI.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){let t=0,r;for(this.checkOffset(e),r=this.index+e-1;r>=this.index;r--)t=(t<<8)+this.byteAt(r);return this.index+=e,t},readString:function(e){return de.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){let e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1))}};var ky=GI;function ia(e){ky.call(this,e);for(let t=0;t<this.data.length;t++)e[t]=e[t]&255}de.inherits(ia,ky);ia.prototype.byteAt=function(e){return this.data[this.zero+e]};ia.prototype.lastIndexOfSignature=function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3);for(let i=this.length-4;i>=0;--i)if(this.data[i]===t&&this.data[i+1]===r&&this.data[i+2]===n&&this.data[i+3]===o)return i-this.zero;return-1};ia.prototype.readAndCheckSignature=function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&r===i[1]&&n===i[2]&&o===i[3]};ia.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];let t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var Iy=ia;function Dy(e){Iy.call(this,e)}de.inherits(Dy,Iy);Dy.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);let t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var WI=Dy;function sa(e){return new WI(de.transformTo("uint8array",e))}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var PF=0,NF=3,MF=function(e){for(let t in Qi)if(Object.prototype.hasOwnProperty.call(Qi,t)&&Qi[t].magic===e)return Qi[t];return null};function $I(e,t){this.options=e,this.loadOptions=t}$I.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(e){e.skip(22),this.fileNameLength=e.readInt(2);let t=e.readInt(2);if(this.fileName=e.readData(this.fileNameLength),e.skip(t),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");let r=MF(this.compressionMethod);if(r===null)throw new Error("Corrupted zip : compression "+de.pretty(this.compressionMethod)+" unknown (inner file : "+de.transformTo("string",this.fileName)+")");this.decompressed=new Qn(this.compressedSize,this.uncompressedSize,this.crc32,r,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);let t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;let e=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),e===PF&&(this.dosPermissions=this.externalFileAttributes&63),e===NF&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(!this.extraFields[1])return;let e=sa(this.extraFields[1].value);this.uncompressedSize===de.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===de.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===de.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===de.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))},readExtraFields:function(e){let t=e.index+this.extraFieldsLength,r,n,o;for(this.extraFields||(this.extraFields={});e.index+4<t;)r=e.readInt(2),n=e.readInt(2),o=e.readData(n),this.extraFields[r]={id:r,length:n,value:o};e.setIndex(t)},handleUTF8:function(){if(this.useUTF8())this.fileNameStr=Vt.utf8decode(this.fileName),this.fileCommentStr=Vt.utf8decode(this.fileComment);else{let e=this.findExtraFieldUnicodePath();if(e!==null)this.fileNameStr=e;else{let r=de.transformTo("uint8array",this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}let t=this.findExtraFieldUnicodeComment();if(t!==null)this.fileCommentStr=t;else{let r=de.transformTo("uint8array",this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){let e=this.extraFields[28789];if(e){let t=sa(e.value);return t.readInt(1)!==1||$n(this.fileName)!==t.readInt(4)?null:Vt.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){let e=this.extraFields[25461];if(e){let t=sa(e.value);return t.readInt(1)!==1||$n(this.fileComment)!==t.readInt(4)?null:Vt.utf8decode(t.readData(e.length-5))}return null}};var QI=$I;function YI(e){this.files=[],this.loadOptions=e}YI.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;let t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+de.pretty(t)+", expected "+de.pretty(e)+")")}},isSignature:function(e,t){let r=this.reader.index;this.reader.setIndex(e);let o=this.reader.readString(4)===t;return this.reader.setIndex(r),o},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);let e=this.reader.readData(this.zipCommentLength),t=de.transformTo("uint8array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};let e=this.zip64EndOfCentralSize-44,t=0,r,n,o;for(;t<e;)r=this.reader.readInt(2),n=this.reader.readInt(4),o=this.reader.readData(n),this.zip64ExtensibleData[r]={id:r,length:n,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){let e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(qt.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){let e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(qt.CENTRAL_FILE_HEADER);)e=new QI({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){let e=this.reader.lastIndexOfSignature(qt.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,qt.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);let t=e;if(this.checkSignature(qt.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===de.MAX_VALUE_16BITS||this.diskWithCentralDirStart===de.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===de.MAX_VALUE_16BITS||this.centralDirRecords===de.MAX_VALUE_16BITS||this.centralDirSize===de.MAX_VALUE_32BITS||this.centralDirOffset===de.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(qt.ZIP64_CENTRAL_DIRECTORY_LOCATOR),e<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(qt.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,qt.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(qt.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(qt.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}let r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);let n=t-r;if(n>0)this.isSignature(t,qt.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=sa(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var XI=YI;function OF(e){return new Promise(function(t,r){let n=e.decompressed.getContentWorker().pipe(new um);n.on("error",function(o){r(o)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}function ZI(e,t){let r=this;return t=de.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:Vt.utf8decode}),de.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(n){let o=new XI(t);return o.load(n),o}).then(function(o){let i=[Promise.resolve(o)],s=o.files;if(t.checkCRC32)for(let a=0;a<s.length;a++)i.push(OF(s[a]));return Promise.all(i)}).then(function(o){let i=o.shift(),s=i.files;for(let a=0;a<s.length;a++){let w=s[a],E=w.fileNameStr,V=de.resolve(w.fileNameStr);r.file(V,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:t.createFolders}),w.dir||(r.file(V).unsafeOriginalName=E)}return i.zipComment.length&&(r.comment=i.zipComment),r})}function Sn(){if(!(this instanceof Sn))return new Sn;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){let e=new Sn;for(let t in this)typeof this[t]!="function"&&(e[t]=this[t]);return e}}Sn.prototype=HI;Sn.prototype.loadAsync=ZI;Sn.defaults=xl;Sn.version="3.10.1";Sn.loadAsync=function(e,t){return new Sn().loadAsync(e,t)};var Sm=Sn;l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Fl(e,t,r){let n=Kg[e.ext]?[e,...Kg[e.ext]]:[e];return r.fileTypeMismatch?{officeDocumentReport:null,fileTypeMismatch:n.find(i=>t.toLowerCase().endsWith(i.ext.toLowerCase()))?null:{filenameExtension:t.split(".").slice(-1)[0],byteContentDerivedExtensions:n.map(i=>i.ext)},fileTypes:n,tampered:null,files:[],passwordRequired:!1}:{officeDocumentReport:null,fileTypeMismatch:null,fileTypes:n,tampered:null,files:[],passwordRequired:!1}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var LF=z.object().schema({call:z.string().equals("analyze_macro"),vba_stomping_detection:z.number(),max_ole_size:z.number(),is_old_format:z.boolean()}),KHt=oe(LF),FF=z.object().schema({call:z.string().equals("analyze_zip"),passwords:z.array().items(z.string()),vba_stomping_detection:z.number(),max_level:z.number(),max_zip_size:z.number(),max_ole_size:z.number()}),jHt=oe(FF);function JI(e){return{call:"analyze_zip",...e}}function eD(e){return{call:"analyze_macro",...e}}var tD=te("m.file_analyzer.background.macro_analyzer"),aa=class{constructor(){}static get analyzer(){return aa.analyzeFile}static set analyzer(t){aa.analyzeFile=t}static async analyzeZip(t,r,n,o){let i=await aa.analyzeFile(t,JI({passwords:r,max_level:n,max_zip_size:o,max_ole_size:209715200,vba_stomping_detection:1}));return i.success,i}static async analyzeMacro(t,r){let n=await aa.analyzeFile(t,eD({is_old_format:r,max_ole_size:209715200,vba_stomping_detection:1}));return n.success,n}},kn=aa;ie(kn,"analyzeFile");async function rD(e){let t=await $(()=>e.async("uint8array"));if(!t.success)return tD.error("Unable to read bytes from macro file",t.error),null;if(t.value.length>209715200)return{Stomping:[],Purging:[],Suspicious:[["Large VBA file","This file has an unusually large VBA Macro section"]],IOC:[],AutoExec:[],Result:[["Macro","Found"],["Malicious","true"]]};let r=await kn.analyzeMacro(t.value,!1);return r.success?r.value:(tD.error("Failed to analyze macros",r.error),null)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var BF=["xls","doc","ppt","office"],UF=BF;function la(e){return UF.includes(e)}var VF=["xl","word","ppt"],nD=VF;var zF=new Set(["doc","docm","docx","odp","ods","odt","pot","pps","ppsx","ppt","pptm","pptx","rtf","xls","xlsm","xlsx"]),qF=new Set(["doc","docm","docx","odp","ods","odt","pot","potm","potx","pps","ppsx","ppsm","ppt","pptm","pptx","rtf","xls","xlsm","xlsx"]);function Cy(e,t){return t==="pdf"?zF.has(e.toLowerCase()):t==="office"?qF.has(e.toLowerCase()):!1}var KF={malicious:5,suspicious:4,partially_scanned:3,safe:2,requires_password:1,none:0};function Uo(e){let t="none";if(e.passwordRequired)return"requires_password";if(e.suspicious)return"suspicious";if(e.files.length>0){let r="none",n=0;for(let o of e.files){let i=Uo({...o,files:[]}),s=KF[i];s>n&&(n=s,r=i)}if(r==="malicious"||r==="suspicious")return r;t="partially_scanned"}return e.tampered?.isTampered?"malicious":e.officeDocumentReport?.descriptor.hasVBAMacro?e.officeDocumentReport.macroThreatReport?.Result?.find(n=>n[0]==="Malicious"&&n[1]==="true")!==void 0?"malicious":"suspicious":e.officeDocumentReport&&!("legacy"in e.officeDocumentReport.descriptor)&&(e.officeDocumentReport.descriptor.externalEntities.length>0||e.officeDocumentReport.descriptor.hasXLMMacro)?"malicious":e.fileTypeMismatch?"suspicious":e.officeDocumentReport?"safe":t}function oD(e){return nD.includes(e)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var jF="vbaProject.bin";function HF(e){switch(e){case"doc":return"word";case"xls":return"xl";case"ppt":return"ppt"}}function iD(e){switch(e){case"word":return"doc";case"xl":return"xls";case"ppt":return"ppt"}}function km(e){return`${HF(e.documentType)}${e.filePathSeparator}${jF}`}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function sD(e){let t=[];return e.split("<Override").slice(1).forEach(n=>{let o=n.match(/PartName="([^"]+)"/),i=n.match(/ContentType="([^"]+)"/);o&&i&&t.push({PartName:o[1],ContentType:i[1]})}),t}function aD(e){let t=[];return e.split("<Default").slice(1).forEach(n=>{let o=n.match(/Extension="([^"]+)"/),i=n.match(/ContentType="([^"]+)"/);o&&i&&t.push({Extension:o[1],ContentType:i[1]})}),t}function Im(e,t,r=""){let n=r&&e.includes(r)?`<${t} ${r}>`:`<${t}>`,o=`</${t}>`,i=e.indexOf(n)+n.length,s=e.indexOf(o);return i>-1&&s>-1?e.substring(i,s):""}function lD(e){let t=[];return e.split("<Relationship").slice(1).forEach(n=>{let o=n.match(/Id="([^"]+)"/),i=n.match(/Type="([^"]+)"/),s=n.match(/Target="([^"]+)"/),a=n.match(/TargetMode="([^"]+)"/);o&&i&&s&&t.push({Id:o[1],Type:i[1],Target:s[1],TargetMode:a?a[1]:void 0})}),t}function cD(e){return{creator:Im(e,"dc:creator"),modifier:Im(e,"cp:lastModifiedBy"),createdOn:Im(e,"dcterms:created",'xsi:type="dcterms:W3CDTF"'),modifiedOn:Im(e,"dcterms:modified",'xsi:type="dcterms:W3CDTF"')}}var uD="vbaProject.bin",GF="http://schemas.microsoft.com/office/2006/relationships/vbaProject",WF="application/vnd.ms-excel.sheet.binary.macroEnabled.main",$F="application/vnd.ms-excel.intlmacrosheet+xml",QF="xlIntlMacrosheet",YF=["attachedTemplate","externalLink","externalLinkPath","externalReference","frame","officeDocument","oleObject","package","slideUpdateUrl","slideMaster","slide","slideUpdateInfo","subDocument","worksheet"],XF=["/xl/workbook.xml","/word/document.xml","/ppt/presentation.xml","/visio/document.xml","/xl/workbook.bin"];async function dD(e){let t={type:null,seperator:"/",vbaMacro:!1,externalEntities:[],xlmMacro:!1},r=e.files["[Content_Types].xml"];if(r===void 0)return null;let n=await r.async("string"),o=sD(n),i;for(let H of o){if(H.ContentType.endsWith(".main+xml")){if(i)return{isTampered:!0,reason:"Multiple Main Part Found"};i={partName:H.PartName,mime:H.ContentType.replace(".main+xml","")}}H.ContentType.endsWith($F)&&(t.xlmMacro=!0)}if(i===void 0){let H=aD(n);for(let X of H)if(X.Extension==="bin"&&X.ContentType===WF){i={partName:"/xl/workbook.bin",mime:X.ContentType.replace(".main","")};break}if(i===void 0)return null}if(!XF.includes(i.partName))return{isTampered:!0,reason:"Unknown Main Part"};let[,s]=i.partName.split("/");if(oD(s))t.type=iD(s);else return null;let a=Object.keys(e.files).filter(H=>"/"+H===i?.partName||"\\"+H===i?.partName.replaceAll("/","\\"));if(a.length>1)return{isTampered:!0,reason:"Multiple main workbook found."};t.seperator=a[0].includes("\\")?"\\":"/";let w,E=e.files[`docProps${t.seperator}core.xml`];if(E!==void 0){let H=await E.async("string");w=cD(H)}else w={creator:void 0,modifer:void 0,modifiedOn:void 0,cretedOn:void 0};let V=Object.keys(e.files).filter(H=>H.endsWith(".rels")),q=[];for(let H of V){let X=await e.files[H].async("string");q.push(...lD(X))}if(q.length===0)return{isTampered:!0,reason:"Relationship file not found."};let K;for(let H of q){if(H.Type===GF)if(K===void 0)K=H.Target;else return{isTampered:!0,reason:"Multiple VBA Projects Found"};H.TargetMode==="External"&&(ZF(H.Target)||YF.some(X=>H.Type.endsWith(X)))&&t.externalEntities.push({Target:H.Target,Type:H.Type.split("/").pop()}),!t.xlmMacro&&H.Type.endsWith(QF)&&(t.xlmMacro=!0)}return K!==void 0&&K!==uD?{isTampered:!0,reason:"Non standard vba project name"}:(e.files[`${s}${t.seperator}${uD}`]!==void 0&&(t.vbaMacro=!0),{filePathSeparator:t.seperator,hasVBAMacro:t.vbaMacro,hasXLMMacro:t.xlmMacro,documentType:t.type,metadata:{creator:w.creator,modifier:w.modifier,modifiedOn:w.modifiedOn,createdOn:w.createdOn,mime:i.mime},externalEntities:t.externalEntities})}async function mD(e,t,r,n,o){let i=[{ext:WS[o.mime],mime:o.mime}];if(!i)throw new Error(`Unable to find document types for [${r.documentType}]`);let s=km(r),a=r.hasVBAMacro&&n.macroThreatAnalysis?await rD(e.files[s]):null,w={descriptor:r,macroThreatReport:a,isCleanable:n.macroThreatAnalysis,performanceCachePurgable:n.macroThreatAnalysis};if(!n.fileTypeMismatch)return{officeDocumentReport:w,fileTypeMismatch:null,fileTypes:i,tampered:null,files:[],passwordRequired:!1};let E=i.find(V=>t.toLowerCase().endsWith(V.ext.toLowerCase()));return{officeDocumentReport:w,fileTypeMismatch:E?null:{filenameExtension:t.split(".").slice(-1)[0]??"",byteContentDerivedExtensions:i.map(V=>V.ext)},fileTypes:i,tampered:null,files:[],passwordRequired:!1}}function ZF(e){let t=e.match(/file:\/+\\*(.*)/);return t!=null&&t[1].split(/[/\\]/)[0].includes(".")}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Dm(e){let t=new Map;if(e)for(let[r,n]of e)t.set(r,n);return t}async function Ay(e,t,r,n,o){if(t!==void 0){let a=Object.keys(t.files);for(let w of a){let E;if(w.includes("\\")&&(E="\\"),w.includes("/")){if(E==="\\")continue;E="/"}if(w==="META-INF"+E+"mozilla.rsa")return Bl([{ext:"xpi",mime:"application/x-xpinstall"}],r,o);if(w==="META-INF"+E+"MANIFEST.MF")return Bl([{ext:"jar",mime:"application/java-archive"},{ext:"war",mime:"application/x-webarchive"}],r,o);if(w==="WEB-INF"+E+"web.xml")return Bl([{ext:"war",mime:"application/x-webarchive"}],r,o);if(w.startsWith("3D"+E)&&r.endsWith(".model"))return Bl([{ext:"3mf",mime:"model/3mf"}],r,o);if(w==="mimetype"){let V=await t.files.mimetype.async("string"),q;switch(V){case"application/epub+zip":q={ext:"epub",mime:"application/epub+zip"};break;case"application/vnd.oasis.opendocument.text":q={ext:"odt",mime:"application/vnd.oasis.opendocument.text"};break;case"application/vnd.oasis.opendocument.spreadsheet":q={ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};break;case"application/vnd.oasis.opendocument.presentation":q={ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};break;case"application/vnd.oasis.opendocument.graphics":q={ext:"odg",mime:"application/vnd.oasis.opendocument.graphics"};break;default:q=void 0}if(q)return Bl([q],r,o)}}}let i=n.length>0?n:[""],s=o.macroThreatAnalysis?await kn.analyzeZip(e,i,-1,107374182400):je([]);if(!s.success)throw s.error;return JF(s.value,r,o)}function Bl(e,t,r){return{officeDocumentReport:null,fileTypeMismatch:e.find(o=>t.toLowerCase().endsWith(o.ext.toLowerCase()))||!r.fileTypeMismatch?null:{filenameExtension:t.split(".").slice(-1)[0]??"",byteContentDerivedExtensions:e.map(o=>o.ext)},fileTypes:e,tampered:null,files:[],passwordRequired:!1}}function JF(e,t,r){let n=!1,o=[];for(let i of e){if(!i.Result)continue;let s=Dm(i.Result),a=s.get("Ext")?.split(",")??[],w=s.get("Mime")??"",E={fileName:s.get("FileName")??"",passwordRequired:s.get("Error")==="DecryptionFailure",path:s.get("Path")??"",fileTypes:a.map(K=>({ext:K,mime:w})),officeDocumentReport:null,fileTypeMismatch:null,tampered:null};if(e.length===1&&E.passwordRequired&&!E.fileName){n=!0;break}if(!E.fileName||a.length===0||!w)continue;let V=s.get("OfficeDocumentType")??"",q=s.get("Tampered")??"";if(q!=="")E.tampered={isTampered:!0,reason:q};else if(a.includes("exe"))E.suspicious="executable file inside a zip file";else if(V&&la(V))if(s.get("Legacy")==="true")E.officeDocumentReport={descriptor:{legacy:!0,documentType:V,hasVBAMacro:s.get("Macro")==="Found"},macroThreatReport:i,isCleanable:!1,performanceCachePurgable:!1};else{let K=s.get("ExternalEntities.Target")?.split(",")??[],H=s.get("ExternalEntities.Type")?.split(",")??[],X=[];for(let Y=0;Y<Math.min(K.length,H.length);Y++)X.push({Target:K[Y],Type:H[Y]});E.officeDocumentReport={descriptor:{documentType:V,hasVBAMacro:s.get("VBAMacro")==="true",hasXLMMacro:s.get("XLMMacro")==="true",filePathSeparator:"/",metadata:{creator:s.get("Metadata.creator")??"",modifier:s.get("Metadata.modifier")??"",createdOn:s.get("Metadata.createdOn")??"",modifiedOn:s.get("Metadata.modifiedOn")??"",mime:w},externalEntities:X},macroThreatReport:i,isCleanable:!1,performanceCachePurgable:!1}}o.push(E)}return{officeDocumentReport:null,fileTypeMismatch:t.toLowerCase().endsWith("zip")||!r.fileTypeMismatch?null:{filenameExtension:t.split(".").slice(-1)[0]??"",byteContentDerivedExtensions:["zip"]},fileTypes:[{ext:"zip",mime:"application/zip"}],tampered:null,files:o,passwordRequired:n}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function pD(e,t){let r=e.toLowerCase();for(let n=0;n<t.length;n++)if(r.endsWith(`.${t[n].ext.toLowerCase()}`))return!0;return!1}async function fD(e,t,r,n){let o=n.macroThreatAnalysis&&e.length<=209715200,i=o?await kn.analyzeMacro(e,!0):je(null);if(!i.success)throw i.error;let s=i.value,a=s?.Result,w=Dm(a),E=w.has("OfficeDocumentType")?w.get("OfficeDocumentType"):r.ext;if(E===void 0||!la(E))return Fl(r,t,n);let V=[];if(w.has("Ext")&&w.has("Mime")){let Y=w.get("Ext")?.split(",")??[],ee=w.get("Mime")??"";V.push(...Y.map(Q=>({ext:Q,mime:ee})))}if(V.length===1&&V[0].ext==="msi")return Fl(V[0],t,n);let q=o?w.get("Macro")==="Found"?{descriptor:{legacy:!0,documentType:E,hasVBAMacro:!0},macroThreatReport:s,isCleanable:!1,performanceCachePurgable:!1}:{descriptor:{legacy:!0,documentType:E,hasVBAMacro:!1},macroThreatReport:null,isCleanable:!1,performanceCachePurgable:!1}:{descriptor:{legacy:!0,documentType:E,hasVBAMacro:!0},macroThreatReport:{Stomping:[],Purging:[],Suspicious:[["","This file is using a very old format of MS Office which is no longer in circulation and might be malicious"]],IOC:[],AutoExec:[],Result:[]},isCleanable:!1,performanceCachePurgable:!1},K=V.length>0?V:e1,X=(n.fileTypeMismatch?pD(t,K):!0)?null:{filenameExtension:t.split(".").slice(-1)[0],byteContentDerivedExtensions:K.map(Y=>Y.ext)};return{officeDocumentReport:q,fileTypeMismatch:X,fileTypes:K,tampered:null,files:[],passwordRequired:!1}}var e1=[{ext:"ftw",mime:"Microsoft Compound File"},{ext:"xla",mime:"Microsoft Compound File"},{ext:"xlb",mime:"Microsoft Compound File"},{ext:"xlc",mime:"Microsoft Compound File"},{ext:"xlm",mime:"Microsoft Compound File"},{ext:"xls",mime:"Microsoft Compound File"},{ext:"xlt",mime:"Microsoft Compound File"},{ext:"xlw",mime:"Microsoft Compound File"},{ext:"doc",mime:"Microsoft Compound File"},{ext:"dot",mime:"Microsoft Compound File"},{ext:"wiz",mime:"Microsoft Compound File"},{ext:"msg",mime:"Microsoft Compound File"},{ext:"pub",mime:"Microsoft Compound File"},{ext:"wcm",mime:"Microsoft Compound File"},{ext:"wdb",mime:"Microsoft Compound File"},{ext:"wks",mime:"Microsoft Compound File"},{ext:"wps",mime:"Microsoft Compound File"},{ext:"vsd",mime:"Microsoft Compound File"},{ext:"vss",mime:"Microsoft Compound File"},{ext:"vst",mime:"Microsoft Compound File"},{ext:"vsw",mime:"Microsoft Compound File"},{ext:"dtp",mime:"Microsoft Compound File"},{ext:"art",mime:"Microsoft Compound File"},{ext:"ppt",mime:"Microsoft Compound File"},{ext:"otp",mime:"Microsoft Compound File"},{ext:"mst",mime:"Microsoft Compound File"},{ext:"msi",mime:"Microsoft Compound File"},{ext:"msp",mime:"Microsoft Compound File"},{ext:"sdd",mime:"Microsoft Compound File"},{ext:"awd",mime:"Microsoft Compound File"},{ext:"sds",mime:"Microsoft Compound File"},{ext:"sxm",mime:"Microsoft Compound File"},{ext:"mix",mime:"Microsoft Compound File"},{ext:"max",mime:"Microsoft Compound File"},{ext:"sda",mime:"Microsoft Compound File"},{ext:"ptm",mime:"Microsoft Compound File"},{ext:"mas",mime:"Microsoft Compound File"},{ext:"sdc",mime:"Microsoft Compound File"},{ext:"wpd",mime:"Microsoft Compound File"},{ext:"shw",mime:"Microsoft Compound File"},{ext:"ipt",mime:"Microsoft Compound File"},{ext:"fpx",mime:"Microsoft Compound File"},{ext:"obd",mime:"Microsoft Compound File"},{ext:"ppt",mime:"Microsoft Compound File"},{ext:"pps",mime:"Microsoft Compound File"},{ext:"pot",mime:"Microsoft Compound File"},{ext:"ppa",mime:"Microsoft Compound File"},{ext:"pwz",mime:"Microsoft Compound File"},{ext:"mpp",mime:"Microsoft Compound File"},{ext:"ppa",mime:"Microsoft Compound File"},{ext:"ofm",mime:"Microsoft Compound File"},{ext:"sdw",mime:"Microsoft Compound File"},{ext:"sda",mime:"Microsoft Compound File"},{ext:"sds",mime:"Microsoft Compound File"},{ext:"sdw",mime:"Microsoft Compound File"},{ext:"mas",mime:"Microsoft Compound File"},{ext:"scn",mime:"Microsoft Compound File"},{ext:"sdc",mime:"Microsoft Compound File"},{ext:"sxm",mime:"Microsoft Compound File"},{ext:"sdw",mime:"Microsoft Compound File"},{ext:"dwg",mime:"Microsoft Compound File"},{ext:"ppt",mime:"Microsoft Compound File"},{ext:"sds",mime:"Microsoft Compound File"},{ext:"sxm",mime:"Microsoft Compound File"},{ext:"swf",mime:"Microsoft Compound File"}];var t1=te("m.file_analyzer.background"),Cm=class extends Ee{onInit=()=>{kn.analyzer=this.api.oldWorkers.analyzeFile};_analyseFileFromBytes=async(t,r,n,o={macroThreatAnalysis:!0,fileTypeMismatch:!0})=>{let i=YS(t),s=i.ext;if(!la(s)&&s!=="zip")return Fl(i,r,o);if(i.ext!=="zip")return fD(t,r,i,o);let a=await $(()=>Sm.loadAsync(t));if(!a.success){if(a.error instanceof Error&&a.error.message==="Encrypted zip are not supported")return await Ay(t,void 0,r,n,o);throw t1.error("Error reading zip:",a.error),a.error}let w=await dD(a.value);return w?"isTampered"in w?{officeDocumentReport:null,fileTypeMismatch:null,fileTypes:[],tampered:w,files:[],passwordRequired:!1}:mD(a.value,r,w,o,w.metadata):await Ay(t,a.value,r,n,o)};_removeMacroFromFileBuffer=async(t,r)=>{let n=km(r),o=await Sm.loadAsync(t);delete o.files[n];let i=await o.generateAsync({type:"arraybuffer",compression:"DEFLATE"}),s=GS[r.documentType];return{result:i,updatedType:s??null}};analyzeFileFromBytes=(t,r,n,o={macroThreatAnalysis:!0,fileTypeMismatch:!0})=>$(()=>this._analyseFileFromBytes(t,r,n,o));analyzeFileFromURL=(t,r,n,o={macroThreatAnalysis:!0,fileTypeMismatch:!0})=>$(async()=>{let s=await(await fetch(t)).arrayBuffer(),a=new Uint8Array(s);return this._analyseFileFromBytes(a,r,n,o)});analyzeFileFromOPFS=async(t,r,n,o={macroThreatAnalysis:!0,fileTypeMismatch:!0})=>{let i=await Fe.readAllFileBytes(t);return i.success?$(()=>this._analyseFileFromBytes(i.value,r,n,o)):i};removeMacroFromFileBuffer=(t,r)=>$(()=>this._removeMacroFromFileBuffer(t,r));removeMacroFromOPFSFile=async(t,r)=>{let n=await Fe.readAllFileBytes(t);return n.success?$(()=>this._removeMacroFromFileBuffer(n.value,r)):n}};var hD={manifest_version:1,module:{version:"1",name:"File Analyzer",description:"Utility functions for analyzing files",category:"internal",requires_permissions:["downloads"],requires_authentication:!0,requires_static:["./workers/analyze-file/squarex_macroanalyzer_bg.wasm"]},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function Am(e){return new Uint8Array(await e.arrayBuffer())}function Ul(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)})}var o1=We("utils/convert");function i1(e){return e.split(".")[0]}async function gD({fileData:e,fileName:t}){return $(async()=>{if(!t)throw new Error("File name is required");let r=new Blob([e]),n=new FormData;n.append("file",r,t);let o=await nn(async()=>await fetch(o1,{method:"POST",body:n}),{maxAttempts:2});if(!o.success)throw new Error(String(o.error));if(!o.value.ok)throw new Error(`status is ${o.value.status}`);let i=await o.value.blob(),s=await Ul(i),w=`${i1(t)}.pdf`;return{content:s,pdfFileName:w}})}var s9t=te("m.file_converter.background"),Rm=class extends Ee{runFileConversionFromBytes=async(t,r,n,o)=>{if(r==="pdf"){let i=await gD({fileData:n,fileName:t});return i.success&&this.api.report.log(Ht({event_type:181,trigger:o,event_details:{target:"pdf"}})),i}else throw new Error(`No conversion available for target [${r}]`)};runFileConversionFromURL=async(t,r,n,o)=>{let i=await $(async()=>{let a=await(await fetch(n)).blob();return await Am(a)});return i.success?this.runFileConversionFromBytes(t,r,i.value,o):i}};var yD={manifest_version:1,module:{version:"1",name:"File Converter",description:"This module exposes functions for converting files to different formats",category:"internal",requires_authentication:!0},content_script:{frames:{type:"none"}}};var bD={manifest_version:1,module:{version:"1",name:"Object URL Proxy",description:"Main world object URL proxy",category:"main_world_proxy",requires_authentication:!1,requires_permissions:[],requires_optional_permissions:[]},content_script:{frames:{type:"all"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var lr=Ye("sessions");l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ca=class extends st{constructor(t){super(`Session [${t}] is currently waiting`)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var _D=e=>`https://${e}-sc/`;async function c1(e,t){return await fetch(_D(e),{signal:t?.signal})}async function zo(e,t){return $(async()=>{let r=typeof e=="string"?e:e.session,n=await c1(r,t);if(!n.ok)throw ze.fromCode(n.status,_D(r),"Error during status check");if(n.status===410)throw new Mn(n.url,n.statusText);if(n.status===425)throw new si(n.url,n.statusText);if(n.status===204)throw new ca(r);return n})}async function zl(e){let t=new AbortController,r=setTimeout(()=>t.abort(),2e3),n=await zo(e,t);return clearTimeout(r),n.success?{...e,last_known_status:200}:n.error instanceof si?e.last_known_status===425?e:{...e,last_known_status:425}:n.error instanceof ca?e.last_known_status===204?e:{...e,last_known_status:204}:n.error instanceof Mn?{...e,last_known_status:410}:n.error instanceof ze?e.last_known_status===0&&[502,503,504].includes(n.error.statusCode)?e:{...e,last_known_status:n.error.statusCode}:e}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var u1=te("api.launch_session"),Pm=We("api/launch");async function d1(e){return await fetch(Pm,{method:"POST",credentials:"include",body:JSON.stringify({instance_type:e.type,country:e.type===we?void 0:e.country,url:e.url}),headers:{"Content-Type":"application/json"}})}async function vD(e){let t=await $(async()=>{let r=await d1(e);if(r.status===401)throw new ii(Pm,r.statusText);if(r.status>=500)throw new Nn(r.status,Pm,r.statusText);if(r.status>=400)throw ze.fromCode(r.status,Pm,r.statusText);let n=await $(()=>r.json());if(!n.success)throw new Jt("LaunchSessionResponse [untyped]",{_:"Expected JSON but it could not be parsed"});let o=n.value;if(o.status==="failed")throw new Error("Server returned failed status from launch");return{url:o.url,session:o.session,last_known_status:0,failed_launch:!1,...Yb(e)}});return t.success||u1.error("Session launch error",t.error),t}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function m1(e){return wa({path:"api/terminate",payload:{instance_type:e.type,country:e.type===Ne?e.country:void 0}})}async function xD(e){return $(async()=>{await m1(e)})}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function TD(e){let t=!0;return async function(){for(;t;)await lr.transact(async r=>{let n=await r.get();if(!n)return;let o=Object.entries(n).filter(([,E])=>[425,0,204].includes(E.last_known_status));if(o.length===0)return;let i=[],s=[],a=[],w=!1;for(let[E,V]of o)i.push((async()=>{let q=V.last_known_status,K=await zl(V);if(K===V)return;w=!0,[502,503,504].includes(K.last_known_status)&&(K.last_known_status=0),n[E]=K;let H=n[E];H?.last_known_status===200&&q!==200&&s.push(H),H?.last_known_status===410&&q!==410&&a.push(H)})());await Promise.all(i),s.length>0&&e.readiedSessionsListener(s),a.length>0&&e.expiredSessionsListener(a),await Promise.allSettled(i),w&&await r.set(n)}),await new Promise(r=>setTimeout(r,2e3))}(),()=>{t=!1}}var p1=te("m.internal_sessions.background.manager"),Nm=class{_module;_cancelPoll=at;_onSessionReady;_onSessionTerminated;_onSessionExpired;_onLaunchFailed;_launches=new Map;_terminated_sessions=[];constructor(t){this._module=t;let r=(n,o,i)=>this._module.api.report.error({known_code:n,exception:o,data:i});this._onSessionReady=new Qt(r),this._onSessionExpired=new Qt(r),this._onSessionTerminated=new Qt(r),this._onLaunchFailed=new Qt(r)}get onSessionReady(){return this._onSessionReady.nonExecutable}get onSessionExpired(){return this._onSessionExpired.nonExecutable}get onSessionTerminated(){return this._onSessionTerminated.nonExecutable}get onLaunchFailed(){return this._onLaunchFailed.nonExecutable}reportError(t,r,n){return this._module.api.report.error({known_code:t,exception:r,data:n})}async updateStoredSessions(t){return await lr.transact(async r=>{let n=await r.get()??{};for(let o of t){let i=Rn(o),s=n[i];(!s||s.session!==o.session)&&(n[i]=o)}for(let o of Object.values(n))!o.failed_launch&&!t.find(i=>i.session===o.session)&&delete n[Rn(o)];await r.set(n)})}startPolling=()=>{this._cancelPoll=TD({readiedSessionsListener:t=>t.forEach(r=>this._onSessionReady.runAllListeners([r])),expiredSessionsListener:t=>t.forEach(r=>this._onSessionExpired.runAllListeners([r]))})};stopPolling=()=>{this._cancelPoll()};launchSession=async(t,r=!1)=>{let n=Rn(t),o=this._launches.get(n);if(o)return o;let s=(await lr.unsafeGet())?.[n];if(!s||s.last_known_status===410||s.failed_launch)return this.launchNewSession(t);if(s.last_known_status===200&&r){let a=await lr.unsafeTransact(async()=>await zl(s));if(a.last_known_status===410)return this._onSessionExpired.runAllListeners([a]),this.launchNewSession(t)}return{success:!0,value:s}};launchNewSession=async t=>{let r=Rn(t),n=vD(t).then(async o=>{if(!o.success){let s=o.error instanceof ze?o.error.statusCode:1;return await lr.transact(async a=>{let w=await a.get();await a.set({...w,[r]:{...t,session:"",last_known_status:s,failed_launch:!0}})}),this._launches.delete(r),this._onLaunchFailed.runAllListeners([{session_info:t,error:o.error}]),o}let i=o.value;return await lr.unsafeTransact(async s=>{let a=await s.get();await s.set({...a,[r]:i})}),this._launches.delete(r),o});return this._launches.set(r,n),n};getExistingSession=async t=>{let r=(w,...E)=>p1.log(`[getExistingSession] ${w}`,...E),n=Rn(t),o=this._launches.get(n);if(o)return o;if(t.current_session){let w=this._terminated_sessions.find(E=>E.session.session===t.current_session);if(w)return je({...w.session,last_known_status:410})}r("No current launch for",n);let i=await lr.get();if(!i.success)return Ue({type:"storage_failure",key:"sessions",error:i.error});let a=i.value?.[n];if(a?.failed_launch){let w=Ue({failed_launch:!0,status:a.last_known_status});return await lr.transact(async E=>{let V=await E.get()??{};delete V[n],await E.set({...V})}),w}if(a?.last_known_status===200)return await lr.transact(async w=>{let E=await w.get(),V=await zl(a);return[502,503,504].includes(V.last_known_status)&&(V.last_known_status=0),V.last_known_status===410&&this._onSessionExpired.runAllListeners([V]),V.last_known_status!==200?(await w.set({...E,[n]:V}),V):a});if(!a){let w=this._launches.get(n);return w?(r("A launch promise that was not initially available is now available",n),w):(r("No launch promise was found for",n),Ue("no_session_available"))}return je(a)};terminateSession=async t=>{let r=await xD(t);return r.success?this._onSessionTerminated.runAllListeners([t]):this.reportError("terminate_existing_session_failed",r.error),r}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function Ry(e){let t=e.map(r=>({...r,last_known_status:0}));return await lr.transact(async r=>{let n=await r.get()??{};for(let o of t){let i=Rn(o),s=n[i];(!s||s.session!==o.session)&&(n[i]=o)}for(let o of Object.values(n))!o.failed_launch&&!t.find(i=>i.session===o.session)&&delete n[Rn(o)];await r.set(n)})}var wD=te("m.sessions.background"),Mm=class extends Ee{_sessionManager=new Nm(this);get sessionManager(){return this._sessionManager}onStart=()=>{let t=this.api.user.getLatestApiSessions();t&&Ry(t),this._sessionManager.onLaunchFailed.addListener(this.handleSessionLaunchFailure),this.api.systemEvents.addListener("session_available_from_api",this.handleApiSessionsUpdated),this._sessionManager.startPolling(),wD.info("Module Started")};onStop=async()=>{this._sessionManager.onLaunchFailed.removeListener(this.handleSessionLaunchFailure),this.api.systemEvents.removeListener("session_available_from_api",this.handleApiSessionsUpdated),this._sessionManager.stopPolling(),this._sessionManager.onLaunchFailed.clearAllListeners(),this._sessionManager.onSessionExpired.clearAllListeners(),this._sessionManager.onSessionReady.clearAllListeners(),this._sessionManager.onSessionTerminated.clearAllListeners(),wD.info("Module Stopped")};handleSessionLaunchFailure=t=>{this.api.report.error({known_code:"launch_session_error",data:{session:t.session_info},exception:t.error})};handleApiSessionsUpdated=t=>Ry(t);launchSession=(t,r=!1)=>this.sessionManager.launchSession(t,r);terminateSession=t=>this.sessionManager.terminateSession(t);getStoredSessions=()=>lr.get();getExistingSession=t=>this.sessionManager.getExistingSession(t);onSessionReady=this.sessionManager.onSessionReady;onSessionLaunchFailed=this.sessionManager.onLaunchFailed};var ED={manifest_version:1,module:{version:"1",name:"Internal Sessions",description:"Internal module for managing sessions",category:"internal",internal:!0,prevent_user_disable:!0,requires_authentication:!0},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var SD=z.object().schema({id:z.string(),type:z.string().allowed("message","error"),message:z.string()});var g1=z.object().schema({type:z.string().equals("task-notification-show-ui"),data:SD}),GYt=oe(g1);function kD(e){return{type:"task-notification-show-ui",data:e}}var y1=z.object().schema({type:z.string().equals("task-notification-hide-ui"),data:z.object().schema({id:z.string()})}),WYt=oe(y1);function ID(e){return{type:"task-notification-hide-ui",data:e}}var pXt=te("m.task_notification.background"),Om=class extends Ee{upsertTaskNotification=(t,{id:r,type:n,message:o})=>this.api.message.sendToContentScript(t,kD({id:r,type:n,message:o}));hideTaskNotificationForId=(t,r)=>this.api.message.sendToContentScript(t,ID({id:r}))};var DD={manifest_version:1,module:{version:"1",name:"Task Notification",description:"A generic UI module that gives exposed functions to show notifications on a page for an ongoing task and for marking them as failed if required",category:"internal",requires_authentication:!0,requires_sqrx_components:["sqrx-notification-bar"]},content_script:{frames:{type:"top"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function Lm(e){let[t,...r]=e.split(";").map(s=>s.trim()),n=["inline","attachment"].includes(t)?t:null;if(r.length===0)return{type:n};let o=r.map(s=>s.match(/filename\*=(.+)'{2}"?([^"\n\r\t]+)"?/)).filter(s=>!!s);if(o.length>0)return{type:n,filename:decodeURIComponent(o[0][2]),filenameEncoding:o[0][1]};let i=r.map(s=>s.match(/filename="?([^"\n\r\t]+)"?/)).filter(s=>!!s);return i.length>0?{type:n,filename:i[0][1]}:{type:n}}var Fm=te("m.url_discover.background");function v1(e,t){let r=Nt(e),n=t.get("Content-Type");if(!n||!r.success)return null;let[o]=r.value.pathname.split("/").slice(-1),[i]=n.split(";").map(s=>s.trim());return i==="application/octet-stream"?o:["text/html","image/png","image/gif","image/jpeg","image/jpg","image/webp"].includes(i)?null:o}function x1(e,t){let r=t.get("Content-Disposition");if(r){let{filename:n}=Lm(r);if(n)return n}return v1(e,t)}var Bm=class extends Ee{extractFromRedirectorURL(t){let r=Nt(t);if(!r.success)return Fm.warn("Invalid URL to discover",t),t;let o=new URLSearchParams(r.value.search).get("url");if(!o)return Fm.warn("url parameter missing in",t),t;let i=it(()=>new URL(globalThis.atob(o)));return i.success?i.value.href:(Fm.warn("Invalid URL parameter in redirector",i.error),t)}discoverUrlProperties=t=>{t.startsWith(W.runtime.getURL("redirector.html"))&&(t=this.extractFromRedirectorURL(t)),Fm.log("Following URL",t);let r=t,n=!1;return $(async()=>{let o=new AbortController,i=await fetch(t,{method:"GET",signal:o.signal});i.redirected&&(r=i.url,n=!0);let s=x1(t,i.headers);return o.abort(),s?{type:"file",url:r,filename:s,is_redirected:n,response:i}:{type:"link",url:r,is_redirected:n}})}};var CD={manifest_version:1,module:{version:"1",name:"URL Discovery",description:"Provides the functionality to determine if a URL points to a page or a file to download",category:"internal",requires_authentication:!0},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function AD(e){return Rt(e)&&e.type==="block-start"}function RD(e){return{type:"block-done",data:{html:e}}}function PD(e){return{type:"block-failed",data:{reason:e}}}function ND(){return{type:"file-progress"}}function MD(){return{type:"file-done"}}var E1=z.object().schema({type:z.string().equals("open-in-disposable-browser"),data:z.object().schema({threadId:z.string(),gmId:z.string(),filter:z.string().allowed("all","spam"),endpoint:z.string()})}),bZt=oe(E1);var OD=te("m.gmail_context_menu_no_internet.background"),Um=class extends Ee{threads=new Map;onStart=()=>{this.api.exposedEvents.onUploadEvent.addListener(this.onUploadEvent)};onStop=()=>{this.api.exposedEvents.onUploadEvent.removeListener(this.onUploadEvent)};onTabMessage=async(t,r)=>{if(AD(t))return this.startNetworkBlock(t,r)};onUploadEvent=async t=>{let r=t.type==="upload_complete_event"?MD():t.type!=="upload_error_event"?ND():void 0;if(r===void 0)return;(await this.getTabIdsToBlock()).forEach(o=>W.tabs.sendMessage(o,r))};getTabIdsToBlock=async()=>{let t=await W.tabs.query({url:`${W.runtime.getURL("nointernet.html")}*`});return Kr(t).map(r=>r.id)};handleTextResponse=async t=>{if(!t.ok)throw new Error("Network response was not ok");return t.text()};cleanHTML=t=>t.replace("window.print()","");makeUrl=(t,r,n,o)=>{let i=t.split("#")[1],s="msg-"+t.split("-")[1];return`${o}?ik=${r}&view=pt&search=${n}&permthid=${i}&simpl=${s}`};handleError(t){return OD.error(`There was a problem with the fetch operation: ${t.message}`)}storeHtmlThread=(t,r)=>{let n=ft();return this.threads.set(n,t),`nointernet.html?id=${n}&endpoint=${r}`};startNetworkBlock=async(t,r)=>{let n=this.threads.get(t.data.id);if(n===void 0)return OD.error(`id not found in storage: ${t.data.id}`),await W.tabs.sendMessage(r.tab.id,PD("not_found"));await W.tabs.sendMessage(r.tab.id,RD(n))};openThread=async({threadIds:t,gmId:r,filter:n,endpoint:o})=>{for(let i of t){let s=this.makeUrl(i,r,n,o);await fetch(s).then(this.handleTextResponse).then(this.cleanHTML).then(a=>this.storeHtmlThread(a,o)).then(a=>W.tabs.create({url:a})).catch(this.handleError)}}};var LD={manifest_version:1,module:{version:"1",name:"Gmail: Preview Email in Enhanced Privacy Mode",description:"Block all email trackers so the sender will never know you viewed the email.",category:"smart_integrations",requires_authentication:!0},content_script:{frames:{type:"top"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Zn=te("m.browser_context_menu.background"),qo=class extends Ee{static getMenuId(t){return t?`squarex-${t}`:"squarex"}onInit=()=>{W.contextMenus.onClicked.addListener(this.onClick)};onStart=()=>{Zn.info("Module Started"),this.updateMenus(),Re.availableRegions.onChange.addListener(this.updateMenus)};onStop=()=>{Zn.info("Module Stopped"),this.removeMenu(),Re.availableRegions.onChange.removeListener(this.updateMenus)};removeMenu=()=>{W.contextMenus.remove(qo.getMenuId(),()=>{W.runtime.lastError})};updateMenus=async()=>{let t=this.api.user.getLatestApiRegions(),r=this.api.user.getLatestApiUser();if(this.removeMenu(),!r)return;if(!t||t.length===0)return Zn.warn("No regions available for disposable browsers");let n={title:"Open In SquareX",id:qo.getMenuId(),contexts:["link"]},o=t.find(V=>V.code===r.country),i=o?.name&&r.country&&r.country!=="NEVER"?{title:`${o?.name}`,parentId:n.id,contexts:["link"],id:qo.getMenuId(r.country.toLowerCase())}:null,a=t.filter(V=>V.code!==r.country).map(V=>({title:V.name,parentId:n.id,contexts:["link"],id:qo.getMenuId(V.code.toLowerCase())})),w=await $(()=>W.contextMenus.create(n));if(!w.success)return this.api.report.error({known_code:"create_root_contextmenu_error",exception:w.error,data:n});if(i){let V=await $(()=>W.contextMenus.create(i));if(!V.success)return this.api.report.error({known_code:"create_root_contextmenu_error",exception:V.error,data:i})}(await Promise.all(a.map(V=>$(()=>W.contextMenus.create(V))))).filter(V=>!V.success).forEach(V=>this.api.report.error({known_code:"create_root_contextmenu_error",exception:V.error,data:n}))};launchDisposableBrowser=(t,r)=>this.api.exposedFunctions.launchDisposableBrowser(t,{url:r,openTabAfterLaunch:!1,trigger:"context_menu_launcher"});launchDisposableFileViewer=async t=>this.api.exposedFunctions.launchDisposableFileViewer(t);onClick=async(t,r)=>{let n=t.menuItemId.toString(),o=n.match(qo.id_matcher);if(!o)return;if(!this.api.isRunning){Zn.warn(`Link context menu [${n}] was clicked even though the module is disabled`);return}if(!t.linkUrl){Zn.warn(`Link context menu [${n}] was clicked but there is no URL info available`);return}Zn.log("Availability is",this.api.exposedFunctions.launchDisposableBrowser.isAvailable());let i=o[1].toUpperCase();if(!this.api.exposedFunctions.discoverUrlProperties.isAvailable()||!this.api.exposedFunctions.launchDisposableFileViewer.isAvailable())return this.launchDisposableBrowser(i,t.linkUrl);let s=await this.api.exposedFunctions.discoverUrlProperties(t.linkUrl);if(Zn.log("Browser link clicked",n,t,i),!s.success){Zn.warn("Failed to discover URL properties",s.error);let w=this.launchDisposableBrowser(i,t.linkUrl);return Cr({type:Ne,country:i},r?.windowId),w}let a=s.value;if(Zn.info("Discovered URL properties",a),a.type==="link"){let w=this.launchDisposableBrowser(i,a.url);return Cr({type:Ne,country:i},r?.windowId),w}else return this.launchDisposableFileViewer({upload:{window_trigger_id:r?.windowId,contentDetails:{type:"from_url",url:a.url,post_body:!1},filename:a.filename,openTabAfterUpload:!0,trigger:"context_menu_launcher"}})}},ql=qo;ie(ql,"id_matcher",new RegExp(`${qo.getMenuId()}-(.{2,3})$`));var FD={manifest_version:1,module:{version:"1",name:"Context Menus",description:"Integrate with the browser right-click menu to allow opening of websites or files with the Disposable Browser or Disposable File Viewer.",category:"browser",optional_exposed_functions:{background:["launchDisposableFileViewer","discoverUrlProperties"]},required_exposed_functions:{background:["launchDisposableBrowser"]},requires_authentication:!0,requires_permissions:["contextMenus"]},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function C1(e,t){return await fetch(`https://${e}-sc/`,{method:"POST",body:JSON.stringify({url:t}),headers:{"Content-Type":"application/json"},duplex:"half"})}async function BD(e,t){return $(async()=>{let r=await C1(e,t);if(r.status===410)throw new Mn(e);if(r.status!==200)throw r;return r})}var Py=te("m.disposable_browser.background"),Vm=class extends Ee{_pendingUrls=new Map;onStart=()=>{this.api.exposedEvents.onSessionReady.addListener(this.handleSessionReady),Py.info("Module Started")};onStop=()=>{this.api.exposedEvents.onSessionReady.addListener(this.handleSessionReady),Py.info("Module Stopped")};handleSessionReady=t=>{if(t.type!==we)return this.openPendingUrls(t.country,t.session)};openPendingUrls(t,r){let n=this._pendingUrls.get(t)??[];n.length>0&&Py.info("Sending pending URLs for newly ready session",r,n),n.forEach(o=>{BD(r,o)}),this._pendingUrls.set(t,[])}addPendingUrl=(t,r)=>{let n=this._pendingUrls.get(t)??[];return n.push(r),this._pendingUrls.set(t,n),n};launchDisposableBrowser=async(t,r)=>{r?.url&&this.addPendingUrl(t,r.url);let n=await this.api.exposedFunctions.launchSession({country:t,type:Ne},!0);return r?.openTabAfterLaunch&&Cr({type:Ne,country:t}),!n.success||n.value.failed_launch?(this.api.report.error({known_code:"db_launch_error",exception:n.success?n.value.last_known_status:n.error,data:{country:t}}),n):(n.value.last_known_status===200&&this.openPendingUrls(t,n.value.session),r?.url&&Ht({event_type:104,trigger:r.trigger,event_details:{country:t}}),n)}};var UD={manifest_version:1,module:{version:"1",name:"Disposable Browser",description:"Description of disposable browsers",category:"internal",required_exposed_functions:{background:["launchSession"]},requires_authentication:!0},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var wer=z.object().schema({type:z.string().equals("upload_progress_event"),target_id:z.string(),progress:z.object().schema({bytesLoaded:z.number(),percentage:z.oneof(z.number(),z.null())})});function Ny(e,t,r){return{type:"upload_progress_event",target_id:e,progress:{percentage:r&&r>=t?t*100/r:null,bytesLoaded:t}}}var Eer=z.object().schema({type:z.string().equals("upload_complete_event"),target_id:z.string()});function VD(e){return{type:"upload_complete_event",target_id:e}}var Ser=z.object().schema({type:z.string().equals("upload_start_event"),target_id:z.string(),upload:z.object().schema({size:z.oneof(z.number(),z.null())})});function My(e,t){return{type:"upload_start_event",target_id:e,upload:{size:t}}}var ua=(a=>(a.NONE="NONE",a.UNRECOVERABLE="UNRECOVERABLE",a.DEAD_SESSION="DEAD_SESSION",a.USER_CANCELLED_UPLOAD="USER_CANCELLED_UPLOAD",a.USER_CANCELLED_DOWNLOAD="USER_CANCELLED_DOWNLOAD",a.USER_CANCELLED_ALL="USER_CANCELLED_ALL",a.UPLOAD_EXPIRED="UPLOAD_EXPIRED",a))(ua||{}),ker=z.object().schema({type:z.string().equals("upload_error_event"),target_id:z.string(),error:z.oneof(z.object().schema({code:z.string().equals("error"),details:z.anything()}),z.object().schema({code:z.string().equals("cancellation"),reason:z.string().allowed(...Object.values(ua))}),z.object().schema({code:z.string().equals("mismatch"),reason:z.string()}))});function Yi(e,t){return{type:"upload_error_event",target_id:e,error:t}}var Ier=z.object().schema({type:z.string().equals("upload_preparing_event"),target_id:z.string(),filename:z.string()}).partial({url:z.string()});function zD(e,t,r){return{type:"upload_preparing_event",target_id:e,filename:t,url:r}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Ko=class extends Error{reason;constructor(t){super(`Upload cancelled. Reason: [${t}]`),this.reason=t}},Jn=class extends Error{underlyingError;constructor(t){super("Unrecoverable stream error"),this.underlyingError=t}};var P1=te("common.utilities.uploaders.http_duplex_uploader"),zm=class{#e;#t;#r=null;#i=new AbortController;#n="";#o;get isSupported(){let t=!1,r=new Request("",{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}set terminationReason(t){this.#r=t}get filename(){return this.#o}get sessionId(){return this.#n}constructor(t){this.#e=t.progressUpdateInterval??500,this.#t=t.onProgress??at,this.#o=null}makeUploadFileRequest=(t,r,n)=>{let o=new AbortController,i=(async()=>{let s=this.getTargetUrl(t,r);try{let a=await fetch(s,{method:"POST",body:n,duplex:"half",signal:o.signal});if(!a.ok){let w=await $(()=>this.onUploadError(a));throw w.success?a:new Jn(w.error instanceof Error?w.error:new Error(String(w.error)))}return a}catch(a){throw this.#r!==null&&["USER_CANCELLED_ALL","USER_CANCELLED_UPLOAD"].includes(this.#r)?new Ko(this.#r):a instanceof TypeError&&a.message.includes("Failed to fetch")?new oi(s):a instanceof Jn?a.underlyingError:a instanceof Response?ze.fromCode(a.status,a.url,a.statusText):a}})();return{cancellation_token:o,response_promise:i}};async beginStreaming(t,r,n,o){return $(()=>{if(this.#o=o,this.#n=n,!t)throw new Error("Source stream is not");let{readable:i,writable:s}=new TransformStream,a=0,w={start:performance.now()},E=new TransformStream({transform:(q,K)=>{a+=q.length,K.enqueue(q);let H=performance.now();H-w.start>this.#e&&(this.#t?.(a,r),w.start=H)}});t?.pipeThrough(E).pipeTo(s).catch(q=>P1.error("Stream writing has stopeed",q));let V=this.makeUploadFileRequest(n,o,i);return this.#i=V.cancellation_token,{cancel:this.cancel.bind(this),pipeStreamPromise:V.response_promise}})}cancel(t){!this.#i||this.#i.signal.aborted||(this.#i.abort(t),this.#r=t)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function KD(e,t){let r=e instanceof Set?e:new Set(e),n=t instanceof Set?t:new Set(t),o=new Set;for(let i of n.values())r.has(i)&&o.add(i);return o}var N1=te("m.disposable_file_viewer.background.response_utils"),ct=class{constructor(){}static getContentLength(t){return t.headers.get(ct.CONTENT_LENGTH_HEADER)??null}static getContentType(t){return t.headers.get(ct.CONTENT_TYPE_HEADER)??null}static getContentDisposition(t){return t.headers.get(ct.CONTENT_DISPOSITION_HEADER)??null}static validateResponseDetails(t,r){let n=a=>(N1.error("Prevalidation of URL failed",a,t.url),{valid:!1,message:a});if(r?.statusCode&&t.status!==r?.statusCode)return n(`Status code mismatch. Expected [${r.statusCode}] but received [${t.status}]`);let o=r?.headers?.[ct.CONTENT_TYPE_HEADER]||null;if(o&&o!==ct.getContentType(t))return n(`MIME extension mismatch. Expected [${o}] but received [${ct.getContentType(t)}]`);let i=r?.headers?.[ct.CONTENT_LENGTH_HEADER]||null;if(i&&i!==ct.getContentLength(t))return n(`File size mismatch. Expected [${i}] but received [${ct.getContentLength(t)}]`);let s=r?.headers?.[ct.CONTENT_DISPOSITION_HEADER]||null;return s&&s!==ct.getContentDisposition(t)?n(`Content disposition mismatch. Expected [${s}] but received [${ct.getContentDisposition(t)}]`):{valid:!0}}},Ze=ct;ie(Ze,"CONTENT_LENGTH_HEADER","content-length"),ie(Ze,"CONTENT_TYPE_HEADER","content-type"),ie(Ze,"CONTENT_DISPOSITION_HEADER","content-disposition"),ie(Ze,"CONTENT_ENCODING_HEADER","content-encoding"),ie(Ze,"extractReplayComparisonHeaders",t=>{let r={};for(let n of t)switch(n.name.toLowerCase()){case ct.CONTENT_LENGTH_HEADER:r[ct.CONTENT_LENGTH_HEADER]=n.value;break;case ct.CONTENT_TYPE_HEADER:r[ct.CONTENT_TYPE_HEADER]=n.value;break;case ct.CONTENT_DISPOSITION_HEADER:r[ct.CONTENT_DISPOSITION_HEADER]=n.value;break;case ct.CONTENT_ENCODING_HEADER:r[ct.CONTENT_ENCODING_HEADER]=n.value;break;default:break}return r}),ie(Ze,"isCompressionSpecifiedInHeaders",t=>{let r=t[ct.CONTENT_ENCODING_HEADER];if(!r)return!1;let n=r.split(",").map(i=>i.trim().toLowerCase());return!(n.length===0||KD(n,["gzip","compress","deflate","br","zstd"]).size===0)});l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Kl=class{_onprogress;_tranformStream;_loadedSize=0;_updateTimer=0;_totalStreamSize=0;_progressUpdateInterval;_errorReason;constructor(t,r,n){this._onprogress=t,this._progressUpdateInterval=r,this._totalStreamSize=n,this._tranformStream=new TransformStream({start:()=>{this._updateTimer=performance.now()},transform:(o,i)=>{if(this._errorReason)return i.error(this._errorReason);this._loadedSize+=o.length,i.enqueue(o);let s=performance.now();s-this._updateTimer>this._progressUpdateInterval&&(this._onprogress(this._loadedSize,this._totalStreamSize),this._updateTimer=s)}},{})}get transformStream(){return this._tranformStream}cancel=t=>{this._errorReason||(this._errorReason=t)}};var Oy=te("m.modules.disposable_file_viewer.background.pipe_stream.base"),jo=class{_isBlob=!1;_size=0;_readStream;_downloadAbortController=null;_terminationReason="NONE";_streamIdentifier=null;_onProgress;get terminationReason(){return this._terminationReason}set terminationReason(t){this._terminationReason=t}get readStream(){return this._readStream}get onProgress(){return this._onProgress}get isDownloadABlob(){return this._isBlob}get totalBodySize(){return this._size}get streamIdentifier(){return this._streamIdentifier}constructor(t){this._streamIdentifier=t.streamIdentifier??null,this._onProgress=t.onProgress??null,this._readStream=null}fetchUrl=async t=>{let r=await $(()=>(this._downloadAbortController=new AbortController,fetch(t)));return r.success||Oy.error("Unable to download content",t,r.error),r};fetchUrlAsPost=async(t,r)=>{let n=await $(()=>(this._downloadAbortController=new AbortController,fetch(t,{method:"POST",body:r instanceof FormData?r:void 0,credentials:"include",signal:this._downloadAbortController.signal})));return n.success||Oy.error("Unable to download content",t,n.error),n};async createDownloadStream(t,r){return $(async()=>{let n=await(r?this.fetchUrlAsPost(t,r):this.fetchUrl(t));if(!n.success)throw n.error;let{value:o}=n;this._isBlob=br(t),this._size=Number(o.headers.get(Ze.CONTENT_LENGTH_HEADER));let i=this.isDownloadABlob?(await o.blob()).stream():o.body;if(!i)throw new Error("No response body available");let s=K_(Array.from(o.headers.entries()),a=>a.toLowerCase());return this._readStream=i,{raw_response:n.value,size:this.totalBodySize,response_headers:s,statusCode:n.value.status}})}setReadStream=t=>{this._readStream=t};createProgressStream=t=>this._onProgress?new Kl(this._onProgress,t,this._size):(Oy.warn("No progress handler was specified in the stream strategy construtor"),new Kl(at,t,this._size));abortDownload(t){this._downloadAbortController?.abort(t)}};var Ly=class extends zm{getTargetUrl=(t,r)=>`https://${t}-sc/upload/stream?name=${r}`;onUploadError=async()=>{let t=await zo(this.sessionId);if(!t.success)throw this.terminationReason="DEAD_SESSION",t.error}},qm=class extends jo{#e;get isSupported(){return this.#e.isSupported}constructor(t){super(t),this.#e=new Ly({onProgress:t.onProgress,progressUpdateInterval:t.progressUpdateInterval??500})}beginPipeStream(t,r){return this.#e.beginStreaming(this.readStream,this.totalBodySize,t,r)}cancel(t){this.#e.cancel(t)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var da=class extends Error{session;constructor(t){super(`Session is dead. [${t}]`),this.session=t}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Xi=te("common.utilities.uploaders.http_chunk_uploader"),Km=class{#e;#t;#r;#i;#n;#o;#l;#s;#a=null;#c;#d;#m;#u=null;#f;#p;#h;get sequenceNumber(){return this.#e}get uploadId(){return this.#f}get filename(){return this.#d}get isFull(){return this.#l}get byteLength(){return this.#o}get isFinalChunk(){return this.#c}get totalByteOffset(){return this.#s}constructor(t){this.#p=t.targetUrl,this.#d=t.filename,this.#l=!1,this.#s=t.offset,this.#e=t.sequence,this.#t=new TransformStream,this.#r=this.#t.writable,this.#n=this.#r.getWriter(),this.#i=this.#t.readable,this.write=this.write.bind(this),this.#o=0,this.#c=!1,this.#m=t.maxChunkSize??1e5,this.#f=t.uploadId,this.#h=t.onChunkError??(async()=>{})}write(t){this.#n.write(t),this.#o+=t.length,this.#o>=this.#m&&(Xi.info("Max length writer closed for sequence",this.#e),this.#n.close(),this.#l=!0)}async send(){Xi.info("Called send for sequence",this.#e);try{this.#a||(this.#a=await new Response(this.#i).arrayBuffer());let t={"Content-Type":"application/octet-stream","File-Upload-Sequence":`${this.#e}`,"File-Upload-Byte-Offset":`${this.#s}`};this.#e===0&&(t["File-Upload-Name"]=this.#d),this.#c&&(t["File-Upload-Final-Chunk"]="1",t["File-Upload-Total-Size"]=`${this.#s+this.#o}`),this.#u=new AbortController,Xi.info("Sending chunk sequence",this.#e);let r=await fetch(typeof this.#p=="function"?this.#p(this):this.#p,{method:"POST",body:this.#a,headers:t,signal:this.#u.signal});if(this.#u=null,!r.ok){let n=await $(()=>this.#h(r));if(!n.success)throw new Jn(n.error instanceof Error?n.error:new Error(String(n.error)));if(n.value!==void 0)return n.value}return r.status}catch(t){let r=this.#u?.signal;if(this.#u=null,r?.aborted)return Xi.info(`Chunk sequence [${this.sequenceNumber}] aborted`,r.reason),-1;if(t instanceof Jn)throw t;return Xi.error(`Failed to send sequence [${this.sequenceNumber}]`,t),0}}cancel(t){this.#u&&this.#u.abort(t)}async finalize(){this.#c=!0;let t=await $(()=>this.#n.close());Xi.info("Final writer closed for sequence",this.#e,t)}},Fy=class{#e;#t;#r=!1;#i=!1;#n=!1;#o;#l;#s=at;#a=at;#c=0;#d=0;#m=at;constructor(t,r=4,n=3){this.#e=[],this.#t=[],this.#o=r,this.#l=n,this.iterate=this.iterate.bind(this),this.#m=t??at}push(t){if(this.#r){Xi.warn("Received a chunk but I was finalized!");return}this.#r=t.isFinalChunk,this.#e.push({chunk:t,attempts:0}),this.iterate()}async iterate(){if(this.#n||this.#t.length>=this.#o)return;let t=this.#e.shift();if(t){t.attempts++;let r=t.chunk.send(),n={value:t,execution:r};this.#t.push(n);let o=await $(()=>r);if(!o.success)return o.error instanceof Jn?this.cancel(o.error):this.cancel("UNRECOVERABLE");let i=o.value;if(i===-1)return this.cancel("USER_CANCELLED_UPLOAD");if(o.value<200||o.value>=300&&o.value<500)return this.cancel(i);if(this.#t.splice(this.#t.indexOf(n),1),i>=500){if(t.attempts>=this.#l)return this.cancel(i);this.#e.push(t)}i>=200&&i<300&&(this.#c+=t.chunk.byteLength,this.#m(this.#c,this.#d)),globalThis.queueMicrotask(this.iterate)}else this.#r&&this.#t.length===0&&(this.#e.length>0?globalThis.queueMicrotask(this.iterate):(this.#n=!0,this.#s()))}cancel(t){if(!this.#n)return this.#n=!0,this.#t.forEach(r=>r.value.chunk.cancel(t)),this.#e=[],t==="USER_CANCELLED_UPLOAD"||t==="USER_CANCELLED_ALL"?this.#a(new Ko(t)):this.#a(t)}async start(t){return this.#d=t,this.iterate(),new Promise((r,n)=>{this.#s=r,this.#a=n})}},By=class{#e;#t;#r;#i;#n;#o;#l=null;#s;#a;constructor(t){this.#a=t.onProgress??at,this.#o=t.httpChunkSize??15e5,this.#n=0,this.#r=null,this.#i=null,this.#e=new Fy(this.#a,t.maxParallelChunks??4,t.maxChunkRetries??3),this.#s=ft()}get sessionId(){return this.#r}get filename(){return this.#i}initializeUploadSession=(t,r)=>{this.#i=r,this.#r=t};cancel=t=>this.#l?.signal.aborted?!1:(this.#l?.abort(t),this.#e.cancel(t),!0);writeToChunk=t=>{if(!this.#i||!this.#r)throw new Error("Missing filename or session ID, this is a bug!");this.#t||(this.#t=new Km({uploadId:this.#s,filename:this.#i,maxChunkSize:this.#o,sequence:0,offset:0,targetUrl:this.getChunkUrl,onChunkError:this.onChunkError})),this.#t.isFull&&(this.#n+=this.#t.byteLength,this.#e.push(this.#t),this.#t=new Km({uploadId:this.#s,filename:this.#i,maxChunkSize:this.#o,sequence:this.#t.sequenceNumber+1,offset:this.#n,targetUrl:this.getChunkUrl,onChunkError:this.onChunkError})),this.#t.write(t)};finalizeUpload=()=>{this.#t&&(this.#t?.finalize(),this.#e.push(this.#t))};startQueue=t=>this.#e.start(t)},jm=class extends By{#e;#t;#r=new AbortController;constructor(t){super(t),this.#e=new TransformStream,this.#t=t.httpChunkSize??15e5}async beginStreaming(t,r,n,o){return $(()=>{this.initializeUploadSession(n,o),this.#r=new AbortController,t?.pipeThrough(this.#e,{signal:this.#r.signal,preventAbort:!1,preventCancel:!1,preventClose:!1}).pipeTo(new WritableStream({write:this.writeToChunk,close:this.finalizeUpload},new CountQueuingStrategy({highWaterMark:this.#t}))).catch(s=>{this.cancel(s)});let i=this.startQueue(r).catch(s=>{throw this.cancel(s),s});return{cancel:this.cancel.bind(this,"USER_CANCELLED_UPLOAD"),pipeStreamPromise:i}})}};var Uy=class extends jm{constructor(t){super(t)}onChunkError=async()=>{let t=this.sessionId??"";if(!(await zo(t)).success)throw new da(t)};getChunkUrl=t=>`https://${this.sessionId}-sc/upload/chunk?uuid=${t.uploadId}&name=${t.filename}`},Hm=class extends jo{#e;constructor(t){super(t),this.#e=new Uy(t)}get isSupported(){return!0}cancel(t){this.#e.cancel(t)&&(this.terminationReason=t,this.abortDownload(t))}async beginPipeStream(t,r){return this.#e.beginStreaming(this.readStream,this.totalBodySize,t,r)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var jD=z.object().schema({intercept_downloads:z.boolean(),analyze_downloads:z.boolean(),block_downloads:z.boolean(),no_limit_scanning:z.boolean()}),qr=Ye("__module_settings_disposable_file_viewer");function HD(){return{intercept_downloads:!1,analyze_downloads:!1,block_downloads:!1,no_limit_scanning:!1}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Qm=vb(oC());function eo(e,t){return function(){let[n,o]=(0,Qm.useState)();return(0,Qm.useEffect)(()=>{let i=s=>o(s);return e.onChange.addListener(i,!0),t&&t(),()=>{e.onChange.removeListener(i)}},[]),n}}var Iir=eo(Dr.user),Dir=eo(Dr.extensionEnabled,()=>{Dr.extensionEnabled.unsafeGet().then(async e=>{e===void 0&&await Dr.extensionEnabled.unsafeSet(!0)})}),Cir=eo(Dr.isDarkThemeEnabled,()=>{Dr.isDarkThemeEnabled.unsafeGet().then(async e=>{e===void 0&&await Dr.isDarkThemeEnabled.unsafeSet(!1)})}),Air=eo(Dr.availableRegions),Rir=eo(Dr.modulesEnabled);var Hy=Ye("uploadOptionsDialogState"),Xir=eo(Hy),Kt=Ye("dfvFileTrackingItems"),Gy=Ye("downloadBypassDomainList");async function iC(e){return Gy.transact(async t=>{let r=await t.get()??[];r.includes(e)||(r.push(e),await t.set([...r]))})}var Zir=eo(Kt);function Hl(e){return!!e.item&&e.index!==-1}var Jir=eo(qr);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Wy=te("m.disposable_file_viewer.background.file_tracker"),xt=class{static async txfn(t,r){return await(r?$(()=>t(r)):Kt.transact(t))}static async destroyFileTrackingItem(t,r){return xt.txfn(async n=>{let o=await n.get()??[],i=o.findIndex(a=>a.id===t);if(i===-1)return;let s=o[i];xt.destroyGeneratedBlob(s.downloadItem?.finalUrl??s.requestUrl),xt.destroyOpfsFileAfterDelay(s.analysis_opfs_location),o.splice(i,1),await n.set([...o])},r)}static async destroyFileTrackingItems(t,r){return xt.txfn(async n=>{let o=await n.get()??[],{includes:i,excludes:s}=ni(o,a=>t.includes(a.id));i.forEach(a=>{xt.destroyGeneratedBlob(a.downloadItem?.finalUrl??a.requestUrl),xt.destroyOpfsFileAfterDelay(a.analysis_opfs_location)}),i.length!==0&&await n.set([...s])},r)}static destroyGeneratedBlob(t){xt.generatedBlobMap.delete(t)&&Wy.info("Generated blob mapping destroyed for",t),xt.generatedBlobExpiryMap.delete(t)}static setGeneratedBlob(t,r){xt.generatedBlobMap.set(t,r),xt.generatedBlobExpiryMap.set(t,new Date().getTime()+(1e4+3e4))}static cleanExpiredBlobs(){let t=new Date().getTime();for(let[r,n]of xt.generatedBlobExpiryMap.entries())t>n&&xt.destroyGeneratedBlob(r)}static destroyOpfsFileAfterDelay(t,r=1e3){t&&setTimeout(()=>Fe.destroyFile(t),r)}static async destroyAllFileTrackingItems(t){return xt.txfn(async r=>((await r.get()??[]).forEach(o=>{xt.destroyGeneratedBlob(o.downloadItem?.finalUrl??o.requestUrl),xt.destroyOpfsFileAfterDelay(o.analysis_opfs_location)}),await r.set([])),t)}static async lookupFileTrackingItem(t,r){return xt.txfn(async n=>{let o=await n.get()??[],i=o.findIndex(s=>s.id===t);return{item:o[i],index:i,items:o}},r)}static async updateFileTrackingItemById(t,r,n){return xt.txfn(async o=>{let i=await o.get()??[],s=i.findIndex(w=>w.id===t);if(s===-1)return Wy.error("Tracking item",t,"not found in store");let a=await r(i[s]);i[s]=a,await o.set(i)},n)}static async updateFileTrackingItem(t,r,n){return xt.txfn(async o=>{let i=await o.get()??[],s=i.findIndex(a=>a.id===t.id);return s===-1?(Wy.error("Tracking item",t.id,"not found in store"),t):(await r(t),i[s]={...t},await o.set(i),t)},n)}static getTargetUrl(t){return br(t)?xt.generatedBlobMap.get(t)??t:t}},Be=xt;ie(Be,"generatedBlobMap",new Map),ie(Be,"generatedBlobExpiryMap",new Map);var Zi=te("m.disposable_file_viewer.background.event_handlers"),Ym=class{handleUploadEvent=t=>{Kt.transact(async r=>{let n=await Be.lookupFileTrackingItem(t.target_id,r);if(!n.success)throw n.error;let o=n.value;if(t.type==="upload_preparing_event")return Zi.info("Handling preparing file event",t),this.handlePreparingEvent(t,o),await r.set([...o.items]);if(!Hl(o)){Zi.warn("Received remote file event for upload tracking item that couldnt be found",t);return}switch(t.type){case"upload_start_event":{Zi.info("Handling start file event",t),this.handleStartEvent(t,o);break}case"upload_complete_event":{Zi.info("Handling complete file event",t),this.handleCompleteEvent(t,o);break}case"upload_progress_event":{Zi.info("Handling file progress event",t),this.handleProgressEvent(t,o);break}case"upload_error_event":{Zi.info("Handling file error event",t),this.handleErrorEvent(t,o);break}}let i=await $(()=>r.set([...o.items]));return i.success?i.value:(Zi.error("Oops!",i.error),i.error)})};handlePreparingEvent=(t,{item:r,items:n,index:o})=>{if(r&&o!==-1)n[o]={...r,uploadTrackingData:{...r.uploadTrackingData,status:"in_progress",started:!1,currentUploadSize:0,totalUploadSize:null}};else{let i=new Date().getTime();n.push({id:t.target_id,requestUrl:t.url??"",requestMethod:"GET",requestBody:null,requestHeaders:[],responseHeaders:[],responseStatusCode:null,analysis_outcome:null,analysis_category:null,analysis_opfs_location:null,downloadFilenameSuggestion:t.filename,dispositionFilenameSuggestion:t.filename,created_at:i,expires_at:i+1e4,uploadTrackingData:{status:"in_progress",started:!1,currentUploadSize:0,totalUploadSize:null}})}};handleStartEvent=(t,{item:r,items:n,index:o})=>{n[o]={...r,uploadTrackingData:{...r.uploadTrackingData,started:!0,totalUploadSize:t.upload.size,currentUploadSize:0}}};handleProgressEvent=(t,{item:r,items:n,index:o})=>{n[o]={...r,uploadTrackingData:{...r.uploadTrackingData,currentUploadSize:t.progress.bytesLoaded}}};handleCompleteEvent=(t,{items:r,index:n})=>{r.splice(n,1)};handleErrorEvent=(t,{item:r,items:n,index:o})=>{n[o]={...r,uploadTrackingData:{...r.uploadTrackingData,status:"error",error:t.error}}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();async function Xm(e,t){let r=new AbortController,n=await $(()=>fetch(e,{signal:r.signal}));return n.success?(r.abort(),Ze.validateResponseDetails(n.value,t)):{valid:!1,message:"Unable to connect"}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Y1=te("common.storage.memory_backed_store"),Ji=class{_store;_current;constructor(t){this._store=t,this.init()}get currentValue(){return this._current}init=async()=>{let t=await this._store.get();if(!t.success)return Y1.error(`Failed to retrieve data from store [${this._store.key}]`,t.error);this._current=t.value,this._store.onChange.addListener(this.onChange)};onChange=t=>{this._current=t}};var In=te("m.disposable_file_viewer.background.upload_manager"),Zm=class{_uploadEventManager=new Ym;_ongoing_requests={};_pending_uploads=[];_events;_module;_settings=new Ji(qr);get onUploadEvent(){return this._events.nonExecutable}constructor(t){this._module=t,this._events=new Qt((r,n,o)=>{this._module.api.report.error({known_code:r,exception:n,data:o})}),this.pollOngoingRequest()}triggerEvent=t=>{this._uploadEventManager.handleUploadEvent(t),this._events.runAllListeners([t])};reportError(t,r,n){return this._module.api.report.error({known_code:t,data:n,exception:r})}pollOngoingRequest=async()=>{let t=Array.from(new Set(Object.values(this._ongoing_requests).map(r=>r.session_id)));for(let r of t)if(!(await zo(r)).success)for(let o of Object.values(this._ongoing_requests))o.cancel("DEAD_SESSION");setTimeout(this.pollOngoingRequest,3e3)};async getUploadStrategies(t){let r=()=>new qm({onProgress:(i,s)=>this.triggerEvent(Ny(t,i,s))}),n=()=>new Hm({onProgress:(i,s)=>this.triggerEvent(Ny(t,i,s))}),o=r();return o.isSupported?[o,n()]:[n()]}startPendingUploads=t=>{this._pending_uploads.forEach(r=>this.startUpload({...r,session_id:t}))};startUpload=async t=>{In.log("Starting upload",t);let{session_id:r,window_trigger_id:n,filename:o,openTabAfterUpload:i}=t,s=t.identifier??ft(),a=await this.getUploadStrategies(s),w=0,E=null;for(;w<a.length;){let V=a[w];if(w++,t.contentDetails.type==="from_stream")V.setReadStream(t.contentDetails.stream),this.triggerEvent(My(s,t.contentDetails.size));else{let Y=Array.isArray(t.contentDetails.url)?t.contentDetails.url[0]:t.contentDetails.url;if(Array.isArray(t.contentDetails.url)&&t.contentDetails.expecation){let Q=0;for(;Q<t.contentDetails.url.length;){if((await Xm(t.contentDetails.url[Q],t.contentDetails.expecation)).valid){Y=t.contentDetails.url[Q];break}Q++}if(!Y)return this.triggerEvent(Yi(s,{code:"error",details:"Unexpected file response"})),In.error("No target URLs returned the expected response",t.contentDetails.expecation)}let ee=await V.createDownloadStream(Y,t.contentDetails.post_body);if(!ee.success)return this.triggerEvent(Yi(s,{code:"error",details:ee.error})),this.reportError("failed_to_retrieve_stream_target_file",ee.error),i&&Cr({type:we},n),In.error("Failed to fetch target file",ee.error);this.triggerEvent(My(s,ee.value.size))}let q=await V.beginPipeStream(r,o);if(!q.success)return this.triggerEvent(Yi(s,{code:"error",details:q.success?null:q.error})),this.reportError("failed_to_create_upload_request",q.error),In.error("Failed to create upload request",q.error);let{cancel:K,pipeStreamPromise:H}=q.value;this._ongoing_requests[s]={session_id:r,cancel:K};let X=await $(()=>H);if(X.success){E=null;break}else{if(X.error instanceof Ko)return this.triggerEvent(Yi(s,{code:"cancellation",reason:X.error.reason})),delete this._ongoing_requests[s],In.warn(`Download aborted [${X.error.reason}`,t.contentDetails);if(X.error instanceof da)return this.triggerEvent(Yi(s,{code:"cancellation",reason:"DEAD_SESSION"})),delete this._ongoing_requests[s],In.warn("Upload failed, session has died",t.contentDetails);if(In.error("Failed to complete upload of stream",X.error),E=X.error,!(X.error instanceof oi))break}}if(E)return this.reportError("failed_to_complete_upload_of_stream",E),delete this._ongoing_requests[s],this.triggerEvent(Yi(s,{code:"error",details:E}));this.triggerEvent(VD(s)),delete this._ongoing_requests[s],this._pending_uploads=this._pending_uploads.filter(V=>V.identifier!==s),i&&Cr({type:we},n)};cancelUpload=async(t,r)=>{In.log("Handling cancel remote upload request",t,r);let n=this._ongoing_requests[t]?.cancel;if(n)return delete this._ongoing_requests[t],n(r);throw In.warn("Missing cancellation token for download",t,r),new Error(`Missing cancellation token for download [${t}]`)};cancelAllUpload=()=>{for(let t in this._ongoing_requests){let r=this._ongoing_requests[t]?.cancel;if(r)return delete this._ongoing_requests[t],r("USER_CANCELLED_ALL");In.warn("Missing cancellation token for download",t)}};addPendingUpload=t=>{this._pending_uploads.push(t),this._uploadEventManager.handleUploadEvent(zD(t.identifier,t.filename))}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Jm=class extends jo{_progressUpdateInterval;get isSupported(){return Fe.isSupported()}constructor(t){super(t),this._progressUpdateInterval=t.progressUpdateInterval??500}beginPipeStream=()=>$(async()=>{if(!this.streamIdentifier)throw new Error("No stream identifier was provided");if(!this.readStream)throw new Error("Missing download stream");let t=this.streamIdentifier,r=await Fe.getFileWriteStream(t,{create:!0,keepExistingData:!1});if(!r.success)throw r.error;let n=this.createProgressStream(this._progressUpdateInterval),i=(this.readStream?.pipeThrough(n.transformStream).pipeTo(r.value)).then(()=>Fe.getFile(t).then(s=>{if(!s.success)throw s.error;return s.value.size}));return{cancel:s=>n.cancel(s),pipeStreamPromise:i}});cancel(t){this.readStream?.cancel(t)}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function gr(e,t){if(t<4)throw new Error("max length must be atleast 4");if(e.length>t){let r=e.split("."),n=Math.min(r[0].length,t-4),o=e.substring(0,n-1);if(r.length>1){let i=r.pop();return o+"..."+i}return o+"..."}return e}function $y(e){if(!e)return null;let t=e.lastIndexOf(".");if(t===-1)return null;let r=e.slice(t+1);return r||null}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Gl=class{_map=new Map;_keylist;constructor(t){this._map=new Map,this._keylist=new Fr(t),this._keylist.onClean.addListener(this.onKeysCleaned)}onKeysCleaned=t=>{t.forEach(r=>this._map.delete(r))};get size(){return this._map.size}clear=()=>{this._keylist.clear(),this._map.clear()};delete=t=>{let r=this._map.delete(t);return this._keylist.removeWhere(n=>n===t),r};forEach=t=>this._map.forEach(t);get=t=>this._map.get(t);set=(t,r)=>this._map.set(t,r);has=t=>this._map.has(t);values=()=>this._map.values();entries=()=>this._map.entries()};var ep=te("m.disposable_file_viewer.background.redirect_chains"),tn=new class{currentChains=new Map;completedChainsByUrl=new Gl({itemRetentionTime:1e4*2,pollingTime:1e3});completedChainsById=new Gl({itemRetentionTime:1e4*2,pollingTime:1e3});patterns;constructor(){this.patterns=C.map(t=>({match:t.match,selection:t.selection,pattern:new RegExp(t.pattern)}))}addRedirect=t=>{let r=this.currentChains.get(t.requestId);r?r.push(t.redirectUrl):this.currentChains.set(t.requestId,[t.url,t.redirectUrl])};failRedirectChain=t=>{let r=this.currentChains.get(t.requestId);if(r)return ep.warn("Redirect chain ended in failure",r,t),void this.currentChains.delete(t.requestId)};completeRedirectChain=t=>{let r=this.currentChains.get(t.requestId);r&&(ep.info("Redirect chain completed",r,t),this.currentChains.delete(t.requestId),this.completedChainsById.set(t.requestId,r),this.completedChainsByUrl.set(t.url,r))};getChainByRequestId=t=>this.completedChainsById.get(t);getChainByFinalUrl=t=>this.completedChainsByUrl.get(t);getPossibleReplayUrls=t=>{let r=this.getChainByFinalUrl(t);if(!r)return t;let n=r[0];if(!n||r.length===1)return t;for(let o of this.patterns)if((o.match==="original"||o.match==="any")&&o.pattern.test(n)||(o.match==="final"||o.match==="any")&&o.pattern.test(t))return ep.warn("Redirect chain found but direct selection is specified for",t,o),o.selection==="original"?n:t;return r.reverse()}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function es(e=1){let t=Math.pow(10,e-1),r=Math.pow(10,e)-1;return Math.floor(Math.random()*(r-t+1))+t}function sC(e){let t=Number(e);return Number.isNaN(t)?null:t}function Qy(e){let t=Number(e);return Number.isNaN(t)?void 0:t}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var tp=class{getPasswordArgument=t=>{if(t.requestUrl.startsWith("https://bazaar.abuse."))return["infected"]};onDownloadCreated=async t=>{let r=t.url??t.finalUrl??"";if(!r)return t;if(r.startsWith("https://bazaar.abuse.")){let n=this.getNewHashForMalwareBazaar(t.referrer);return n&&(t.url=`/${new URL(r).pathname.split("/")[1]}/${n}`,t.finalUrl=`/${new URL(r).pathname.split("/")[1]}/${n}`),t}return t};onCreateTrackingItem=async(t,r)=>{if(t&&t.requestUrl.startsWith("https://bazaar.abuse.")){let n=r?.dedupeList,o=t.downloadItem?.referrer,i=t.requestUrl;if(!o)return;let s=await this.getNewHashForMalwareBazaar(o);if(!s)return;let a=new URL(t.requestUrl);return a.pathname=`/${a.pathname.split("/")[1]}/${s}`,t.overrideUrl=a.toString(),t.requestUrl=a.toString(),t.downloadItem&&(t.downloadItem.url=a.toString(),t.downloadItem.finalUrl=a.toString()),Array.isArray(r?.dedupeList)&&(n=r?.dedupeList?.filter(w=>w.requestUrl!==i)??[]),{newList:n}}};getNewHashForMalwareBazaar=async t=>{let r=await $(()=>fetch(t).then(async n=>{if(n.ok){let o=await n.text(),i=/<button[^>]*type="button"[^>]*class="btn btn-primary"[^>]*>.*?<\/button>/g;return o.match(i)?.[0]?.match(/value="([^"]*)"/)?.[1]??""}}));return r.success?r.value??"":""}};var ke=te("m.disposable_file_viewer.background.downloads.download_manager"),rp=class{vendorSpecificLogic=new tp;_ongoing_requests={};_triggeredDownloads=new Fr({itemRetentionTime:1e4,pollingTime:1e4});_module;_orphanedDownloads=new Fr({itemRetentionTime:1e4,pollingTime:1e4});_downloadDomainBypassList=new Ji(Gy);_onDownloadReplayMistmatch=new Qt(at);_settings=new Ji(qr);constructor(t){this._module=t}_domainState=new Map;_requestChainTrackingItems=new Map;get requestChainTrackingItems(){return this._requestChainTrackingItems}get domainDownloads(){return Array.from(this._domainState.values())}get onDownloadReplayMismatch(){return this._onDownloadReplayMistmatch.nonExecutable}onBeforeRequest=t=>{["sub_frame","main_frame"].includes(t.type)&&(t.tabId>-1&&W.tabs.get(t.tabId,r=>{if(!r)return;let n=ti.getHostname(r.url??"/");n&&this.setDownlodDomainForTargetURL(n,t.url)}),this.requestChainTrackingItems.set(t.requestId,{request:t,headers:[]}))};setDownlodDomainForTargetURL=(t,r)=>{ke.log("Download domain mapping ADDED",t,r),this._domainState.set(r,{domain:t,target_url:r,expires_at:new Date().getTime()+3e4})};onBeforeSendHeaders=t=>{if(!t.requestHeaders||t.requestHeaders.length===0)return;let r=this._requestChainTrackingItems.get(t.requestId);r&&this._requestChainTrackingItems.set(t.requestId,{request:r.request,headers:t.requestHeaders})};getBestDownloadDomain=t=>{let r=this._domainState.get(t);if(r)return r.domain;let o=this._module.api.tabs.getTabsForUrl(t)[0]??null,i=ti.getHostname(t);return i&&o&&this.setDownlodDomainForTargetURL(i,t),i};onBeforeDownload=(t,r)=>{let o=this._triggeredDownloads.find(E=>E.id===t.id)?.filename;if(o)return r({filename:o,conflictAction:"uniquify"});let i=o??t.filename,s=t.finalUrl??t.url??"",a=this.getBestDownloadDomain(s),w=this.shouldBypassUploadableTrackingItem(s,a);return!w&&this._settings.currentValue?.block_downloads&&W.downloads.cancel(t.id),$(async()=>{let E=await this.shouldPerformAnalysis(t.fileSize),V=await Kt.unsafeTransact(async q=>{let K=await q.get()??[],H=K.findIndex(ee=>ee.downloadId===t.id),X;if(H===-1){let ee=new Date().getTime();ke.warn("No tracking information was found for the imminent download",t);let Q=await this.getBestDownloadDomain(s),Z=ft(),J=`${Z}_${t.id}_${i}`;if(X={id:Z,downloadId:t.id,downloadItem:t,requestUrl:s,requestMethod:"GET",requestBody:null,requestHeaders:[],responseHeaders:[],responseStatusCode:null,downloadFilenameSuggestion:i,dispositionFilenameSuggestion:void 0,analysis_outcome:null,analysis_category:E.defaultCategory,analysis_opfs_location:E.performAnalysis?J:null,created_at:ee,expires_at:ee+1e4,downloadTrackingData:{totalDownloadSize:null,currentDownloadSize:0},uploadTrackingData:{currentUploadSize:0,totalUploadSize:null,started:!1,status:E.performAnalysis?"downloading":"pending"},bestGuessForOriginDomain:Q},w)return;K.push(X)}else{X=K[H];let ee=`${X.id}_${t.id}_${i??X?.dispositionFilenameSuggestion}`;X.downloadId=t.id,X.analysis_outcome=null,X.analysis_opfs_location=E.performAnalysis?ee:null,X.downloadFilenameSuggestion=i,X.uploadTrackingData.status=E.performAnalysis?"downloading":"pending",X.downloadTrackingData=E.performAnalysis?{totalDownloadSize:null,currentDownloadSize:0}:void 0}let Y=await this.vendorSpecificLogic.onCreateTrackingItem(X,{dedupeList:K});return Y?.newList?await q.set([...Y.newList]):await q.set([...K]),X});if(V&&E.performAnalysis){let q=`${V.id}_${V.downloadId}_${V?.downloadFilenameSuggestion??V.dispositionFilenameSuggestion}`;this.submitDownloadToOpfs(q,V)}})};handleDownloadProgressEvent=async(t,r,n)=>Kt.transact(async o=>{let i=await Be.lookupFileTrackingItem(t,o);if(!i.success)throw i.error;let s=i.value;if(!Hl(s)){ke.warn("Received download progress event for tracking item that could not be found",t);return}return s.items[s.index]={...s.item,downloadTrackingData:{totalDownloadSize:n,currentDownloadSize:r}},await $(()=>o.set([...i.value.items]))});handleDownloadCancelledEvent=async(t,r)=>Kt.transact(async n=>{let o=await Be.lookupFileTrackingItem(t,n);if(!o.success)throw o.error;let i=o.value;if(!Hl(i)){ke.warn("Received download progress event for tracking item that could not be found",t);return}return i.items[i.index]={...i.item,uploadTrackingData:{...i.item.uploadTrackingData,status:"error",error:{code:"cancellation",reason:r}}},await $(()=>n.set([...o.value.items]))});submitDownloadToOpfs=async(t,r)=>{if(!r)return ke.warn("No tracking item to run OPFS download");let n=new Jm({streamIdentifier:t,onProgress:(Z,J)=>{this.handleDownloadProgressEvent(r.id,Z,J)}}),o=r.requestBody?.formData?Object.entries(r.requestBody.formData).reduce((Z,J)=>(Z.append(J[0],J[1][0]),Z),new FormData):!1,i=r.downloadItem?.finalUrl??r.requestUrl,s=r.overrideUrl??Be.getTargetUrl(i),a=tn.getPossibleReplayUrls(s),w=Array.isArray(a)?a[0]:a,E=br(i),V=await n.createDownloadStream(w,o);if(!V.success)return E&&i===s?ke.warn("Generated blob is not yet known"):ke.error("Failed to created download stream for OPFS",V.error);let q=V.value.raw_response;await Be.updateFileTrackingItem(r,Z=>{Z.downloadTrackingData={totalDownloadSize:n.totalBodySize,currentDownloadSize:0},Z.uploadTrackingData.status="downloading"});let K=Ze.validateResponseDetails(q,{headers:Ze.extractReplayComparisonHeaders(r.responseHeaders),statusCode:Qy(r.responseStatusCode)});if(!K.valid){n.abortDownload(K.message);let Z=this._settings.currentValue?.block_downloads?"Error retrieving file contents. Refresh the page or disable the download interceptor to retry.":"Error retrieving file contents. Refresh the page and retry.";return void await Be.updateFileTrackingItem(r,J=>{J.uploadTrackingData.status="error",J.uploadTrackingData.error={code:"error",details:Z}})}let H=await n.beginPipeStream();if(!H.success)return ke.error("Unable to stream download into OPFS",H.error);this._ongoing_requests[r.id]={session_id:r.id,cancel:H.value.cancel};let X=this._settings.currentValue?.no_limit_scanning??!1,Y=await $(()=>H.value.pipeStreamPromise),ee=r.responseHeaders.find(Z=>Z.name.toLowerCase()===Ze.CONTENT_LENGTH_HEADER)?.value,Q=ee?Number(ee):r.downloadItem?.totalBytes;if(!Y.success){Y.error==="USER_CANCELLED_DOWNLOAD"||Y.error==="USER_CANCELLED_ALL"?(ke.warn("Download was cancelled by the user",r.id),this.handleDownloadCancelledEvent(r.id,Y.error)):ke.error("Failed while streaming download into OPFS",Y.error);return}if(!Ze.isCompressionSpecifiedInHeaders(V.value.response_headers)&&Q!==void 0&&Q>0&&Y.value!==Q){if(Array.isArray(w)){let J=w[w.length-1];ke.warn("Inconsistency found in download, but original redirect source is available",J);let ue=await Be.updateFileTrackingItem(r,be=>{be.overrideUrl=J});if(ue.success)return this.submitDownloadToOpfs(t,ue.value);ke.warn("Failed to update override URL of tracked item")}let Z=this._settings.currentValue?.block_downloads?"Error retrieving file contents. Refresh the page or disable the download interceptor to retry.":"Error retrieving file contents. Refresh the page and retry.";return void await Be.updateFileTrackingItem(r,J=>{J.uploadTrackingData.status="error",J.uploadTrackingData.error={code:"error",details:Z}})}if(X||Y.value<1073741824){ke.info("Downloaded byte size",Y.value),await Be.updateFileTrackingItem(r,ue=>{ue.uploadTrackingData.status="analyzing"});let Z=this.vendorSpecificLogic.getPasswordArgument(r)??[],J=await this._module.api.exposedFunctions.analyzeFileFromOPFS(t,r.downloadFilenameSuggestion??r.dispositionFilenameSuggestion??"",Z,{fileTypeMismatch:!0,macroThreatAnalysis:!0});J.success?(r.analysis_outcome=J.value,r.analysis_category=Uo(J.value),this._module.api.report.log(Ht({event_type:190,trigger:"remote_upload_options_module",event_details:{result:r.analysis_category}}))):(ke.error("Unable to perform file analysis",J.error),r.analysis_category="none")}else ke.warn("File not analyzed as it exceeds the size limit",Y.value);await Be.updateFileTrackingItem(r,Z=>{let J=new Date().getTime();Z.uploadTrackingData.status="pending",Z.created_at=J,Z.expires_at=J+1e4})};shouldBypassUploadableTrackingItem=(t,r)=>{let n=ti.getHostname(t),i=this._downloadDomainBypassList.currentValue??[];if(r&&i.includes(r)||n&&i.includes(n))return ke.warn("DL intercept is bypassed, whitelist includes either origin or target domain",n,r,i),!0;let s=br(t),w=this._module.api.tabs.getTabsForUrl(t).length>0;return s&&w?(ke.warn("DL intercept is bypassed, possible blob based tab which we cannot inject CS into",t),!0):s&&t.startsWith("blob:null")?(ke.warn("DL intercept is bypassed, blob:null is inaccessible from our background script",t),!0):k.includes(r)||k.includes(n)?(ke.warn("DL intercept is bypassed, origin or target domain exists in the hardcoded list provided during the build",r,n),!0):!1};compareResponseHeaderConsistency=(t,r)=>{let{filename:n,totalBytes:o,fileSize:i,mimeType:s}=r,a=w=>({consistent:!1,message:w});if(i){let w=Number(t.size);if(w&&!isNaN(w)&&i!==w)return a(`File size mismatch. Expected [${w}] but received [${i}]`)}else if(o){let w=Number(t.size);if(w&&!isNaN(w)&&o!==w)return a(`Total byte length mismatch. Expected [${w}] but received [${o}]`)}else if(n){let w=$y(n),E=$y(t.filename??"");if(!w&&E||w&&!E)return a(`File extension mismatch. Expected ${E?`[${E}]`:"no extension"} but received ${w?`[${w}]`:"no extension"}`);if(w&&E&&w!==E)return a(`File extension mismatch. Expected ${E?`[${E}]`:"no extension"} but received ${w?`[${w}]`:"no extension"}`)}else if(s){let w=t.mimeType;if(w&&!w.startsWith(s))return a(`MIME extension mismatch. Expected [${w}] but received [${s}]`)}return{consistent:!0}};checkReplayedDownloadConsistency=(t,r)=>{(r.fileSize!==null||r.totalBytes!==null)&&Ze.isCompressionSpecifiedInHeaders(t.expect?.headers??{})&&(r.fileSize=null,r.totalBytes=null);let n=i=>{if(t.flaggedForInconsistency=!0,t.expect?.originalTrackingItem){let s=t.expect?.originalTrackingItem;Kt.transact(async a=>{let w=await a.get()??[];w.push(s),s.uploadTrackingData.status="error",ke.warn("download consistency check failed",i),s.uploadTrackingData.error={code:"error",details:"Error retrieving file contents. Refresh the page or disable the download interceptor to retry."},await a.set(w)})}this._onDownloadReplayMistmatch.runAllListeners([{id:t.id,filename:t.filename,message:i}])},o=this.compareResponseHeaderConsistency({filename:t.filename,size:sC(t.expect?.headers?.[Ze.CONTENT_LENGTH_HEADER]),mimeType:t.expect?.headers?.[Ze.CONTENT_TYPE_HEADER]??null},r);if(!o.consistent)return n(o.message)};onDownloadChanged=t=>{let r=this._triggeredDownloads.find(n=>n.id===t.id);return r&&!r.flaggedForInconsistency&&this.checkReplayedDownloadConsistency(r,{filename:t.filename?.current??null,fileSize:t.fileSize?.current??null,mimeType:t.mime?.current??null,totalBytes:t.totalBytes?.current??null}),Kt.transact(async n=>{let o=await n.get()??[];o.filter(s=>s.downloadItem?.id===t.id).forEach(s=>{t.totalBytes?.current&&(s.downloadItem.totalBytes=t.totalBytes.current),t.fileSize?.current&&(s.downloadItem.fileSize=t.fileSize.current),t.filename?.current&&(s.downloadItem.filename=t.filename.current),t.exists?.current&&(s.downloadItem.exists=t.exists.current),t.mime?.current&&(s.downloadItem.mime=t.mime.current),t.state?.current&&(s.downloadItem.state=t.state.current),t.error?.current&&(s.downloadItem.error=t.error.current)}),await n.set([...o])})};onDownloadCreated=async t=>{let r=await this.vendorSpecificLogic.onDownloadCreated(t),n=ti.getHostname(r.referrer),o=r.finalUrl??r.url??"",i=this._triggeredDownloads.find(a=>a.id===r.id);if(i){i.flaggedForInconsistency||this.checkReplayedDownloadConsistency(i,{filename:r.filename||null,fileSize:r.fileSize||null,totalBytes:r.totalBytes||null,mimeType:r.mime||null});return}n&&this.setDownlodDomainForTargetURL(n,o);let s=await this.getBestDownloadDomain(o);await Kt.transact(async a=>{let w=await a.get()??[],E=w.filter(V=>V.requestUrl===r.finalUrl&&!V.downloadId);if(E.length===0){this._orphanedDownloads.push(r),ke.warn("No available upload tracker for download",r,w);return}E.forEach(V=>{V.downloadId=r.id,V.downloadItem=r,V.bestGuessForOriginDomain=s}),await a.set([...w])})};shouldPerformAnalysis=async t=>{if(!this._module.api.exposedFunctions.analyzeFileFromOPFS.isAvailable())return{performAnalysis:!1,defaultCategory:null};let r=await qr.get(),n=r.success?!!r.value?.analyze_downloads:!1;return!(r.success?!!r.value?.no_limit_scanning:!1)&&1073741824<t?{performAnalysis:!1,defaultCategory:n?"none":null}:{performAnalysis:n,defaultCategory:null}};onHeadersReceived=t=>{let r=this._requestChainTrackingItems.get(t.requestId);if(this._requestChainTrackingItems.delete(t.requestId),!r||t.statusCode>=300&&t.statusCode<400)return;tn.completeRedirectChain(t);let n=t.responseHeaders;if(!n)return;let o=n.find(V=>V.name.toLowerCase()===Ze.CONTENT_DISPOSITION_HEADER);if(!o||!o.value)return;let i=Lm(o.value);if(i.type!=="attachment")return;let s=n.find(V=>V.name.toLowerCase()===Ze.CONTENT_LENGTH_HEADER),a=it(()=>parseInt(s?.value??"-1")),w=a.success?a.value:-1;w===0&&ke.warn("A response with a content disposition header arrived with a zero length body!",t);let E=this.getBestDownloadDomain(r.request.url);this.shouldBypassUploadableTrackingItem(r.request.url,E)||Kt.transact(async V=>{let q=await V.get()??[],K=new Date().getTime(),H=ft(),X=this._orphanedDownloads.find(Q=>Q.finalUrl===r.request.url);X&&(ke.warn("Found an orphaned download!",X),this._orphanedDownloads=this._orphanedDownloads.filter(Q=>Q!==X));let Y=await this.shouldPerformAnalysis(w),ee={id:H,requestUrl:r.request.url,requestMethod:r.request.method,requestBody:r.request.requestBody,requestHeaders:r.headers.map(Q=>({name:Q.name,value:Q.value??""})),responseHeaders:n.map(Q=>({name:Q.name,value:Q.value??""})),responseStatusCode:t.statusCode,analysis_outcome:null,analysis_category:Y.defaultCategory,downloadFilenameSuggestion:void 0,analysis_opfs_location:null,dispositionFilenameSuggestion:i.filename,created_at:K,expires_at:K+1e4,bestGuessForOriginDomain:E,downloadId:X?.id,downloadItem:X,downloadTrackingData:Y.performAnalysis?{totalDownloadSize:w??null,currentDownloadSize:0}:void 0,uploadTrackingData:{started:!1,currentUploadSize:0,totalUploadSize:null,status:Y.performAnalysis?"downloading":"pending"}};q.push(ee),await V.set(q)})};triggerBlobReadyEvent=async t=>{let r=await Kt.get();if(!r.success)return ke.error("Storage lookup failed for DFV tracking items",r.error);if(!r.value)return;let n=r.value.find(o=>(o.downloadItem?.finalUrl??o.requestUrl??"")===t);n&&this.submitDownloadToOpfs(n.id,n)};cancelDownload=async(t,r)=>{ke.log("Handling cancel remote download request",t,r);let n=this._ongoing_requests[t]?.cancel;if(n)return delete this._ongoing_requests[t],n(r);throw ke.warn("Missing cancellation token for download",t,r,this._ongoing_requests),new Error(`Missing cancellation token for download [${t}]`)};cancelAllDownloads=()=>{for(let[t,r]of Object.entries(this._ongoing_requests)){let n=r.cancel;n?n("USER_CANCELLED_ALL"):ke.warn("Missing cancellation token for download",t),delete this._ongoing_requests[t]}};enable(){W.webRequest.onBeforeRequest.addListener(this.onBeforeRequest,{urls:["*://*/*"]},["requestBody"]),W.webRequest.onBeforeSendHeaders.addListener(this.onBeforeSendHeaders,{urls:["*://*/*"]},["requestHeaders"]),chrome.downloads.onDeterminingFilename.addListener(this.onBeforeDownload),W.downloads.onChanged.addListener(this.onDownloadChanged),W.downloads.onCreated.addListener(this.onDownloadCreated),W.webRequest.onHeadersReceived.addListener(this.onHeadersReceived,{urls:["*://*/*"]},["responseHeaders"]),W.webRequest.onBeforeRedirect.addListener(tn.addRedirect,{urls:["*://*/*"]}),W.webRequest.onErrorOccurred.addListener(tn.failRedirectChain,{urls:["*://*/*"]}),ke.log("Download interception is started")}disable(){W.webRequest.onBeforeRequest.removeListener(this.onBeforeRequest),W.webRequest.onBeforeSendHeaders.removeListener(this.onBeforeSendHeaders),chrome.downloads.onDeterminingFilename.removeListener(this.onBeforeDownload),W.downloads.onChanged.removeListener(this.onDownloadChanged),W.downloads.onCreated.removeListener(this.onDownloadCreated),W.webRequest.onHeadersReceived.removeListener(this.onHeadersReceived),W.webRequest.onBeforeRedirect.removeListener(tn.addRedirect),W.webRequest.onErrorOccurred.removeListener(tn.failRedirectChain),this._domainState.clear(),ke.log("Download interception is stopped")}removeExpiredDomains=()=>{let t=new Date().getTime();this.domainDownloads.forEach(r=>{r.expires_at<=t&&(ke.log("Download domain mapping DELETED",r.target_url,r),this._domainState.delete(r.target_url))})};browserDownloadFromOpfs=async(t,r,n)=>{let o=await this._module.api.createObjectURL.fromOPFS(r,n);if(!o.success)return ke.error("Unable to get URL from OPFS file",o.error),o;ke.info(`Triggering [${n}] download for`,t,n);let i=await this.browserDownloadFromUrl({url:o.value.url,filename:t});return ke.info("Browser download has completed"),o.value.ack(),i};browserDownloadFromArrayBuffer=async(t,r,n)=>{let o=await this._module.api.createObjectURL.fromBinary(r,n);if(!o.success)return ke.error("Unable to get URL from binary file",o.error),o;ke.info("Got URL object",o);let i=await this.browserDownloadFromUrl({url:o.value.url,filename:t});return o.value.ack(),i};prevalidateUrlForDownloadResponse=async(t,r)=>{let n=await Xm(t,{headers:r?.headers,statusCode:Qy(r?.originalTrackingItem?.responseStatusCode)});return n.valid?t:(ke.error("Prevalidation of URL failed",n.message,t),tn.getChainByFinalUrl(t)?.[0]??t)};browserDownloadFromUrl=async(t,r)=>{let n=await $(()=>W.downloads.download(t));return n.success&&this._triggeredDownloads.push({id:n.value,filename:t.filename??ft(),flaggedForInconsistency:!1,expect:r}),n}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var X1=te("m.disposable_file_viewer.background.body_serializer"),pa=class{constructor(){}},Ho=pa;ie(Ho,"writeValue",(t,r,n)=>{let o=`--${t}\r
`,i=`Content-Disposition: form-data; name=${r}\r
\r
`;return[o,i,n].join("")}),ie(Ho,"serializeMultipartFormdata",(t,r)=>{let[,n]=r.split(";").map(a=>a.trim()),i=n.match(/boundary=(.+)$/)?.[0]??"--WebKitFormBoundary76mR643uBsArSVAy",s=[];for(let[a,w]of Object.entries(t))if(Array.isArray(w)){let E=`${a}[]`;for(let V of w)s.push(pa.writeValue(i,E,V))}else s.push(pa.writeValue(i,a,w));return s.join(`\r
`)}),ie(Ho,"serializeUrlEncoded",t=>{let r=new FormData;for(let[n,o]of Object.entries(t))if(Array.isArray(o))if(o.length>1){let i=`${n}[]`;for(let s of o)r.append(i,s)}else r.append(n,o[0]);else r.append(n,o);return new URLSearchParams(r).toString()}),ie(Ho,"serializeBody",(t,r)=>t?t.formData?r?.startsWith("multipart/form-data")?pa.serializeMultipartFormdata(t.formData,r):pa.serializeUrlEncoded(t.formData):t.raw?(X1.warn("Serialization of raw body is not implemented. Currently no examples of serializing this are known."),""):null:null);var Yt=te("m.disposable_file_viewer.background.index"),Z1=["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Date","DNT","Expect","Host","Keep-Alive","Origin","Permissions-Policy","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via","User-Agent"].map(e=>e.toLowerCase()),np=class extends Ee{downloadManager=new rp(this);uploadManager=new Zm(this);state="stopped";_fileTrackerCleanupIntervalHandle;onInit=()=>{Be.destroyAllFileTrackingItems()};onStart(){this.state="starting",this._fileTrackerCleanupIntervalHandle=self.setInterval(()=>{Be.cleanExpiredBlobs()}),this.api.exposedEvents.onSessionLaunchFailed.addListener(this.handleSessionLaunchFailed),this.api.exposedEvents.onSessionReady.addListener(this.handleSessionReady),qr.onChange.addListener(this.settingsChanged,!0),Yt.info("Started"),this.api.timers.setInterval(()=>{Kt.transact(async t=>{let r=await t.get()??[],n=new Date().getTime(),o=r.filter(s=>s.uploadTrackingData?.status==="pending"&&s.created_at+1e4<n);if(o.length===0)return;let i=await Be.destroyFileTrackingItems(o.map(s=>s.id),t);i.success?o.length>0&&Yt.info("Destroyed tracking items",o):Yt.error("Unable to destroy tracking items",i.error)})},1e3),this.api.timers.setInterval(this.downloadManager.removeExpiredDomains,1e3),this.state="started"}onStop(){this.state="stopping",self.clearInterval(this._fileTrackerCleanupIntervalHandle),this.api.exposedEvents.onSessionLaunchFailed.removeListener(this.handleSessionLaunchFailed),this.api.exposedEvents.onSessionReady.removeListener(this.handleSessionReady),this.downloadManager.disable(),qr.onChange.removeListener(this.settingsChanged),Yt.info("Stopped"),this.state="stopped"}settingsChanged=t=>{["stopped","stopping"].includes(this.state)||(t?.intercept_downloads?this.downloadManager.enable():this.downloadManager.disable())};handleSessionReady=t=>{t.type!==Ne&&this.uploadManager.startPendingUploads(t.session)};handleSessionLaunchFailed=t=>{Yt.warn("Launch session error",t)};setDialogVisibility=t=>{Hy.set({minimized:t})};addBypassDomain=t=>(iC(t),Kt.transact(async r=>{let o=(await r.get()??[]).filter(i=>ti.getHostname(i.downloadItem?.finalUrl??i.requestUrl)!==t&&i.bestGuessForOriginDomain!==t);await r.set(o)}));uploadPendingItem=async(t,r)=>{let n=await Be.lookupFileTrackingItem(t);if(!n.success){Yt.warn("Unable to read from local storage");return}let{item:o}=n.value;if(!o){Yt.warn(`Unable to find tracking item with id [${t}]`);return}let i=o.downloadItem?.finalUrl??o.requestUrl,s=Be.getTargetUrl(i),a=o.requestBody?.formData?Object.entries(o.requestBody.formData).reduce((K,H)=>(K.append(H[0],H[1][0]),K),new FormData):null,w=o.analysis_opfs_location?await Fe.getFile(o.analysis_opfs_location):null,E=w?.success?w.value.stream():null,V=w?.success?w.value.size:null,q=tn.getPossibleReplayUrls(s);this.launchDisposableFileViewer({upload:{filename:o.downloadFilenameSuggestion??o.dispositionFilenameSuggestion??(o.downloadItem?.filename||o.id),contentDetails:E?{type:"from_stream",stream:E,size:V??0}:{type:"from_url",url:q,expecation:Array.isArray(q)?{statusCode:o.responseStatusCode??void 0,headers:Ze.extractReplayComparisonHeaders(o.responseHeaders)}:void 0,post_body:a},window_trigger_id:r.tab.windowId,identifier:o.id,openTabAfterUpload:!0,trigger:"remote_upload_options_module"},openTabOnLaunch:!1})};openAnalysisDialog=async(t,r)=>{let n=await Be.lookupFileTrackingItem(t);if(!n.success)return Yt.error("Unable to find tracking item for opening analysis dialog",n.error);if(!n.value.item.analysis_outcome)return Yt.error("Analysis does not exist");if(!n.value.item.analysis_opfs_location)return Yt.error("Analysis OPFS does not exist");let o=await Fe.readAllFileBytes(n.value.item.analysis_opfs_location);if(!o.success)return Yt.error("OPFS read failed");await this.api.exposedFunctions.openDocumentScanResultsDialog({tabId:r.tab.id,fileName:n.value.item.downloadFilenameSuggestion??"download.ext",cached:!1,result:n.value.item.analysis_outcome,trigger:"remote_upload_options_module",rawFile:o.value,passwords:[]}),Be.destroyFileTrackingItem(t)};downloadTrackedItem=async t=>{let r=await Be.lookupFileTrackingItem(t);if(!r.success)return Yt.error("Failed to lookup file tracking item",t,r.error);if(!r.value)return Yt.warn("Missing file tracking item for download",t);let{item:n}=r.value,o=n.downloadFilenameSuggestion??n.dispositionFilenameSuggestion??n.downloadItem?.filename??"unknown";if(n.analysis_opfs_location){let i=await this.downloadManager.browserDownloadFromOpfs(o,n.analysis_opfs_location,n.analysis_outcome?.fileTypes[0]?.mime||"application/octet-stream");if(!i.success)return Yt.error("Failed to download tracking item from OPFS",i.error)}else{let i=Be.getTargetUrl(n.requestUrl),s=Ze.extractReplayComparisonHeaders(n.responseHeaders),a=tn.getPossibleReplayUrls(i),w=i;if(n.requestMethod==="GET")if(Array.isArray(a)){let q=await this.downloadManager.prevalidateUrlForDownloadResponse(i,{originalTrackingItem:n,headers:s,statusCode:n.responseStatusCode??void 0});q!==i&&Yt.warn("Download URL switched after prevalidation failure",q),w=q}else w=a;let E=n.requestHeaders.find(q=>q.name.toLowerCase()==="content-type")?.value??null,V=await this.downloadManager.browserDownloadFromUrl({url:w,filename:o,method:n.requestMethod,headers:n.requestHeaders.filter(q=>{let K=q.name.toLowerCase();return!Z1.includes(q.name.toLowerCase())&&!K.startsWith("sec-")&&!K.startsWith("proxy")}),body:Ho.serializeBody(n.requestBody,E)??void 0},{headers:s,statusCode:n.responseStatusCode??void 0,originalTrackingItem:n});if(!V.success)return Yt.error("Failed to download tracking item from URL",V.error)}return await Be.destroyFileTrackingItem(t)};clearAllTrackingItems=()=>Be.destroyAllFileTrackingItems();cancelDownloadingItem=t=>this.downloadManager.cancelDownload(t,"USER_CANCELLED_DOWNLOAD");cancelUploadingItem=t=>this.uploadManager.cancelUpload(t,"USER_CANCELLED_UPLOAD");destroyTrackingItem=t=>Be.destroyFileTrackingItem(t);cancelAllInProgressItems=()=>{this.uploadManager.cancelAllUpload(),this.downloadManager.cancelAllDownloads()};setGeneratedBlob=(t,r)=>{Be.setGeneratedBlob(t,r)};launchDisposableFileViewer=async t=>{let r=t?.upload,n=r?.identifier??ft();r&&(this.uploadManager.addPendingUpload({...r,identifier:n}),this.api.report.log(Ht({event_type:113,trigger:r.trigger,event_details:{}})));let o=await this.api.exposedFunctions.launchSession({type:we},!0);return t?.openTabOnLaunch&&Cr({type:we}),!o.success||o.value.failed_launch?(this.api.report.error({known_code:"dfv_launch_error",exception:o.success?o.value.last_known_status:o.error}),o):(r&&o.value.last_known_status===200&&this.uploadManager.startUpload({...r,identifier:n,session_id:o.value.session}),o)};browserDownloadFromUrl=t=>this.downloadManager.browserDownloadFromUrl(t);onUploadEvent=this.uploadManager.onUploadEvent;onDownloadReplayMismatch=this.downloadManager.onDownloadReplayMismatch};var aC={manifest_version:1,module:{version:"1",name:"Disposable File Viewer",description:"Description of disposable file viewers",category:"internal",required_exposed_functions:{background:["launchSession"]},optional_exposed_functions:{background:["analyzeFileFromOPFS","openDocumentScanResultsDialog"]},requires_authentication:!0,requires_permissions:["downloads","webRequest"]},settings_schema:{intercept_downloads:{type:"boolean",default_value:!1},analyze_downloads:{type:"boolean",default_value:!1,depends_on:{field:"intercept_downloads",being:!0}},block_downloads:{type:"boolean",default_value:!1,depends_on:{field:"intercept_downloads",being:!0}},no_limit_scanning:{type:"boolean",default_value:!1,depends_on:{field:"analyze_downloads",being:!0}}},content_script:{frames:{type:"top"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Yy={malicious:!0,suspicious:!0,safe:!1,none:!1,requires_password:!0,partially_scanned:!0};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function lC(e){return{type:"doc-scan-results-dialog-open",data:e}}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function cC(e){return!!e.officeDocumentReport&&e.officeDocumentReport.isCleanable&&e.officeDocumentReport.descriptor.hasVBAMacro&&!(e.officeDocumentReport.descriptor&&"legacy"in e.officeDocumentReport.descriptor)&&!e.officeDocumentReport.descriptor.hasXLMMacro}function uC(e){return e.files.some(r=>r.passwordRequired===!0)}var St=te("m.document_scan_results_dialog.background"),op=class extends Ee{documents=new Map;getContent=async t=>{let r=this.documents.get(t);if(r===void 0){St.error("invalid id",t);return}if(r.opfsLocation){let o=await Fe.readAllFileBytes(r.opfsLocation);if(!o.success){St.error("couldn't read from opfs",t);return}return o.value}if(!r.lazyFetchFile){St.error("lazy fetch and rawFile not defined");return}let n=await $(async()=>r.lazyFetchFile&&r.lazyFetchFile());if(!n.success||!n.value){St.error("lazy fetch failed");return}return n.value};async evict(t){let r=this.documents.get(t)?.opfsLocation;r&&await Fe.destroyFile(r),this.documents.delete(t)}assertDocument=t=>{let r=this.documents.get(t);if(!r)throw new st(`Missing document with ID [${t}]`);return r};cleanOfficeDocument=async(t,r)=>{let n=this.assertDocument(t),o=r.tab.id;if(!n.result.officeDocumentReport?.descriptor){St.warn("not an office doc");return}if("legacy"in n.result.officeDocumentReport.descriptor){St.warn("macro free download cannot happen for legacy");return}let i=es(4).toString();await this.api.exposedFunctions.upsertTaskNotification(o,{id:i,type:"message",message:`Cleaning ${gr(n.fileName,20)}...`});let s=await this.getContent(t);if(!s){St.error("file content not available");return}let a=await this.api.exposedFunctions.removeMacroFromFileBuffer(s,n.result.officeDocumentReport.descriptor);if(!a.success){St.warn("removing macro failed"),await this.api.exposedFunctions.upsertTaskNotification(o,{id:i,type:"error",message:`Cleaning ${gr(n.fileName,20)} failed`});return}let w=n.result.fileTypeMismatch?n.result.fileTypes[0].mime:n.claimedMime,E=n.result.fileTypeMismatch?`${n.fileName.split(".")[0]}.${n.result.fileTypes[0].ext}`:n.fileName,{result:V}=a.value,q=new Blob([V],{type:w}),K=await $(()=>Ul(q));if(!K.success){St.error("Unable to read base64 data from array buffer",K.error),await this.api.exposedFunctions.upsertTaskNotification(o,{id:i,type:"error",message:`Cleaning ${gr(n.fileName,20)} failed`});return}let H=await this.api.exposedFunctions.browserDownloadFromUrl({url:K.value,filename:E});H.success||(St.error("download failed",H.error),await this.api.exposedFunctions.upsertTaskNotification(o,{id:i,type:"error",message:`Cleaning ${gr(n.fileName,20)} failed`})),await this.api.exposedFunctions.hideTaskNotificationForId(o,i),this.api.report.log(Ht({event_type:193,trigger:n.trigger,event_details:{}})),await this.evict(t)};convertToPdf=async(t,r)=>{let n=this.assertDocument(t),o=es(4).toString();this.api.exposedFunctions.upsertTaskNotification(r.tab.id,{id:o,type:"message",message:`Converting ${gr(n.fileName,20)} to pdf...`});let i=await this.getContent(t);if(!i){St.error("file content not available");return}let s=await this.api.exposedFunctions.runFileConversionFromBytes(n.fileName,"pdf",i,n.trigger);if(!s.success){this.api.exposedFunctions.upsertTaskNotification(r.tab.id,{id:o,type:"error",message:`Converting ${gr(n.fileName,20)} to pdf failed`});return}await this.api.exposedFunctions.browserDownloadFromUrl({url:s.value.content,filename:s.value.pdfFileName}),this.api.exposedFunctions.hideTaskNotificationForId(r.tab.id,o),await this.evict(t)};openInOffice365=async(t,r)=>{let n=this.assertDocument(t),o=await this.getContent(t);if(!o){St.error("file content not available");return}if(!(await this.api.exposedFunctions.openInExternalAppFromBytes(r.tab.id,n.fileName,"Office365",o,n.trigger)).success){St.warn("office viewer failed");return}await this.evict(t)};openInDisposableFileViewer=async(t,r)=>{let n=this.assertDocument(t),o=await this.getContent(t);if(!o){St.error("file content not available");return}let i=new Blob([o],{type:n.claimedMime}),s=await $(()=>Ul(i));if(!s.success){St.error("cannot convert to base64",t);return}await this.api.exposedFunctions.launchDisposableFileViewer({upload:{window_trigger_id:r.tab.windowId,filename:n.fileName,contentDetails:{type:"from_url",url:s.value,post_body:!1},openTabAfterUpload:!0,trigger:n.trigger},openTabOnLaunch:!0}),await this.evict(t)};submitPassword=async(t,r,n)=>{let o=this.documents.get(t);if(o===void 0)return St.error("invalid id",t),"scan_failed";let i=await this.getContent(t);if(!i)return St.error("file content not available"),"scan_failed";let s=await this.api.exposedFunctions.analyzeFileFromBytes(i,o.fileName,r,{macroThreatAnalysis:!0,fileTypeMismatch:!0});if(!s.success)return St.error("scanning failed",s.error),"scan_failed";if(s.value.passwordRequired)return"wrong_password";let a=Uo(s.value);return Yy[a]?(this.evict(t),this.openDocumentScanResultsDialog({tabId:n.tab.id,claimedMime:o.claimedMime,fileName:o.fileName,cached:!1,trigger:o.trigger,result:s.value,rawFile:i,passwords:r}),"ok"):"nothing_suspicious"};destroyTrackingItem=t=>this.evict(t);openDocumentScanResultsDialog=async({tabId:t,fileName:r,claimedMime:n,result:o,cached:i,trigger:s,rawFile:a,lazyFetchFile:w,passwords:E})=>{if(!a&&!w)throw new Error("one of raw file or lazy fetch file is required");let V=ft();if(a){let H=await Fe.writeFile(V,a);if(!H.success)return St.error("couldn't write to opfs",H.error),H}let q=o.fileTypeMismatch?o.fileTypes[0].ext:r.split(".").pop();if(!q)throw new Error("invalid file name");let K={pdfConvert:this.api.exposedFunctions.runFileConversionFromBytes.isAvailable()&&Cy(q,"pdf"),officeViewer:this.api.exposedFunctions.openInExternalAppFromBytes.isAvailable()&&Cy(q,"office"),macroFreeDownload:cC(o),rescanPassword:uC(o)};this.documents.set(V,{fileName:r,claimedMime:n,result:o,cached:i,trigger:s,actionSettings:K,opfsLocation:a?V:void 0,lazyFetchFile:w,passwords:E}),this.api.message.sendToContentScript(t,lC({id:V,actionSettings:K,category:Uo(o),fileName:r,result:o,trigger:s,claimedMime:n,passwords:E}))}};var dC={manifest_version:1,module:{version:"1",name:"Document Scan Results Dialog",description:"Dialog to show the document scan results",category:"internal",requires_authentication:!0,required_exposed_functions:{background:["removeMacroFromFileBuffer","launchDisposableFileViewer","browserDownloadFromUrl","upsertTaskNotification","hideTaskNotificationForId","analyzeFileFromBytes"]},optional_exposed_functions:{background:["openInExternalAppFromBytes","runFileConversionFromBytes"]},requires_sqrx_components:["sqrx-dialog"]},content_script:{frames:{type:"top"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var nB=We("utils/_docs");async function mC({fileData:e,fileName:t}){return $(async()=>{if(!t)throw new Error("File name is required");let r=new Blob([e]),n=new FormData;n.append("file",r,t);let o=await nn(async()=>await fetch(nB,{method:"POST",body:n}),{maxAttempts:2});if(!o.success)throw o.error;if(!o.value.ok)throw new Error(`status is ${o.value.status}`);let i=await $(()=>o.value.json());if(!i.success)throw i.error;return{url:i.value.link}})}var Ffr=te("m.external_applications.background"),ip=class extends Ee{openInExternalAppFromBytes=(t,r,n,o,i)=>{let s=es(4).toString();return this.api.exposedFunctions.upsertTaskNotification(t,{id:s,type:"message",message:`Opening ${gr(r,20)} in ${n}...`}),$(async()=>{if(n==="Office365"){let a=await mC({fileData:o,fileName:r});if(!a.success){this.api.exposedFunctions.upsertTaskNotification(t,{id:s,type:"error",message:`Opening ${gr(r,20)} in ${n} failed`});return}let{url:w}=a.value;await W.tabs.create({url:w}),this.api.exposedFunctions.hideTaskNotificationForId(t,s),this.api.report.log(Ht({event_type:180,trigger:i,event_details:{target:"office"}}))}else throw new Error(`No external application available with target [${n}] `)})};openInExternalAppFromURL=async(t,r,n,o,i)=>{let s=await $(async()=>{let w=await(await fetch(o)).blob();return await Am(w)});return s.success?this.openInExternalAppFromBytes(t,r,n,s.value,i):s}};var pC={manifest_version:1,module:{version:"1",name:"External Applications",description:"This module exposes functions for opening files using external applications",category:"internal",requires_authentication:!0,required_exposed_functions:{background:["upsertTaskNotification","hideTaskNotificationForId"]}},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var sB=[/https:\/\/wa\.me/,/https:\/\/(?:\w+\.)?zoom\.us\/j\/\d+(?:\?.*)?/,/https:\/\/meet\.google\.com\/\w+-\w+-\w+/,/https:\/\/t\.me\/[a-zA-Z0-9_]+/,/https:\/\/t\.me\/joinchat\/[a-zA-Z0-9_]+/];function Xy(e){let{protocol:t,href:r}=new URL(e);if(t!=="https:"&&t!=="http:")return!0;for(let n of sB)if(n.test(r))return!0;return!1}function Zy(e,t){return e.startsWith(t.runtime.getURL("redirector.html"))}var ts=te("m.redirector.background"),sp=class extends Ee{redirectUrlMap=new Map;onStart=()=>{W.tabs.onCreated.addListener(this.onTabCreated),W.tabs.onUpdated.addListener(this.onTabUpdated)};onStop=()=>{W.tabs.onCreated.removeListener(this.onTabCreated),W.tabs.onUpdated.removeListener(this.onTabUpdated)};onTabCreated=t=>{if(!t.id||t.id===-1)return;let r=t.pendingUrl??t.url??"";if(!r||!Zy(r,W))return;let n=this.processUnsafeUrl(r),o=n?.b64_result.success?n?.b64_result.value.href:"";if(Xy(r)){this.redirectUrlMap.set(t.id,o);return}return this.redirectTab(t.id,r)};onTabUpdated=(t,r)=>{if(!r.url||!Zy(r.url,W))return;let n=this.processUnsafeUrl(r.url),o=n?.b64_result.success?n?.b64_result.value.href:"";if(Xy(o)){this.redirectUrlMap.set(t,o);return}return this.redirectTab(t,r.url)};processUnsafeUrl=t=>{let r=Nt(t);if(!r.success){ts.error("Invalid URL to redirect to",t);return}let n=new URLSearchParams(r.value.search),o=n.get("url");if(!o)return;let i=n.get("source");if(i!==null&&!isNaN(+i)){let w=Number(i);W.tabs.sendMessage(w,{type:"redirector-init"})}let s=it(()=>new URL(globalThis.atob(o)));if(!s.success){ts.error("Invalid URL parameter in redirector",s.error);return}let a=n.get("d");return{source:i,discover:a,b64_result:s,params:n}};redirectTab=async(t,r)=>{let n=await $(()=>W.tabs.get(t));if(!n.success)return ts.error("Unable to query for tab that we were given"),this.api.report.error({known_code:"tab_lookup_failed_for_known_tabid",data:{}});W.tabs.remove(t,()=>{W.runtime.lastError&&ts.error("Unable to close tab",W.runtime.lastError)});let o=this.api.user.getLatestApiUser();if(!o)return ts.error("No user available"),this.api.report.error({known_code:"missing_user_when_searching_for_home_country",data:{key:"user"}});let i=this.processUnsafeUrl(r);if(!i)return;let{discover:s,b64_result:a}=i;if(s!=="1"||!this.api.exposedFunctions.discoverUrlProperties.isAvailable()||!this.api.exposedFunctions.launchDisposableFileViewer.isAvailable()){await this.api.exposedFunctions.launchDisposableBrowser(o.country,{url:a.value.href,openTabAfterLaunch:!0,trigger:"redirector_module"});return}let w=await this.api.exposedFunctions.discoverUrlProperties(a.value.href);if(!w.success){ts.warn("Failed to discover URL properties",w.error),await this.api.exposedFunctions.launchDisposableBrowser(o.country,{url:a.value.href,openTabAfterLaunch:!0,trigger:"redirector_module"});return}let E=w.value;if(ts.info("Discovered URL properties",E),E.type==="link"){await this.api.exposedFunctions.launchDisposableBrowser(o.country,{url:E.url,openTabAfterLaunch:!0,trigger:"redirector_module"});return}await this.api.exposedFunctions.launchDisposableFileViewer({upload:{window_trigger_id:n.value.windowId,filename:E.filename,contentDetails:{type:"from_url",url:E.url,post_body:!1},openTabAfterUpload:!0,trigger:"redirector_module"},openTabOnLaunch:!0})};getPendingRedirectionInfo=t=>{let r=this.redirectUrlMap.get(t);if(r)return this.redirectUrlMap.delete(t),{tabId:t,url:r}}};var fC={manifest_version:1,module:{version:"1",name:"Redirector",description:"Uses the Disposable Browser External Redirector feature to facilitate redirection to a disposable browser session.",category:"internal",required_exposed_functions:{background:["launchDisposableBrowser"]},optional_exposed_functions:{background:["launchDisposableFileViewer","discoverUrlProperties"]},requires_authentication:!0,requires_permissions:["contextMenus"]},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ap=te("m.search_context_menu.background"),Go=class extends Ee{onInit=()=>{W.contextMenus.onClicked.addListener(this.onClick)};static getMenuId(t){return t?`sqrx-search-${t}`:"sqrx-search"}onStart=()=>{this.updateMenus(),Re.availableRegions.onChange.addListener(this.updateMenus)};onStop=()=>{this.removeMenu(),Re.availableRegions.onChange.removeListener(this.updateMenus)};removeMenu=()=>{W.contextMenus.remove(Go.getMenuId(),()=>{W.runtime.lastError})};updateMenus=async()=>{let t=this.api.user.getLatestApiRegions(),r=this.api.user.getLatestApiUser();if(this.removeMenu(),!r)return;if(!t||t.length===0)return ap.warn("No regions available for disposable browsers");let n={title:'Search for "%s" using SquareX',id:Go.getMenuId(),contexts:["selection"]},o=t.find(V=>V.code===r.country),i=o?.name&&r.country&&r.country!=="NEVER"?{title:`${o?.name}`,parentId:n.id,contexts:["selection"],id:Go.getMenuId(r.country.toLowerCase())}:null,a=t.filter(V=>V.code!==r.country).map(V=>({title:V.name,parentId:n.id,contexts:["selection"],id:Go.getMenuId(V.code.toLowerCase())})),w=await $(()=>W.contextMenus.create(n));if(!w.success)return this.api.report.error({known_code:"create_root_search_contextmenu_error",exception:w.error,data:n});if(i){let V=await $(()=>W.contextMenus.create(i));if(!V.success)return this.api.report.error({known_code:"create_root_search_contextmenu_error",exception:V.error,data:i})}(await Promise.all(a.map(V=>$(()=>W.contextMenus.create(V))))).filter(V=>!V.success).forEach(V=>this.api.report.error({known_code:"create_root_search_contextmenu_error",exception:V.error,data:n}))};launchDisposableBrowser=(t,r)=>this.api.exposedFunctions.launchDisposableBrowser(t,{url:r,openTabAfterLaunch:!0,trigger:"search_context_menu_launcher"});onClick=async t=>{let r=t.menuItemId.toString(),n=r.match(Go.id_matcher);if(!n)return;if(!this.api.isRunning){ap.warn(`Search context menu [${r}] was clicked even though the module is disabled`);return}if(!t.selectionText){ap.warn(`Search context menu [${r}] was clicked but there is no URL info available`);return}ap.log("Availability is",this.api.exposedFunctions.launchDisposableBrowser.isAvailable());let o=n[1].toUpperCase(),i=t.selectionText.trim();if(!/\s/.test(i)){let s=await Nt(i);if(s.success&&["http:","https:"].includes(s.value.protocol))return this.launchDisposableBrowser(o,i)}return this.launchDisposableBrowser(o,`https://www.google.com/search?q=${encodeURIComponent(i)}`)}},Wl=Go;ie(Wl,"id_matcher",new RegExp(`${Go.getMenuId()}-(.{2,3})$`));var hC={manifest_version:1,module:{version:"1",name:"Search with SquareX Context Menu",description:"Integrate with the browser right-click menu to allow selecting any text and search it using Disposable Browser",category:"browser",required_exposed_functions:{background:["launchDisposableBrowser"]},requires_authentication:!0,requires_permissions:["contextMenus"],optional:!0},content_script:{frames:{type:"none"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var Jy=te("m.gmail_attachment_quick_actions.background"),lp=class extends Ee{openFileInDfv=async(t,r)=>{let n=await this.api.exposedFunctions.discoverUrlProperties(t);if(!n.success){Jy.error("Failed to discover URL properties",n.error);return}if(n.value.type==="link"){Jy.error("not a file link");return}await this.api.exposedFunctions.launchDisposableFileViewer({upload:{window_trigger_id:r.tab.windowId,filename:n.value.filename,contentDetails:{type:"from_url",url:n.value.url,post_body:!1},openTabAfterUpload:!0,trigger:"gmail_attachment_quick_actions"},openTabOnLaunch:!0})};downloadFileAsPdf=async(t,r,n)=>{let o=n.tab.id;if(this.api.exposedFunctions.runFileConversionFromURL.isAvailable()&&this.api.exposedFunctions.browserDownloadFromUrl.isAvailable()){let i=es(4).toString(),s=this.api.exposedFunctions.upsertTaskNotification.isAvailable();s&&this.api.exposedFunctions.upsertTaskNotification(o,{id:i,type:"message",message:`Converting ${gr(t,20)} to pdf...`});let a=await this.api.exposedFunctions.runFileConversionFromURL(t,"pdf",r,"gmail_attachment_quick_actions");if(!a.success){s?this.api.exposedFunctions.upsertTaskNotification(o,{id:i,type:"error",message:`Converting ${gr(t,20)} to pdf failed`}):Jy.error(`Converting ${gr(t,20)} to pdf failed`);return}await this.api.exposedFunctions.browserDownloadFromUrl({url:a.value.content,filename:a.value.pdfFileName}),s&&this.api.exposedFunctions.hideTaskNotificationForId(o,i)}};openFileInOffice365=(t,r,n)=>{if(this.api.exposedFunctions.openInExternalAppFromURL.isAvailable())return this.api.exposedFunctions.openInExternalAppFromURL(n.tab.id,t,"Office365",r,"gmail_attachment_quick_actions")};checkFeatureAvailability=()=>({pdfConvert:this.api.exposedFunctions.runFileConversionFromURL.isAvailable(),officeViewer:this.api.exposedFunctions.openInExternalAppFromURL.isAvailable()})};var gC={manifest_version:1,module:{version:"1",name:"Gmail: Additional View Options for Attachments",description:"Displays additional options to open attachments in a Disposable File Viewer, Download as PDF or Open in Office Online",category:"smart_integrations",requires_authentication:!0,required_exposed_functions:{background:["launchDisposableFileViewer","discoverUrlProperties"]},optional_exposed_functions:{background:["openInExternalAppFromURL","runFileConversionFromURL","upsertTaskNotification","hideTaskNotificationForId","browserDownloadFromUrl"]},optional:!0},content_script:{frames:{type:"top"}}};l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function cp(e){return[e.replace(/=([0-9A-F][0-9A-F]|[ \t]*(\r\n|[\r\n]|$))/gi,function(r,n){return n.trim().length==0?"":String.fromCharCode(parseInt(n,16))}),""]}function up(e,t){let r=e.replace(/[^A-Za-z0-9+/=]/g,"");r=r.replace(/=+([A-Za-z0-9+/])/g,"$1");let n=r.length%4;return n!=0&&t?e=r.slice(-n):e="",r=r.substring(0,r.length-n),r=r.replace(/(====)+$/g,""),[atob(r),e]}function Dn(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Wo(e){let t="";for(let r=0;r<e.length;r+=100)t+=String.fromCharCode.apply(void 0,e.subarray(r,r+100));return t}var yC=e=>Dn(atob(e)),bC=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _C(e){if(e.length===1)return e[0];let t=0;for(let o=0;o<e.length;o++){if(!(e[o]instanceof Uint8Array))throw new Error("concatArrays: Data must be in the form of a Uint8Array");t+=e[o].length}let r=new Uint8Array(t),n=0;return e.forEach(o=>{r.set(o,n),n+=o.length}),r}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var dp=class{collectInput;decodeString;constructor(){this.collectInput="",this.decodeString=pB}decode(t,r={}){let n=r.stream;return t&&(this.collectInput+=Wo(t)),n?"":this.decodeString(this.collectInput)}},eb=class extends dp{constructor(){super(),this.decodeString=fB}};function rs(e,t){switch(e.toLowerCase()){case"utf-7":return new dp;case"utf-7-imap":return new eb;case"cp932":return new TextDecoder("shift_jis",t);default:return new TextDecoder(e,t)}}function vC(e){let t=yC(e),r="";for(let n=0,o=t.length;n<o;)r+=String.fromCharCode(t[n++]<<8|t[n++]);return r}var pB=e=>e.replace(/\+([A-Za-z0-9/]*)-?/gi,(t,r)=>r===""?"+":vC(r)),fB=e=>e.replace(/&([^-]*)-/g,(t,r)=>r===""?"&":vC(r.replace(/,/g,"/")));l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();var ns=new Map,xC=new Map,fa=new Map;function Le(e,t,r){let n=e.toLowerCase();ns.set(n,t),xC.set(n,r),fa.set(n,e)}function Ct(e){let t=this;return e.reduce(function(r,n){return r.concat(t.parseAddressingHeader(n,!0))},[])}function At(e){Array.isArray(e)||(e=[e]),this.addAddresses(e)}Le("Bcc",Ct,At);Le("Cc",Ct,At);Le("From",Ct,At);Le("Reply-To",Ct,At);Le("Resent-Bcc",Ct,At);Le("Resent-Cc",Ct,At);Le("Resent-From",Ct,At);Le("Resent-Reply-To",Ct,At);Le("Resent-Sender",Ct,At);Le("Resent-To",Ct,At);Le("Sender",Ct,At);Le("To",Ct,At);Le("Approved",Ct,At);Le("Disposition-Notification-To",Ct,At);Le("Delivered-To",Ct,At);Le("Return-Receipt-To",Ct,At);Le("Mail-Reply-To",Ct,At);Le("Mail-Followup-To",Ct,At);function hB(e,t,r){return this.parseParameterHeader(e[0],t,r)}function gB(e){let t=hB.call(this,e,!1,!1),n=t.preSemi.split("/");n.length!=2&&(t=new Map,n=["text","plain"]);let o=n[0].toLowerCase(),i=n[1].toLowerCase(),s=o+"/"+i,a=new Map;return a.mediatype=o,a.subtype=i,a.type=s,t.forEach(function(w,E){a.set(E.toLowerCase(),w)}),a}ns.set("Content-Type",gB);function ha(e){return this.decodeRFC2047Words(e[0])}function os(e){this.addUnstructured(e)}function TC(e){return this.decodeRFC2047Words(e[0])}function wC(e){this.addUnstructured(e)}Le("Comments",ha,os);Le("Keywords",ha,os);Le("Subject",ha,os);Le("MIME-Version",ha,os);Le("Content-Description",ha,os);Le("User-Agent",ha,os);function $l(e){return this.parseDateHeader(e[0])}function Ql(e){this.addDate(e)}Le("Date",$l,Ql);Le("Resent-Date",$l,Ql);Le("Expires",$l,Ql);Le("Injection-Date",$l,Ql);Le("NNTP-Posting-Date",$l,Ql);Le("Message-ID",TC,wC);Le("Resent-Message-ID",TC,wC);ns.set("Content-Transfer-Encoding",function(e){return e[0].toLowerCase()});xC.set("Content-Transfer-Encoding",os);function EC(e){let t=/<[^>]*>/g,r=[],n;for(;(n=t.exec(e))!==null;)r.push(n[0]);return r.join(" ")}ns.set("References",EC);ns.set("In-Reply-To",EC);var Cn={};function yB(e){return e=e.replace(/[\xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/g," "),e=e.replace(/[\u034F\u17B4\u17B5\u180B-\u180D\uFE00-\uFE0F]/g,""),e=e.replace(/\uDB40[\uDD00-\uDDEF]/g,""),e=e.replace(/(?![\t\n\r])[\0-\x1F\x7F-\x9F]/g,""),e=e.replace(/(?:[\xAD\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC38]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F])/g," "),e=e.replace(/\u2800/g," "),e}function mp(e,t,r){let n=[];function o(V){this.token=V.replace(/\\(.?)/g,"$1")}o.prototype.toString=function(){return this.token};let i,s=` 	\r
`,a,w=0,E=e.length;for(let V=0;V<E;V++){let q=e[V];if(q=="\\"){V++;continue}if(a!==void 0){if(q==a&&q=='"'){let Y=e.slice(i+1,V);r.rfc2047&&(Y=tb(Y)),n.push(new o(Y)),a=void 0,i=void 0}else q==a&&q=="]"&&(n.push(new o(e.slice(i,V+1))),a=void 0,i=void 0);continue}if(r.rfc2047&&q=="="&&V+1<e.length&&e[V+1]=="?"){let ee=/([ \t\r\n]*=\?[^?]*\?[BbQq]\?[^?]*\?=)+/.exec(e.slice(V));if(ee!==null){i!==void 0&&(n.push(new o(e.slice(i,V))),i=void 0);let Q=ee[0].length,Z=tb(e.slice(V,V+Q));n.push({toString(){return Z}}),V+=Q-1;continue}}let K=!1,H=!1,X=!1;s.includes(q)?K=!0:w==0&&t.includes(q)?(K=!0,X=!0):r.qstring&&q=='"'?(K=!0,H=!0,a=q):r.dliteral&&q=="["?(K=!0,H=!0,a="]"):r.comments&&q=="("?(w++,w==1?(K=!0,X=!0):H=!0):r.comments&&q==")"?(w>0&&w--,w==0?(K=!0,X=!0):H=!0):H=!0,K&&i!==void 0&&(n.push(new o(e.slice(i,V))),i=void 0),X&&n.push(q),H&&i===void 0&&(i=V)}return i!==void 0&&(a=='"'?n.push(new o(e.slice(i+1))):n.push(new o(e.slice(i)))),n}function bB(e,t){if(/[\x80-\xff]/.exec(e)){let r=Dn(e),n=t&&!t.toLowerCase().startsWith("utf"),o=new rs("utf-8",{fatal:n});try{e=o.decode(r)}catch{try{e=new rs(t,{fatal:!1}).decode(r)}catch{}}}return e}function tb(e){let t="",r;function n(s,a){let w=s.split("?");if(w.length!=5||w[4]!="=")return!1;let E=w[1].split("*",1)[0],V=w[2],q=w[3],K;if(V=="B"||V=="b"){if(/[^ A-Za-z0-9+/=]/.exec(q))return!1;K=up(q,!1)[0]}else if(V=="Q"||V=="q")K=cp(q.replace(/_/g," "))[0];else return!1;let H=K;K=Dn(K);let X="";if(E!=t&&r&&(X+=r.decode(),r=null),t=E,!r)try{r=new rs(E,{fatal:!1})}catch{return!1}let Y;return a||E.toUpperCase()=="ISO-2022-JP"&&H.endsWith("\x1B(B")?Y={stream:!1}:Y={stream:!0},X+r.decode(K,Y)}let o=e.split(/(=\?[^?]*\?[BQbq]\?[^?]*\?=)/),i=-1;for(let s=0;s<o.length;s++)o[s].substring(0,2)=="=?"&&(i=s);for(let s=0;s<o.length;s++){if(o[s].substring(0,2)=="=?"){let a=n(o[s],s==i);if(a!==!1){o[s]=a;continue}}else if(/^[ \t\r\n]*$/.exec(o[s])){o[s]="";continue}t="",r&&(o[s]=r.decode()+o[s],r=null)}return o.join("")}function _B(e,t){t===void 0&&(t=!0);let r=[],n=[],o="",i="",s="",a="",w="",E=!1,V=!1,q=!1,K=!1,H=!1,X=!1,Y="";function ee(Q,Z){let J=Z.substring(0,Z.lastIndexOf("@"));if(/[ !()<>[\]:;@\\,"]/.exec(J)!==null&&(Z='"'+J.replace(/([\\"])/g,"\\$1")+'"'+Z.substring(Z.lastIndexOf("@"))),Q=Q.replace(/\s+/g," ").trim(),Q===""&&Y!==""){let ue=Y[0]===" "?2:1;Q=Y.substr(ue,Y.length-ue-1)}(Q!==""||Z!=="")&&n.push({name:Q,email:Z}),o=s=a=Y="",E=V=q=K=!1}for(let Q of mp(e,":,;<>@",{qstring:!0,comments:!0,dliteral:!0,rfc2047:t})){if(Q===":")i=o,o="",s="",n.length>0&&(r=r.concat(n)),n=[];else if(Q==="<"&&!K)E?(a.length>0&&(o=a),s=a=""):E=!0;else if(Q===">"&&!K)E=!1,Y="",K=!0;else if(Q==="(")V=!0,H=q,q||(q=o!==""&&o.substr(-1)!==" "),w=q?" (":"(",X=!1;else if(Q===")"){V=!1,w+=")",Y=w,E?q=H:(o+=w,q=!0),X=!0;continue}else if(Q==="@"){if(K)continue;E||(a=s,o="",s="",E=!0),a+="@"}else if(Q===",")ee(o,a),K=!1;else if(Q===";")ee(o,a),i===""?r=r.concat(n):r.push({name:i,group:n}),n=[],i="";else{Q=yB(Q.toString());let Z=Q;q&&Q&&Q[0]!="."&&(Z=" "+Z),V?w+=Z:E?a+=Z:(K||(o+=Z),X?(s+=Q,X=!1):s+=Z),q=Q&&Q[0]!=".";continue}q=!1}return ee(o,a),i!==""&&(r.push({name:i,group:n}),n=[]),r.concat(n)}function vB(e,t,r){let n=e.indexOf(";"),o,i;n<0?(o=e,i=""):(o=e.substring(0,n),i=e.substring(n)),o=o.trim().split(/[ \t\r\n]/)[0];let s={qstring:!0,rfc2047:t},a="",w=!0,E=[];for(let X of mp(i,";=",s))X===";"?(a!=""&&!w&&E.push([a,""]),a="",w=!0):X==="="?w=!1:w&&a==""?a=X.toString():!w&&a!=""?(X=X.toString(),r&&a.endsWith("*")&&(X=X.replace(/%([0-9A-Fa-f]{2})/g,function(Y,ee){return String.fromCharCode(parseInt(ee,16))})),E.push([a,X]),a=""):w&&(a="");a!=""&&!w&&E.push([a,""]);let V=new Map,q=new Map,K=new Map;for(let X of E){let Y=X[0],ee=X[1],Q=Y.indexOf("*");if(Q==-1)V.has(Y)||V.set(Y,ee);else if(Q==Y.length-1)Y=Y.substring(0,Q),q.has(Y)||q.set(Y,ee);else{let Z=Y.substring(0,Q),J=K.get(Z);if(K.has(Z)&&!J.valid)continue;K.has(Z)||(J=[],J.valid=!0,J.hasCharset=void 0,K.set(Z,J));let ue=Y[Y.length-1]=="*",be=Y.substring(Q+1,Y.length-(ue?1:0));if(be=="0")J.hasCharset=ue;else if(be.length==0||be[0]=="0"&&be!="0"||!/^[0-9]+$/.test(be)){J.valid=!1;continue}if(be=parseInt(be,10),J[be]!==void 0){J.valid=!1;continue}J[be]=ee}}let H=new Map;for(let X of V)H.set(X[0],X[1]);if(r){for(let X of K){let Y=X[0],ee=X[1];if(ee.hasCharset===void 0)continue;let Q=!0,Z;for(Z=0;Q&&Z<ee.length;Z++)ee[Z]===void 0&&(Q=!1);let J=ee.slice(0,Z).join("");if(ee.hasCharset)try{J=SC(J)}catch{continue}H.set(Y,J)}for(let X of q)try{H.set(X[0],SC(X[1]))}catch{}}return H.preSemi=o,H}function SC(e){let t=e.indexOf("'"),r=t>=0?e.indexOf("'",t+1):-1,n=t>=0?e.substring(0,t):"";e=e.substring(Math.max(t,r)+1);let o=Dn(e);return new rs(n,{fatal:!0}).decode(o,{stream:!1})}var kC={UT:"+0000",GMT:"+0000",EST:"-0500",EDT:"-0400",CST:"-0600",CDT:"-0500",MST:"-0700",MDT:"-0600",PST:"-0800",PDT:"-0700",AST:"-0400",NST:"-0330",BST:"+0100",MET:"+0100",EET:"+0200",JST:"+0900"};function xB(e){let t=mp(e,",:",{}).map(K=>K.toString());if(t.length>1&&t[1]===","&&(t=t.slice(2)),t.length<8)return new Date(NaN);let r=parseInt(t[0]),n=parseInt(t[2]),o=parseInt(t[3]),i=parseInt(t[5]),s=parseInt(t[7]),a=bC.indexOf(t[1].slice(0,3));a<0&&(a=NaN),n<100&&(n+=n<50?2e3:1900);let w=t[8];w in kC&&(w=kC[w]);let E=/^([+-])(\d\d)(\d\d)$/.exec(w);E===null&&(E=["+0000","+","00","00"]);let V=parseInt(E[2])*60+parseInt(E[3]);return E[1]=="-"&&(V=-V),new Date(Date.UTC(n,a,r,o,i,s)-V*60*1e3)}var rb=new Map,IC=new Set;for(let e of ns)DC(e[0],e[1]),IC.add(e[0].toLowerCase());function TB(e,t){if((typeof t=="string"||t instanceof String)&&(t=[t]),!Array.isArray(t))throw new TypeError("Header value is not an array: "+t);let r=e.toLowerCase();if(rb.has(r))return rb.get(r).call(Cn,t);throw new Error("Unknown structured header: "+e)}function DC(e,t){let r=e.toLowerCase();if(IC.has(r))throw new Error("Cannot override header: "+e);rb.set(r,t),fa.has(r)||fa.set(r,e)}Cn.addStructuredDecoder=DC;Cn.convert8BitHeader=bB;Cn.decodeRFC2047Words=tb;Cn.getHeaderTokens=mp;Cn.parseAddressingHeader=_B;Cn.parseDateHeader=xB;Cn.parseParameterHeader=vB;Cn.parseStructuredHeader=TB;var Ir=Object.freeze(Cn);l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function An(e,t){let r=e.split(/(?:\r\n|\n)(?![ \t])|\r(?![ \t\n])/);r.length>0&&r[0].substring(0,5)=="From "&&(r.shift(),r.length==0?e="":e=e.substring(e.indexOf(r[0])));let n=new Map;for(let o=0;o<r.length;o++){let i=r[o].indexOf(":"),s,a;i>=0?(s=r[o].substring(0,i),a=r[o].substring(i+1).trim(),t.stripcontinuations&&(a=a.replace(/[\r\n]/g,""))):(s=r[o],a=""),s=s.trim().toLowerCase(),s!=""&&(n.has(s)?n.get(s).push(a):n.set(s,[a]))}this._rawHeaders=n,this._cachedHeaders=new Map,Object.defineProperty(this,"rawHeaderText",{get(){return e}}),Object.defineProperty(this,"size",{get(){return this._rawHeaders.size}}),Object.defineProperty(this,"charset",{get(){return this._charset},set(o){this._charset=o,this._cachedHeaders.clear()}}),"charset"in t?this._charset=t.charset:this._charset=null,Object.defineProperty(this,"contentType",{configurable:!0,get(){return this.get("Content-Type")}})}An.prototype.getRawHeader=function(e){return this._rawHeaders.get(e.toLowerCase())};An.prototype.get=function(e){if(e=e.toLowerCase(),this._cachedHeaders.has(e))return this._cachedHeaders.get(e);let t=this._rawHeaders.get(e);if(t===void 0)return t;let r=this.charset;t=t.map(function(o){return Ir.convert8BitHeader(o,r)});let n;try{n=Ir.parseStructuredHeader(e,t)}catch{n=t.map(function(i){return Ir.decodeRFC2047Words(i)})}return this._cachedHeaders.set(e,n),n};An.prototype.has=function(e){return this._rawHeaders.has(e.toLowerCase())};var wB=typeof Symbol=="function",EB=wB?Symbol.iterator:"@@iterator";An.prototype[EB]=function*(){for(let e of this.keys())yield[e,this.get(e)]};An.prototype.forEach=function(e,t){for(let[r,n]of this)e.call(t,n,r,this)};An.prototype.entries=An.prototype[Symbol.iterator];function SB(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})}An.prototype.keys=function*(){for(let e of this._rawHeaders.keys())yield fa.get(e)||SB(e)};An.prototype.values=function*(){for(let[,e]of this)yield e};function jt(e,t){if(this._emitter=e,this._options={pruneat:"",bodyformat:"nodecode",strformat:"binarystring",stripcontinuations:!0,charset:"","force-charset":!1,onerror:()=>{}},t)for(let r in t)this._options[r]=t[r];if(typeof this._options.onerror!="function")throw new Error("onerror callback must be a function");this.resetParser()}jt.prototype.resetParser=function(){this._state=ob,this._holdData="",this._headerData="",this._triggeredCall=!1,this._splitRegex=this._handleSplit=void 0,this._subparser=this._subPartNum=void 0,this._savedBuffer="",this._convertData=void 0,this._decoder=void 0};jt.prototype.deliverData=function(e){this._holdData&&(e=this._holdData+e,this._holdData=""),e.length>0&&([e,this._holdData]=CC(e)),e.length!=0&&(this._triggeredCall||(this._callEmitter("startMessage"),this._triggeredCall=!0),this._dispatchData("",e,!0))};function CC(e){let t=e.lastIndexOf("\r",e.length-2),r=e.lastIndexOf(`
`),n=r>t?r:t;return[e.substring(0,n+1),e.substring(n+1)]}jt.prototype.deliverEOF=function(){this._triggeredCall||(this._triggeredCall=!0,this._callEmitter("startMessage")),this._holdData&&this._dispatchData("",this._holdData,!0),this._dispatchEOF(""),this._callEmitter("endMessage")};jt.prototype._callEmitter=function(e,...t){if(this._emitter&&e in this._emitter){if(t.length>0&&this._willIgnorePart(t[0]))return;try{this._emitter[e].apply(this._emitter,t)}catch(r){this._options.onerror(r)}}};jt.prototype._willIgnorePart=function(e){if(this._options.pruneat){let t=this._options.pruneat;if(e.substr(0,t.length)!=t||t.length<e.length&&!"$.".includes(e[t.length]))return!0}return!1};var ob=1,pp=2,nb=3,fp=4;jt.prototype._dispatchData=function(e,t,r){if(this._state==ob){this._headerData+=t;let n=/(?:^(?:\r\n|[\r\n]))|(\r\n|[\r\n])\1/.exec(this._headerData);if(n!=null){let o=this._headerData.substr(0,n.index);t=this._headerData.substring(n.index+n[0].length),this._headerData=o,this._headers=this._parseHeaders(),this._callEmitter("startPart",e,this._headers),this._startBody(e)}else return}if(r&&this._splitRegex){let n=this._splitRegex.exec(t);if(n){let o=n.index,i=n[0].length;o>0&&this._dispatchData(e,t.substr(0,o),!1),this._handleSplit(e,n),t=t.substring(o+i),t.length>0&&this._dispatchData(e,t,!0);return}}if(this._state!=pp){if(this._state==nb){if(!(this._options.bodyformat!="none")||this._willIgnorePart(e))return;let{coerced:o,raw:i}=this._applyDataConversion(t,this._options.strformat);this._callEmitter("deliverPartData",e,o,i)}else if(this._state==fp){let{coerced:n}=this._applyDataConversion(t,"binarystring");t.length>0&&this._subparser._dispatchData(this._subPartNum,n,!0)}}};jt.prototype._applyDataConversion=function(e,t){return this._convertData&&(e=this._savedBuffer+e,[e,this._savedBuffer]=this._convertData(e,!0)),{coerced:this._coerceData(e,t,!1),raw:e instanceof Uint8Array?e:Dn(e)}};jt.prototype._coerceData=function(e,t,r){if(typeof e=="string"){if(t=="binarystring")return e;let n=Dn(e);return t=="unicode"?this._coerceData(n,"unicode",r):n}else{if(t=="binarystring")return Wo(e);if(t=="unicode")return this._decoder?this._decoder.decode(e,{stream:r}):e}throw new Error("Invalid type: "+t)};jt.prototype._dispatchEOF=function(e){if(this._state==ob)this._headers=this._parseHeaders(),this._callEmitter("startPart",e,this._headers);else if(this._state==fp)this._convertData&&this._savedBuffer&&this._subparser._dispatchData(this._subPartNum,this._convertData(this._savedBuffer,!1)[0],!0),this._subparser._dispatchEOF(this._subPartNum),this._subparser=null;else if(this._convertData&&this._savedBuffer){let[t]=this._convertData(this._savedBuffer,!1);t=this._coerceData(t,this._options.strformat,!1),t.length>0&&this._callEmitter("deliverPartData",e,t)}this._callEmitter("endPart",e)};jt.prototype._parseHeaders=function(){let e=new An(this._headerData,this._options),t=e.get("Content-Type");typeof t>"u"?(t=Ir.parseStructuredHeader("Content-Type",this._defaultContentType||"text/plain"),Object.defineProperty(e,"contentType",{get(){return t}})):Object.defineProperty(e,"contentType",{configurable:!1});let r="";return this._options["force-charset"]?r=this._options.charset:t.has("charset")?r=t.get("charset"):r=this._options.charset,e.charset=r,this._charset=r,e};jt.prototype._startBody=function(e){let t=this._headers.contentType;if(this._options.bodyformat=="raw"&&e==this._options.pruneat){this._state=nb;return}if(t.mediatype=="multipart"){if(!t.has("boundary")){this._state=pp;return}this._splitRegex=new RegExp(`(\r
|[\r
]|^)--`+t.get("boundary").replace(/[\\^$*+?.()|{}[\]]/g,"\\$&")+`(--)?[ 	]*(?:\r
|[\r
]|$)`),this._handleSplit=this._whenMultipart,this._subparser=new jt(this._emitter,this._options),t.subtype=="digest"&&(this._subparser._defaultContentType="message/rfc822"),this._state=pp,this._convertData=function(r,n){let o=r.length;n&&(r.charAt(o-1)==`
`&&o--,o>=0&&r.charAt(o-1)=="\r"&&o--);let i=CC(r.substring(0,o)),s=i[0],a=i[1];return[s,a+r.substring(o)]}}else if(t.type=="message/rfc822"||t.type=="message/global"||t.type=="message/news"){this._state=fp,this._subPartNum=e+"$",this._subparser=new jt(this._emitter,this._options);let r=this._extractHeader("content-transfer-encoding","");r in ga&&(this._convertData=ga[r])}else if(this._state=nb,this._options.bodyformat=="decode"){let r=this._extractHeader("content-transfer-encoding","");r in ga&&(this._convertData=ga[r])}if(this._options.strformat=="unicode"&&t.mediatype=="text"){if(this._decoder=null,this._charset!=="")try{this._decoder=new rs(this._charset)}catch(r){console.error(r)}this._decoder||(this._decoder={decode(r){return jt.prototype._coerceData(r,"binarystring",!0)}})}else this._decoder=null};jt.prototype._whenMultipart=function(e,t){if(e!=""&&(e+="."),!this._subPartNum)this._count=1;else{if(this._savedBuffer!=""&&t[1]===""){let r=this._savedBuffer.length-1;this._savedBuffer[r]==`
`&&r--,r>=0&&this._savedBuffer[r]=="\r"&&r--,this._savedBuffer=this._savedBuffer.substring(0,r+1)}this._savedBuffer!=""&&this._subparser._dispatchData(this._subPartNum,this._savedBuffer,!0),this._subparser._dispatchEOF(this._subPartNum)}this._savedBuffer="",t[2]==null?(this._subparser.resetParser(),this._state=fp,this._subPartNum=e+this._count,this._count+=1):(this._splitRegex=null,this._state=pp)};jt.prototype._extractHeader=function(e,t){return e=e.toLowerCase(),this._headers.has(e)?this._headers.get(e):Ir.parseStructuredHeader(e,[t])};var ga={};ga["quoted-printable"]=cp;ga.base64=up;var ib=jt;var kB={getAttachmentName(e){if(!e||!e.headers)return"";if(e.headers["content-disposition"]){let t=yr.getParameter(e.headers["content-disposition"][0],"filename");if(t)return t}if(e.headers["content-type"]){let t=yr.getParameter(e.headers["content-type"][0],"name");if(t)return t}return""},isAttachment(e){if(!e)return!1;let t=e.contentType||"text/plain";if(t.search(/^multipart\//i)===0)return!1;let r="";return Array.isArray(e.headers["content-disposition"])&&e.headers["content-disposition"].length>0&&(r=e.headers["content-disposition"][0]),r.search(/^attachment/i)===0||t.search(/^text\/plain|^text\/html|^text\/enriched/i)===-1},startMessage(){this.mimeTree={partName:"",contentType:"message/rfc822",parts:[],size:0,headers:{},rawHeaderText:"",allAttachments:[],bodyParts:{text:[],html:[]},isEncrypted:!1},this.partsPath=[this.mimeTree],this.options=this.options||{}},endMessage(){if(this.mimeMsg=null,this.mimeTree.parts.length!=0){if(this.options.getMimePart){this.mimeTree.parts[0].partName==this.options.getMimePart&&(this.mimeMsg=this.mimeTree.parts[0],this.mimeMsg.bodyAsTypedArray=Dn(this.mimeMsg.body));return}this.mimeMsg=this.mimeTree}},startPart(e,t){let r=new TextEncoder,n=t.contentType&&t.contentType.type?t.contentType.type:"text/plain",o=t.rawHeaderText,i={};for(let[E,V]of t._rawHeaders){let q=Array.isArray(V)?V:[V];i[E]=q.map(K=>{let H=r.encode(K);return Wo(H)})}let s=this.partsPath[this.partsPath.length-1],a="1"+(e!==""?".":"")+e;a=="1"&&(s.rawHeaderText=o,o=o.split(/\n(?![ \t])/).filter(E=>E.toLowerCase().startsWith("content-")).join(`
`).trim(),s.headers=i,i=Object.fromEntries(Object.entries(i).filter(E=>E[0].startsWith("content-")))),i["content-type"]||(i["content-type"]=["text/plain"]);let w={partName:a,rawBody:null,body:"",headers:i,rawHeaderText:o,contentType:n,size:0,parts:[],isEncrypted:!1};s.parts.push(w),this.partsPath.push(w)},endPart(e){let t=!1,r=this.partsPath[this.partsPath.length-1],n=r.body.length;if(r.size+=n,this.isAttachment(r)){r.fileName=this.getAttachmentName(r);let o=r.headers["content-disposition"]&&r.headers["content-disposition"][0],i=r.headers["content-id"]&&r.headers["content-id"][0];r.contentDisposition=o?o.split(";").shift():void 0,r.contentId=i||void 0,this.options.includeAttachments?this.mimeTree.allAttachments.push(r):t=!0}else if(r.rawBody)switch(delete r.rawBody,r.contentType||"text/plain"){case"text/html":this.mimeTree.bodyParts.html.push(r.body);break;case"text/plain":this.mimeTree.bodyParts.text.push(r.body);break}t&&(delete r.body,delete r.rawBody),r.headers=Object.fromEntries(Object.entries(r.headers).filter(o=>!["content-disposition","content-transfer-encoding"].includes(o[0]))),this.partsPath.pop(),r=this.partsPath[this.partsPath.length-1],r.size+=n},deliverPartData(e,t,r){let n=this.partsPath[this.partsPath.length-1];typeof t=="string"?n.body+=t:n.body+=Wo(t),n.rawBody===null?n.rawBody=r:n.rawBody=_C([n.rawBody,r])}},AC={startPart(e,t){e==""&&(this.headers=t)}},IB={body:"",startPart:AC.startPart,deliverPartData(e,t){e==""&&(this.body+=t)}},yr={getParameter(e,t){t=t.toLowerCase(),e=e.replace(/[\r\n]+[ \t]+/g,"");let r=Ir.parseParameterHeader(";"+e,!0,!0);for(let[n,o]of r.entries())if(t==n.toLowerCase())return o;return""},parseSync(e,t,r){if(typeof e!="string")throw new Error("input is not a recognizable type!");let n=new ib(t,r);n.deliverData(e),n.deliverEOF()},makeParser(e,t){return new ib(e,t)},extractMimeMsg(e,t={}){let r=Object.create(kB);r.options={includeAttachments:!0,getMimePart:""};for(let n of Object.keys(t))r.options[n]=t[n];return yr.parseSync(e,r,{pruneat:r.options.getMimePart.split(".").slice(1).join("."),bodyformat:"decode",stripcontinuations:!0,strformat:"unicode"}),r.mimeMsg},extractHeaders(e){let t=Object.create(AC);return yr.parseSync(e,t,{pruneat:"",bodyformat:"none"}),t.headers},extractHeadersAndBody(e){let t=Object.create(IB);return yr.parseSync(e,t,{pruneat:"",bodyformat:"raw"}),[t.headers,t.body]},HEADER_UNSTRUCTURED:0,HEADER_PARAMETER:2,HEADER_ADDRESS:3,HEADER_OPTION_DECODE_2231:16,HEADER_OPTION_DECODE_2047:32,HEADER_OPTION_ALLOW_RAW:64,HEADER_OPTION_ALL_I18N:112,parseHeaderField(e,t,r){switch(t&yr.HEADER_OPTION_ALLOW_RAW&&(e=Ir.convert8BitHeader(e,r)),t&15){case yr.HEADER_UNSTRUCTURED:return t&yr.HEADER_OPTION_DECODE_2047&&(e=Ir.decodeRFC2047Words(e)),e;case yr.HEADER_PARAMETER:return Ir.parseParameterHeader(e,(t&yr.HEADER_OPTION_DECODE_2047)!=0,(t&yr.HEADER_OPTION_DECODE_2231)!=0);case yr.HEADER_ADDRESS:return Ir.parseAddressingHeader(e,(t&yr.HEADER_OPTION_DECODE_2047)!=0);default:throw new Error("Illegal type of header field")}}};function sb(e){let t=typeof e=="string"?new TextEncoder().encode(e):e,{headers:r,allAttachments:n,bodyParts:o}=yr.extractMimeMsg(Wo(t)),i=new Set(["message-id","content-id","from","sender","in-reply-to","reply-to","subject","date","content-disposition","content-type","content-transfer-encoding","priority","mime-version","content-description","precedence","errors-to"]),s={headers:r,attachments:n.map(({parts:a,partName:w,body:E,isEncrypted:V,rawBody:q,...K})=>({...K,content:q||new Uint8Array})),body:{html:o.html.length?o.html.join(`<br>
`).replace(/\r?\n/g,`
`):null,text:o.text.length?o.text.join(`
`).replace(/\r?\n/g,`
`):null}};return["subject","date","to","from","to","cc","bcc","message-id","in-reply-to","reply-to"].forEach(a=>{if(!r[a])return;let w=r[a]&&Ir.parseStructuredHeader(a,r[a]);s[a]=i.has(a)&&Array.isArray(w)?w[w.length-1]:w}),s}function ab(e){let{attachments:t,body:r}=sb(e),n=r.text?DB(r.text):[];return{attachments:t,passwords:n}}function DB(e){let t=/\b(?:pass(?:\s*key|\s*code|\s*word)?|pwd)\s*(?::|\b(?:is)?\s*)?\s*(:|-|?)\s*([^\s\n:]+)(?=\s|\n|$)/gi,r=new Set,n;for(;(n=t.exec(e))!==null;)r.add(n[2]),n[2].endsWith(".")?r.add(n[2].slice(0,-1)):/^(["'`]|)(.*?)\1$/.test(n[2])?r.add(n[2].replace(/^(["'`]|)(.*?)\1$/,"$2")):n[2].startsWith("\u201C")&&n[2].endsWith("\u201D")&&r.add(n[2].slice(1,-1));return Array.from(r)}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function RC(e){return/^[0-9a-f]{16,}$/.test(e)}var PC=te("common.gmail.bg");async function lb(e,t){let r=`${e}?view=att&permmsgid=${t}&disp=comp&safe=1`;RC(t)&&(r=`${e}?view=att&th=${t}&attid=0&disp=comp&safe=1&zw`);let n=await $(()=>fetch(r));if(!n.success||n.value.status!=200){PC.error(`Error fetching eml file with endpoint: ${e}, msgId: ${t}`);return}let o=await $(()=>n.value.text());if(!o.success){PC.error(`Error getting eml response with endpoint: ${e}, msgId: ${t}`);return}return o.value}l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();l();c();u();d();m();p();f();h();g();y();b();_();v();x();T();function NC(e,t){return Date.now()-e>t*864e5}var CB="202402271717",MC="gmailatt",ya=class{cleanMsgId(t){return t.replace(/[^a-zA-Z0-9]/g,"")}getOPFSLocation(t){return`${MC}/${this.cleanMsgId(t)}_${CB}`}get=t=>{let r=this.getOPFSLocation(t);return $(async()=>{let n=await Fe.readAllFileBytes(r);if(!n.success)return;let o=new TextDecoder().decode(n.value);return JSON.parse(o)})};set=(t,r)=>{let n=this.getOPFSLocation(r);return Fe.writeFile(n,JSON.stringify(t))}};ie(ya,"removeOlderThanDays",async t=>{let r=await Fe.listFiles(`${MC}/`);for(let n of r){let i=await(await n.dirHandle.getFileHandle(n.fileName)).getFile();NC(i.lastModified,t)&&Fe.destroyFileInDir(n.fileName,n.dirHandle)}});var cb="gmailAttScanCacheClear",hp=class extends Ee{store=new ya;onStart(){W.alarms.create(cb,{periodInMinutes:7*24*60}),W.alarms.onAlarm.addListener(this.onAlarm)}onStop(){W.alarms.clear(cb),W.alarms.onAlarm.removeListener(this.onAlarm)}onAlarm(t){t.name===cb&&ya.removeOlderThanDays(7)}async generateAnalyses(t,r){let n=await lb(t,r);if(!n)return;let{attachments:o,passwords:i}=ab(n),s=await this.analyzeAttachments(r,o,i);return this.store.set(s,r),s}async analyzeAttachments(t,r,n){let o=[];return await Promise.allSettled(r.map(async i=>{if(!i.fileName)return;let s=await this.api.exposedFunctions.analyzeFileFromBytes(i.content,i.fileName??"",n,{fileTypeMismatch:!0,macroThreatAnalysis:!0});s.success?o.push({fileName:i.fileName,claimedMime:i.contentType??"",msgId:t,fileAnalysisResult:s.value}):o.push({fileName:i.fileName,claimedMime:i.contentType??"",msgId:t,fileAnalysisResult:{officeDocumentReport:null,fileTypeMismatch:null,fileTypes:[],files:[],tampered:null,passwordRequired:!1}})})),o}analyzeAttachment=async(t,r)=>{let n=await this.store.get(r),o=n.success&&n.value?n.value:await this.generateAnalyses(t,r);if(o){let i=[];for(let s of o){let a=Uo(s.fileAnalysisResult);i.push({...s,category:a,cached:n.success&&!!n.value})}return i}};openAnalysisDialog=(t,r,n,o)=>this.api.exposedFunctions.openDocumentScanResultsDialog({tabId:o.tab.id,fileName:n.fileName,cached:n.cached,result:n.fileAnalysisResult,trigger:"gmail_attachment_scan",claimedMime:n.claimedMime,passwords:[],lazyFetchFile:async()=>{let i=await lb(t,r);if(!i)throw new Error(`eml couldn't be fetched for ${t} ${r}`);let{attachments:s}=ab(i),a=s.find(w=>w.fileName===n.fileName);if(a===void 0)throw new Error(`attachment not found ${n.fileName} ${t} ${r}`);return a.content}})};var OC={manifest_version:1,module:{version:"1",name:"Gmail: Scan for Malicious Documents",description:"In-Browser privacy-safe malicious document scanning for email attachments",category:"smart_integrations",optional:!0,requires_authentication:!0,required_exposed_functions:{background:["openDocumentScanResultsDialog","analyzeFileFromBytes"]}},content_script:{frames:{type:"top"}}};globalThis.BackgroundModule={};var PB={chromeTabGrouping:{id:"chromeTabGrouping",core_module:!1,moduleClass:tm,manifest:US,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:[]},disposableEmails:{id:"disposableEmails",core_module:!1,moduleClass:om,manifest:HS,exposedToModuleEvents:[],exposedToPublicFunctions:["clearEmailNotificationsFromStorage"],exposedToPublicEvents:[],dependencies:[],settings:{schema:qS,getDefault:KS,store:rm}},fileAnalyzer:{id:"fileAnalyzer",core_module:!1,moduleClass:Cm,manifest:hD,exposedToModuleEvents:[],exposedToPublicFunctions:["analyzeFileFromBytes","analyzeFileFromURL","analyzeFileFromOPFS","removeMacroFromFileBuffer","removeMacroFromOPFSFile"],exposedToPublicEvents:[],dependencies:[]},fileConverter:{id:"fileConverter",core_module:!1,moduleClass:Rm,manifest:yD,exposedToModuleEvents:[],exposedToPublicFunctions:["runFileConversionFromBytes","runFileConversionFromURL"],exposedToPublicEvents:[],dependencies:[]},objectUrlProxy:{id:"objectUrlProxy",core_module:!1,moduleClass:null,manifest:bD,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:[]},sessions:{id:"sessions",core_module:!1,moduleClass:Mm,manifest:ED,exposedToModuleEvents:[],exposedToPublicFunctions:["launchSession","terminateSession","getStoredSessions","getExistingSession"],exposedToPublicEvents:["onSessionReady","onSessionLaunchFailed"],dependencies:[]},taskNotification:{id:"taskNotification",core_module:!1,moduleClass:Om,manifest:DD,exposedToModuleEvents:[],exposedToPublicFunctions:["upsertTaskNotification","hideTaskNotificationForId"],exposedToPublicEvents:[],dependencies:[]},urlDiscovery:{id:"urlDiscovery",core_module:!1,moduleClass:Bm,manifest:CD,exposedToModuleEvents:[],exposedToPublicFunctions:["discoverUrlProperties"],exposedToPublicEvents:[],dependencies:[]},gmailContextMenuNoInternet:{id:"gmailContextMenuNoInternet",core_module:!1,moduleClass:Um,manifest:LD,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:[]},browserContextMenu:{id:"browserContextMenu",core_module:!1,moduleClass:ql,manifest:FD,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:["disposableBrowser"]},disposableBrowser:{id:"disposableBrowser",core_module:!1,moduleClass:Vm,manifest:UD,exposedToModuleEvents:[],exposedToPublicFunctions:["launchDisposableBrowser"],exposedToPublicEvents:[],dependencies:["sessions"]},disposableFileViewer:{id:"disposableFileViewer",core_module:!1,moduleClass:np,manifest:aC,exposedToModuleEvents:[],exposedToPublicFunctions:["launchDisposableFileViewer","browserDownloadFromUrl"],exposedToPublicEvents:["onUploadEvent","onDownloadReplayMismatch"],dependencies:["sessions"],settings:{schema:jD,getDefault:HD,store:qr}},documentScanResultsDialog:{id:"documentScanResultsDialog",core_module:!1,moduleClass:op,manifest:dC,exposedToModuleEvents:[],exposedToPublicFunctions:["openDocumentScanResultsDialog"],exposedToPublicEvents:[],dependencies:["fileAnalyzer","disposableFileViewer","taskNotification"]},externalApplications:{id:"externalApplications",core_module:!1,moduleClass:ip,manifest:pC,exposedToModuleEvents:[],exposedToPublicFunctions:["openInExternalAppFromBytes","openInExternalAppFromURL"],exposedToPublicEvents:[],dependencies:["taskNotification"]},redirector:{id:"redirector",core_module:!1,moduleClass:sp,manifest:fC,exposedToModuleEvents:[],exposedToPublicFunctions:["getPendingRedirectionInfo"],exposedToPublicEvents:[],dependencies:["disposableBrowser"]},searchContextMenu:{id:"searchContextMenu",core_module:!1,moduleClass:Wl,manifest:hC,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:["disposableBrowser"]},gmailAttachmentQuickActions:{id:"gmailAttachmentQuickActions",core_module:!1,moduleClass:lp,manifest:gC,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:["disposableFileViewer","urlDiscovery"]},gmailAttachmentScan:{id:"gmailAttachmentScan",core_module:!1,moduleClass:hp,manifest:OC,exposedToModuleEvents:[],exposedToPublicFunctions:[],exposedToPublicEvents:[],dependencies:["documentScanResultsDialog","fileAnalyzer"]}};OS(PB);})();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//  * @license
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
