"use strict";(()=>{var D=globalThis.browser??globalThis.chrome;var Re=function(o,r,e,t,n){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?o!==r||!n:!r.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?n.call(o,e):n?n.value=e:r.set(o,e),e},Ve=function(o,r,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?o!==r||!t:!r.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(o):t?t.value:r.get(o)},z,u=class extends Error{constructor(r,e){super(e),z.set(this,void 0),Re(this,z,r,"f")}get key(){return Ve(this,z,"f")}};z=new WeakMap;function v(o,r,e){return(t,n="")=>{try{let a=r.reduce((i,j)=>j(i,n),t);return e?.(a,n),Ie(n,o,a)}catch(a){return ie(t,a)}}}function ie(o,r){return{initialValue:o,hasError:!0,error:r}}function Ie(o,r,e){try{return r.forEach(t=>t(e,o)),{initialValue:e,result:e,hasError:!1}}catch(t){return ie(e,t)}}var B=(o,r,e,t)=>(n,a="")=>{if(!(o?!r(n):r(n)))throw new u(a,`${e??typeof n} '${n}' ${o?"is":"is not"} ${t}`)};function qe(o,r,e,t){return`${o} ${r} is${t?" ":" not "}${e}`}function N(o){return(r,e,t,n,a)=>{if(!e())throw new u(r,qe(o,t,n,a))}}var G=N("array"),ue=o=>r=>(e,t="")=>{G(t,()=>o?e.length!==r:e.length===r,`of length ${e.length}`,`of exact length ${r}`,o)},Ne=o=>r=>(e,t="")=>{G(t,()=>o?e.length<r:e.length>=r,`of length ${e.length}`,`within minimum length of ${r}`,o)},Ke=o=>r=>(e,t="")=>{G(t,()=>o?e.length>r:e.length<=r,`of length ${e.length}`,`within maximum length of ${r}`,o)},ce=o=>()=>(r,e="")=>{G(e,()=>o?r.length!==0:r.length===0,`of length ${r.length}`,"empty",o)};function L(o=[]){let r=[],e=v(r,o,(t,n="")=>{if(!Array.isArray(t))throw new u(n,`Value ${t} is not an array`)});return e.toString=A(e,t=>t.join(", ")),e.toNumber=_(e,t=>Number(t)),e.toBoolean=$(e,t=>!!t),e.toCustom=k(e),e.assert=(t,n)=>(r.push(B(!1,t,"array",n)),e),e.ofExactLength=t=>(r.push(ue(!1)(t)),e),e.ofMinLength=t=>(r.push(Ne(!1)(t)),e),e.ofMaxLength=t=>(r.push(Ke(!1)(t)),e),e.empty=()=>(r.push(ce(!1)()),e),e.not={assert:(t,n)=>(r.push(B(!0,t,"array",n)),e),empty:()=>(r.push(ce(!0)()),e),ofExactLength:t=>(r.push(ue(!0)(t)),e)},e.items=function(t){return L([(n,a="")=>{let i=e(n,a);if(i.hasError)throw i.error;let j=i.result.map((F,q)=>t(F,[a,`[${q}]`].filter(Boolean).join(".")));if(j.some(F=>F.hasError))throw j.filter(F=>F.hasError);return j.reduce((F,q)=>(q.hasError||F.push(q.result),F),[])}])},e}var pe=N("boolean"),me=o=>()=>(r,e="")=>{pe(e,()=>o?!r:r,r,"true",o)},le=o=>()=>(r,e="")=>{pe(e,()=>o?r:!r,r,"false",o)};function X(o=[]){let r=[],e=v(r,o,(n,a="")=>{if(typeof n!="boolean")throw new u(a,`Value ${n} is not a boolean`)});e.toString=A(e,n=>n.toString()),e.toNumber=_(e,n=>n?1:0),e.toBoolean=$(e,n=>n),e.toCustom=k(e),e.toArray=R(e);let t=n=>(a,i)=>(r.push(B(n,a,"boolean",i)),e);return e.assert=t(!1),e.true=()=>(r.push(me(!1)()),U(!0,e)),e.false=()=>(r.push(le(!1)()),U(!1,e)),e.not={assert:t(!0),true:()=>(r.push(me(!0)()),U(!1,e)),false:()=>(r.push(le(!0)()),U(!0,e))},e}function ge(o=[]){let e=v([],o,(t,n="")=>{if(typeof t!="boolean")throw new u(n,`Value ${t} is not a boolean`);if(t!==!1)throw new u(n,`Value ${t} must be false`)});return e.toString=A(e,t=>t.toString()),e.toNumber=_(e,t=>t?1:0),e.toBoolean=$(e,t=>t),e.toCustom=k(e),e.toArray=R(e),e}function fe(o=[]){let e=v([],o,(t,n="")=>{if(typeof t!="boolean")throw new u(n,`Value ${t} is not a boolean`);if(t!==!0)throw new u(n,`Value ${t} must be true`)});return e.toString=A(e,t=>t.toString()),e.toNumber=_(e,t=>t?1:0),e.toBoolean=$(e,t=>t),e.toCustom=k(e),e.toArray=R(e),e}function de(o=[]){let r=[],e=v(r,o);e.toString=A(e,()=>""),e.toNumber=_(e,()=>0),e.toBoolean=$(e,()=>!1),e.toCustom=k(e),e.toArray=R(e);let t=n=>(a,i)=>(r.push(B(n,a,"custom value",i)),e);return e.assert=t(!1),e.not={assert:t(!0)},e}var K=N("number"),he=o=>r=>(e,t="")=>{if(!(o?r.indexOf(e)===-1:r.indexOf(e)!==-1))throw new u(t,`Number value ${e} ${o?`is one of the disallowed values in [${r.join(", ")}]`:`is not one of the allowed values in [${r.join(", ")}]`}`)},xe=o=>()=>(r,e="")=>{K(e,()=>o?r<0:r>0,r,"positive",o)},ye=o=>()=>(r,e="")=>{K(e,()=>o?r>0:r<0,r,"negative",o)},be=o=>()=>(r,e="")=>{K(e,()=>o?r!==0:r===0,r,"zero",o)},Ee=o=>r=>(e,t="")=>{K(t,()=>o?e>=r:e<r,e,`less than ${r}`,o)},Te=o=>r=>(e,t="")=>{K(t,()=>o?e<=r:e>r,e,`more than ${r}`,o)},we=o=>r=>(e,t="")=>{K(t,()=>o?e!==r:e===r,e,`equal to ${r}`,o)},Me=o=>r=>(e,t="")=>{K(t,()=>o?e%r!==0:e%r===0,e,`a multiple of ${r}`,o)},Se=o=>()=>(r,e="")=>{K(e,()=>o?!Number.isInteger(r):Number.isInteger(r),r,"an integer",o)};function H(o=[]){let r=[],e=v(r,o,(n,a="")=>{if(typeof n!="number")throw new u(a,`Value ${n} is not a number`)});e.toString=A(e,n=>n.toString()),e.toNumber=_(e,n=>n),e.toBoolean=$(e,n=>n!==0),e.toCustom=k(e),e.toArray=R(e);let t=n=>(a,i)=>(r.push(B(n,a,"number",i)),e);return e.assert=t(!1),e.allowed=(...n)=>(r.push(he(!1)(n)),e),e.integer=()=>(r.push(Se(!1)()),e),e.positive=()=>(r.push(xe(!1)()),e),e.negative=()=>(r.push(ye(!1)()),e),e.lessThan=n=>(r.push(Ee(!1)(n)),e),e.moreThan=n=>(r.push(Te(!1)(n)),e),e.zero=()=>(r.push(be(!1)()),e),e.multipleOf=n=>(r.push(Me(!1)(n)),e),e.equals=n=>(r.push(we(!1)(n)),e),e.not={assert:t(!0),allowed:(...n)=>(r.push(he(!0)(n)),e),integer:()=>(r.push(Se(!0)()),e),positive:()=>(r.push(xe(!0)()),e),negative:()=>(r.push(ye(!0)()),e),lessThan:n=>(r.push(Ee(!0)(n)),e),moreThan:n=>(r.push(Te(!0)(n)),e),zero:()=>(r.push(be(!0)()),e),multipleOf:n=>(r.push(Me(!0)(n)),e),equals:n=>(r.push(we(!0)(n)),e)},e}function Z(o=[]){let r=[],e=v(r,o);e.toCustom=k(e);let t=n=>(a,i)=>(r.push(B(n,a,"custom value",i)),e);return e.assert=t(!1),e.not={assert:t(!0)},e}function A(o,r){return(e=r)=>J([(t,n="")=>{let a=o(t,n);if(a.hasError)throw a.error;try{return e(a.result)}catch(i){throw new u(n,`Unable to create a string from ${typeof a.result} ${a.result}

 ${i instanceof Error?i.message:i}`)}}])}function _(o,r){return(e=r)=>H([(t,n="")=>{let a=o(t,n);if(a.hasError)throw a.error;try{return e(a.result)}catch(i){throw new u(n,`Unable to create a number from ${typeof a.result} ${a.result}

 ${i instanceof Error?i.message:i}`)}}])}function $(o,r){return(e=r)=>X([(t,n="")=>{let a=o(t,n);if(a.hasError)throw a.error;try{return e(a.result)}catch(i){throw new u(n,`Unable to create a booolean from ${typeof a.result} ${a.result}

 ${i instanceof Error?i.message:i}`)}}])}function k(o){return r=>de([(e,t="")=>{let n=o(e,t);if(n.hasError)throw n.error;try{return r(n.result)}catch(a){throw new u(t,`Unable to create custom type from ${typeof n.result} ${n.result}

 ${a instanceof Error?a.message:a}`)}}])}function R(o){return r=>L([(e,t="")=>{let n=o(e,t);if(n.hasError)throw n.error;try{return r(n.result)}catch(a){throw new u(t,`Unable to create an array from ${typeof n.result} ${n.result}

 ${a instanceof Error?a.message:a}`)}}])}function oe(o){return Z([(r,e="")=>{let t=o(r,e);if(t.hasError)throw t.error;return r}])}function U(o,r){return(o?fe:ge)([(t,n="")=>{let a=r(t,n);if(a.hasError)throw a.error;return t}])}var _e=N("string"),ke=(o,r)=>e=>(t,n="")=>{_e(n,()=>{let a=r?e:e.toLowerCase(),i=r?t:t.toLowerCase();return o?i!==a:i===a},t,"equal to",o)},Ce=(o,r)=>e=>(t,n="")=>{let a=r?e:e.map(F=>F.toLowerCase()),i=r?t:t.toLowerCase();if(!(o?a.indexOf(i)===-1:a.indexOf(i)!==-1))throw new u(n,`String value ${t} ${o?`is one of the disallowed values in [${e.join(", ")}]`:`is not one of the allowed values in [${e.join(", ")}]`}`)},ve=o=>()=>(r,e="")=>{_e(e,()=>o?r.length!==0:r.length===0,r,"empty",o)},Ae=o=>r=>(e,t="")=>{if(!(o?!r.test(e):r.test(e)))throw new u(t,`String value '${e}' ${o?"matches":"does not match"} pattern ${r}`)};function J(o=[]){let r=[],e={enabled:!0},t=v(r,o,(a,i="")=>{if(typeof a!="string")throw new u(i,`Value ${a} is not a string`)});t.toString=A(t,a=>a),t.toNumber=_(t,a=>Number(a)),t.toBoolean=$(t,a=>!!a),t.toCustom=k(t),t.toArray=R(t);let n=a=>(i,j)=>(r.push(B(a,i,"string",j)),t);return t.assert=n(!1),t.allowed=(...a)=>(r.push(Ce(!1,e.enabled)(a)),oe(t)),t.matches=a=>(r.push(Ae(!1)(a)),t),t.empty=()=>(r.push(ve(!1)()),t),t.equals=a=>(r.push(ke(!1,e.enabled)(a)),oe(t)),t.case=a=>(e.enabled=a==="sensitive",t),t.not={assert:n(!0),allowed:(...a)=>(r.push(Ce(!0,e.enabled)(a)),t),matches:a=>(r.push(Ae(!0)(a)),t),empty:()=>(r.push(ve(!0)()),t),equals:a=>(r.push(ke(!0,e.enabled)(a)),t)},t}function Q(...o){return(r,e="")=>{let t=[];for(let n of o){let a=n(r,e);if(!a.hasError)return a;t.push(a)}return{hasError:!0,initialValue:r,error:t}}}function Y(o=[]){let r=v([],o,(e,t="")=>{if(e!==void 0)throw new u(t,`Value ${e} is not undefined`)});return r.toString=A(r,()=>String(void 0)),r.toNumber=_(r,()=>NaN),r.toBoolean=$(r,()=>!!void 0),r.toCustom=k(r),r.toArray=R(r),r}function ee(...o){return Q(Y(),...o)}function re(o=[]){let r=[],e=v(r,o,(n,a="")=>{if(n===null||typeof n!="object"||Array.isArray(n))throw new u(a,`Value ${n} is not an object`)});e.toString=A(e,n=>String(n)),e.toNumber=_(e,n=>Number(n)),e.toBoolean=$(e,n=>!!n),e.toCustom=k(e);let t=n=>(a,i)=>(r.push(B(n,a,"object",i)),e);return e.assert=t(!1),e.not={assert:t(!0)},e.schema=function(n){return re([(a,i="")=>{let j=e(a,i);if(j.hasError)throw j.error;let F={...a??{},...j.result},q=Object.entries(n).map(([C,V])=>[C,V(F[C],[i,C].filter(Boolean).join("."))]),O=q.filter(([,C])=>C.hasError);if(O.length>0)throw O.reduce((C,[V,P])=>(C[V]=P,C),{});return q.reduce((C,[V,P])=>(P.hasError||(C[V]=P.result),C),F)}])},e.partial=function(n){return re([(a,i="")=>{let j=e(a,i);if(j.hasError)throw j.error;let F={...a??{},...j.result},q=Object.entries(n).map(([C,V])=>{let P=ee(V)(F[C],[i,C].filter(Boolean).join("."));return P.hasError&&console.error("ERROR IS HERE",P.error),[C,P]}),O=q.filter(([,C])=>C.hasError);if(O.length>0)throw O.reduce((C,[V,P])=>(C[V]=P,C),{});return q.reduce((C,[V,P])=>(P.hasError||P.result!==void 0&&(C[V]=P.result),C),F)}])},e}function $e(o=[]){let r=v([],o,(e,t="")=>{if(e!==null)throw new u(t,`Value ${e} is not null`)});return r.toString=A(r,()=>String(null)),r.toNumber=_(r,()=>0),r.toBoolean=$(r,()=>!!null),r.toCustom=k(r),r}function je(){let o=v([],[],(r,e="")=>{if(r!==null)throw new u(e,`Value ${r} is not an error`)});return o.toString=A(o,r=>String(r)),o.toNumber=_(o,()=>0),o.toBoolean=$(o,()=>!!null),o.toCustom=k(o),o}function Fe(o){let r=(e,t="")=>{if(!e||typeof e!="object"||Array.isArray(e))return{initialValue:e,hasError:!0,error:new u(t,`Value ${e} is not a record`)};let n=Object.entries(e).map(([a,i],j)=>o(i,[a,`[${j}]`].filter(Boolean).join(".")));return n.some(a=>a.hasError)?{initialValue:e,hasError:!0,error:n.filter(a=>a.hasError)}:{hasError:!1,initialValue:e,result:e}};return r.toString=A(r,e=>String(e)),r.toNumber=_(r,e=>Number(e)),r.toBoolean=$(r,e=>!!e),r.toCustom=k(r),r.toArray=R(r),r}var s={string:J,number:H,boolean:X,array:L,object:re,error:je,null:$e,undefined:Y,oneof:Q,stringUnion:Z,record:Fe,optional:ee,anything:()=>o=>({initialValue:o,hasError:!1,result:o})};function S(o){return r=>!o(r).hasError}function I(o){return s.object().schema({target:s.string().equals("background-core"),data:o??s.anything()}).partial({module_source:s.string()})}var Oe=I(),Qi=S(Oe);var Le=I(s.string().equals("request-logout")),Ue=I(s.string().equals("request-login"));var Yi=S(Le),eu=S(Ue);var We=s.string().equals("event_propagation"),W=s.object().schema({type:We,event:s.object().schema({type:s.string(),data:s.anything()})}),bu=S(W);var De=I(W),Nu=S(De);var te=s.string().equals("runtime");function ne(o){return s.object().schema({target:te,data:o??s.anything()})}var ze=ne(),ac=S(ze);var Ge=ne(s.object().schema({type:s.string().equals("exposed_event_callback"),source_id:s.string(),args:s.array().items(s.anything())})),sc=S(Ge);var Xe=ne(s.object().schema({type:s.string().equals("core_event_callback"),source_id:s.string(),args:s.array().items(s.anything())})),ic=S(Xe);var He=I(s.object().schema({type:s.string().equals("execute_exposed_function"),fn:s.object().schema({name:s.string(),args:s.array()})})),_c=S(He);var Ze=I(s.object().schema({type:s.string().equals("execute_core_function"),fn:s.object().schema({module:s.string(),name:s.string(),args:s.array()})})),$c=S(Ze);var Je=I(s.object().schema({type:s.string().equals("requested_exposed_function_availability"),fn:s.string()})),jc=S(Je);var Qe=I(s.object().schema({type:s.string().equals("exposed_event_call"),source:s.object().schema({id:s.string(),target:s.oneof(te)}),event_name:s.string(),listener_action:s.string().allowed("add","remove")})),Fc=S(Qe);var Ye=I(s.object().schema({type:s.string().equals("core_event_call"),source:s.object().schema({id:s.string(),target:s.oneof(te)}),module_name:s.string(),event_name:s.string(),listener_action:s.string().allowed("add","remove")})),Bc=S(Ye);var er=s.string().equals("content-core");function ae(o){return s.object().schema({target:er,data:o??s.anything()})}var rr=ae(),ym=S(rr);var tr=ae(W),qm=S(tr);var or=s.object().schema({source:s.string().equals("tab-worker"),tab_id:s.number()}),nr=s.object().schema({source:s.string().equals("unspecified")}),ar=s.oneof(or,nr),Be=s.string().equals("module");function sr(o){return s.object().schema({target:Be,module:s.string(),source:ar,data:o??s.anything()})}var ir=sr(),ur=s.object().schema({target:s.string().equals("module_event_forward"),module:s.string(),event:s.string(),args:s.array().items(s.anything())});var wl=S(ur),cr=s.object().schema({target:s.string().equals("exposed_event_forward"),module_source:s.string(),event:s.string(),args:s.array().items(s.anything())});var Ml=S(cr),Sl=S(Be),kl=S(ir);function se(o,r,e){return{target:"module",module:o,data:r,source:e??{source:"unspecified"}}}var mr=s.object().schema({target:s.string().equals("module_direct_call"),module:s.string(),call:s.object().schema({name:s.string(),args:s.array()})}),Cl=S(mr);var Pe=D.devtools.inspectedWindow.tabId;D.runtime.sendMessage(se("selfXssWarning",{type:"devtools-init",tabId:Pe}));window.addEventListener("beforeunload",()=>{D.runtime.sendMessage(se("selfXssWarning",{type:"devtools-unload",tabId:Pe}))});})();
